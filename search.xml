<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[K8SÈÉ®ÁΩ≤ELKÁÆ°ÁêÜÈõÜÁæ§Êó•ÂøóÔºà‰∫åÔºâ]]></title>
    <url>%2Fdocker%2Fk8s%2Fes%2Fdocker%2Fk8s%2FK8S%E9%83%A8%E7%BD%B2ELK%E7%AE%A1%E7%90%86%E9%9B%86%E7%BE%A4%E6%97%A5%E5%BF%97-2%2F</url>
    <content type="text"><![CDATA[‰∏ä‰∏ÄÁØáÊñáÁ´†ËÆ≤Ëø∞‰∫Ük8sÂÆâË£ÖESÈõÜÁæ§ÁöÑÊñπÂºèÔºåÊú¨Á´†Êé•ÁùÄËÆ≤Ëß£K8SÂÆâË£ÖKibana KibanaÂÆâË£ÖElasticSearch ÈõÜÁæ§ÂÆâË£ÖÂÆåÊàêÂêéÔºåÊé•ÁùÄÊàë‰ª¨ÂèØ‰ª•Êù•ÈÉ®ÁΩ≤ KibanaÔºåËøôÊòØ ElasticSearch ÁöÑÊï∞ÊçÆÂèØËßÜÂåñÂ∑•ÂÖ∑ÔºåÂÆÉÊèê‰æõ‰∫ÜÁÆ°ÁêÜ ElasticSearch ÈõÜÁæ§ÂíåÂèØËßÜÂåñÊï∞ÊçÆÁöÑÂêÑÁßçÂäüËÉΩ„ÄÇ ÂêåÊ†∑È¶ñÂÖàÊàë‰ª¨‰ΩøÁî® ConfigMap ÂØπË±°Êù•Êèê‰æõ‰∏Ä‰∏™Êñá‰ª∂Êñá‰ª∂ÔºåÂÖ∂‰∏≠ÂåÖÊã¨ÂØπ ElasticSearch ÁöÑËÆøÈóÆÔºà‰∏ªÊú∫„ÄÅÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºâÔºåËøô‰∫õÈÉΩÊòØÈÄöËøáÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆÁöÑ„ÄÇÂØπÂ∫îÁöÑËµÑÊ∫êÊ∏ÖÂçïÊñá‰ª∂Â¶Ç‰∏ãÊâÄÁ§∫Ôºö 123456789101112131415161718# kibana.configmap.yamlapiVersion: v1kind: ConfigMapmetadata: name: kibana-config labels: app: kibanadata: kibana.yml: |- server.host: 0.0.0.0# ‰∏≠Êñá# i18n.locale: "zh-CN" elasticsearch: hosts: $&#123;ELASTICSEARCH_HOSTS&#125; username: $&#123;ELASTICSEARCH_USER&#125; password: $&#123;ELASTICSEARCH_PASSWORD&#125; ÁÑ∂ÂêéÈÄöËøá‰∏Ä‰∏™ NodePort Á±ªÂûãÁöÑÊúçÂä°Êù•Êö¥Èú≤ Kibana ÊúçÂä°Ôºö 123456789101112131415# kibana.service.yamlapiVersion: v1kind: Servicemetadata: name: kibana labels: app: kibanaspec: type: NodePort ports: - port: 5601 name: webinterface selector: app: kibana ÊúÄÂêéÈÄöËøá Deployment Êù•ÈÉ®ÁΩ≤ Kibana ÊúçÂä°ÔºåÁî±‰∫éÈúÄË¶ÅÈÄöËøáÁéØÂ¢ÉÂèòÈáèÊèê‰æõÂØÜÁ†ÅÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®‰∏äÈù¢ÂàõÂª∫ÁöÑ Secret ÂØπË±°Êù•ÂºïÁî®Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142# kibana.deployment.yamlapiVersion: apps/v1kind: Deploymentmetadata: namespace: elastic name: kibana labels: app: kibanaspec: selector: matchLabels: app: kibana template: metadata: labels: app: kibana spec: containers: - name: kibana image: registry.cn-chengdu.aliyuncs.com/zhouqi-kubernetes/kibana:7.6.1 ports: - containerPort: 5601 name: webinterface env: - name: ELASTICSEARCH_HOSTS value: "http://elasticsearch-client.kube-system.svc.cluster.local:9200" - name: ELASTICSEARCH_USER value: "elastic" - name: ELASTICSEARCH_PASSWORD valueFrom: secretKeyRef: name: elasticsearch-pw-elastic key: password volumeMounts: - name: config mountPath: /usr/share/kibana/config/kibana.yml readOnly: true subPath: kibana.yml volumes: - name: config configMap: name: kibana-config Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºå‰ΩøÁî®‰∏äÈù¢Êàë‰ª¨ÂàõÂª∫ÁöÑ Secret ÂØπË±°ÁöÑ elastic Áî®Êà∑ÂíåÁîüÊàêÁöÑÂØÜÁ†ÅÂç≥ÂèØÁôªÂΩïÔºö ÁôªÂΩïÊàêÂäüÂêé‰ºöËá™Âä®Ë∑≥ËΩ¨Âà∞ Kibana È¶ñÈ°µÔºö ÂêåÊ†∑‰πüÂèØ‰ª•Ëá™Â∑±ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑË∂ÖÁ∫ßÁî®Êà∑ÔºåManagement ‚Üí Stack Management ‚Üí Create UserÔºö ‰ΩøÁî®Êñ∞ÁöÑÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºåÈÄâÊã© superuser Ëøô‰∏™ËßíËâ≤Êù•ÂàõÂª∫Êñ∞ÁöÑÁî®Êà∑Ôºö ÂàõÂª∫ÊàêÂäüÂêéÂ∞±ÂèØ‰ª•‰ΩøÁî®‰∏äÈù¢Êñ∞Âª∫ÁöÑÁî®Êà∑ÁôªÂΩï KibanaÔºåÊúÄÂêéËøòÂèØ‰ª•ÈÄöËøá Management ‚Üí Stack Monitoring È°µÈù¢Êü•ÁúãÊï¥‰∏™ÈõÜÁæ§ÁöÑÂÅ•Â∫∑Áä∂ÊÄÅÔºö Âà∞ËøôÈáåÊàë‰ª¨Â∞±ÂÆâË£ÖÊàêÂäü‰∫Ü ElasticSearch ‰∏é KibanaÔºåÂÆÉ‰ª¨Â∞Ü‰∏∫Êàë‰ª¨Êù•Â≠òÂÇ®ÂíåÂèØËßÜÂåñÊàë‰ª¨ÁöÑÂ∫îÁî®Êï∞ÊçÆÔºàÁõëÊéßÊåáÊ†á„ÄÅÊó•ÂøóÂíåËøΩË∏™ÔºâÊúçÂä°„ÄÇ Âú®‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊù•Â≠¶‰π†Â¶Ç‰ΩïÂÆâË£ÖÂíåÈÖçÁΩÆLogstash‰∏éFilebeatÔºåÈÄöËøá Filebeat Êù•Êî∂ÈõÜÊåáÊ†áÁõëÊéß Spring Boot‰∏≠ÁöÑÊó•Âøó„ÄÇ]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
        <category>es</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
        <tag>es</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[K8SÈÉ®ÁΩ≤ELKÁÆ°ÁêÜÈõÜÁæ§Êó•ÂøóÔºà‰∏ÄÔºâ]]></title>
    <url>%2Fdocker%2Fk8s%2Fes%2Fdocker%2Fk8s%2FK8S%E9%83%A8%E7%BD%B2ELK%E7%AE%A1%E7%90%86%E9%9B%86%E7%BE%A4%E6%97%A5%E5%BF%97-1%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÔºöELKÊòØÁõÆÂâç‰∏ªÊµÅÁöÑÊó•ÂøóËß£ÂÜ≥ÊñπÊ°àÔºåÂ∞§ÂÖ∂ÊòØÂÆπÂô®ÂåñÈõÜÁæ§ÁöÑ‰ªäÂ§©ÔºåELKÂá†‰πéÊòØÈõÜÁæ§ÂøÖÂ§áÁöÑ‰∏ÄÈÉ®ÂàÜËÉΩÂäõÔºõELKÂú®K8SËêΩÂú∞ÊúâÂ§öÁßçÁªÑÂêàÊ®°ÂºèÔºöÊØîÂ¶ÇÔºöfluentd+ELKÊàñfilebeat+ELKÊàñlog-pilot+ELKËÄåÊú¨ÊñáÈááÁî®ÁöÑÊòØÂäüËÉΩÊõ¥Âº∫Â§ßÁöÑÂêéËÄÖÔºöfilebeat ÈááÈõÜ‚Äî&gt;logstashËøáÊª§Âä†Â∑•‚Äî&gt;ESÂ≠òÂÇ®‰∏éÁ¥¢Âºï‚Äî&gt;KibanaÂ±ïÁ§∫ÁöÑÊñπÊ°à„ÄÇ ElasticSearch ÈõÜÁæ§ÂÆâË£ÖË¶ÅÂª∫Á´ã‰∏Ä‰∏™ Elastic ÊäÄÊúØÁöÑÁõëÊéßÊ†àÔºåÂΩìÁÑ∂È¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÈÉ®ÁΩ≤ ElasticSearchÔºåÂÆÉÊòØÁî®Êù•Â≠òÂÇ®ÊâÄÊúâÁöÑÊåáÊ†á„ÄÅÊó•ÂøóÂíåËøΩË∏™ÁöÑÊï∞ÊçÆÂ∫ìÔºåËøôÈáåÊàë‰ª¨ÈÄöËøá3‰∏™‰∏çÂêåËßíËâ≤ÁöÑÂèØÊâ©Â±ïÁöÑËäÇÁÇπÁªÑÊàê‰∏Ä‰∏™ÈõÜÁæ§„ÄÇ ÂÆâË£Ö ElasticSearch ‰∏ªËäÇÁÇπËÆæÁΩÆÈõÜÁæ§ÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπ‰∏∫ Master ‰∏ªËäÇÁÇπÔºåÊù•Ë¥üË¥£ÊéßÂà∂Êï¥‰∏™ÈõÜÁæ§„ÄÇÈ¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™ ConfigMap ÂØπË±°ÔºåÁî®Êù•ÊèèËø∞ÈõÜÁæ§ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆ‰ø°ÊÅØÔºå‰ª•Êñπ‰æøÂ∞Ü ElasticSearch ÁöÑ‰∏ªËäÇÁÇπÈÖçÁΩÆÂà∞ÈõÜÁæ§‰∏≠Âπ∂ÂºÄÂêØÂÆâÂÖ®ËÆ§ËØÅÂäüËÉΩ„ÄÇÂØπÂ∫îÁöÑËµÑÊ∫êÊ∏ÖÂçïÊñá‰ª∂Â¶Ç‰∏ãÊâÄÁ§∫Ôºö 1234567891011121314151617181920212223242526# elasticsearch-master.configmap.yamlapiVersion: v1kind: ConfigMapmetadata: namespace: kube-system name: elasticsearch-master-config labels: app: elasticsearch role: masterdata: elasticsearch.yml: |- cluster.name: $&#123;CLUSTER_NAME&#125; node.name: $&#123;NODE_NAME&#125; discovery.seed_hosts: $&#123;NODE_LIST&#125; cluster.initial_master_nodes: $&#123;MASTER_NODES&#125; network.host: 0.0.0.0 node: master: true data: false ingest: false # ÊòØÂê¶ÂºÄÂêØÈ™åËØÅ xpack.security.enabled: true xpack.monitoring.collection.enabled: true ÁÑ∂ÂêéÂàõÂª∫‰∏Ä‰∏™ Service ÂØπË±°ÔºåÂú® Master ËäÇÁÇπ‰∏ãÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÈÄöËøáÁî®‰∫éÈõÜÁæ§ÈÄö‰ø°ÁöÑ 9300 Á´ØÂè£ËøõË°åÈÄö‰ø°„ÄÇËµÑÊ∫êÊ∏ÖÂçïÊñá‰ª∂Â¶Ç‰∏ãÊâÄÁ§∫Ôºö 12345678910111213141516# elasticsearch-master.service.yamlapiVersion: v1kind: Servicemetadata: namespace: kube-system name: elasticsearch-master labels: app: elasticsearch role: masterspec: ports: - port: 9300 name: transport selector: app: elasticsearch role: master ÊúÄÂêé‰ΩøÁî®‰∏Ä‰∏™ Deployment ÂØπË±°Êù•ÂÆö‰πâ Master ËäÇÁÇπÂ∫îÁî®ÔºåËµÑÊ∫êÊ∏ÖÂçïÊñá‰ª∂Â¶Ç‰∏ãÊâÄÁ§∫Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152# elasticsearch-master.deployment.yamlapiVersion: apps/v1kind: Deploymentmetadata: namespace: kube-system name: elasticsearch-master labels: app: elasticsearch role: masterspec: replicas: 1 selector: matchLabels: app: elasticsearch role: master template: metadata: labels: app: elasticsearch role: master spec: containers: - name: elasticsearch-master image: registry.cn-chengdu.aliyuncs.com/zhouqi-kubernetes/es:7.6.1 env: - name: CLUSTER_NAME value: elasticsearch - name: NODE_NAME value: elasticsearch-master - name: NODE_LIST value: elasticsearch-master,elasticsearch-data,elasticsearch-client - name: MASTER_NODES value: elasticsearch-master - name: "ES_JAVA_OPTS" value: "-Xms512m -Xmx512m" ports: - containerPort: 9300 name: transport volumeMounts: - name: config mountPath: /usr/share/elasticsearch/config/elasticsearch.yml readOnly: true subPath: elasticsearch.yml - name: storage mountPath: /data volumes: - name: config configMap: name: elasticsearch-master-config - name: "storage" emptyDir: medium: "" ÂÆâË£Ö ElasticSearch Êï∞ÊçÆËäÇÁÇπÁé∞Âú®Êàë‰ª¨ÈúÄË¶ÅÂÆâË£ÖÁöÑÊòØÈõÜÁæ§ÁöÑÊï∞ÊçÆËäÇÁÇπÔºåÂÆÉ‰∏ªË¶ÅÊù•Ë¥üË¥£ÈõÜÁæ§ÁöÑÊï∞ÊçÆÊâòÁÆ°ÂíåÊâßË°åÊü•ËØ¢„ÄÇÂíå master ËäÇÁÇπ‰∏ÄÊ†∑ÔºåÊàë‰ª¨‰ΩøÁî®‰∏Ä‰∏™ ConfigMap ÂØπË±°Êù•ÈÖçÁΩÆÊàë‰ª¨ÁöÑÊï∞ÊçÆËäÇÁÇπÔºö 1234567891011121314151617181920212223242526# elasticsearch-data.configmap.yamlapiVersion: v1kind: ConfigMapmetadata: namespace: kube-system name: elasticsearch-data-config labels: app: elasticsearch role: datadata: elasticsearch.yml: |- cluster.name: $&#123;CLUSTER_NAME&#125; node.name: $&#123;NODE_NAME&#125; discovery.seed_hosts: $&#123;NODE_LIST&#125; cluster.initial_master_nodes: $&#123;MASTER_NODES&#125; network.host: 0.0.0.0 node: master: false data: true ingest: false # ÊòØÂê¶ÂºÄÂêØÈ™åËØÅ xpack.security.enabled: true xpack.monitoring.collection.enabled: true ÂèØ‰ª•ÁúãÂà∞Âíå‰∏äÈù¢ÁöÑ master ÈÖçÁΩÆÈùûÂ∏∏Á±ª‰ººÔºå‰∏çËøáÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂ±ûÊÄß node.data=true„ÄÇ ÂêåÊ†∑Âè™ÈúÄË¶ÅÈÄöËøá 9300 Á´ØÂè£ÂíåÂÖ∂‰ªñËäÇÁÇπËøõË°åÈÄö‰ø°Ôºö 12345678910111213141516# elasticsearch-data.service.yamlapiVersion: v1kind: Servicemetadata: namespace: kube-system name: elasticsearch-data labels: app: elasticsearch role: dataspec: ports: - port: 9300 name: transport selector: app: elasticsearch role: data ÊúÄÂêéÂàõÂª∫‰∏Ä‰∏™ StatefulSet ÁöÑÊéßÂà∂Âô®ÔºåÂõ†‰∏∫ÂèØËÉΩ‰ºöÊúâÂ§ö‰∏™Êï∞ÊçÆËäÇÁÇπÔºåÊØè‰∏Ä‰∏™ËäÇÁÇπÁöÑÊï∞ÊçÆ‰∏çÊòØ‰∏ÄÊ†∑ÁöÑÔºåÈúÄË¶ÅÂçïÁã¨Â≠òÂÇ®ÔºåÊâÄ‰ª•‰πü‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ volumeClaimTemplates Êù•ÂàÜÂà´ÂàõÂª∫Â≠òÂÇ®Âç∑ÔºåÂØπÂ∫îÁöÑËµÑÊ∫êÊ∏ÖÂçïÊñá‰ª∂Â¶Ç‰∏ãÊâÄÁ§∫Ôºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778# NFSÊåÇËΩΩ#kind: PersistentVolumeClaim#apiVersion: v1#metadata:# name: elasticsearch-data-claim# namespace: kube-system# annotations:# volume.beta.kubernetes.io/storage-class: "managed-nfs-storage"#spec:# storageClassName: managed-nfs-storage# accessModes:# - ReadWriteMany# resources:# requests:# storage: 1G---apiVersion: apps/v1kind: StatefulSetmetadata: namespace: kube-system name: elasticsearch-data labels: app: elasticsearch role: dataspec: serviceName: "elasticsearch-data" selector: matchLabels: app: elasticsearch role: data template: metadata: labels: app: elasticsearch role: data spec: containers: - name: elasticsearch-data image: registry.cn-chengdu.aliyuncs.com/zhouqi-kubernetes/es:7.6.1 env: - name: CLUSTER_NAME value: elasticsearch - name: NODE_NAME value: elasticsearch-data - name: NODE_LIST value: elasticsearch-master,elasticsearch-data,elasticsearch-client - name: MASTER_NODES value: elasticsearch-master - name: "ES_JAVA_OPTS" value: "-Xms1024m -Xmx1024m" ports: - containerPort: 9300 name: transport volumeMounts: - name: config mountPath: /usr/share/elasticsearch/config/elasticsearch.yml readOnly: true subPath: elasticsearch.yml - name: elasticsearch-data-persistent-storage mountPath: /data/db volumes: - name: config configMap: name: elasticsearch-data-config# NFSÊåÇËΩΩ # - name: elasticsearch-data-persistent-storage# persistentVolumeClaim:# claimName: elasticsearch-data-claim volumeClaimTemplates: - metadata: name: elasticsearch-data-persistent-storage annotations: volume.beta.kubernetes.io/storage-class: "managed-nfs-storage" spec: accessModes: [ "ReadWriteOnce" ] resources: requests: storage: 1Gi ÂÆâË£Ö ElasticSearch ÂÆ¢Êà∑Á´ØËäÇÁÇπÊúÄÂêéÊù•ÂÆâË£ÖÈÖçÁΩÆ ElasticSearch ÁöÑÂÆ¢Êà∑Á´ØËäÇÁÇπÔºåËØ•ËäÇÁÇπ‰∏ªË¶ÅË¥üË¥£Êö¥Èú≤‰∏Ä‰∏™ HTTP Êé•Âè£Â∞ÜÊü•ËØ¢Êï∞ÊçÆ‰º†ÈÄíÁªôÊï∞ÊçÆËäÇÁÇπËé∑ÂèñÊï∞ÊçÆ„ÄÇÂêåÊ†∑‰ΩøÁî®‰∏Ä‰∏™ ConfigMap ÂØπË±°Êù•ÈÖçÁΩÆËØ•ËäÇÁÇπÔºö 12345678910111213141516171819202122232425# elasticsearch-client.configmap.yamlapiVersion: v1kind: ConfigMapmetadata: namespace: kube-system name: elasticsearch-client-config labels: app: elasticsearch role: clientdata: elasticsearch.yml: |- cluster.name: $&#123;CLUSTER_NAME&#125; node.name: $&#123;NODE_NAME&#125; discovery.seed_hosts: $&#123;NODE_LIST&#125; cluster.initial_master_nodes: $&#123;MASTER_NODES&#125; network.host: 0.0.0.0 node: master: false data: false ingest: true xpack.security.enabled: true xpack.monitoring.collection.enabled: true ÂÆ¢Êà∑Á´ØËäÇÁÇπÈúÄË¶ÅÊö¥Èú≤‰∏§‰∏™Á´ØÂè£Ôºå9300Á´ØÂè£Áî®‰∫é‰∏éÈõÜÁæ§ÁöÑÂÖ∂‰ªñËäÇÁÇπËøõË°åÈÄö‰ø°Ôºå9200Á´ØÂè£Áî®‰∫é HTTP API„ÄÇÂØπÂ∫îÁöÑ Service ÂØπË±°Â¶Ç‰∏ãÊâÄÁ§∫Ôºö 1234567891011121314151617181920# elasticsearch-client.service.yamlapiVersion: v1kind: Servicemetadata: namespace: kube-system name: elasticsearch-client labels: app: elasticsearch role: clientspec: ports: - port: 9200 name: client nodePort: 30008 # NodePort - port: 9300 name: transport type: NodePort selector: app: elasticsearch role: client ‰ΩøÁî®‰∏Ä‰∏™ Deployment ÂØπË±°Êù•ÊèèËø∞ÂÆ¢Êà∑Á´ØËäÇÁÇπÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354# elasticsearch-client.deployment.yamlapiVersion: apps/v1kind: Deploymentmetadata: namespace: kube-system name: elasticsearch-client labels: app: elasticsearch role: clientspec: selector: matchLabels: app: elasticsearch role: client template: metadata: labels: app: elasticsearch role: client spec: containers: - name: elasticsearch-client image: registry.cn-chengdu.aliyuncs.com/zhouqi-kubernetes/es:7.6.1 env: - name: CLUSTER_NAME value: elasticsearch - name: NODE_NAME value: elasticsearch-client - name: NODE_LIST value: elasticsearch-master,elasticsearch-data,elasticsearch-client - name: MASTER_NODES value: elasticsearch-master - name: "ES_JAVA_OPTS" value: "-Xms256m -Xmx256m" ports: - containerPort: 9200 name: client - containerPort: 9300 name: transport volumeMounts: - name: config mountPath: /usr/share/elasticsearch/config/elasticsearch.yml readOnly: true subPath: elasticsearch.yml - name: storage mountPath: /data volumes: - name: config configMap: name: elasticsearch-client-config - name: "storage" emptyDir: medium: "" ÁîüÊàêÂØÜÁ†ÅÊàë‰ª¨ÂêØÁî®‰∫Ü xpack ÂÆâÂÖ®Ê®°ÂùóÊù•‰øùÊä§Êàë‰ª¨ÁöÑÈõÜÁæ§ÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ÂàùÂßãÂåñÁöÑÂØÜÁ†Å„ÄÇÊàë‰ª¨ÂèØ‰ª•ÊâßË°åÂ¶Ç‰∏ãÊâÄÁ§∫ÁöÑÂëΩ‰ª§ÔºåÂú®ÂÆ¢Êà∑Á´ØËäÇÁÇπÂÆπÂô®ÂÜÖËøêË°å bin/elasticsearch-setup-passwords ÂëΩ‰ª§Êù•ÁîüÊàêÈªòËÆ§ÁöÑÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºö 123456789101112131415161718192021222324$ kubectl exec $(kubectl get pods -n kube-system | grep elasticsearch-client | sed -n 1p | awk '&#123;print $1&#125;') \ -n elastic \ -- bin/elasticsearch-setup-passwords auto -bChanged password for user apm_systemPASSWORD apm_system = 3Lhx61s6woNLvoL5Bb7tChanged password for user kibana_systemPASSWORD kibana_system = NpZv9Cvhq4roFCMzpja3Changed password for user kibanaPASSWORD kibana = NpZv9Cvhq4roFCMzpja3Changed password for user logstash_systemPASSWORD logstash_system = nNnGnwxu08xxbsiRGk2CChanged password for user beats_systemPASSWORD beats_system = fen759y5qxyeJmqj6UPpChanged password for user remote_monitoring_userPASSWORD remote_monitoring_user = mCP77zjCATGmbcTFFgOXChanged password for user elasticPASSWORD elastic = wmxhvsJFeti2dSjbQEAH Ê≥®ÊÑèÈúÄË¶ÅÂ∞Ü elastic Áî®Êà∑ÂêçÂíåÂØÜÁ†Å‰πüÊ∑ªÂä†Âà∞ Kubernetes ÁöÑ Secret ÂØπË±°‰∏≠Ôºö 1234$ kubectl create secret generic elasticsearch-pw-elastic \ -n kube-system \ --from-literal password=wmxhvsJFeti2dSjbQEAHsecret/elasticsearch-pw-elastic created]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
        <category>es</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
        <tag>es</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°ÂºèÂÖ≠Â§ßÂéüÂàô]]></title>
    <url>%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2Fdesign%2Fpattern-2%2F</url>
    <content type="text"><![CDATA[ËÆæËÆ°Ê®°ÂºèÂÖ≠Â§ßÂéüÂàôÂçï‰∏ÄËÅåË¥£ÂéüÂàô‚Äã ÂØπË±°‰∏çÂ∫îÊâøÊãÖÂ§™Â§öÂäüËÉΩÔºåÊ≠£Â¶Ç‰∏ÄÂøÉ‰∏çËÉΩËÄåÁî®ÔºåÊØîÂ¶ÇÂ§™Â§öÁöÑÂ∑•‰Ωú(ÁßçÁ±ª)‰ºö‰Ωø‰∫∫Â¥©Ê∫É„ÄÇÂîØÊúâ‰∏ìÊ≥®ÊâçËÉΩ‰øùËØÅÂØπË±°ÁöÑÈ´òÂÜÖËÅöÔºõÂîØÊúâÂîØ‰∏ÄÔºåÊâçËÉΩ‰øùËØÅÂØπË±°ÁöÑÁªÜÁ≤íÂ∫¶„ÄÇ Ëß£ÂÜ≥ÈóÆÈ¢òÔºö ÂÅáÂ¶ÇÊúâAÂíåB‰∏§‰∏™Á±ªÔºåÂΩìAÈúÄÊ±ÇÂèëÁîüÊîπÂèòÈúÄË¶Å‰øÆÊîπÊó∂Ôºå‰∏çËÉΩÂØºËá¥BÁ±ªÂá∫ÈóÆÈ¢ò„ÄÇ Áé∞Áä∂Ôºö Âú®ÂÆûÈôÖÊÉÖÂÜµÂæàÈöæÂéªÂÅöÂà∞Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºåÂõ†‰∏∫ÈöèÁùÄ‰∏öÂä°ÁöÑ‰∏çÊñ≠ÂèòÊõ¥ÔºåÁ±ªÁöÑËÅåË¥£‰πüÂú®ÂèëÁîüÁùÄÂèòÂåñÔºåÂç≥ËÅåË¥£Êâ©Êï£„ÄÇÂ¶ÇÁ±ªAÂÆåÊàêËÅåË¥£PÁöÑÂäüËÉΩÔºå‰ΩÜÊòØÈöèÁùÄÂêéÊúü‰∏öÂä°ÁªÜÂåñÔºåËÅåË¥£PÂàÜËß£ÊàêÊõ¥Â∞èÁ≤íÂ∫¶ÁöÑP1‰∏éP2ÔºåËøôÊó∂Ê†πÊçÆÂçï‰∏ÄËÅåË¥£ÂéüÂàôÂàôÈúÄË¶ÅÊãÜÂàÜÁ±ªA‰ª•ÂàÜÂà´Êª°Ë∂≥ÁªÜÂàÜÂêéÁöÑËÅåË¥£P1ÂíåP2„ÄÇ‰ΩÜÊòØÂÆûÈôÖÂºÄÂèëÁéØËäÇÔºåËã•Á±ªÁöÑÈÄªËæëË∂≥Â§üÁÆÄÂçïÔºåÂèØ‰ª•Âú®‰ª£Á†Å‰∏äÁ∫ßÂà´‰∏äËøùËÉåÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºõËã•Á±ªÁöÑÊñπÊ≥ïË∂≥Â§üÂ∞ëÔºåÂèØ‰ª•Âú®ÊñπÊ≥ïÁ∫ßÂà´‰∏äËøùËÉåÂçï‰∏ÄËÅåË¥£ÂéüÂàô„ÄÇ ÁªèÂÖ∏Ê°à‰æãÔºö Áî®‰∏Ä‰∏™Á±ªÊèèËø∞Âä®Áâ©ÂëºÂê∏ÁöÑÂú∫ÊôØ 123456789101112131415class Animal &#123; public void breath(String animal) &#123; System.out.println(animal + "ÂëºÂê∏Á©∫Ê∞î"); &#125; &#125;class Program &#123; public static void main(String[] args) &#123; Animal animal = new Animal(); animal.breath("üêÇ"); animal.breath("üêñ"); animal.breath("üêé"); animal.breath("üêü"); &#125;&#125; ‰ªéÁ§∫‰æãÂèØ‰ª•ÂèëÁé∞ÔºåAnimalÁ±ªÂ∑≤‰∏çË∂≥‰ª•ÊîØÊåÅÂÆ¢Êà∑Á´ØÊâÄÈúÄËÅåË¥£ÔºåÂõ†‰∏∫üêüÂêÉÊ∞¥„ÄÇËã•ÈÅµÂæ™Âçï‰∏ÄËÅåË¥£ÂéüÂàôÔºåÂàôÈúÄË¶ÅÊãÜÂàÜAnimalÁ±ª„ÄÇ 1234567891011121314151617181920212223class Animal &#123; public void breath(String animal) &#123; System.out.println(animal + "ÂëºÂê∏Á©∫Ê∞î"); &#125; &#125;class Aquatic &#123; public void breath(String animal) &#123; System.out.println(animal + "ÂêÉÊ∞¥"); &#125; &#125;class Program &#123; public static void main(String[] args) &#123; Animal animal = new Animal(); animal.breath("üêÇ"); animal.breath("üêñ"); animal.breath("üêé"); Aquatic aquatic = new Aquatic(); aquatic.breath("üêü"); &#125;&#125; ËøôÊó∂‰Ω†‰ºöÂèëÁé∞ÔºåËã•ÈíàÂØπÁÆÄÂçïÁöÑ‰∏öÂä°ÈÄªËæëÊù•ËØ¥ÔºåËã•ÊØèÊ¨°ÁªÜÂàÜÈÉΩÈúÄË¶ÅÊãÜÂàÜÁöÑËØùÂÆûÂú®ÊòØÂ§™ÁπÅÁêê‰∫ÜÔºåËÄå‰∏îÊúçÂä°Á´Ø‰∏éÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÈÉΩÈúÄË¶ÅÂÅöÁõ∏Â∫îÁöÑ‰øÆÊîπ„ÄÇÊâÄ‰ª•Áõ¥Êé•Âú®ÂéüÂÖàÁ±ª‰∏≠ËøõË°å‰øÆÊîπÔºåËôΩÁÑ∂ËøùËÉå‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºå‰ΩÜËä±ÈîÄÂ∞è„ÄÇ 12345678910class Animal &#123; public void breath(String animal) &#123; if ("üêü".equals(animal)) &#123; System.out.println(animal + "ÂëºÂê∏Á©∫Ê∞î"); &#125; else &#123; System.out.println(animal + "ÂêÉÊ∞¥"); &#125; &#125; &#125; ‰ºòÁÇπÔºö Èôç‰ΩéÁ±ªÁöÑÂäüËÉΩÂ§çÊùÇÂ∫¶ ÊèêÈ´òÁ≥ªÁªüÁöÑÂèØÁª¥Êä§ÊÄß ÂèòÊõ¥È£éÈô©‰Ωé Êé•Âè£ÈöîÁ¶ªÂéüÂàô ÂÆ¢Êà∑Á´Ø‰∏çÂ∫î‰æùËµñÂÆÉ‰∏çÈúÄË¶ÅÁöÑÊé•Âè£ Á±ªÈó¥ÁöÑ‰æùËµñÂÖ≥Á≥ªÂ∫îËØ•Âª∫Á´ãÂú®ÊúÄÂ∞èÁöÑÊé•Âè£‰∏ä ‚Äã ÂÖ∂ÂÆûÈÄö‰øóÊù•ÁêÜËß£Â∞±ÊòØÔºå‰∏çË¶ÅÂú®‰∏Ä‰∏™Êé•Âè£ÈáåÈù¢ÊîæÂæàÂ§öÁöÑÊñπÊ≥ïÔºåËøôÊ†∑‰ºöÊòæÂæóËøô‰∏™Á±ªÂæàËáÉËÇø„ÄÇÊé•Âè£Â∫îËØ•Â∞ΩÈáèÁªÜÂåñÔºå‰∏Ä‰∏™Êé•Âè£ÂØπÂ∫î‰∏Ä‰∏™ÂäüËÉΩÊ®°ÂùóÔºåÂêåÊó∂Êé•Âè£ÈáåÈù¢ÁöÑÊñπÊ≥ïÂ∫îËØ•Â∞ΩÂèØËÉΩÁöÑÂ∞ëÔºå‰ΩøÊé•Âè£Êõ¥Âä†ÁÅµÊ¥ªËΩª‰æø„ÄÇÊàñËÆ∏ÊúâÁöÑ‰∫∫ËÆ§‰∏∫Êé•Âè£ÈöîÁ¶ªÂéüÂàôÂíåÂçï‰∏ÄËÅåË¥£ÂéüÂàôÂæàÂÉèÔºå‰ΩÜ‰∏§‰∏™ÂéüÂàôËøòÊòØÂ≠òÂú®ÁùÄÊòéÊòæÁöÑÂå∫Âà´„ÄÇÂçï‰∏ÄËÅåË¥£ÂéüÂàôÊòØÂú®‰∏öÂä°ÈÄªËæë‰∏äÁöÑÂàíÂàÜÔºåÊ≥®ÈáçÁöÑÊòØËÅåË¥£„ÄÇÊé•Âè£ÈöîÁ¶ªÂéüÂàôÊòØÂü∫‰∫éÊé•Âè£ËÆæËÆ°ËÄÉËôë„ÄÇ‰æãÂ¶Ç‰∏Ä‰∏™Êé•Âè£ÁöÑËÅåË¥£ÂåÖÂê´10‰∏™ÊñπÊ≥ïÔºåËøô10‰∏™ÊñπÊ≥ïÈÉΩÊîæÂú®Âêå‰∏ÄÊé•Âè£‰∏≠ÔºåÂπ∂‰∏îÊèê‰æõÁªôÂ§ö‰∏™Ê®°ÂùóË∞ÉÁî®Ôºå‰ΩÜ‰∏çÂêåÊ®°ÂùóÈúÄË¶Å‰æùËµñÁöÑÊñπÊ≥ïÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºåËøôÊó∂Ê®°Âùó‰∏∫‰∫ÜÂÆûÁé∞Ëá™Â∑±ÁöÑÂäüËÉΩÂ∞±‰∏çÂæó‰∏çÂÆûÁé∞‰∏Ä‰∫õÂØπÂÖ∂Ê≤°ÊúâÊÑè‰πâÁöÑÊñπÊ≥ïÔºåËøôÊ†∑ÁöÑËÆæËÆ°ÊòØ‰∏çÁ¨¶ÂêàÊé•Âè£ÈöîÁ¶ªÂéüÂàôÁöÑ„ÄÇÊé•Âè£ÈöîÁ¶ªÂéüÂàôË¶ÅÊ±Ç‚ÄùÂ∞ΩÈáè‰ΩøÁî®Â§ö‰∏™‰∏ìÈó®ÁöÑÊé•Âè£‚Äù‰∏ìÈó®Êèê‰æõÁªô‰∏çÂêåÁöÑÊ®°Âùó„ÄÇ ÁªèÂÖ∏Ê°à‰æãÔºö Á±ªAÈÄöËøáInterface1‰æùËµñÁ±ªBÔºå1Ôºå2Ôºå3ÔºõÁ±ªBÈÄöËøáInterface1‰æùËµñDÔºå1Ôºå4Ôºå5„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103class Program &#123; public static void main(String[] args) &#123; A a = new A(); B b = new B(); a.use1(b); a.use2(b); a.use3(b); &#125;&#125;interface interface1 &#123; void operation1(); void operation2(); void operation3(); void operation4(); void operation5();&#125;class B implements interface1 &#123; @Override public void operation1() &#123; System.out.println("B-&gt;&#123;nameof(operation1)&#125;"); &#125; @Override public void operation2() &#123; System.out.println("B-&gt;&#123;nameof(operation2)&#125;"); &#125; @Override public void operation3() &#123; System.out.println("B-&gt;&#123;nameof(operation3)&#125;"); &#125; @Override public void operation4() &#123; System.out.println("B-&gt;&#123;nameof(operation4)&#125;"); &#125; @Override public void operation5() &#123; System.out.println("B-&gt;&#123;nameof(operation5)&#125;"); &#125; &#125;class D implements interface1 &#123; @Override public void operation1() &#123; System.out.println("D-&gt;&#123;nameof(operation1)&#125;"); &#125; @Override public void operation2() &#123; System.out.println("D-&gt;&#123;nameof(operation2)&#125;"); &#125; @Override public void operation3() &#123; System.out.println("D-&gt;&#123;nameof(operation3)&#125;"); &#125; @Override public void operation4() &#123; System.out.println("D-&gt;&#123;nameof(operation4)&#125;"); &#125; @Override public void operation5() &#123; System.out.println("D-&gt;&#123;nameof(operation5)&#125;"); &#125; &#125;class A &#123; public void use1(interface1 interface1) &#123; interface1.operation1(); &#125; public void use2(interface1 interface1) &#123; interface1.operation1(); &#125; public void use3(interface1 interface1) &#123; interface1.operation1(); &#125;&#125;class C &#123; public void use1(interface1 interface1) &#123; interface1.operation1(); &#125; public void use2(interface1 interface1) &#123; interface1.operation1(); &#125; public void use3(interface1 interface1) &#123; interface1.operation1(); &#125;&#125; ÊòæÁÑ∂Ôºå‰∏äËø∞ËÆæËÆ°‰∏çÁ¨¶ÂêàÊé•Âè£ÈöîÁ¶ªÂéüÂàô„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889class Program &#123; public static void main(String[] args) &#123; A a = new A(); B b = new B(); a.use1(b); a.use2(b); a.use3(b); &#125;&#125;interface interface1 &#123; void operation1();&#125;interface interface2 &#123; void operation2(); void operation3();&#125;interface interface3 &#123; void operation4(); void operation5();&#125;class B implements interface1,interface2 &#123; @Override public void operation1() &#123; System.out.println("B-&gt;&#123;nameof(operation1)&#125;"); &#125; @Override public void operation2() &#123; System.out.println("B-&gt;&#123;nameof(operation2)&#125;"); &#125; @Override public void operation3() &#123; System.out.println("B-&gt;&#123;nameof(operation3)&#125;"); &#125;&#125;class D implements interface1,interface3 &#123; @Override public void operation1() &#123; System.out.println("D-&gt;&#123;nameof(operation1)&#125;"); &#125; @Override public void operation4() &#123; System.out.println("D-&gt;&#123;nameof(operation4)&#125;"); &#125; @Override public void operation5() &#123; System.out.println("D-&gt;&#123;nameof(operation5)&#125;"); &#125; &#125;class A &#123; public void use1(interface1 interface1) &#123; interface1.operation1(); &#125; public void use2(interface2 interface2) &#123; interface2.operation2(); &#125; public void use3(interface2 interface2) &#123; interface2.operation3(); &#125;&#125;class C &#123; public void use1(interface1 interface1) &#123; interface1.operation1(); &#125; public void use4(interface3 interface3) &#123; interface3.operation4(); &#125; public void use5(interface3 interface3) &#123; interface3.operation5(); &#125;&#125; ‰æùËµñÂÄíÁΩÆÂéüÂàô È´òÂ±ÇÊ®°Âùó‰∏çÂ∫îËØ•‰æùËµñÂ∫ïÂ±ÇÊ®°ÂùóÔºå‰∫åËÄÖÈÉΩÂ∫îËØ•‰æùËµñÊäΩË±°„ÄÇ ÊäΩË±°‰∏çÂ∫îËØ•‰æùËµñÁªÜËäÇÔºåÁªÜËäÇÂ∫îËØ•‰æùËµñÊäΩË±°„ÄÇ ‰æùËµñÂÄíÁΩÆÁöÑ‰∏≠ÂøÉÊÄùÊÉ≥ÊòØÈù¢ÂêëÊé•Âè£ÁºñÁ®ã„ÄÇ ‰æùËµñÂÄíÁΩÆÂéüÂàôÊòØÂü∫‰∫éËøôÊ†∑ÁöÑËÆæËÆ°ÁêÜÂøµÔºöÁõ∏ÂØπ‰∫éÁªÜËäÇÁöÑÂ§öÂèòÊÄßÔºåÊäΩË±°ÁöÑ‰∏úË•øË¶ÅÁ®≥ÂÆöÁöÑÂ§ö„ÄÇ‰ª•ÊäΩË±°‰∏∫Âü∫Á°ÄÊê≠Âª∫ÁöÑÊû∂ÊûÑÊØî‰ª•ÁªÜËäÇ‰∏∫Âü∫Á°ÄÊê≠Âª∫ÁöÑÊû∂ÊûÑË¶ÅÁ®≥ÂÆöÁöÑÂ§ö„ÄÇ ‰ΩøÁî®Êé•Âè£ÊàñÊäΩË±°Á±ªÁöÑÁõÆÁöÑÊòØÊåáÂÆöÂ•ΩËßÑËåÉÔºåËÄå‰∏çÊ∂âÂèä‰ªª‰ΩïÂÖ∑‰ΩìÁöÑÊìç‰ΩúÔºåÊääÂ±ïÁé∞ÁªÜËäÇÁöÑ‰ªªÂä°‰∫§Áªô‰ªñ‰ª¨ÁöÑÂÆûÁé∞Á±ªÊù•ÂÆåÊàê„ÄÇ ÁªèÂÖ∏Ê°à‰æãÔºö ‰∏â‰∫åÁè≠Êúâ‰∏™Â∞èÊòéÔºåÊÉ≥Ë¶ÅÂ≠¶‰π†JAVAÔºå‰∫éÊòØ‰π∞‰∫ÜÊú¨„ÄäÊ∑±ÂÖ•ÁêÜËß£JAVA„ÄãËøõË°åÂ≠¶‰π†„ÄÇ 123456789101112131415161718class Program &#123; public static void main(String[] args) &#123; XiaoMing xm = new XiaoMing(); xm.Study(new CSharp()); &#125;&#125;class CSharp &#123; public void ShowMsg() &#123; System.out.println("„ÄäÊ∑±ÂÖ•ÁêÜËß£JAVA„Äã"); &#125;&#125;class XiaoMing &#123; public void Study(CSharp cSharp) &#123; cSharp.ShowMsg(); &#125;&#125; Ëøá‰∫Ü‰∏ÄÊÆµÊó∂Èó¥ÔºåÂ∞èÊòéËßâÂæóÂÖâÂ≠¶‰π†‰∏ÄÈó®Â§™Ê≤°ÊúâÊÑèÊÄù‰∫Ü„ÄÇÂê¨ËØ¥LinuxÊØîËæÉÂ•ΩÁé©Ôºå‰∫éÊòØ‰π∞‰∫ÜÊú¨„ÄäÈ∏üÂì•ÁöÑÁßÅÊàøËèúLinux„Äã„ÄÇ 12345678910111213141516171819202122232425262728class Program &#123; public static void main(String[] args) &#123; XiaoMing xm = new XiaoMing(); xm.Study(new CSharp()); xm.Study(new Linux()); &#125;&#125;class CSharp &#123; public void ShowMsg() &#123; System.out.println("„ÄäÊ∑±ÂÖ•ÁêÜËß£JAVA„Äã"); &#125;&#125;class Linux &#123; public void ShowMsg() &#123; System.out.println("„ÄäÈ∏üÂì•ÁöÑÁßÅÊàøËèúLinux„Äã"); &#125;&#125;class XiaoMing &#123; public void Study(CSharp cSharp) &#123; cSharp.ShowMsg(); &#125; public void Study(Linux linux) &#123; linux.ShowMsg(); &#125;&#125; Â∞èÊòéÊòØ‰∏Ä‰∏™ËÅ™ÊòéÁöÑÂ®ÉÔºåËøá‰∫Ü‰∏ÄÊÆµÊó∂Èó¥Â≠¶ÂæóÂ∑Æ‰∏çÂ§ö‰∫ÜÔºå‰∫éÊòØÂèàÊÉ≥Â≠¶‰π†„ÄäËÆæËÆ°Ê®°Âºè„Äã‚Ä¶Â∞±ËøôÊ†∑Â∞èÊòéÂú®‰∏çÊñ≠Â≠¶‰π†‰∏≠ÊàêÈïøÔºåËÄåÊàë‰ª¨ÁöÑ‰ª£Á†ÅÂç¥Ë∂äÊù•Ë∂äËáÉËÇøÔºåÂèòÂæóÈöæ‰ª•Áª¥Êä§„ÄÇÁî±‰∫éXiaoMingÊòØ‰∏Ä‰∏™È´òÁ∫ßÊ®°ÂùóÂπ∂‰∏îÊòØ‰∏Ä‰∏™ÁªÜËäÇÂÆûÁé∞Á±ªÔºåÊ≠§Á±ª‰æùËµñ‰∫Ü‰π¶Á±çCSharpÂíåLinuxÂèàÊòØ‰∏Ä‰∏™ÁªÜËäÇ‰æùËµñÁ±ªÔºåËøôÂØºËá¥XiaoMingÊØèËØª‰∏ÄÊú¨‰π¶ÈÉΩÈúÄË¶Å‰øÆÊîπ‰ª£Á†ÅÔºåËøô‰∏éÊàë‰ª¨ÁöÑ‰æùËµñÂÄíÁΩÆÂéüÂàôÊòØÁõ∏ÊÇñÁöÑ„ÄÇÈÇ£Â¶Ç‰ΩïËß£ÂÜ≥XiaoMingÁöÑËøôÁßçÈóÆÈ¢òÂë¢Ôºü 123456789101112131415161718192021222324252627282930313233class Program &#123; public static void main(String[] args) &#123; XiaoMing xm = new XiaoMing(); xm.Study(new CSharp()); xm.Study(new Linux()); &#125;&#125;interface IBook &#123; void ShowMsg();&#125;class CSharp implements IBook &#123; @Override public void ShowMsg() &#123; System.out.println("„ÄäÊ∑±ÂÖ•ÁêÜËß£JAVA„Äã"); &#125;&#125;class Linux implements IBook &#123; @Override public void ShowMsg() &#123; System.out.println("„ÄäÈ∏üÂì•ÁöÑÁßÅÊàøËèúLinux„Äã"); &#125;&#125;class XiaoMing &#123; public void Study(IBook book) &#123; book.ShowMsg(); &#125;&#125; Êàë‰ª¨ÂèëÁé∞ÔºåÂè™Ë¶ÅËÆ©XiaoMing‰æùËµñ‰∫éÊäΩË±°IBookÔºåÂÖ∂‰ªñ‰π¶Á±ç‰æùËµñ‰∫éËØ•ÊäΩË±°Ôºå‰ª•Âêé‰∏çÁÆ°Â∞èÊòéËØª‰ªÄ‰πà‰π¶ÔºåÂìàÂìàÈÉΩÊòØso easyÁöÑ„ÄÇ ‰æùËµñÂÖ≥Á≥ª‰º†ÈÄíÁöÑ‰∏âÁßçÊñπÂºèÔºö 1„ÄÅÈÄöËøáÊé•Âè£‰º†ÈÄí(‰∏äËø∞Á§∫‰æã) 12345class XiaoMing &#123; public void Study(IBook book) &#123; book.ShowMsg(); &#125;&#125; 2„ÄÅÈÄöËøáÊûÑÈÄ†ÊñπÊ≥ï‰º†ÈÄí 1234567891011class XiaoMing &#123; private IBook _book; public XiaoMing(IBook book) &#123; this._book = book; &#125; public void Study() &#123; this._book.ShowMsg(); &#125;&#125; 3„ÄÅÈÄöËøáSetterÊñπÊ≥ï‰º†ÈÄí 1234567891011class XiaoMing &#123; private IBook _book; public void setBook(IBook book) &#123; this._book = book; &#125; public void Study() &#123; this._book.ShowMsg(); &#125;&#125; ‰æùËµñÂÄíÁΩÆÂéüÂàôÁöÑÊú¨Ë¥®Â∞±ÊòØÈÄöËøáÊäΩË±°(Êé•Âè£ÊàñÊäΩË±°Á±ª)‰ΩøÂêÑ‰∏™Á±ªÊàñÊ®°ÂùóÁöÑÂÆûÁé∞ÂΩºÊ≠§Áã¨Á´ãÔºå‰∏ç‰∫íÁõ∏ÂΩ±ÂìçÔºåÂÆûÁé∞Ê®°ÂùóÈó¥ÁöÑÊùæËÄ¶Âêà„ÄÇÊàë‰ª¨Âú®È°πÁõÆ‰∏≠‰ΩøÁî®Ëøô‰∏™ÂéüÂàôË¶ÅÈÅµÂæ™‰∏ãÈù¢ÁöÑËßÑÂàôÔºö ÊØè‰∏™Á±ªÂ∞ΩÈáèÈÉΩÊúâÊé•Âè£ÊàñËÄÖÊäΩË±°Á±ªÔºåÊàñËÄÖÊäΩË±°Á±ªÂíåÊé•Âè£‰∏§ÈÉΩÂÖ∑Â§á ÂèòÈáèÁöÑË°®Èù¢Á±ªÂûãÂ∞ΩÈáèÊòØÊé•Âè£ÊàñËÄÖÊäΩË±°Á±ª ‰ªª‰ΩïÁ±ªÈÉΩ‰∏çÂ∫îËØ•‰ªéÂÖ∑‰ΩìÁ±ªÊ¥æÁîü Â∞ΩÈáè‰∏çË¶ÅË¶ÜÂÜôÂü∫Á±ªÁöÑÊñπÊ≥ï Â¶ÇÊûúÂü∫Á±ªÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåËÄåËøô‰∏™ÊñπÊ≥ïÂ∑≤ÁªèÂÆûÁé∞‰∫ÜÔºåÂ≠êÁ±ªÂ∞ΩÈáè‰∏çË¶ÅË¶ÜÂÜô„ÄÇÁ±ªÈó¥‰æùËµñÁöÑÊòØÊäΩË±°ÔºåË¶ÜÂÜô‰∫ÜÊäΩË±°ÊñπÊ≥ïÔºåÂØπ‰æùËµñÁöÑÁ®≥ÂÆöÊÄß‰ºöÊúâ‰∏ÄÂÆöÁöÑÂΩ±Âìç ÁªìÂêàÈáåÊ∞èÊõøÊç¢ÂéüÂàô‰ΩøÁî® ÈáåÊ∞èÊõøÊç¢ÂéüÂàô‚Äã Â≠êÁ±ªÂ∫îÂΩìÂèØ‰ª•ÊõøÊç¢Áà∂Á±ªÂπ∂Âá∫Áé∞Âú®Áà∂Á±ªËÉΩÂ§üÂá∫Áé∞ÁöÑÂú∞Êñπ„ÄÇÊØîÂ¶ÇÔºöÂÖ¨Âè∏ÊêûÂπ¥Â∫¶Ê¥æÂØπÔºåÈÉΩÊúâÂëòÂ∑•ÈÉΩÂèØ‰ª•ÊäΩÂ•ñÔºåÈÇ£‰πà‰∏çÁÆ°ÊòØÊñ∞ÂëòÂ∑•ËøòÊòØËÄÅÂëòÂ∑•Ôºå‰πü‰∏çÁÆ°ÊòØÊÄªÈÉ®ÂëòÂ∑•ËøòÊòØÂ§ñÊ¥æÂëòÂ∑•ÔºåÈÉΩÂ∫îÂΩìÂèØ‰ª•ÂèÇÂä†ÊäΩÂ•ñ„ÄÇ ÈáåÊ∞èÊõøÊç¢Ëá≥Â∞ëÂåÖÂê´‰∏Ä‰∏ã‰∏§‰∏™Âê´‰πâÔºö ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÊòØÈíàÂØπÁªßÊâøËÄåË®ÄÁöÑÔºåÂ¶ÇÊûúÁªßÊâøÊòØ‰∏∫‰∫ÜÂÆûÁé∞‰ª£Á†ÅÈáçÁî®Ôºå‰πüÂ∞±ÊòØ‰∏∫‰∫ÜÂÖ±‰∫´ÊñπÊ≥ïÔºåÈÇ£‰πàÂÖ±‰∫´ÁöÑÁà∂Á±ªÊñπÊ≥ïÂ∞±Â∫îËØ•‰øùÊåÅ‰∏çÂèòÔºå‰∏çËÉΩË¢´Â≠êÁ±ªÈáçÊñ∞ÂÆö‰πâ„ÄÇÂ≠êÁ±ªÂè™ËÉΩÈÄöËøáÊñ∞Ê∑ªÂä†ÊñπÊ≥ïÊù•Êâ©Â±ïÂäüËÉΩÔºåÁà∂Á±ªÂíåÂ≠êÁ±ªÈÉΩÂèØ‰ª•ÂÆû‰æãÂåñÔºåËÄåÂ≠êÁ±ªÁªßÊâøÁöÑÊñπÊ≥ïÂíåÁà∂Á±ªÊòØ‰∏ÄÊ†∑ÁöÑÔºåÁà∂Á±ªË∞ÉÁî®ÊñπÊ≥ïÁöÑÂú∞ÊñπÔºåÂ≠êÁ±ª‰πüÂèØ‰ª•Ë∞ÉÁî®Âêå‰∏Ä‰∏™ÁªßÊâøÂæóÊù•ÁöÑÔºåÈÄªËæëÂíåÁà∂Á±ª‰∏ÄËá¥ÁöÑÊñπÊ≥ïÔºåËøôÊó∂Áî®Â≠êÁ±ªÂØπË±°Â∞ÜÁà∂Á±ªÂØπË±°ÊõøÊç¢ÊéâÊó∂ÔºåÂΩìÁÑ∂ÈÄªËæë‰∏ÄËá¥ÔºåÁõ∏ÂÆâÊó†‰∫ã„ÄÇ Â¶ÇÊûúÁªßÊâøÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÂ§öÊÄÅÔºåËÄåÂ§öÊÄÅÁöÑÂâçÊèêÂ∞±ÊòØÂ≠êÁ±ªË¶ÜÁõñÂπ∂ÈáçÊñ∞ÂÆö‰πâÁà∂Á±ªÁöÑÊñπÊ≥ïÔºå‰∏∫‰∫ÜÁ¨¶ÂêàLSPÔºåÊàë‰ª¨Â∫îËØ•Â∞ÜÁà∂Á±ªÂÆö‰πâ‰∏∫ÊäΩË±°Á±ªÔºåÂπ∂ÂÆö‰πâÊäΩË±°ÊñπÊ≥ïÔºåËÆ©Â≠êÁ±ªÈáçÊñ∞ÂÆö‰πâËøô‰∫õÊñπÊ≥ïÔºåÂΩìÁà∂Á±ªÊòØÊäΩË±°Á±ªÊó∂ÔºåÁà∂Á±ªÂ∞±ÊòØ‰∏çËÉΩÂÆû‰æãÂåñÔºåÊâÄ‰ª•‰πü‰∏çÂ≠òÂú®ÂèØÂÆû‰æãÂåñÁöÑÁà∂Á±ªÂØπË±°Âú®Á®ãÂ∫èÈáå„ÄÇ‰πüÂ∞±‰∏çÂ≠òÂú®Â≠êÁ±ªÊõøÊç¢Áà∂Á±ªÂÆû‰æãÔºàÊ†πÊú¨‰∏çÂ≠òÂú®Áà∂Á±ªÂÆû‰æã‰∫ÜÔºâÊó∂ÈÄªËæë‰∏ç‰∏ÄËá¥ÁöÑÂèØËÉΩ„ÄÇ Ê°à‰æãÔºö 12345678910111213141516171819202122class Program &#123; public static void main(String[] args) &#123; A a = new A(); System.out.println("100-50="+a.func1(100, 50)); B b = new B(); System.out.println("100-50="+b.func1(100, 50)); System.out.println("100-50="+b.func2(100, 50)); &#125;&#125;class A &#123; public int func1(int num1, int num2) &#123; return num1 - num2; &#125;&#125;class B extends A &#123; public int func2(int num1, int num2) &#123; return func1(num1, num2) + 100; &#125;&#125; Áî±‰∏äËø∞‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫ÔºåËã•Á±ªBÂú®ÁªßÊâøÁ±ªAÊó∂‰∏çÊ≥®ÊÑèÔºåÈáçÂÜô‰∫ÜÁà∂Á±ªÊñπÊ≥ïfunc1Â∞±‰ºöÂØºËá¥ÁªìÊûú‰∏éÈ¢ÑÊÉ≥ÁöÑ‰∏ç‰∏ÄËá¥ÔºåÊîπÂèò‰∫ÜÁà∂Á±ªÂéüÊúâÁöÑÂäüËÉΩ„ÄÇ ÊïÖÈáåÊ∞èËΩ¨Êç¢ÂéüÂàôÂ∫îÊª°Ë∂≥‰ª•‰∏ãË¶ÅÊ±ÇÔºö Â≠êÁ±ªÂèØ‰ª•ÂÆûÁé∞Áà∂Á±ªÁöÑÊäΩË±°ÊñπÊ≥ïÔºå‰ΩÜ‰∏çËÉΩË¶ÜÁõñÁà∂Á±ªÁöÑÈùûÊäΩË±°ÊñπÊ≥ï Â≠êÁ±ªÂèØ‰ª•Â¢ûÂä†Ëá™Â∑±ÁâπÊúâÁöÑÊñπÊ≥ï ÂΩìÂ≠êÁ±ªÁöÑÊñπÊ≥ïÈáçËΩΩÁà∂Á±ªÁöÑÊñπÊ≥ïÊó∂ÔºåÊñπÊ≥ïÁöÑÂΩ¢ÂèÇË¶ÅÊØîÁà∂Á±ªÊñπÊ≥ïÁöÑËæìÂÖ•ÂèÇÊï∞Êõ¥ÂÆΩÊùæ ÂΩìÂ≠êÁ±ªÁöÑÊñπÊ≥ïÂÆûÁé∞Áà∂Á±ªÁöÑÊäΩË±°ÊñπÊ≥ïÊó∂ÔºåÊñπÊ≥ïÁöÑËøîÂõûÂÄºÂ∫îÊØîÁà∂Á±ªÊõ¥‰∏•Ê†º ‰ºòÁÇπÔºö ÂèØ‰ª•Â§ßÂ§ßÂáèÂ∞ëÁ®ãÂ∫èÁöÑbug‰ª•ÂèäÂ¢ûÂº∫‰ª£Á†ÅÁöÑÂèØËØªÊÄß Ëø™Á±≥ÁâπÊ≥ïÂàô‚Äã ‰πüÂè´ÊúÄÂ∞ëÁü•ËØÜÂéüÂàô„ÄÇËø™Á±≥ÁâπÊ≥ïÂàôÁöÑÂÆö‰πâÊòØÂè™‰∏é‰Ω†ÁöÑÁõ¥Êé•ÊúãÂèã‰∫§Ë∞àÔºå‰∏ç‰∏é‚ÄùÈôåÁîü‰∫∫‚ÄùËØ¥ËØù„ÄÇÂ¶ÇÊûú‰∏§‰∏™ËΩØ‰ª∂ÂÆû‰ΩìÊó†È°ªÁõ¥Êé•ÈÄö‰ø°ÔºåÈÇ£‰πàÂ∞±‰∏çÂ∫îÂΩìÂèëÁîüÁõ¥Êé•ÁöÑÁõ∏‰∫íË∞ÉÁî®ÔºåÂèØ‰ª•ÈÄöËøáÁ¨¨‰∏âÊñπËΩ¨ÂèëËØ•Â∫îÁî®„ÄÇÂÖ∂ÁõÆÁöÑÊòØÈôç‰ΩéÁ±ª‰πãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶ÔºåÊèêÈ´òÊ®°ÂùóÁöÑÁõ∏ÂØπÁã¨Á´ãÊÄß„ÄÇ Ëø™Á±≥ÁâπÊ≥ïÂàô‰∏≠ÁöÑÊúãÂèãÊòØÊåáÔºöÂΩìÂâçÂØπË±°Êú¨Ë∫´„ÄÅÂΩìÂâçÂØπË±°ÁöÑÊàêÂëòÂØπË±°„ÄÅÂΩìÂâçÂØπË±°ÊâÄÂàõÂª∫ÁöÑÂØπË±°„ÄÅÂΩìÂâçÂØπË±°ÁöÑÊñπÊ≥ïÂèÇÊï∞Á≠âÔºåËøô‰∫õÂØπË±°Â≠òÂú®ÂÖ≥ËÅî„ÄÅËÅöÂêàÊàñÁªÑÂêàÂÖ≥Á≥ªÔºåÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆËøô‰∫õÂØπË±°ÁöÑÊñπÊ≥ï„ÄÇ ‰ºòÁÇπÔºö Èôç‰ΩéÁ±ª‰πãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶ÔºåÊèêÈ´òÊ®°ÂùóÁöÑÁõ∏ÂØπÁã¨Á´ãÊÄß„ÄÇ Áî±‰∫é‰∫≤ÂíåÂ∫¶Èôç‰ΩéÔºå‰ªéËÄåÊèêÈ´ò‰∫ÜÁ±ªÁöÑÂèØÂ§çÁî®ÁéáÂíåÁ≥ªÁªüÁöÑÊâ©Â±ïÊÄß„ÄÇ Áº∫ÁÇπÔºö ËøáÂ∫¶‰ΩøÁî®Ëø™Á±≥ÁâπÊ≥ïÂàô‰ºö‰ΩøÁ≥ªÁªü‰∫ßÁîüÂ§ßÈáèÁöÑ‰∏≠‰ªãÁ±ªÔºå‰ªéËÄåÂ¢ûÂä†Á≥ªÁªüÁöÑÂ§çÊùÇÊÄßÔºå‰ΩøÊ®°Âùó‰πãÈó¥ÁöÑÈÄö‰ø°ÊïàÁéáÈôç‰Ωé„ÄÇÊâÄ‰ª•ÔºåÂú®ÈáÜÁî®Ëø™Á±≥ÁâπÊ≥ïÂàôÊó∂ÈúÄË¶ÅÂèçÂ§çÊùÉË°°ÔºåÁ°Æ‰øùÈ´òÂÜÖËÅöÂíå‰ΩéËÄ¶ÂêàÁöÑÂêåÊó∂Ôºå‰øùËØÅÁ≥ªÁªüÁöÑÁªìÊûÑÊ∏ÖÊô∞„ÄÇ ‰ΩøÁî®Ëø™Á±≥ÁâπÊ≥ïÂàôÈúÄË¶ÅÊ≥®ÊÑèÔºö Âú®Á±ªÁöÑÂàíÂàÜ‰∏äÔºåÂ∫îËØ•ÂàõÂª∫Âº±ËÄ¶ÂêàÁöÑÁ±ª„ÄÇÁ±ª‰∏éÁ±ª‰πãÈó¥ÁöÑËÄ¶ÂêàË∂äÂº±ÔºåÂ∞±Ë∂äÊúâÂà©‰∫éÂÆûÁé∞ÂèØÂ§çÁî®ÁöÑÁõÆÊ†á„ÄÇ Âú®Á±ªÁöÑÁªìÊûÑËÆæËÆ°‰∏äÔºåÂ∞ΩÈáèÈôç‰ΩéÁ±ªÊàêÂëòÁöÑËÆøÈóÆÊùÉÈôê„ÄÇ Âú®Á±ªÁöÑËÆæËÆ°‰∏äÔºå‰ºòÂÖàËÄÉËôëÂ∞Ü‰∏Ä‰∏™Á±ªËÆæÁΩÆÊàê‰∏çÂèòÁ±ª„ÄÇ Âú®ÂØπÂÖ∂‰ªñÁ±ªÁöÑÂºïÁî®‰∏äÔºåÂ∞ÜÂºïÁî®ÂÖ∂‰ªñÂØπË±°ÁöÑÊ¨°Êï∞ÈôçÂà∞ÊúÄ‰Ωé„ÄÇ ‰∏çÊö¥Èú≤Á±ªÁöÑÂ±ûÊÄßÊàêÂëòÔºåËÄåÂ∫îËØ•Êèê‰æõÁõ∏Â∫îÁöÑËÆøÈóÆÂô®Ôºàset Âíå get ÊñπÊ≥ïÔºâ„ÄÇ Ë∞®ÊÖé‰ΩøÁî®Â∫èÂàóÂåñÔºàSerializableÔºâÂäüËÉΩ„ÄÇ ÁªèÂÖ∏Ê°à‰æãÔºö Ëî°ÂæêÂù§‰∏éÁªèÁ∫™‰∫∫ÁöÑÂÖ≥Á≥ªÂÆû‰æã„ÄÇËî°ÂæêÂù§Âè™Ë¥üË¥£Êµ™ÔºåÁªèÁ∫™‰∫∫Ë¥üË¥£Â§ÑÁêÜÊó•Â∏∏‰∫ãÂä°ÔºåÂ¶Ç‰∏éÁ≤â‰∏ùÁöÑËßÅÈù¢‰ºöÔºå‰∏éÂ™í‰ΩìÂÖ¨Âè∏ÁöÑ‰∏öÂä°Ê¥ΩÊ∑°Á≠â„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172class Program &#123; public static void main(String[] args) &#123; Agent agent = new Agent(); agent.setStar(new Star("Ëî°ÂæêÂù§")); agent.setFans(new Fans("Â∞èÊòé")); agent.setCompany(new Company("**ÂÖ¨Âè∏")); agent.meeting(); agent.business(); &#125;&#125;class Agent &#123; private Star myStar; private Fans myFans; private Company myCompany; public void setStar(Star myStar) &#123; this.myStar = myStar; &#125; public void setFans(Fans myFans) &#123; this.myFans = myFans; &#125; public void setCompany(Company myCompany) &#123; this.myCompany = myCompany; &#125; public void meeting() &#123; System.out.println(myFans.getName()+"‰∏éÊòéÊòü"+myStar.getName()+"ËßÅÈù¢‰∫Ü„ÄÇ"); &#125; public void business() &#123; System.out.println(myCompany.getName()+"‰∏éÊòéÊòü"+myStar.getName()+"Ê¥ΩË∞à‰∏öÂä°„ÄÇ"); &#125;&#125;class Star &#123; private string name; public Star(string name) &#123; this.name = name; &#125; public string getName() &#123; return this.name; &#125;&#125;class Company &#123; private string name; public Company(string name) &#123; this.name = name; &#125; public string getName() &#123; return this.name; &#125;&#125;class Fans &#123; private string name; public Fans(string name) &#123; this.name = name; &#125; public string getName() &#123; return this.name; &#125;&#125; ÂºÄÈó≠ÂéüÂàô‚Äã ËΩØ‰ª∂ÂØπË±°ÔºàÁ±ª„ÄÅÊ®°Âùó„ÄÅÊñπÊ≥ïÁ≠âÔºâÂ∫îËØ•ÂØπ‰∫éÊâ©Â±ïÊòØÂºÄÊîæÁöÑÔºåÂØπ‰øÆÊîπÊòØÂÖ≥Èó≠ÁöÑ„ÄÇÊØîÂ¶ÇÔºö‰∏Ä‰∏™ÁΩëÁªúÊ®°ÂùóÔºåÂéüÊù•Âè™ÊúâÊúçÂä°Á´ØÂäüËÉΩÔºåËÄåÁé∞Âú®Ë¶ÅÂä†ÂÖ•ÂÆ¢Êà∑Á´ØÂäüËÉΩÔºåÈÇ£‰πàÂ∫îÂΩìÂú®‰∏çÁî®‰øÆÊîπÊúçÂä°Á´ØÂäüËÉΩ‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÔºåÂ∞±ËÉΩÂ§üÂ¢ûÂä†ÂÆ¢Êà∑Á´ØÂäüËÉΩÁöÑÂÆûÁé∞‰ª£Á†ÅÔºåËøôË¶ÅÊ±ÇÂú®ËÆæËÆ°‰πãÂàùÔºåÂ∞±Â∫îÂΩìÂ∞ÜÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÂàÜÂºÄ„ÄÇÂÖ¨ÂÖ±ÈÉ®ÂàÜÊäΩË±°Âá∫Êù•„ÄÇ ÈóÆÈ¢òÁî±Êù•Ôºö ‚Äã Âú®ËΩØ‰ª∂ÁöÑÁîüÂëΩÂë®ÊúüÂÜÖÔºåÂõ†‰∏∫ÂèòÂåñ„ÄÅÂçáÁ∫ßÂíåÁª¥Êä§Á≠âÂéüÂõ†ÈúÄË¶ÅÂØπËΩØ‰ª∂ÂéüÊúâ‰ª£Á†ÅËøõË°å‰øÆÊîπÊó∂ÔºåÂèØËÉΩ‰ºöÁªôÊóß‰ª£Á†Å‰∏≠ÂºïÂÖ•ÈîôËØØÔºå‰πüÂèØËÉΩ‰ºö‰ΩøÊàë‰ª¨‰∏çÂæó‰∏çÂØπÊï¥‰∏™ÂäüËÉΩËøõË°åÈáçÊûÑÔºåÂπ∂‰∏îÈúÄË¶ÅÂéüÊúâ‰ª£Á†ÅÁªèËøáÈáçÊñ∞ÊµãËØï„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ïÔºö ‚Äã ÂΩìËΩØ‰ª∂ÈúÄË¶ÅÂèòÂåñÊó∂ÔºåÂ∞ΩÈáèÈÄöËøáÊâ©Â±ïËΩØ‰ª∂ÂÆû‰ΩìÁöÑË°å‰∏∫Êù•ÂÆûÁé∞ÂèòÂåñÔºåËÄå‰∏çÊòØÈÄöËøá‰øÆÊîπÂ∑≤ÊúâÁöÑ‰ª£Á†ÅÊù•ÂÆûÁé∞ÂèòÂåñ„ÄÇ ‚Äã ÂºÄÈó≠ÂéüÂàôÊòØÈù¢ÂêëÂØπË±°ËÆæËÆ°‰∏≠ÊúÄÂü∫Á°ÄÁöÑËÆæËÆ°ÂéüÂàôÔºåÂÆÉÊåáÂØºÊàë‰ª¨Â¶Ç‰ΩïÂª∫Á´ãÁ®≥ÂÆöÁÅµÊ¥ªÁöÑÁ≥ªÁªü„ÄÇÂºÄÈó≠ÂéüÂàôÂèØËÉΩÊòØËÆæËÆ°Ê®°ÂºèÂÖ≠È°πÂéüÂàô‰∏≠ÂÆö‰πâÊúÄÊ®°Á≥äÁöÑ‰∏Ä‰∏™‰∫ÜÔºåÂÆÉÂè™ÂëäËØâÊàë‰ª¨ÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂèØÊòØÂà∞Â∫ïÂ¶Ç‰ΩïÊâçËÉΩÂÅöÂà∞ÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠ÔºåÂπ∂Ê≤°ÊúâÊòéÁ°ÆÁöÑÂëäËØâÊàë‰ª¨„ÄÇ‰ª•ÂâçÔºåÂ¶ÇÊûúÊúâ‰∫∫ÂëäËØâÊàë‚Äù‰Ω†ËøõË°åËÆæËÆ°ÁöÑÊó∂ÂÄô‰∏ÄÂÆöË¶ÅÈÅµÂÆàÂºÄÈó≠ÂéüÂàô‚ÄùÔºåÊàë‰ºöËßâÁöÑ‰ªñ‰ªÄ‰πàÈÉΩÊ≤°ËØ¥Ôºå‰ΩÜË≤å‰ººÂèà‰ªÄ‰πàÈÉΩËØ¥‰∫Ü„ÄÇÂõ†‰∏∫ÂºÄÈó≠ÂéüÂàôÁúüÁöÑÂ§™Ëôö‰∫Ü„ÄÇ ‚Äã Âú®‰ªîÁªÜÊÄùËÄÉ‰ª•Âèä‰ªîÁªÜÈòÖËØªÂæàÂ§öËÆæËÆ°Ê®°ÂºèÁöÑÊñáÁ´†ÂêéÔºåÁªà‰∫éÂØπÂºÄÈó≠ÂéüÂàôÊúâ‰∫Ü‰∏ÄÁÇπËÆ§ËØÜ„ÄÇÂÖ∂ÂÆûÔºåÊàë‰ª¨ÈÅµÂæ™ËÆæËÆ°Ê®°ÂºèÂâçÈù¢5Â§ßÂéüÂàôÔºå‰ª•Âèä‰ΩøÁî®23ÁßçËÆæËÆ°Ê®°ÂºèÁöÑÁõÆÁöÑÂ∞±ÊòØÈÅµÂæ™ÂºÄÈó≠ÂéüÂàô„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂè™Ë¶ÅÊàë‰ª¨ÂØπÂâçÈù¢5È°πÂéüÂàôÈÅµÂÆàÁöÑÂ•Ω‰∫ÜÔºåËÆæËÆ°Âá∫ÁöÑËΩØ‰ª∂Ëá™ÁÑ∂ÊòØÁ¨¶ÂêàÂºÄÈó≠ÂéüÂàôÁöÑÔºåËøô‰∏™ÂºÄÈó≠ÂéüÂàôÊõ¥ÂÉèÊòØÂâçÈù¢‰∫îÈ°πÂéüÂàôÈÅµÂÆàÁ®ãÂ∫¶ÁöÑ‚ÄùÂπ≥ÂùáÂæóÂàÜ‚ÄùÔºåÂâçÈù¢5È°πÂéüÂàôÈÅµÂÆàÁöÑÂ•ΩÔºåÂπ≥ÂùáÂàÜËá™ÁÑ∂Â∞±È´òÔºåËØ¥ÊòéËΩØ‰ª∂ËÆæËÆ°ÂºÄÈó≠ÂéüÂàôÈÅµÂÆàÁöÑÂ•ΩÔºõÂ¶ÇÊûúÂâçÈù¢5È°πÂéüÂàôÈÅµÂÆàÁöÑ‰∏çÂ•ΩÔºåÂàôËØ¥ÊòéÂºÄÈó≠ÂéüÂàôÈÅµÂÆàÁöÑ‰∏çÂ•Ω„ÄÇ ‚Äã ÂÖ∂ÂÆûÁ¨îËÄÖËÆ§‰∏∫ÔºåÂºÄÈó≠ÂéüÂàôÊó†ÈùûÂ∞±ÊòØÊÉ≥Ë°®ËææËøôÊ†∑‰∏ÄÂ±ÇÊÑèÊÄùÔºöÁî®ÊäΩË±°ÊûÑÂª∫Ê°ÜÊû∂ÔºåÁî®ÂÆûÁé∞Êâ©Â±ïÁªÜËäÇ„ÄÇÂõ†‰∏∫ÊäΩË±°ÁÅµÊ¥ªÊÄßÂ•ΩÔºåÈÄÇÂ∫îÊÄßÂπøÔºåÂè™Ë¶ÅÊäΩË±°ÁöÑÂêàÁêÜÔºåÂèØ‰ª•Âü∫Êú¨‰øùÊåÅËΩØ‰ª∂Êû∂ÊûÑÁöÑÁ®≥ÂÆö„ÄÇËÄåËΩØ‰ª∂‰∏≠ÊòìÂèòÁöÑÁªÜËäÇÔºåÊàë‰ª¨Áî®‰ªéÊäΩË±°Ê¥æÁîüÁöÑÂÆûÁé∞Á±ªÊù•ËøõË°åÊâ©Â±ïÔºåÂΩìËΩØ‰ª∂ÈúÄË¶ÅÂèëÁîüÂèòÂåñÊó∂ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊ†πÊçÆÈúÄÊ±ÇÈáçÊñ∞Ê¥æÁîü‰∏Ä‰∏™ÂÆûÁé∞Á±ªÊù•Êâ©Â±ïÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇÂΩìÁÑ∂ÂâçÊèêÊòØÊàë‰ª¨ÁöÑÊäΩË±°Ë¶ÅÂêàÁêÜÔºåË¶ÅÂØπÈúÄÊ±ÇÁöÑÂèòÊõ¥ÊúâÂâçÁûªÊÄßÂíåÈ¢ÑËßÅÊÄßÊâçË°å„ÄÇ ‚Äã ËØ¥Âà∞ËøôÈáåÔºåÂÜçÂõûÊÉ≥‰∏Ä‰∏ãÂâçÈù¢ËØ¥ÁöÑ5È°πÂéüÂàôÔºåÊÅ∞ÊÅ∞ÊòØÂëäËØâÊàë‰ª¨Áî®ÊäΩË±°ÊûÑÂª∫Ê°ÜÊû∂ÔºåÁî®ÂÆûÁé∞Êâ©Â±ïÁªÜËäÇÁöÑÊ≥®ÊÑè‰∫ãÈ°πËÄåÂ∑≤ÔºöÂçï‰∏ÄËÅåË¥£ÂéüÂàôÂëäËØâÊàë‰ª¨ÂÆûÁé∞Á±ªË¶ÅËÅåË¥£Âçï‰∏ÄÔºõÈáåÊ∞èÊõøÊç¢ÂéüÂàôÂëäËØâÊàë‰ª¨‰∏çË¶ÅÁ†¥ÂùèÁªßÊâø‰ΩìÁ≥ªÔºõ‰æùËµñÂÄíÁΩÆÂéüÂàôÂëäËØâÊàë‰ª¨Ë¶ÅÈù¢ÂêëÊé•Âè£ÁºñÁ®ãÔºõÊé•Âè£ÈöîÁ¶ªÂéüÂàôÂëäËØâÊàë‰ª¨Âú®ËÆæËÆ°Êé•Âè£ÁöÑÊó∂ÂÄôË¶ÅÁ≤æÁÆÄÂçï‰∏ÄÔºõËø™Á±≥ÁâπÊ≥ïÂàôÂëäËØâÊàë‰ª¨Ë¶ÅÈôç‰ΩéËÄ¶Âêà„ÄÇËÄåÂºÄÈó≠ÂéüÂàôÊòØÊÄªÁ∫≤Ôºå‰ªñÂëäËØâÊàë‰ª¨Ë¶ÅÂØπÊâ©Â±ïÂºÄÊîæÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠„ÄÇ ‰∏∫‰ªÄ‰πà‰ΩøÁî®ÂºÄÈó≠ÂéüÂàôÔºü Âè™Ë¶ÅÊòØÈù¢ÂêëÂØπË±°ÁöÑÁºñÁ®ãÔºåÂú®ÂºÄÂèëËøáÁ®ã‰∏≠ÈÉΩ‰ºöÂº∫Ë∞ÉÂºÄÈó≠ÂéüÂàô ÊòØÊúÄÂü∫Á°ÄÁöÑËÆæËÆ°ÂéüÂàôÔºåÂÖ∂‰ªñ‰∫î‰∏™ËÆæËÆ°ÂéüÂàôÈÉΩÊòØÂºÄÈó≠ÂéüÂàôÁöÑÂÖ∑‰ΩìÂΩ¢ÊÄÅ ÂèØ‰ª•ÊèêÈ´ò‰ª£Á†ÅÁöÑÂ§çÁî®ÊÄß ÂèØ‰ª•ÊèêÈ´ò‰ª£Á†ÅÁöÑÂèØÁª¥Êä§ÊÄß Â¶Ç‰Ωï‰ΩøÁî®ÂºÄÈó≠ÂéüÂàôÔºü ÊäΩË±°Á∫¶Êùü ÊäΩË±°ÂØπ‰∏ÄÁªÑ‰∫ãÁâ©ÁöÑÈÄöÁî®ÊèèËø∞ÔºåÊ≤°ÊúâÂÖ∑‰ΩìÁöÑÂÆûÁé∞Ôºå‰πüÂ∞±Ë°®Á§∫ÂÆÉÂèØ‰ª•ÊúâÈùûÂ∏∏Â§öÁöÑÂèØËÉΩÊÄßÔºåÂèØ‰ª•Ë∑üÈöèÈúÄÊ±ÇÁöÑÂèòÂåñËÄåÂèòÂåñ„ÄÇÂõ†Ê≠§ÔºåÈÄöËøáÊé•Âè£ÊàñÊäΩË±°Á±ªÂèØ‰ª•Á∫¶Êùü‰∏ÄÁªÑÂèØËÉΩÂèòÂåñÁöÑË°å‰∏∫ÔºåÂπ∂‰∏îËÉΩÂ§üÂÆûÁé∞ÂØπÊâ©Â±ïÂºÄÊîæ„ÄÇ ÂÖÉÊï∞ÊçÆÊéß‰ª∂Ê®°ÂùóË°å‰∏∫ Âà∂ÂÆöÈ°πÁõÆÁ´†Á®ã Â∞ÅË£ÖÂèòÂåñ Â∞ÜÁõ∏ÂêåÁöÑÂèòÂåñÂ∞ÅË£ÖÂà∞‰∏Ä‰∏™Êé•Âè£ÊàñÊäΩË±°Á±ª‰∏≠ÔºåÂ∞Ü‰∏çÂêåÁöÑÂèòÂåñÂ∞ÅË£ÖÂà∞‰∏çÂêåÁöÑÊé•Âè£ÊàñÊäΩË±°Á±ª‰∏≠Ôºå‰∏çÂ∫îËØ•Êúâ‰∏§‰∏™‰∏çÂêåÂèòÂåñÂá∫Áé∞Âú®Âêå‰∏Ä‰∏™Êé•Âè£ÊàñÊäΩË±°Á±ª‰∏≠„ÄÇ Ê°à‰æãÔºö ‰∏Ä‰∏™Â∑•ÂéÇÁîü‰∫ßÂÆùÈ©¨ÂíåÂ••Ëø™‰∏§ÁßçÂìÅÁâåÁöÑËΩ¶ 12345678910111213141516171819202122232425262728293031323334353637383940class Program &#123; public static void main(String[] args) &#123; AutomobileFactory carf = new AutomobileFactory(); carf.createAuto(AutomobileFactory.AutoType.BMW); carf.createAuto(AutomobileFactory.AutoType.AUDI); &#125; &#125;interface IAutomobile &#123; &#125;class Audi implements IAutomobile &#123; public Audi() &#123; System.out.println("hi ÊàëÊòØÂ••Ëø™"); &#125;&#125;class BMW implements IAutomobile &#123; public Audi() &#123; System.out.println("hello ÊàëÊòØÂÆùÈ©¨"); &#125;&#125;class AutomobileFactory &#123; public enum AutoType &#123; AUDI, BMW &#125; public IAutomobile createAuto(AutoType carType) &#123; switch (carType) &#123; case AutoType.AUDI: return new Audi(); case AutoType.BMW: return new BMW(); &#125; return null; &#125;&#125; ÈöèÁùÄ‰∏öÂä°‰∏çÊñ≠Êâ©Â±ïÔºåÈúÄË¶ÅÁîü‰∫ßÂÆæÂà©ÔºåÊÄé‰πàÂäûÔºüÂØπÂéüÊúâÂ∑•ÂéÇËøõË°åÊîπÈÄ†‰ΩøÂÖ∂Êª°Ë∂≥Áîü‰∫ßÂÆæÂà©ÁöÑÊù°‰ª∂ÔºüÂØπÂºÄÈó≠ÂéüÂàôÊù•ËØ¥ÔºåËøôÊòæÁÑ∂‰∏çÂêàÈÄÇ„ÄÇ‰∫éÊòØ„ÄÇ„ÄÇ„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940class Program &#123; public static void main(String[] args) &#123; IAutomobileFactory audi = new AudiFactory(); audi.createAuto(); IAutomobileFactory bmw = new BMWFactory(); bmw.createAuto(); &#125; &#125;interface IAutomobile &#123; &#125;class Audi implements IAutomobile &#123; public Audi() &#123; System.out.println("hi ÊàëÊòØÂ••Ëø™"); &#125;&#125;class BMW implements IAutomobile &#123; public Audi() &#123; System.out.println("hello ÊàëÊòØÂÆùÈ©¨"); &#125;&#125;interface IAutomobileFactory &#123; IAutomobile createAuto();&#125;class AudiFactory implements IAutomobileFactory &#123; public IAutomobile createAuto() &#123; return new Audi(); &#125;&#125;class BMWFactory implements IAutomobileFactory &#123; public IAutomobile createAuto() &#123; return new BMW(); &#125;&#125;]]></content>
      <categories>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Rsync + Sersync ÂÆûÁé∞Êñá‰ª∂ÂÆûÊó∂ÂêåÊ≠•]]></title>
    <url>%2Fsoftware%2Frsync%2Fsoftware%2Frsync-1%2F</url>
    <content type="text"><![CDATA[Rsync + Sersync ÂÆûÁé∞Êñá‰ª∂ÂÆûÊó∂ÂêåÊ≠•Ê¶ÇË¶Åsersync‰∏ªË¶ÅÁî®‰∫éÊúçÂä°Âô®ÂêåÊ≠•ÔºåwebÈïúÂÉèÁ≠âÂäüËÉΩ„ÄÇÂü∫‰∫éboost1.43.0,inotify api,rsync command.ÂºÄÂèë„ÄÇÁõÆÂâç‰ΩøÁî®ÁöÑÊØîËæÉÂ§öÁöÑÂêåÊ≠•Ëß£ÂÜ≥ÊñπÊ°àÊòØinotify-tools+rsync ÔºåÂè¶Â§ñ‰∏Ä‰∏™ÊòØgoogleÂºÄÊ∫êÈ°πÁõÆOpenduckbillÔºà‰æùËµñ‰∫éinotify- toolsÔºâÔºåËøô‰∏§‰∏™ÈÉΩÊòØÂü∫‰∫éËÑöÊú¨ËØ≠Ë®ÄÁºñÂÜôÁöÑ„ÄÇÁõ∏ÊØîËæÉ‰∏äÈù¢‰∏§‰∏™È°πÁõÆÔºåÊú¨È°πÁõÆ‰ºòÁÇπÊòØÔºö sersyncÊòØ‰ΩøÁî®c++ÁºñÂÜôÔºåËÄå‰∏îÂØπlinuxÁ≥ªÁªüÊñá‰ª∂Á≥ªÁªü‰∫ßÁîüÁöÑ‰∏¥Êó∂Êñá‰ª∂ÂíåÈáçÂ§çÁöÑÊñá‰ª∂Êìç‰ΩúËøõË°åËøáÊª§ÔºåÊâÄ‰ª•Âú®ÁªìÂêàrsyncÂêåÊ≠•ÁöÑÊó∂ÂÄôÔºåËäÇÁúÅ‰∫ÜËøêË°åÊó∂ËÄóÂíåÁΩëÁªúËµÑÊ∫ê„ÄÇÂõ†Ê≠§Êõ¥Âø´„ÄÇ sersyncÈÖçÁΩÆËµ∑Êù•ÂæàÁÆÄÂçïÔºåÂÖ∂‰∏≠binÁõÆÂΩï‰∏ãÂ∑≤ÁªèÊúâÂü∫Êú¨‰∏äÈùôÊÄÅÁºñËØëÁöÑ2ËøõÂà∂Êñá‰ª∂ÔºåÈÖçÂêàbinÁõÆÂΩï‰∏ãÁöÑxmlÈÖçÁΩÆÊñá‰ª∂Áõ¥Êé•‰ΩøÁî®Âç≥ÂèØ„ÄÇ ‰ΩøÁî®Â§öÁ∫øÁ®ãËøõË°åÂêåÊ≠•ÔºåÂ∞§ÂÖ∂Âú®ÂêåÊ≠•ËæÉÂ§ßÊñá‰ª∂Êó∂ÔºåËÉΩÂ§ü‰øùËØÅÂ§ö‰∏™ÊúçÂä°Âô®ÂÆûÊó∂‰øùÊåÅÂêåÊ≠•Áä∂ÊÄÅ„ÄÇ ÊúâÂá∫ÈîôÂ§ÑÁêÜÊú∫Âà∂ÔºåÈÄöËøáÂ§±Ë¥•ÈòüÂàóÂØπÂá∫ÈîôÁöÑÊñá‰ª∂ÈáçÊñ∞ÂêåÊ≠•ÔºåÂ¶ÇÊûú‰ªçÊóßÂ§±Ë¥•ÔºåÂàôÊåâËÆæÂÆöÊó∂ÈïøÂØπÂêåÊ≠•Â§±Ë¥•ÁöÑÊñá‰ª∂ÈáçÊñ∞ÂêåÊ≠•„ÄÇ Ëá™Â∏¶crontabÂäüËÉΩÔºåÂè™ÈúÄÂú®xmlÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂºÄÂêØÔºåÂç≥ÂèØÊåâË¶ÅÊ±ÇÈöî‰∏ÄÊÆµÊó∂Èó¥Êï¥‰ΩìÂêåÊ≠•‰∏ÄÊ¨°„ÄÇÊó†ÈúÄÂÜçÈ¢ùÂ§ñÈÖçÁΩÆcrontabÂäüËÉΩ„ÄÇ ËÉΩÂ§üÂÆûÁé∞socket‰∏éhttpÊèí‰ª∂Êâ©Â±ï„ÄÇ ÂéüÁêÜÊ≠•È™§ÂéüÁêÜÔºö Âú®ÂêåÊ≠•ÊúçÂä°Âô®ÔºàMasterÔºâ‰∏äÂºÄÂêØsersyncÊúçÂä°ÔºåsersyncË¥üËΩΩÁõëÊéßÈÖçÁΩÆË∑ØÂæÑ‰∏≠ÁöÑÊñá‰ª∂Á≥ªÁªü‰∫ã‰ª∂ÂèòÂåñÔºõ Ë∞ÉÁî®rsyncÂëΩ‰ª§ÊääÊõ¥Êñ∞ÁöÑÊñá‰ª∂ÂêåÊ≠•Âà∞ÁõÆÊ†áÊúçÂä°Âô®ÔºàS1 Âíå S2ÔºâÔºõ ÈúÄË¶ÅÂú®‰∏ªÊúçÂä°Âô®ÈÖçÁΩÆsersyncÔºåÂú®ÂêåÊ≠•ÁõÆÊ†áÊúçÂä°Âô®ÈÖçÁΩÆrsync serverÔºàÊ≥®ÊÑèÔºöÊòØrsyncÊúçÂä°Ôºâ ÂêåÊ≠•ÂéüÁêÜÔºö Áî®Êà∑ÂÆûÊó∂ÁöÑÂæÄsersyncÊúçÂä°Âô®ÔºàMÔºâ‰∏äÂÜôÂÖ•Êõ¥Êñ∞Êñá‰ª∂Êï∞ÊçÆÔºõ Ê≠§Êó∂ÈúÄË¶ÅÂú®ÂêåÊ≠•‰∏ªÊúçÂä°Âô®ÔºàMÔºâ‰∏äÈÖçÁΩÆsersyncÊúçÂä°Ôºõ Âú®S1 ÂíåS2‰∏äÂºÄÂêØrsyncÂÆàÊä§ËøõÁ®ãÊúçÂä°Ôºå‰ª•ÂêåÊ≠•ÊãâÂèñÊù•Ëá™sersyncÊúçÂä°Âô®ÔºàMÔºâ‰∏äÁöÑÊï∞ÊçÆÔºõ ÈÄöËøársyncÁöÑÂÆàÊä§ËøõÁ®ãÊúçÂä°ÂêéÂèØ‰ª•ÂèëÁé∞ÔºåÂÆûÈôÖ‰∏äsersyncÂ∞±ÊòØÁõëÊéßÊú¨Âú∞ÁöÑÊï∞ÊçÆÂÜôÂÖ•ÊàñÊõ¥Êñ∞‰∫ã‰ª∂ÔºõÁÑ∂ÂêéÔºåÂú®Ë∞ÉÁî®rsyncÂÆ¢Êà∑Á´ØÁöÑÂëΩ‰ª§ÔºåÂ∞ÜÂÜôÂÖ•ÊàñÊõ¥Êñ∞‰∫ã‰ª∂ÂØπÂ∫îÁöÑÊñá‰ª∂ÈÄöËøársyncÊé®ÈÄÅÂà∞ÁõÆÊ†áÊúçÂä°Âô®ÔºàS1 ÂíåS2Ôºâ ÂÆûÊàòÊúçÂä°Âô®ÊãìÊâëÂõæÔºö IP ËØ¥Êòé ‰∏ªÊú∫Âêç 172.24.2.71 Êñá‰ª∂Â≠òÂÇ®ÊúçÂä°Âô® node1 172.24.2.70 Êñá‰ª∂Â≠òÂÇ®ÊúçÂä°Âô® node2 172.24.2.62 Â§á‰ªΩÊúçÂä°Âô® backup node1‰∏énode2ÈÖçÁΩÆÁõ∏ÂêåÔºå‰∏ãÈù¢‰ªÖÈÖçÁΩÆnode1ÔºåÊúâÈÖçÁΩÆ‰∏çÂêåÁöÑÂú∞ÂùÄ‰ºöÊåáÂá∫ ÂÆâË£ÖÈÉ®ÁΩ≤rsyncËøõÂÖ•backupÊúçÂä°Âô® 12345## ÂàõÂª∫Â§á‰ªΩÊñá‰ª∂Â§π[root@backup ~]# mkdir -p /backup/nfs/71## ÂÆâË£Örsync[root@backup ~]# yum install rsync ÈÖçÁΩÆrsyncd.conf123456789101112131415161718192021222324252627282930313233[root@backup ~]# vi /etc/rsyncd/rsyncd.confport = 873pid file = /etc/rsyncd/rsyncd.pidmotd file= /etc/rsyncd/welcome.msglock file = /etc/rsyncd/rsyncd.locklog file = /etc/rsyncd/rsyncd.logtimeout = 900#ÈÖçÁΩÆÊüê‰∫õÊ†ºÂºè‰∏çÂéãÁº©dont compress = *.gz *.tgz *.zip *.z *.Z *.rpm *.deb *.bz2[71]#ÊúçÂä°Âô®ËØªÂÜôÁõÆÂΩïpath = /backup/nfs/71use chroot = no#Âè™ÂÜôÈÄâÊã©ÔºåÂè™ËÆ©ÂÆ¢Êà∑Á´ØÂà∞ÊúçÂä°Âô®‰∏äÂÜôÂÖ•write only = yes#Âè™ËØªÈÄâÊã©ÔºåÂè™ËÆ©ÂÆ¢Êà∑Á´Ø‰ªéÊúçÂä°Âô®‰∏äËØªÂèñÊñá‰ª∂read only = nomax connections = 5list = yesuid = rootgid = root# Ë¥¶Âè∑ÂØÜÁ†ÅÂ≠òÊîæ‰ΩçÁΩÆsecrets file = /etc/rsyncd/rsyncd.secrets# ÂÖÅËÆ∏ÂÆ¢Êà∑Á´ØËøûÊé•IPÂú∞ÂùÄhosts allow = 172.24.2.71hosts deny = *ignore errors = yestransfer logging = yeslog format = %t %a %m %f %bauth users = root ÈÖçÁΩÆrsyncd.secrets12345[root@backup ~]# vi /etc/rsyncd/rsyncd.secretsroot:71[root@backup ~]# chmod 600 /etc/rsyncd/rsyncd.secrets ÂêØÂä®rsync1[root@backup ~]# rsync --daemon --config=/etc/rsyncd/rsyncd.conf ËøõÂÖ•node1ÊúçÂä°Âô® 123456789## ÂÆâË£Örsync[root@node1 ~]# yum install rsync## ÈÖçÁΩÆÂØÜÁ†Å[root@node1 ~]# vi /etc/rsync.password71## ÈÖçÁΩÆÊñá‰ª∂ÊùÉÈôê[root@node1 ~]# chmod 600 /etc/rsync.password ÂÆâË£ÖÈÉ®ÁΩ≤sersyncËøõÂÖ•node1ÊúçÂä°Âô®ÔºåÈÖçÁΩÆÁ≥ªÁªüÂèÇÊï∞ 1234567891011121314151617181920212223## Êü•ÁúãÁ≥ªÁªüÊòØÂê¶ÊîØÊåÅ[root@node1 ~]# ll /proc/sys/fs/inotifytotal 0-rw-r--r-- 1 root root 0 Jul 21 10:47 max_queued_events-rw-r--r-- 1 root root 0 Jul 21 11:18 max_user_instances-rw-r--r-- 1 root root 0 Jul 21 10:47 max_user_watches## Êü•ÁúãÁ≥ªÁªüÈªòËÆ§ÂèÇÊï∞ÂÄº[root@node1 ~]# sysctl -a | grep max_queued_eventsfs.inotify.max_queued_events = 16384[root@node1 ~]# sysctl -a | grep max_user_instancesfs.inotify.max_user_instances = 128[root@node1 ~]# sysctl -a | grep max_user_watchesfs.inotify.max_user_watches = 8192## ‰øÆÊîπÂèÇÊï∞ÔºåÂ¶ÇÊûú‰øÆÊîπËøá‰ª•‰∏ãÂèÇÊï∞Âàô‰∏çÁî®ÂÜçÊ¨°‰øÆÊîπ[root@node1 ~]# echo "fs.inotify.max_queued_events = 99999999" &gt;&gt; /etc/sysctl.conf[root@node1 ~]# echo "fs.inotify.max_user_watches = 99999999" &gt;&gt; /etc/sysctl.conf[root@node1 ~]# echo "fs.inotify.max_user_instances = 65535" &gt;&gt; /etc/sysctl.conf[root@node1 ~]# sysctl -p inotifyÂèÇÊï∞ËØ¥ÊòéÔºö max_queued_eventsÔºöinotifyÈòüÂàóÊúÄÂ§ßÈïøÂ∫¶ÔºåÂ¶ÇÊûúÂÄºÂ§™Â∞èÔºå‰ºöÂá∫Áé∞‚Äù Event Queue Overflow ‚ÄúÈîôËØØÔºåÂØºËá¥ÁõëÊéßÊñá‰ª∂‰∏çÂáÜÁ°Æ max_user_watchesÔºöË¶ÅÂêåÊ≠•ÁöÑÊñá‰ª∂ÂåÖÂê´Â§öÂ∞ëÁõÆÂΩïÔºåÂèØ‰ª•Áî®Ôºöfind /home/wwwroot/ -type d | wc -l ÁªüËÆ°ÔºåÂøÖÈ°ª‰øùËØÅmax_user_watchesÂÄºÂ§ß‰∫éÁªüËÆ°ÁªìÊûúÔºàËøôÈáå/home/wwwroot/‰∏∫ÂêåÊ≠•Êñá‰ª∂ÁõÆÂΩïÔºâ max_user_instancesÔºöÊØè‰∏™Áî®Êà∑ÂàõÂª∫inotifyÂÆû‰æãÊúÄÂ§ßÂÄº ‰∏ãËΩΩsersync1[root@node1 ~]# wget --no-check-certificate https://raw.githubusercontent.com/orangle/sersync/master/release/sersync2.5.4_64bit_binary_stable_final.tar.gz ÈÖçÁΩÆsersync1234[root@node1 ~]# tar xf sersync2.5.4_64bit_binary_stable_final.tar.gz [root@node1 ~]# mv GNU-Linux-x86/ /usr/local/sersync[root@node1 ~]# cd /usr/local/sersync/[root@node1 ~]# cp confxml.xml confxml.xml_bak ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂Â¶ÇÊûúÊúâÂ§ö‰∏™ÂêåÊ≠•Ê®°ÂùóÔºåÂàôÊåâ‰∏ãÈù¢Ê†ºÂºè‰æùÊ¨°ÂéªÂÜôÔºå‰ªÖÊõ¥Êîπ 123456789101112131415[root@node1 ~]# vi /usr/local/sersync/confxml.xml&lt;localpath watch="/nfs/data/"&gt; ## ÈúÄË¶ÅÂêåÊ≠•ÁöÑÁõÆÂΩï &lt;remote ip="172.24.2.62" name="71"/&gt; ## Â§á‰ªΩÊúçÂä°Âô®IP&lt;/localpath&gt;## rsyncËÆ§ËØÅÁöÑË¥¶Âè∑ÂíåÂØÜÁ†ÅÔºåstart-trueÊâìÂºÄÊ†°È™å&lt;auth start="true" users="root" passwordfile="/etc/rsync.password"/&gt; ## ÈîôËØØÊó•ÂøóÂ≠òÊîæ‰ΩçÁΩÆÂíåËß¶ÂèëÊó∂Èó¥60Áßí&lt;failLog path="/usr/local/sersync/logs/rsync_fail_log.sh" timeToExecute="60"/&gt;## ÂàõÂª∫Êó•ÂøóÁõÆÂΩï[root@node1 ~]# mkdir -p /usr/local/sersync/logs/[root@node1 ~]# touch /usr/local/sersync/logs/rsync_fail_log.sh ÂêØÂä®sersync123[root@node1 ~]# echo "PATH=$PATH:/usr/local/sersync/" &gt;&gt; /etc/profile[root@node1 ~]# source /etc/profile[root@node1 ~]# /usr/local/sersync/sersync2 -d -r -o /usr/local/sersync/confxml.xml]]></content>
      <categories>
        <category>software</category>
        <category>rsync</category>
      </categories>
      <tags>
        <tag>software</tag>
        <tag>rsync</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[K8S-ËØÅ‰π¶ËøáÊúüÈóÆÈ¢ò]]></title>
    <url>%2Fdocker%2Fk8s%2Fdocker%2Fk8s%2F3%2F</url>
    <content type="text"><![CDATA[K8S-ËØÅ‰π¶ËøáÊúüÈóÆÈ¢òÊúÄËøëÂú®ÂºÄÂèëÁéØÂ¢É‰∏≠ÔºåÂú®master‰ΩøÁî®kubectl get podsÂëΩ‰ª§ÔºåÂèëÁé∞Êä•The connection to the server 172.24.2.69:6443 was refused - did you specify the right host or port?ÁªèËøá‰∏çÊñ≠ÁöÑÁôæÂ∫¶ÂíågoogleÁªà‰∫éÊääÈóÆÈ¢òËß£ÂÜ≥‰∫ÜÔºå‰ΩÜÁΩë‰∏äÁöÑÊñáÁ´†ÈÉΩÂæàÁâáÈù¢ÔºåÊ≤°ÊúâÂÖ∑‰ΩìËØ¥ÊòéÂ§ÑÁêÜÁöÑÊï¥‰∏™ËøáÁ®ãÔºå‰∏ãÈù¢ËØ¥Êòé‰∏Ä‰∏ãÊàëÂú®Êï¥‰∏™Ëß£ÂÜ≥ÈóÆÈ¢òÁöÑËøáÁ®ãÔºåÊàë‰ΩøÁî®ÁöÑk8sÁâàÊú¨ÊòØ1.14.1„ÄÇ ÊâæÂà∞ÈóÆÈ¢ò1„ÄÅÊâßË°åsystemctl status kubeletÔºåÁúã‰∏Ä‰∏ãkuberntesÊòØÂê¶ÂêØÂä®Ê≠£Â∏∏ÔºåËøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúÊòæÁ§∫Unit kubelet.service entered failed state.Âè•ËØùÔºåËØ¥ÊòéÊúçÂä°Ê≤°ÊúâÂêØÂä®ÔºåÊúâÈîôËØØ„ÄÇ 2„ÄÅÊâßË°åjournalctl -xefu kubeletÔºåÊü•Áúãkubernets‰∏≠ÂÖ∑‰ΩìÊä•ÈîôÂéüÂõ†ÔºåÂú®ÊàëËøôÈáåÊòæÁ§∫ÁöÑÊòØPart of the existing bootstrap client certificate is expired: 2020-06-16 05:56:48 +0000 UTCÔºåËØÅ‰π¶Â∑≤ÁªèËøáÊúü‰∫Ü„ÄÇ 3„ÄÅ‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÔºåÊü•ÁúãÊâÄÊúâËØÅ‰π¶ËøáÊúüÊó∂Èó¥ 1for item in `find /etc/kubernetes/pki -maxdepth 2 -name "*.crt"`;do openssl x509 -in $item -text -noout| grep Not;echo ======================$item===============;done or ‰πüÂèØ‰ª•ÂçïÁã¨Êü•ÁúãÊüê‰∏Ä‰∏™ËØÅ‰π¶ËøáÊúüÊó∂Èó¥ 1openssl x509 -noout -dates -in /etc/kubernetes/pki/apiserver.crt Ê≥®ÊÑèÂ∑®ÂùëÔºöKuberntesÈáåÈù¢ÊúâÂæàÂ§öËØÅ‰π¶ÔºåÂÖ∂‰∏≠Êúâ‰∫õËØÅ‰π¶Â§±ÊïàÊó∂Èó¥ÊòØ10Âπ¥ÔºåÊúâ‰∫õËØÅ‰π¶ÊòØ1Âπ¥ÔºåÊàëÂÆâË£ÖÁöÑÊ≠£Â•ΩÂà∞‰∫ÜÊó∂Èó¥ÔºåÊâÄ‰ª•ÁàÜÂá∫‰∫ÜËØÅ‰π¶ËøáÊúüÔºåÁé∞Âú®Áúã‰∏Ä‰∏ãÂ¶Ç‰ΩïËß£ÂÜ≥ Ëß£ÂÜ≥ËØÅ‰π¶ÈóÆÈ¢ò‰øÆÊîπÊ∫êÁ†ÅÔºåË∞ÉÊï¥ËøáÊúüÊó∂Èó¥ 1„ÄÅÂÖãÈöÜÊ∫êÁ†ÅÔºåÂàáÊç¢Âà∞ÂØπÂ∫îÁöÑÂàÜÊîØÔºåÂπ∂‰øÆÊîπÊ∫êÁ†Å 123git clone https://github.com/kubernetes/kubernetes.gitgit checkout -b remotes/origin/release-1.14.1 v1.14.1vi kubernetes/cmd/kubeadm/app/util/pkiutil/pki_helpers.go Â∞ÜNotAfter: time.Now().Add(duration365d).UTC(),‰øÆÊîπ‰∏∫NotAfter: time.Now().Add(duration365d * 10).UTC(), 2„ÄÅ‰∏ãËΩΩgoËØ≠Ë®ÄÁºñËØëÁéØÂ¢ÉÔºåÂπ∂ÁºñËØë 1234docker run --rm -v &#123;Ê∫êÁ†ÅË∑ØÂæÑ&#125;:/go/src/k8s.io/kubernetes -it icyboy/k8s_build:v1.14.1 bashcd /go/src/k8s.io/kubernetesmake all WHAT=cmd/kubeadm GOFLAGS=-vexit 3„ÄÅÊõøÊç¢Êú¨Âú∞ÁöÑkubeadmÊñá‰ª∂ 12cp /usr/bin/kubeadm /usr/bin/kubeadm-bakln -s kubernetes/_output/local/bin/linux/amd64/kubeadm /usr/bin/kubeadm 4„ÄÅÊü•ÁúãÊòØÂê¶ÊõøÊç¢ÊàêÂäü 1234567kubeadm versionÊñ∞ÁöÑkubeadm version: &amp;version.Info&#123;Major:"1", Minor:"14+", GitVersion:"v1.14.1-dirty", GitCommit:"b7394102d6ef778017f2ca4046abbaa23b88c290", GitTreeState:"dirty", BuildDate:"2020-06-17T08:02:51Z", GoVersion:"go1.12.1", Compiler:"gc", Platform:"linux/amd64"&#125;ÊóßÁöÑkubeadm version: &amp;version.Info&#123;Major:"1", Minor:"14+", GitVersion:"v1.14.1", GitCommit:"b7394102d6ef778017f2ca4046abbaa23b88c290", GitTreeState:"dirty", BuildDate:"2020-06-17T08:02:51Z", GoVersion:"go1.12.1", Compiler:"gc", Platform:"linux/amd64"&#125; ÂàõÂª∫Êñ∞ËØÅ‰π¶ÔºåÈáçÊñ∞ËΩΩÂÖ• 1„ÄÅÂàõÂª∫kubeadm.confÊñá‰ª∂ 123456touch kubeadm.confapiVersion: kubeadm.k8s.io/v1beta1kind: ClusterConfigurationkubernetesVersion: v1.14.3 ## Ê≥®ÊÑèÔºöËøô‰∏™ÊòØ‰Ω†k8sÁöÑÁâàÊú¨Âè∑imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers 2„ÄÅÁîüÊàêËØÅ‰π¶ 123cp -r /etc/kubernetes /etc/kubernetes-bakrm -rf /etc/kubernetes/pkikubeadm alpha certs renew all --config=~/kubeadm.conf 3„ÄÅÊü•ÁúãËØÅ‰π¶ËøáÊúüÊó∂Èó¥ 1for item in `find /etc/kubernetes/pki -maxdepth 2 -name "*.crt"`;do openssl x509 -in $item -text -noout| grep Not;echo ======================$item===============;done 4„ÄÅÈáçÊñ∞ËΩΩÂÖ• 1234567# ‰∏ãÈù¢ËøôÂá†‰∏™Êñá‰ª∂ÔºåÂøÖÈ°ªÂà†‰∫ÜÔºàÂêéÈù¢‰ºöËá™Âä®ÁîüÊàêÔºâÔºå‰∏çÁÑ∂‰ºöÊòæÁ§∫Â∑≤Â≠òÂú®ÔºåÊó†Ê≥ïËΩΩÂÖ•rm -rf /etc/kubernetes/admin.confrm -rf /etc/kubernetes/kubelet.confrm -rf /etc/kubernetes/controller-manager.confrm -rf /etc/kubernetes/scheduler.confkubeadm init phase kubeconfig all 5„ÄÅÈáçÂêØkuberntes 1systemctl restart kubelet ÊØè‰∏Ä‰∏™ÁâàÊú¨Ëß£ÂÜ≥ÊÄùË∑Ø‰∏çÂ§™‰∏ÄÊ†∑ÔºåÂÖ∂‰ªñÁâàÊú¨ÂèØ‰ª•ÂèÇËÄÉÊñáÁåÆÔºöhttp://team.jiunile.com/blog/2018/12/k8s-kubeadm-ca-upgdate.html]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Oracle-"WM_CONCAT": Ê†áËØÜÁ¨¶Êó†Êïà]]></title>
    <url>%2Foracle%2Foracle%2Fdebug%2F1%2F</url>
    <content type="text"><![CDATA[‚ÄúWM_CONCAT‚Äù: Ê†áËØÜÁ¨¶Êó†ÊïàÊ¶ÇËø∞11gr2Âíå12C‰∏äÂ∑≤ÁªèÊëíÂºÉ‰∫Üwm_concatÂáΩÊï∞ÔºåÂΩìÊó∂Êàë‰ª¨ÂæàÂ§öÁ®ãÂ∫èÂëòÂú®Á®ãÂ∫è‰∏≠Á°Æ‰ΩøÁî®‰∫ÜËØ•ÂáΩÊï∞ÔºåÂØºËá¥Á®ãÂ∫èÂá∫Áé∞ÈîôËØØÔºå‰∏∫‰∫ÜÂáèËΩªÁ®ãÂ∫èÂëò‰øÆÊîπÁ®ãÂ∫èÁöÑÂ∑•‰ΩúÈáèÔºåÂè™ÊúâÈÄöËøáÊâãÂ∑•ÂàõÂª∫‰∏™wm_concatÂáΩÊï∞ÔºåÊù•‰∏¥Êó∂Ëß£ÂÜ≥ËØ•ÈóÆÈ¢òÔºå‰ΩÜÊòØÊ≥®ÊÑèÔºåÂèäÊó∂ÂàõÂª∫‰∫ÜËØ•ÂáΩÊï∞ÔºåÂú®‰ΩøÁî®ÁöÑËøáÁ®ã‰∏≠Ôºå‰πüÈúÄË¶ÅÁî®to_char(wm_concat())ÊñπÂºèÔºåÊâçËÉΩÂÆåÂÖ®Êõø‰ª£‰πãÂâçÁöÑÂ∫îÁî®„ÄÇ ÊñπÊ°à Ëß£ÈîÅsysÁî®Êà∑ 1alter user sys account unlock; ÂàõÂª∫ÂåÖÔºåÂåÖ‰ΩìÔºåÂáΩÊï∞ 123456789101112131415161718CREATE OR REPLACETYPE WM_CONCAT_IMPL AS OBJECT ( CURR_STR VARCHAR2(32767),STATICFUNCTION ODCIAGGREGATEINITIALIZE(SCTX IN OUT WM_CONCAT_IMPL) RETURN NUMBER, MEMBERFUNCTION ODCIAGGREGATEITERATE(SELF IN OUT WM_CONCAT_IMPL, P1 IN VARCHAR2) RETURN NUMBER, MEMBER FUNCTION ODCIAGGREGATETERMINATE(SELF IN WM_CONCAT_IMPL, RETURNVALUE OUT VARCHAR2, FLAGS IN NUMBER) RETURN NUMBER, MEMBER FUNCTION ODCIAGGREGATEMERGE(SELF IN OUT WM_CONCAT_IMPL, SCTX2 IN WM_CONCAT_IMPL) RETURN NUMBER ); ÂÆö‰πâÁ±ªÂûãbody 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748CREATE OR REPLACETYPE BODY WM_CONCAT_IMPL IS STATICFUNCTION ODCIAGGREGATEINITIALIZE(SCTX IN OUT WM_CONCAT_IMPL) RETURN NUMBER ISBEGIN SCTX := WM_CONCAT_IMPL(NULL) ;RETURN ODCICONST.SUCCESS;END;MEMBERFUNCTION ODCIAGGREGATEITERATE(SELF IN OUT WM_CONCAT_IMPL, P1 IN VARCHAR2) RETURN NUMBER ISBEGIN IF (CURR_STR IS NOT NULL) THEN CURR_STR := CURR_STR || ',' || P1;ELSE CURR_STR := P1;ENDIF;RETURN ODCICONST.SUCCESS;END;MEMBERFUNCTION ODCIAGGREGATETERMINATE(SELF IN WM_CONCAT_IMPL, RETURNVALUE OUT VARCHAR2, FLAGS IN NUMBER) RETURN NUMBER ISBEGIN RETURNVALUE := CURR_STR ;RETURN ODCICONST.SUCCESS;END;MEMBERFUNCTION ODCIAGGREGATEMERGE(SELF IN OUT WM_CONCAT_IMPL, SCTX2 IN WM_CONCAT_IMPL) RETURN NUMBER ISBEGIN IF (SCTX2.CURR_STR IS NOT NULL) THEN SELF.CURR_STR := SELF.CURR_STR || ',' || SCTX2.CURR_STR ;ENDIF;RETURN ODCICONST.SUCCESS;END;END; Ëá™ÂÆö‰πâË°åÂèòÂàóÂáΩÊï∞ 1234CREATE OR REPLACEFUNCTION wm_concat(P1 VARCHAR2) RETURN VARCHAR2 AGGREGATE USING WM_CONCAT_IMPL ; ÂàõÂª∫Âêå‰πâËØçÂπ∂ÊéàÊùÉ 1234create public synonym WM_CONCAT_IMPL for sys.WM_CONCAT_IMPL;create public synonym wm_concat for sys.wm_concat;grant execute on WM_CONCAT_IMPL to public;grant execute on wm_concat to public; Ê≥®ÊÑè DBeaverËøôÁßçÁ±ª‰ººÁöÑÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåÊó†Ê≥ïÊâßË°å‰∏äËø∞SQLËÑöÊú¨ÔºåÂª∫ËÆÆ‰ΩøÁî®PLSQL]]></content>
      <categories>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊµÖË∞àÁ≥ªÁªüÈ´òÂèØÁî®Âá†‰∏™9]]></title>
    <url>%2F%E6%9E%B6%E6%9E%84%2Fsystem%2F1%2F</url>
    <content type="text"><![CDATA[ÊµÖË∞àÁ≥ªÁªüÈ´òÂèØÁî®Âá†‰∏™9Ê¶ÇËø∞ÁªèÂ∏∏ÁúãÂà∞ÂêÑÁßçÊäÄÊúØÊñáÁ´†ÊàñËÄÖÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰ªãÁªçËØ¥Á≥ªÁªüÁöÑÂèØÁî®ÊÄßËææÂà∞‰∫ÜÂ§öÂ∞ë‰∏™9ÔºåÈÇ£‰πàÊâÄË∞ì‚ÄùÂá†‰∏™9‚ÄúÂà∞Â∫ïÊòØÊÄé‰πàËÆ°ÁÆóÁöÑÔºüÂèàÊÑèÂë≥ÁùÄ‰ªÄ‰πàÔºüÊàë‰ª¨ÁÆÄÂçïËÆ°ÁÆóÂàÜÊûê‰∏ãÁúãÁúã„ÄÇÊâÄË∞ì‚Äù1‰∏™9‚ÄúÊòØÊåá90%Ôºå‚Äù2‰∏™9‚ÄúÊòØÊåá99%Ôºå‚Äù3‰∏™9‚ÄúÊòØÊåá99.9%Ôºå‰æùÊ¨°Á±ªÊé®„ÄÇ ÂèØÁî®ÊÄßÁöÑÂèçÈù¢ÊòØÊïÖÈöúÊó∂Èó¥ÔºåÁΩëÁ´ôÊàñËÄÖÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰ºöÂõ†‰∏∫ÂæàÂ§öÂéüÂõ†ÂØºËá¥‰∏çÂèØÁî®ÔºåÊØîÂ¶ÇÔºöÁ®ãÂ∫èbugÔºõËøêÁª¥Êõ¥Êñ∞ÈîôËØØÔºõÁéØÂ¢ÉÈÖçÁΩÆÂçáÁ∫ßÂèòÂåñÔºõÊú∫Âô®Á°¨‰ª∂ÊïÖÈöúÔºõË¢´ÊÅ∂ÊÑèÊîªÂáªÔºõÁΩëÂÖ≥‰∏çÂ∞èÂøÉË∏¢Êéâ‰∫ÜÁΩëÁ∫ø/ÁîµÊ∫êÊèíÂ∫ßÔºõÂ∏ÇÊîøÊñΩÂ∑•ÊåñÊñ≠‰∫ÜÂÖâÁ∫§ÔºõÁ®ãÂ∫èÁåøÂà†Â∫ìË∑ëË∑ØÔºõÂú∞ÈúáÊµ∑Âï∏Ëá™ÁÑ∂ÁÅæÂÆ≥Á≠âÁ≠â„ÄÇ ËÆ°ÁÆóÂÖ¨ÂºèÂ¶ÇÊûúÊåâÁÖßÂπ¥‰∏∫Âçï‰ΩçËÆ°ÁÆóÁ≥ªÁªüÁöÑÊïÖÈöúÊó∂Èó¥ÔºåÂÖ¨ÂºèÂ¶Ç‰∏ãÔºö ÊïÖÈöúÊó∂Èó¥ÁßíÊï∞=(1-ÂèØÁî®ÊÄß) 365 24 * 3600 ËÆ°ÁÆó6‰∏™9‰ª•ÂÜÖÁöÑÊÉÖÂÜµÂæóÂà∞Â¶Ç‰∏ãÁªìÊûúÔºö ÂèØÁî®ÊÄßÊåáÊ†á ËÆ°ÁÆóÂÖ¨Âºè ‰∏çÂèØÁî®Êó∂Èó¥ 99.9% 0.1% * 365 * 24 * 60 525.6ÂàÜÈíü 99.99% 0.01% * 365 * 24 * 60 52.56ÂàÜÈíü 99.999% 0.001% * 365 * 24 * 60 5.256ÂàÜÈíü 99.9999% 0.0001% * 365 * 24 * 60 * 60 31.536Áßí ÁªìËÆ∫ÂèØËßÅÔºåÂ¶ÇÊûúÂè™Êúâ1‰∏™9ÁöÑÂèØÁî®ÊÄßÔºå‰ΩìÈ™åÊòØÊûÅÂÖ∂Á≥üÁ≥ïÁöÑÔºå1Âπ¥‰∏ãÊù•Êúâ1‰∏™Â§öÊúà‰∏çËÉΩ‰ΩøÁî®„ÄÇ‰∏Ä‰∫õÂ§ßÂûãÁΩëÁ´ôÂè∑Áß∞ËÉΩËøáÂÅöÂà∞4‰∏™9ÔºåÈÇ£‰πà1Âπ¥Êúâ52ÂàÜÈíüÊïÖÈöúÊó∂Èó¥ÔºåÂÖ∂ÂÆûÂ∑≤ÁªèÊòØ‰∏çÈîôÁöÑÊÉÖÂÜµ‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>Êû∂ÊûÑ</category>
      </categories>
      <tags>
        <tag>Êû∂ÊûÑ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êê≠Âª∫ IPsec VPN ÊúçÂä°]]></title>
    <url>%2Fsoftware%2Fvpn%2Fsoftware%2Fvpn-1%2F</url>
    <content type="text"><![CDATA[Êê≠Âª∫ IPsec VPN ÊúçÂä°Ê¶ÇË¶ÅÊàë‰ª¨Âú®ÂºÄÂèëÁöÑÊó∂ÂÄôÁªèÂ∏∏ÈÅáËßÅÂêØÂä®ÊúçÂä°ËøáÂ§öÔºåÂÜÖÂ≠òÊ∂àËÄóËøáÂ§ßÔºåÂÆâÂÖ®ÈóÆÈ¢òÔºåÁ≠âÔºåËÆ©Êàë‰ª¨ÈùûÂ∏∏Â§¥ÁóõÔºåÁâπÂà´ÊòØÂØπSpring CloudÂæÆÊúçÂä°ÁöÑÂºÄÂèë„ÄÇÂú®ËøôÈáåÊúâÂêåÂ≠¶‰ºöËØ¥ÊääËøô‰∫õÈÉΩÈÉ®ÁΩ≤Âà∞Â±ÄÂüüÁΩëÁöÑÊúçÂä°Âô®‰∏äÂ∞±Ë°å‰∫ÜÔºå‰ΩÜÂ¶ÇÊûúËµÑÊ∫êÊúâÈôêÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂØπËµÑÊ∫êÁöÑÂà©Áî®ÁéáÂ∫îËØ•ÊúâÊâÄËÄÉËôë„ÄÇ Â∞ÜÈÉ®ÂàÜËµÑÊ∫êÈÉ®ÁΩ≤Âà∞‰∫ëÊúçÂä°Âô®ÔºåÊê≠Âª∫‰∏Ä‰∏™ÁöÑVPNÊúçÂä°ÔºåÂπ∂ÈöîÁ¶ªÂ§ñÁΩëÔºåËøôÊ†∑ÂÅöËÉΩËÆ©Êàë‰ª¨ÂæàÂ•ΩÁöÑËß£ÂÜ≥‰∏äÈù¢ÁöÑÈóÆÈ¢ò„ÄÇ Êê≠Âª∫&amp;ËøêË°å‰∏ãËΩΩipsec-vpn-server 1docker pull hwdsl2/ipsec-vpn-server ÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè Ëøô‰∏™ Docker ÈïúÂÉè‰ΩøÁî®‰ª•‰∏ãÂá†‰∏™ÂèòÈáèÔºåÂèØ‰ª•Âú®‰∏Ä‰∏™ vpn.env Êñá‰ª∂‰∏≠ÂÆö‰πâ 123VPN_IPSEC_PSK=your_ipsec_pre_shared_keyVPN_USER=your_vpn_usernameVPN_PASSWORD=your_vpn_password ËøôÂ∞ÜÂàõÂª∫‰∏Ä‰∏™Áî®‰∫é VPN ÁôªÂΩïÁöÑÁî®Êà∑Ë¥¶Êà∑ÔºåÂÆÉÂèØ‰ª•Âú®‰Ω†ÁöÑÂ§ö‰∏™ËÆæÂ§á‰∏ä‰ΩøÁî®*„ÄÇ IPsec PSK (È¢ÑÂÖ±‰∫´ÂØÜÈí•) Áî± VPN_IPSEC_PSK ÁéØÂ¢ÉÂèòÈáèÊåáÂÆö„ÄÇ VPN Áî®Êà∑ÂêçÂíåÂØÜÁ†ÅÂàÜÂà´Âú® VPN_USER Âíå VPN_PASSWORD ‰∏≠ÂÆö‰πâ„ÄÇ ÊîØÊåÅÂàõÂª∫È¢ùÂ§ñÁöÑ VPN Áî®Êà∑ÔºåÂ¶ÇÊûúÈúÄË¶ÅÔºåÂèØ‰ª•ÂÉè‰∏ãÈù¢ËøôÊ†∑Âú®‰Ω†ÁöÑ env Êñá‰ª∂‰∏≠ÂÆö‰πâ„ÄÇÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÂøÖÈ°ªÂàÜÂà´‰ΩøÁî®Á©∫Ê†ºËøõË°åÂàÜÈöîÔºåÂπ∂‰∏îÁî®Êà∑Âêç‰∏çËÉΩÊúâÈáçÂ§ç„ÄÇÊâÄÊúâÁöÑ VPN Áî®Êà∑Â∞ÜÂÖ±‰∫´Âêå‰∏Ä‰∏™ IPsec PSK„ÄÇ 12VPN_ADDL_USERS=additional_username_1 additional_username_2VPN_ADDL_PASSWORDS=additional_password_1 additional_password_2 Ê≥®Ôºö Âú®‰Ω†ÁöÑ env Êñá‰ª∂‰∏≠Ôºå‰∏çË¶Å‰∏∫ÂèòÈáèÂÄºÊ∑ªÂä† &quot;&quot; ÊàñËÄÖ &#39;&#39;ÔºåÊàñÂú® = ‰∏§ËæπÊ∑ªÂä†Á©∫Ê†º„ÄÇ‰∏çË¶ÅÂú®ÂÄº‰∏≠‰ΩøÁî®Ëøô‰∫õÂ≠óÁ¨¶Ôºö \ &quot; &#39;„ÄÇ‰∏Ä‰∏™ÂÆâÂÖ®ÁöÑ IPsec PSK Â∫îËØ•Ëá≥Â∞ëÂåÖÂê´ 20 ‰∏™ÈöèÊú∫Â≠óÁ¨¶„ÄÇ ÊâÄÊúâËøô‰∫õÁéØÂ¢ÉÂèòÈáèÂØπ‰∫éÊú¨ÈïúÂÉèÈÉΩÊòØÂèØÈÄâÁöÑÔºå‰πüÂ∞±ÊòØËØ¥Êó†ÈúÄÂÆö‰πâÂÆÉ‰ª¨Â∞±ÂèØ‰ª•Êê≠Âª∫ IPsec VPN ÊúçÂä°Âô®„ÄÇËØ¶ÊÉÖËØ∑ÂèÇËßÅ‰ª•‰∏ãÈÉ®ÂàÜ„ÄÇ ËøêË°å 12345678docker run \ --name ipsec-vpn-server \ --env-file ./vpn.env \ --restart=always \ -p 500:500/udp \ -p 4500:4500/udp \ -d --privileged \ hwdsl2/ipsec-vpn-server Á´ØÂè£ÊòØÂõ∫ÂÆöÁöÑÔºåÂª∫ËÆÆ‰∏çÂÅö‰øÆÊîπÔºåÈòøÈáå‰∫ëÂÆâÂÖ®ÁªÑ‰∏≠ÂøÖÈ°ªË¶ÅÂ¢ûÂä†UDPÔºà500Âíå4500ÔºâÁ´ØÂè£„ÄÇ ÈÖçÁΩÆ IPsec/L2TP VPN ÂÆ¢Êà∑Á´ØWin10 Âè≥ÈîÆÂçïÂáªÁ≥ªÁªüÊâòÁõò‰∏≠ÁöÑÊó†Á∫ø/ÁΩëÁªúÂõæÊ†á„ÄÇ ÈÄâÊã© ÊâìÂºÄÁΩëÁªúÂíåÂÖ±‰∫´‰∏≠ÂøÉ„ÄÇÊàñËÄÖÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî® Windows 10 ÁâàÊú¨ 1709 Êàñ‰ª•‰∏äÔºåÈÄâÊã© ÊâìÂºÄ‚ÄùÁΩëÁªúÂíå Internet‚ÄùËÆæÁΩÆÔºåÁÑ∂ÂêéÂú®ÊâìÂºÄÁöÑÈ°µÈù¢‰∏≠ÂçïÂáª ÁΩëÁªúÂíåÂÖ±‰∫´‰∏≠ÂøÉ„ÄÇ ÂçïÂáª ËÆæÁΩÆÊñ∞ÁöÑËøûÊé•ÊàñÁΩëÁªú„ÄÇ ÈÄâÊã© ËøûÊé•Âà∞Â∑•‰ΩúÂå∫ÔºåÁÑ∂ÂêéÂçïÂáª ‰∏ã‰∏ÄÊ≠•„ÄÇ ÂçïÂáª ‰ΩøÁî®ÊàëÁöÑInternetËøûÊé• (VPN)„ÄÇ Âú® InternetÂú∞ÂùÄ Â≠óÊÆµ‰∏≠ËæìÂÖ•‰Ω†ÁöÑ VPN ÊúçÂä°Âô® IP„ÄÇ Âú® ÁõÆÊ†áÂêçÁß∞ Â≠óÊÆµ‰∏≠ËæìÂÖ•‰ªªÊÑèÂÜÖÂÆπ„ÄÇÂçïÂáª ÂàõÂª∫„ÄÇ ËøîÂõû ÁΩëÁªúÂíåÂÖ±‰∫´‰∏≠ÂøÉ„ÄÇÂçïÂáªÂ∑¶‰æßÁöÑ Êõ¥ÊîπÈÄÇÈÖçÂô®ËÆæÁΩÆ„ÄÇ Âè≥ÈîÆÂçïÂáªÊñ∞ÂàõÂª∫ÁöÑ VPN ËøûÊé•ÔºåÂπ∂ÈÄâÊã© Â±ûÊÄß„ÄÇ ÂçïÂáª ÂÆâÂÖ® ÈÄâÈ°πÂç°Ôºå‰ªé VPN Á±ªÂûã ‰∏ãÊãâËèúÂçï‰∏≠ÈÄâÊã© ‚Äú‰ΩøÁî® IPsec ÁöÑÁ¨¨ 2 Â±ÇÈößÈÅìÂçèËÆÆ (L2TP/IPSec)‚Äù„ÄÇ ÂçïÂáª ÂÖÅËÆ∏‰ΩøÁî®Ëøô‰∫õÂçèËÆÆ„ÄÇÈÄâ‰∏≠ ‚ÄúË¥®ËØ¢Êè°ÊâãË∫´‰ªΩÈ™åËØÅÂçèËÆÆ (CHAP)‚Äù Âíå ‚ÄúMicrosoft CHAP ÁâàÊú¨ 2 (MS-CHAP v2)‚Äù Â§çÈÄâÊ°Ü„ÄÇ ÂçïÂáª È´òÁ∫ßËÆæÁΩÆ ÊåâÈíÆ„ÄÇ ÂçïÂáª ‰ΩøÁî®È¢ÑÂÖ±‰∫´ÂØÜÈí•‰ΩúË∫´‰ªΩÈ™åËØÅ Âπ∂Âú® ÂØÜÈí• Â≠óÊÆµ‰∏≠ËæìÂÖ•‰Ω†ÁöÑ VPN IPsec PSK„ÄÇ ÂçïÂáª Á°ÆÂÆö ÂÖ≥Èó≠ È´òÁ∫ßËÆæÁΩÆ„ÄÇ ÂçïÂáª Á°ÆÂÆö ‰øùÂ≠ò VPN ËøûÊé•ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ„ÄÇ Ê≥®Ôºö Âú®È¶ñÊ¨°ËøûÊé•‰πãÂâçÈúÄË¶Å‰øÆÊîπ‰∏ÄÊ¨°Ê≥®ÂÜåË°®„ÄÇËØ∑ÂèÇËßÅ‰∏ãÈù¢ÁöÑËØ¥Êòé„ÄÇ Âè¶Â§ñÔºåÈô§‰∫ÜÊåâÁÖß‰ª•‰∏äÊ≠•È™§Êìç‰ΩúÔºå‰Ω†‰πüÂèØ‰ª•ËøêË°å‰∏ãÈù¢ÁöÑ Windows PowerShell ÂëΩ‰ª§Êù•ÂàõÂª∫ VPN ËøûÊé•„ÄÇÂ∞Ü ‰Ω†ÁöÑ VPN ÊúçÂä°Âô® IP Âíå ‰Ω†ÁöÑ VPN IPsec PSK Êç¢Êàê‰Ω†Ëá™Â∑±ÁöÑÂÄºÔºåÁî®ÂçïÂºïÂè∑Êã¨Ëµ∑Êù•Ôºö 12345# ‰∏ç‰øùÂ≠òÂëΩ‰ª§Ë°åÂéÜÂè≤ËÆ∞ÂΩïSet-PSReadlineOption ‚ÄìHistorySaveStyle SaveNothing# ÂàõÂª∫ VPN ËøûÊé•Add-VpnConnection -Name &apos;My IPsec VPN&apos; -ServerAddress &apos;‰Ω†ÁöÑ VPN ÊúçÂä°Âô® IP&apos; -L2tpPsk &apos;‰Ω†ÁöÑ VPN IPsec PSK&apos; -TunnelType L2tp -EncryptionLevel Required -AuthenticationMethod Chap,MSChapv2 -Force -RememberCredential -PassThru# ÂøΩÁï• data encryption Ë≠¶ÂëäÔºàÊï∞ÊçÆÂú® IPsec ÈößÈÅì‰∏≠Â∑≤Ë¢´Âä†ÂØÜÔºâ ÊïÖÈöúÊéíÊü•Windows ÈîôËØØ 809 ÈîôËØØ 809ÔºöÊó†Ê≥ïÂª∫Á´ãËÆ°ÁÆóÊú∫‰∏é VPN ÊúçÂä°Âô®‰πãÈó¥ÁöÑÁΩëÁªúËøûÊé•ÔºåÂõ†‰∏∫ËøúÁ®ãÊúçÂä°Âô®Êú™ÂìçÂ∫î„ÄÇËøôÂèØËÉΩÊòØÂõ†‰∏∫Êú™Â∞ÜËÆ°ÁÆóÊú∫‰∏éËøúÁ®ãÊúçÂä°Âô®‰πãÈó¥ÁöÑÊüêÁßçÁΩëÁªúËÆæÂ§á(Â¶ÇÈò≤ÁÅ´Â¢ô„ÄÅNAT„ÄÅË∑ØÁî±Âô®Á≠â)ÈÖçÁΩÆ‰∏∫ÂÖÅËÆ∏ VPN ËøûÊé•„ÄÇËØ∑‰∏éÁÆ°ÁêÜÂëòÊàñÊúçÂä°Êèê‰æõÂïÜËÅîÁ≥ª‰ª•Á°ÆÂÆöÂì™ÁßçËÆæÂ§áÂèØËÉΩ‰∫ßÁîüÊ≠§ÈóÆÈ¢ò„ÄÇ Ë¶ÅËß£ÂÜ≥Ê≠§ÈîôËØØÔºåÂú®È¶ñÊ¨°ËøûÊé•‰πãÂâçÈúÄË¶Å‰øÆÊîπ‰∏ÄÊ¨°Ê≥®ÂÜåË°®Ôºå‰ª•Ëß£ÂÜ≥ VPN ÊúçÂä°Âô® Âíå/Êàñ ÂÆ¢Êà∑Á´Ø‰∏é NAT ÔºàÊØîÂ¶ÇÂÆ∂Áî®Ë∑ØÁî±Âô®ÔºâÁöÑÂÖºÂÆπÈóÆÈ¢ò„ÄÇËøêË°å‰ª•‰∏ãÂëΩ‰ª§„ÄÇÂÆåÊàêÂêéÂøÖÈ°ªÈáçÂêØËÆ°ÁÆóÊú∫„ÄÇ 1REG ADD HKLM\SYSTEM\CurrentControlSet\Services\PolicyAgent /v AssumeUDPEncapsulationContextOnSendRule /t REG_DWORD /d 0x2 /f Âè¶Â§ñÔºåÊüê‰∫õ‰∏™Âà´ÁöÑ Windows Á≥ªÁªüÈÖçÁΩÆÁ¶ÅÁî®‰∫Ü IPsec Âä†ÂØÜÔºåÊ≠§Êó∂‰πü‰ºöÂØºËá¥ËøûÊé•Â§±Ë¥•„ÄÇË¶ÅÈáçÊñ∞ÂêØÁî®ÂÆÉÔºåÂèØ‰ª•ËøêË°å‰ª•‰∏ãÂëΩ‰ª§Âπ∂ÈáçÂêØ„ÄÇ 1REG ADD HKLM\SYSTEM\CurrentControlSet\Services\RasMan\Parameters /v ProhibitIpSec /t REG_DWORD /d 0x0 /f Windows ÈîôËØØ 628 Êàñ 766 ÈîôËØØ 628ÔºöÂú®ËøûÊé•ÂÆåÊàêÂâçÔºåËøûÊé•Ë¢´ËøúÁ®ãËÆ°ÁÆóÊú∫ÁªàÊ≠¢„ÄÇ ÈîôËØØ 766ÔºöÊâæ‰∏çÂà∞ËØÅ‰π¶„ÄÇ‰ΩøÁî®ÈÄöËøá IPSec ÁöÑ L2TP ÂçèËÆÆÁöÑËøûÊé•Ë¶ÅÊ±ÇÂÆâË£Ö‰∏Ä‰∏™Êú∫Âô®ËØÅ‰π¶„ÄÇÂÆÉ‰πüÂè´ÂÅöËÆ°ÁÆóÊú∫ËØÅ‰π¶„ÄÇ Ë¶ÅËß£ÂÜ≥Ëøô‰∫õÈîôËØØÔºåËØ∑Êåâ‰ª•‰∏ãÊ≠•È™§Êìç‰ΩúÔºö Âè≥ÈîÆÂçïÂáªÁ≥ªÁªüÊâòÁõò‰∏≠ÁöÑÊó†Á∫ø/ÁΩëÁªúÂõæÊ†á„ÄÇ ÈÄâÊã© ÊâìÂºÄÁΩëÁªúÂíåÂÖ±‰∫´‰∏≠ÂøÉ„ÄÇÊàñËÄÖÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî® Windows 10 ÁâàÊú¨ 1709 Êàñ‰ª•‰∏äÔºåÈÄâÊã© ÊâìÂºÄ‚ÄùÁΩëÁªúÂíå Internet‚ÄùËÆæÁΩÆÔºåÁÑ∂ÂêéÂú®ÊâìÂºÄÁöÑÈ°µÈù¢‰∏≠ÂçïÂáª ÁΩëÁªúÂíåÂÖ±‰∫´‰∏≠ÂøÉ„ÄÇ ÂçïÂáªÂ∑¶‰æßÁöÑ Êõ¥ÊîπÈÄÇÈÖçÂô®ËÆæÁΩÆ„ÄÇÂè≥ÈîÆÂçïÂáªÊñ∞ÁöÑ VPN ËøûÊé•ÔºåÂπ∂ÈÄâÊã© Â±ûÊÄß„ÄÇ ÂçïÂáª ÂÆâÂÖ® ÈÄâÈ°πÂç°Ôºå‰ªé VPN Á±ªÂûã ‰∏ãÊãâËèúÂçï‰∏≠ÈÄâÊã© ‚Äú‰ΩøÁî® IPsec ÁöÑÁ¨¨ 2 Â±ÇÈößÈÅìÂçèËÆÆ (L2TP/IPSec)‚Äù„ÄÇ ÂçïÂáª ÂÖÅËÆ∏‰ΩøÁî®Ëøô‰∫õÂçèËÆÆ„ÄÇÈÄâ‰∏≠ ‚ÄúË¥®ËØ¢Êè°ÊâãË∫´‰ªΩÈ™åËØÅÂçèËÆÆ (CHAP)‚Äù Âíå ‚ÄúMicrosoft CHAP ÁâàÊú¨ 2 (MS-CHAP v2)‚Äù Â§çÈÄâÊ°Ü„ÄÇ ÂçïÂáª È´òÁ∫ßËÆæÁΩÆ ÊåâÈíÆ„ÄÇ ÂçïÂáª ‰ΩøÁî®È¢ÑÂÖ±‰∫´ÂØÜÈí•‰ΩúË∫´‰ªΩÈ™åËØÅ Âπ∂Âú® ÂØÜÈí• Â≠óÊÆµ‰∏≠ËæìÂÖ•‰Ω†ÁöÑ VPN IPsec PSK„ÄÇ ÂçïÂáª Á°ÆÂÆö ÂÖ≥Èó≠ È´òÁ∫ßËÆæÁΩÆ„ÄÇ ÂçïÂáª Á°ÆÂÆö ‰øùÂ≠ò VPN ËøûÊé•ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ„ÄÇ ÂèÇËÄÉÊñáÁåÆÔºö https://github.com/hwdsl2/setup-ipsec-vpn/blob/master/docs/clients-zh.md https://github.com/hwdsl2/setup-ipsec-vpn]]></content>
      <categories>
        <category>software</category>
        <category>vpn</category>
      </categories>
      <tags>
        <tag>software</tag>
        <tag>vpn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Cloud ÈÖçÁΩÆ‰∏≠ÂøÉ Github SSHÈ™åËØÅÔºà‰∫åÔºâ]]></title>
    <url>%2Fjava%2Fspring-cloud%2Fjava%2Fspring-cloud%2Fconfig-server-github-ssh-2%2F</url>
    <content type="text"><![CDATA[Spring Cloud ÈÖçÁΩÆ‰∏≠ÂøÉ Github SSHÈ™åËØÅÔºà‰∫åÔºâÊ¶ÇËø∞Âú®‰∏ä‰∏ÄÁ´†ËÆ≤Ëß£‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî®Spring CloudÈÖçÁΩÆ‰∏≠ÂøÉËØªÂèñGithub SSHÁöÑÊñá‰ª∂ÂêéÔºåÂèëÁé∞Â¶ÇÊûúÂ∞Üspring.cloud.config.server.git.private-key=ÈÖçÁΩÆÁöÑÂÄºËÆæÁΩÆ‰∏∫‰∏Ä‰∏™ÁéØÂ¢ÉÂèòÈáèÔºåÂú®JVM:JAVA_OPSÊòØ‰∏çÂèØË°åÁöÑÔºåÂú®ÁΩë‰∏äÊâæ‰∫ÜÂæàÂ§öËµÑÊñôÂõΩÂÜÖÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØ‰ΩøÁî®private_key_fileÔºå‰ΩÜÂÆòÊñπÂπ∂Êú™Êèê‰æõÔºåÊúÄÂêéÊâæÂà∞‰∫ÜËß£ÂÜ≥ÊñπÊ°àÔºå‰∏ãÈù¢Â∞ÜÁªôÂá∫Âπ≤Ë¥ßÊèê‰æõÁªôÂ§ßÂÆ∂„ÄÇ Ê≥®ÊÑèÔºöÂâçÈù¢Â∑•‰Ωú‰∏çÂú®ÂèôËø∞ÔºåËØ∑Ëá™Ë°åÂèÇËÄÉÔºåSpring Cloud ÈÖçÁΩÆ‰∏≠ÂøÉ Github SSHÈ™åËØÅÔºà‰∏ÄÔºâ Ê†°È™åÂØÜÈí•Áª≠ÂØÜÈí•ÁîüÊàêÂêéÔºåÊâßË°åssh -vT git@github.comËøõË°åËøûÊé•ÁöÑË∫´‰ªΩÈ™åËØÅÊµãËØïÔºåÁÑ∂ÂêéÂú®Â¢ûÂä†Âà∞github‰∏≠ÔºåÂ¶ÇÊûúÊúçÂä°Âô®Ë¶Å‰ΩøÁî®ÔºåÁõ¥Êé•Â∞Üid_rsaÔºåknown_hostsÔºåÂ§çÂà∂Âà∞ÊúçÂä°Âô®‰∏äÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ ÈªòËÆ§ÊÉÖÂÜµ‰∏ã.ssh/id_rsaÊòØÂú®GIT SSHË∫´‰ªΩÈ™åËØÅÊúüÈó¥ÂèëÈÄÅÁöÑÔºåÂ¶ÇÊûúÊÇ®Âú®‰∏ãÈù¢ÊúâÂè¶‰∏Ä‰∏™Âêç‰∏∫RSAÁöÑÊñá‰ª∂ÔºåÈÇ£‰πà‰Ω†ÂèØ‰ª•.ssh‰∏ãÂàõÂª∫‰∏Ä‰∏™configÈÖçÁΩÆÊñá‰ª∂Âπ∂Ê†áËØÜËØ•Êñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ã„ÄÇ 12Host github.com IdentityFile ~/.ssh/mygitid_rsa ÁîüÊàêSSHÁöÑÊó∂ÂÄôÔºå‰∏ÄÂÆöË¶ÅËæìÂÖ•ÂØÜÁ†ÅÔºåÂ§Ñ‰∫éÂÆâÂÖ®ËÄÉËôë Spring Cloud ÈÖçÁΩÆ‰∏≠ÂøÉproperties123456spring.cloud.config.server.git.uri=xxxxspring.cloud.config.server.git.basedir=./tmp/configv - Êú¨Âú∞‰øùÂ≠òÁöÑÈÖçÁΩÆÂú∞ÂùÄspring.cloud.config.server.git.clone-on-start=true - ÂêØÂä®Êó∂Â∞±ÂÖãÈöÜÈÖçÁΩÆÁºìÂ≠òÂà∞Êú¨Âú∞spring.cloud.config.server.git.force-pull=true - Êú¨Âú∞ÂâØÊú¨ÊòØËÑèÁöÑ,Âº∫Âà∂‰ªéËøúÁ®ãÂ≠òÂÇ®Â∫ìÊãâÂèñÈÖçÁΩÆspring.cloud.config.server.git.search-paths=/dev - GITÊêúÁ¥¢ÁõÆÂΩï‰ΩçÁΩÆspring.cloud.config.server.git.passphrase=123456 - ÁîüÊàêSSHÁöÑÂØÜÁ†Å Áé∞Âú®ÂèØ‰ª•Â∞ùËØïÂêØÂä®ÈÖçÁΩÆ‰∏≠ÂøÉÊù•Ëé∑ÂèñÈÖçÁΩÆ‰ø°ÊÅØ‰∫Ü]]></content>
      <categories>
        <category>java</category>
        <category>spring-cloud</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring-cloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Cloud ÈÖçÁΩÆ‰∏≠ÂøÉ Github SSHÈ™åËØÅÔºà‰∏ÄÔºâ]]></title>
    <url>%2Fjava%2Fspring-cloud%2Fjava%2Fspring-cloud%2Fconfig-server-github-ssh%2F</url>
    <content type="text"><![CDATA[Spring Cloud ÈÖçÁΩÆ‰∏≠ÂøÉ Github SSHÈ™åËØÅÊ¶ÇËø∞Spring Cloud Config‰∏∫ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÁöÑÂ§ñÈÉ®ÈÖçÁΩÆÊèê‰æõÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÊîØÊåÅÔºåÊñπ‰æøÈÉ®ÁΩ≤‰∏éËøêÁª¥„ÄÇ ÁõÆÂâçÊúâ‰∏Ä‰∫õÁî®ÁöÑÊØîËæÉÂ§öÁöÑÂºÄÊ∫êÁöÑÈÖçÁΩÆ‰∏≠ÂøÉÔºåÊØîÂ¶ÇÊê∫Á®ãÁöÑ Apollo„ÄÅÈòøÈáåNacos„ÄÅÁôæÂ∫¶ÁöÑ Disconf Á≠âÔºåÂØπÊØî Spring Cloud ConfigÔºåËøô‰∫õÈÖçÁΩÆ‰∏≠ÂøÉÂäüËÉΩÊõ¥Âä†Âº∫Â§ß„ÄÇÊúâÂÖ¥Ë∂£ÁöÑÂèØ‰ª•ÊãøÊù•ËØï‰∏ÄËØï„ÄÇ Êé•‰∏ãÊù•ÔºåÊàë‰ª¨ÂºÄÂßã‰ΩøÁî®Spring CloudÊù•Êê≠Âª∫‰∏Ä‰∏™ÈÖçÁΩÆ‰∏≠ÂøÉÔºåÂπ∂‰ª• github ‰Ωú‰∏∫ÈÖçÁΩÆÂ≠òÂÇ®„ÄÇÈô§‰∫Ü git Â§ñÔºåËøòÂèØ‰ª•Áî®Êï∞ÊçÆÂ∫ì„ÄÅsvn„ÄÅÊú¨Âú∞Êñá‰ª∂Á≠â‰Ωú‰∏∫Â≠òÂÇ®„ÄÇ Github SSHÈÖçÁΩÆÂØÜÂåôÁîüÊàêWindows‰∏ãÁîüÊàêÂØÜÂåôÔºåÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Git BashÂ∑•ÂÖ∑ÔºåÊâßË°åssh-keygen -m PEM -t rsa -b 4096ÂëΩ‰ª§ Âú®ÂºπÂá∫Êù•ÁöÑÈÄâÈ°πÁõ¥Êé•ÊåâÂõûËΩ¶Â∞±ÂèØ‰ª•‰∫ÜÔºåÂØÜÂåôÁîüÊàêÁõÆÂΩïC:\Users\Áî®Êà∑\.ssh ÂÖ¨Èí•id_rsa.pub ÁßÅÈí•id_rsa ÈÖçÁΩÆSSHÁÇπÂáªÂè≥‰∏äËßíÂ§¥ÂÉèÔºåÂºπÂá∫ÁöÑËèúÂçï‰∏≠ÔºåÁÇπÂáªSettingsËøõÂÖ•ËÆæÁΩÆ ÁÇπÂáªSSH and GPG keysÔºåËøõÂÖ•SSHÁöÑkeyËÆæÁΩÆ ÁÇπÂáªNew SSH keyÔºåËøõË°åSSHÁöÑÊ∑ªÂä†ÔºåËÆ∞‰ΩèËøôÈáåÁöÑTitleÈöè‰æøÂ°´ÂÜôÔºåKeyÂ∞±ÊòØÊàë‰ª¨ÁöÑÂÖ¨Èí•ÔºåÊâìÂºÄÂÖ¨Èí•ÂÜÖÂÆπÂÖ®ÈÉ®Â§çÂà∂Á≤òË¥¥Âà∞KeyÁöÑËæìÂÖ•Ê°Ü‰∏≠ÔºåÁÇπÂáªAdd SSH keyÂç≥ÂèØÔºÅÂÖ¨Èí•ÊòØssh-rsaÂºÄÂ§¥ Ê∑ªÂä†ÂÖ¨Èí•ÂêéÂ∞±‰ºöÊòæÁ§∫ Ê†°È™åÂØÜÂåôËøôÊó∂Êàë‰ª¨ÂõûÂà∞Windows‰∏äÔºåÊâìÂºÄGit BashÔºåÂú®ÊâßË°åssh -vT git@github.comÂëΩ‰ª§ Âè™Ë¶ÅÂá∫Áé∞You&#39;ve successfully authenticatedÂ∞±ËØÅÊòéÔºåÂ∑≤ÁªèÈ™åËØÅÊàêÂäü‰∫Ü„ÄÇ Â¶ÇÊûúÊòØÂÜÖÁΩëÊê≠Âª∫ÁöÑGitlabÔºåÂèØ‰ª•‰ΩøÁî® ssh -vT git@ip -p Á´ØÂè£ÂëΩ‰ª§ Spring Cloud ÈÖçÁΩÆ‰∏≠ÂøÉÈÖçÁΩÆÊñá‰ª∂Â≠òÊîæÂú®github‰∏≠Êñ∞Âª∫‰∏Ä‰∏™‰ªìÂ∫ìÔºåËøô‰∏™‰ªìÂ∫ì‰∏ÄÂÆöË¶ÅÊòØÂπ≤ÂáÄÁöÑÔºåÂ∞±ÊòØÊúÄÂ•Ω‰∏çË¶ÅÊúâÂÖ∂‰ªñÊñá‰ª∂Â≠òÂú®Ôºå‰∏çÁÑ∂‰ºöÊä•Èîô„ÄÇÂõ†‰∏∫Êàë‰ª¨‰ΩøÁî®‰∫ÜSSHÔºåÊâÄ‰ª•ËøôÊòØ‰∏Ä‰∏™ÁßÅÂ∫ìÔºåÊàëÂ≠òÊîæÁöÑ‰ΩçÁΩÆÊòØlocal/eureka.properties„ÄÇ POM‰æùËµñ1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt; &lt;/dependency&gt; È°πÁõÆÈÖçÁΩÆÊñá‰ª∂propertiesÊñá‰ª∂ 12345678spring.cloud.config.server.git.uri=git@github.com:Figthing/hyper-config-repo.gitspring.cloud.config.server.git.strict-host-key-checking=falsespring.cloud.config.server.git.ignore-local-ssh-settings=truespring.cloud.config.server.git.search-paths=/localspring.cloud.config.server.git.private-key=-----BEGIN RSA PRIVATE KEY-----\n\aaaa\xxxx\n\-----END RSA PRIVATE KEY----- ‚Äã ÂèÇÊï∞ËØ¥Êòé spring.cloud.config.server.git.uriÔºöÈÖçÁΩÆÁöÑGithub‰ªìÂ∫ìÁöÑsshÂú∞ÂùÄ spring.cloud.config.server.git.strict-host-key-checkingÔºötrue-‰ΩøÁî®Áî®Êà∑ÂêçÂØÜÁ†ÅÔºåfalse-‰ΩøÁî®ssh key spring.cloud.config.server.git.ignore-local-ssh-settingsÔºötrue-ssh ÁôªÈôÜÊñπÂºè spring.cloud.config.server.git.search-pathsÔºögit‰ªìÂ∫ìÂú∞ÂùÄ‰∏ãÁöÑÁõ∏ÂØπÂú∞ÂùÄ Â§ö‰∏™Áî®ÈÄóÂè∑‚Äù,‚ÄùÂàÜÂâ≤„ÄÇ spring.cloud.config.server.git.private-keyÔºöÁßÅÈí•ÂÜÖÂÆπÔºàÂèØ‰ª•‰ΩøÁî®ÂèòÈáè‰ª£ÊõøÔºâÔºåËøôÈáåË¶ÅÊ≥®ÊÑèÂá†ÁÇπ Á¨¨‰∏ÄË°å‰ΩøÁî®\n\ÁªìÂ∞æ ÂÜÖÂÆπË°å‰ΩøÁî®\ÁªìÂ∞æ EndÁªìÊùü‰πãÂâç‰ΩøÁî®\n\ÁªìÂ∞æ yamlÊñá‰ª∂ Âõ†ÊàëÈ°πÁõÆ‰ΩøÁî®ÁöÑpropertiesÔºåËá≥‰∫éyamlÂ∞±Ëá™Ë°åÁôæÂ∫¶ÂêßÔºåÂ∫îËØ•Áõ∏Â∑Æ‰∏çÂ§ß„ÄÇ ÂêØÂä®È™åËØÅmainÁ±ªÊñá‰ª∂ 12345678@EnableConfigServer@SpringBootApplicationpublic class ConfigApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(ConfigApplication.class, args); &#125;&#125; ËÆøÈóÆÈÖçÁΩÆ Êàë‰ª¨Âú®URL‰∏≠ËæìÂÖ•http://localhost:8802/eureka/local Spring cloud config ÁöÑURL‰∏éÈÖçÁΩÆÊñá‰ª∂ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÂ¶Ç‰∏ã: /{application}/{profile}[/{label}]/{application}-{profile}.yml/{label}/{application}-{profile}.yml/{application}-{profile}.properties/{label}/{application}-{profile}.properties ÊàëËøôÈáåÁöÑapplication = eurekaÔºåprofile = local]]></content>
      <categories>
        <category>java</category>
        <category>spring-cloud</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring-cloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Windows‰∏ãËÆøÈóÆK8SÈõÜÁæ§‰∏≠ÁöÑPOD]]></title>
    <url>%2Fdocker%2Fk8s%2Fdocker%2Fk8s%2F2%2F</url>
    <content type="text"><![CDATA[Windows‰∏ãËÆøÈóÆK8SÈõÜÁæ§‰∏≠ÁöÑPODÊ¶ÇËø∞ËøëÊúüÂú®ÂÖ¨Âè∏Êê≠Âª∫‰∫Ü‰∏Ä‰∏™K8sÈõÜÁæ§ÔºåÊúâ‰∏Ä‰∏™È°πÁõÆ‰ΩøÁî®‰∫Üspring cloudÊ°ÜÊû∂ÂÅöÂºÄÂèëÔºåÂú®ÈÉ®ÁΩ≤ÁöÑÊó∂ÂÄôÂèëÁé∞‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÊâÄÊúâÁöÑÂæÆÊúçÂä°ÊâìÂåÖÂêéËøêË°åÂú®ÈõÜÁæ§‰∏äÔºå‰∫íÁõ∏ÊòØÂèØ‰ª•ÈÄöËøáfeignËøõË°åËÆøÈóÆÁöÑÔºåËøôÁÇπÊ≤°ÈóÆÈ¢ò„ÄÇ‰ΩÜÂ¶ÇÊûúÈúÄË¶ÅÂú®Êú¨Âú∞Ë∞ÉËØïÔºåÂèëÁé∞Âú®ÈõÜÁæ§‰∏≠ÈÉ®ÁΩ≤ÁöÑÂ∫îÁî®Êó†Ê≥ïÂèçÂêëËÆøÈóÆÊú¨Âú∞Â∫îÁî®Ôºå‰∏ãÈù¢ÊòØÊàëËß£ÂÜ≥ÁöÑÂÖ∑‰ΩìÊñπÊ≥ï„ÄÇ Â∫îÁî®ÊúçÂä°Âô®K8sÁöÑÂÆâË£ÖÂíåÈÖçÁΩÆÂ∞±‰∏çÂú®ËøôÈáåÂÖ∑‰ΩìËØ¥Êòé‰∫ÜÔºåÂ∞Ümaster‰∏≠ÁöÑk8s‰ª£ÁêÜÂêØÂä®Â•ΩÔºåÊâßË°å‰∏ãÈù¢ËÑöÊú¨„ÄÇ ÂêØÂä®ËÑöÊú¨Ôºöproxy-start.sh 123# /bin/shkubectl proxy --address 0.0.0.0 --accept-hosts '.*' ÂÅúÊ≠¢ËÑöÊú¨Ôºö 1234# /bin/shpid=$(ps -ef|grep 'kubectl proxy --address 0.0.0.0 --accept-hosts .*' | grep -v grep | awk '&#123;print $2&#125;')kill -9 $pid ÊµãËØïÂú∞ÂùÄÔºöhttp://{IPÂú∞ÂùÄ}:8001/api/v1/namespaces/default/services Â∫îÁî®ÈÉ®ÁΩ≤ËØ¥Êòé Â∫îÁî®ÂêçÁß∞ ÈÉ®ÁΩ≤‰ΩçÁΩÆ Eureka k8s Api-Gateway k8s SSO-Login k8s Auth-Service Êú¨Âú∞ Êú¨Âú∞ÁéØÂ¢ÉÂáÜÂ§áÂ∑•‰Ωú Âú®Êú¨Âú∞ÁéØÂ¢É‰∏≠Êàë‰ª¨ÂÖà‰∏ãËΩΩkubectlÂíåkubefwdÂ∑•ÂÖ∑ÔºåÂπ∂Âú®ÂΩìÂâçwindowsÁî®Êà∑‰∏ãÂàõÂª∫‰∏Ä‰∏™.kubeÊñá‰ª∂ÔºåÊàëËøôÈáåÁöÑÂú∞ÂùÄÊòØC:\Users\13966\.kube ÈÖçÁΩÆkubectl Âú®windowsÁöÑcmd‰∏≠‰ΩøÁî®ÂëΩ‰ª§ÈÖçÁΩÆk8sËøúÁ®ãÁéØÂ¢É 12345kubectl config set-cluster &#123;cluster_name&#125; --server=https://master_ip:8001 --insecure-skip-tls-verify=truekubectl config set-context &#123;cluster_name&#125;-context --cluster=&#123;cluster_name&#125;kubectl config set-credentials &#123;cluster_name&#125;-user --token=&#123;token&#125;kubectl config set-context &#123;cluster_name&#125;-context --user=&#123;cluster_name&#125;-user --namespace=defaultkubectl config use-context &#123;cluster_name&#125;-context ÈÖçÁΩÆÂ•ΩÂêé‰ºöÂú®C:\Users\13966\.kube‰∏ãÁîüÊàê‰∏Ä‰∏™configÊñá‰ª∂ 12345678910111213141516171819apiVersion: v1clusters:- cluster: insecure-skip-tls-verify: true server: &#123;ËøúÁ®ãK8S‰ª£ÁêÜAPIÂú∞ÂùÄ&#125; name: neusoft-clustercontexts:- context: cluster: neusoft-cluster namespace: &#123;ËÆøÈóÆÁöÑÂëΩÂêçÁ©∫Èó¥&#125; user: neusoft-cluster-user name: neusoft-cluster-contextcurrent-context: neusoft-cluster-contextkind: Configpreferences: &#123;&#125;users:- name: neusoft-cluster-user user: token: &#123;Ëá™Â∑±ÁöÑToken&#125; Âà∞ËøôÈáåÊàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®k8sÁöÑÂëΩ‰ª§Êù•È™åËØÅÊòØÂê¶ËÉΩËøû‰∏äËøúÁ®ã‰ª£ÁêÜ ËøôÂè™ÊòØÂ∞ÜwindowsÂíåk8sÊâìÈÄö‰∫ÜÔºåËøò‰∏çËÉΩÁõ¥Êé•ËÆøÈóÆpod„ÄÇÊàë‰ª¨ËøòÈúÄË¶Å‰ΩøÁî®kubefwdËΩØ‰ª∂ÔºåÊâßË°åÂëΩ‰ª§„ÄÇ ÈÖçÁΩÆkubefwd ‰ΩøÁî®ÂÆòÊñπÁªôÁöÑÂëΩ‰ª§.\kubefwd.exe services -n defaultÔºåËøôÊó∂Â∞±‰ºöÁúãÂà∞‰∏ãÂõæÔºåÂ∞±ËØ¥ÊòéÊàë‰ª¨Êú¨Âú∞ËÉΩËøõË°åËÆøÈóÆpods‰∫Ü ‰ΩøÁî®curl -iÊù•È™åËØÅÊòØÂê¶Êú¨Âú∞ËÉΩËÆøÈóÆÔºåÂà∞ËøôÈáåwindows‰∏≠ËÆøÈóÆk8sÈõÜÁæ§ÁöÑpodÂ∞±ÂÆåÊàê‰∫Ü EurekaÊú¨Âú∞ËøúÁ®ã‰∫íÁõ∏ËÆøÈóÆÊúâ‰∫Ü‰πãÂâçÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÂêéÔºåÂè™ÊòØÊâìÈÄö‰∫ÜÊú¨Âú∞ËÆøÈóÆpodÁöÑÈóÆÈ¢òÔºåÂ¶ÇÊûúÈÄöËøáeurekaËøõË°åËΩ¨ÂèëËøòÊòØ‰ºöÂ≠òÂú®Êó†Ê≥ïËÆøÈóÆÁöÑÊÉÖÂÜµÔºåÈÇ£‰πàÊàë‰ª¨ËøòÈúÄË¶ÅÂú®ÂêÑ‰∏™Â∑•Á®ã‰∏≠ËÆæÁΩÆÂ¶Ç‰∏ãÔºö 12345# ÂÖ≥Èó≠IPÊ≥®ÂÜåÊñπÂºèeureka.instance.prefer-ip-address = false# ÂØπÊØè‰∏Ä‰∏™ÂæÆÊúçÂä°ËÆæÁΩÆhostnameeureka.instance.hostname = hype-auth-service-svc Ê≥®ÊÑèÔºöhostnameÁöÑÂêçÁß∞ÂøÖÈ°ªË¶ÅÂíåk8s‰∏≠Service.metadata.name‰∏ÄËá¥ÔºåÊú¨Âú∞ÈúÄË¶ÅË∞ÉËØïÁöÑÂ∑•Á®ãÊó†ÈúÄËøõË°åËÆæÁΩÆÔºåÂ∞ÜipÊ≥®ÂÜåÊñπÂºèÊâìÂºÄÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ ÂèÇËÄÉÊñáÁåÆ githubÔºöhttps://github.com/txn2/kubefwd IBMÁöÑ‰ªéKubectl CliËÆøÈóÆÈõÜÁæ§]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êê≠Âª∫ShadowsocksÊúçÂä°]]></title>
    <url>%2Fsoftware%2Fss%2Fsoftware%2Fss-1%2F</url>
    <content type="text"><![CDATA[Êê≠Âª∫ShadowsocksÊúçÂä°Ê¶ÇÂøµ shadowsocksÂèØ‰ª•Êåá‰∏ÄÁßçSOCKS5ÁöÑÂä†ÂØÜ‰º†ËæìÂçèËÆÆÔºå‰πüÂèØ‰ª•ÊåáÂü∫‰∫éËøôÁßçÂä†ÂØÜÂçèËÆÆÁöÑÂêÑÁßçÊï∞ÊçÆ‰º†ËæìÂåÖ„ÄÇ shadowsocksÂÆûÁé∞ÁßëÂ≠¶‰∏äÁΩëÂéüÁêÜÔºüshadowsocksÊ≠£Â∏∏Â∑•‰ΩúÈúÄË¶ÅÊúçÂä°Âô®Á´ØÂíåÂÆ¢Êà∑Á´Ø‰∏§Á´ØÂêà‰ΩúÂÆûÁé∞ÔºåÈ¶ñÂÖàÔºåÂÆ¢Êà∑Á´ØÔºàÊú¨Êú∫ÔºâÈÄöËøássÔºàshadowsocksÔºâÂØπÊ≠£Â∏∏ÁöÑËÆøÈóÆËØ∑Ê±ÇËøõË°åSOCK5Âä†ÂØÜÔºåÂ∞ÜÂä†ÂØÜÂêéÁöÑËÆøÈóÆËØ∑Ê±Ç‰º†ËæìÁªôssÊúçÂä°Âô®Á´ØÔºåÊúçÂä°Âô®Á´ØÊé•Êî∂Âà∞ÂÆ¢Êà∑Á´ØÁöÑÂä†ÂØÜËØ∑Ê±ÇÂêéÔºåËß£ÂØÜÂæóÂà∞ÂéüÂßãÁöÑËÆøÈóÆËØ∑Ê±ÇÔºåÊ†πÊçÆËØ∑Ê±ÇÂÜÖÂÆπËÆøÈóÆÊåáÂÆöÁöÑÁΩëÁ´ôÔºà‰æãÂ¶ÇGoogleÔºåYouTubeÔºåFacebookÔºåinstagramÁ≠âÔºâÔºåÂæóÂà∞ÁΩëÁ´ôÁöÑËøîÂõûÁªìÊûúÂêéÔºåÂÜçÂà©Áî®SOCKS5Âä†ÂØÜÂπ∂ËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÂÆ¢Êà∑Á´ØÈÄöËøássËß£ÂØÜÂêéÂæóÂà∞Ê≠£Â∏∏ÁöÑËÆøÈóÆÁªìÊûúÔºå‰∫éÊòØÂ∞±ÂèØ‰ª•ÂÆûÁé∞‰Ω†Áõ¥Êé•ËÆøÈóÆËØ•ÁΩëÁ´ôÁöÑ‚ÄúÂÅáË±°‚Äù„ÄÇ ‰∏∫‰ªÄ‰πàÈÄâÊã©shadowsocksÔºü‰∏çÈôêÁªàÁ´ØÔºàÂÆâÂçìÔºåËãπÊûúÔºåWindowsÔºåMacÈÉΩÂèØÁî®ÔºâÔºåÊµÅÈáè‰æøÂÆúÔºàÊúçÂä°Âô®500GÂè™Ë¶Å15ÂÖÉÔºâÔºåÊñπ‰æøÔºà‰∏ÄÈîÆËÑöÊú¨Ôºå‰∏çÈúÄË¶Å‰∏ì‰∏öÁü•ËØÜÔºâ„ÄÇ ‰∏∫‰ªÄ‰πàË¶ÅËá™Â∑±Êê≠Âª∫ss/ssrÔºü‰Ω†‰πüËÆ∏‰ºöËßâÂæó‰π∞ssÊúçÂä°‰πüÂæàÊñπ‰æøÔºå‰ΩÜÊòØ‰Ω†ÂæóË¶ÅËÄÉËôë‰ª•‰∏ãÂá†‰∏™ÈóÆÈ¢ò„ÄÇÈ¶ñÂÖàÔºå‰π∞ÁöÑssÊúçÂä°ÔºåÈôêÂà∂ÂæàÂ§öÔºåÁªàÁ´ØÂèØËÉΩÂè™ËÉΩÂêåÊó∂Âú®Á∫ø2‰∏™ÔºåÊØè‰∏™ÊúàÂ∞±‰∏ÄÁÇπÁÇπÊµÅÈáèÂèØËÉΩ‰ª∑Ê†ºÂç¥‰∏ç‰æøÂÆúÔºåÊúâÊó∂ÂÄôËøòË¢´Âà´‰∫∫ÂÅöÊâãËÑöÔºåÊµÅÈáèË∑ëÁöÑË¥ºÂø´ÔºõÂÖ∂Ê¨°ÔºåÂà´‰∫∫Êî∂Èí±Ë∑ëË∑ØÊÄé‰πàÂäûÔºüÂæàÂ§öËøôÁßçÊÉÖÂÜµÁöÑÔºõÊõ¥ÈáçË¶ÅÁöÑÊòØÔºåÂ¶ÇÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢ò‰∏≠ÊèèËø∞ÁöÑshadowsocksÂéüÁêÜÔºåÂ¶ÇÊûúÊúâÂøÉ‰∫∫ÂÅö‰∫Ü‰∏ÄÁÇπÊâãËÑöÔºåÊòØÂèØ‰ª•ÂæóÂà∞‰Ω†ÁöÑËÆøÈóÆËÆ∞ÂΩïÁöÑÔºõËÄåËá™Â∑±Êê≠Âª∫ss/ssrÊúçÂä°Ôºå‰∏ÄÈîÆËÑöÊú¨‰πüÂ∞±10Êù•ÂàÜÈíüÂ∞±ÂèØ‰ª•ÊêûÂÆö„ÄÇ ‰ª£ÁêÜÊúçÂä°Âô®Ë¥≠‰π∞‰Ωú‰∏∫Ë∑≥ÊùøÁöÑ‰ª£ÁêÜÊúçÂä°Âô®Êé®ËçêVultrÂíåÊê¨Áì¶Â∑•Ôºå‰∏ÄÊòØÂõ†‰∏∫Êú¨ËÑöÊú¨Âú®Ëøô‰∏§ÂÆ∂ÁöÑÊâÄÊúâVPSÈÉΩÂÅö‰∫ÜÊµãËØïÔºå‰∫åÊòØÂõ†‰∏∫ÈÉΩÊòØËÄÅÁâåVPSÊúçÂä°ÂïÜÔºå‰∏çÊÄïË∑ëË∑Ø„ÄÇ VultrÂíåÊê¨Áì¶Â∑•ÊØîËæÉÔºö VultrÊúà‰ªòÔºå3.5ÁæéÂÖÉ/ÊúàËµ∑Ê≠•ÔºåÊê¨Áì¶Â∑•Âπ¥‰ªòÔºåÂπ¥‰ªò46.87ÁæéÂÖÉËµ∑Ê≠•Ôºõ Êê¨Áì¶Â∑•Á∫øË∑ØÂ•ΩÔºåÊèê‰æõCN2 GT/CN2 GIAÂ§öÊù°Á∫øË∑ØÔºåÂπ∂‰∏î‰øùËØÅÂºÄÂà∞ÁöÑIPÁªùÂØπÂèØÁî®Ôºõ Â¶ÇÊûú‰Ω†ÊòØÈïøÊúü‰ΩøÁî®ÔºåÈÇ£‰πàÊé®Ëçê‰Ω†‰ΩøÁî®Êê¨Áì¶Â∑•ÔºåÁ∫øË∑ØÊØîVultrË¶ÅÂ•ΩÁöÑÔºåÂ∞§ÂÖ∂ÊòØËÅîÈÄöÂíåÁîµ‰ø°Áî®Êà∑ÔºåÊâÄË∞ìÁ∫øË∑ØÂ•ΩÂ∞±ÊòØÈÄüÂ∫¶Âø´ÁöÑÊÑèÊÄù„ÄÇ Êê¨Áì¶Â∑•Êèê‰æõCN2ÂíåCN2 GIAÂ§öÁßç‰ºòÂåñÁ∫øË∑ØÔºö ÈÄüÂ∫¶Ëá™ÁÑ∂ÊòØCN2 GIA &gt; CN2 &gt; KVMÔºåÁõ∏Â∫îÁöÑ‰ª∑Ê†ºÊúÄË¥µÁöÑÊòØCN2 GIAÔºàÂåÖÊã¨CN2 GIA-EÔºâÔºå‰ΩÜÊòØCN2ÂíåKVMÁöÑ‰ª∑Ê†ºÂç¥‰∏ÄÊ†∑ÔºåÊâÄ‰ª•Â¶ÇÊûú‰∏ç‰π∞CN2 GIAÔºåÂàô‰π∞CN2Ôºå‰∏çË¶ÅËÄÉËôëKVMÔºõ CN2 GIAÁöÑÊÑèÊÄùÊòØ‰∏âÁΩëCN2Áõ¥ËøûÁöÑÊÑèÊÄùÔºå‰ºòÂäøÂ∞±ÊòØÊôöÈ´òÂ≥∞‰πüÂø´Ôºå‰ª∑Ê†ºÊòØÊúÄ‰æøÂÆúÁöÑ119.99ÁæéÂÖÉ/Âπ¥ÔºåË¥µ‰ΩÜÊòØÂÄº„ÄÇ ÂØπ‰∫éÊê¨Áì¶Â∑•ÁöÑÊé®ËçêÔºö ‰∏çÊòØÂæàÂú®‰πé120ÁæéÂÖÉ/Âπ¥Âíå50ÁæéÂÖÉ/Âπ¥‰πãÈó¥ÁöÑÂ∑ÆË∑ùÔºå‰∏ÄÂπ¥‰πüÂ∞±Â∑Æ500ÂÖÉÂÖ∂ÂÆûÔºåÈÇ£‰πàÁõ¥Êé•ÈÄâÊã©CN2 GIA-EÔºåÁî®ËøáÁöÑÈÉΩËØ¥Â•ΩÔºõ Â¶ÇÊûú‰∏çÊòØÂæàÂÆΩË£ïÔºåÂàôÈÄâÊã©50ÁæéÂÖÉ/Âπ¥ÁöÑÊê¨Áì¶Â∑•CN2„ÄÇ Êê¨Áì¶Â∑•Ë¥≠‰π∞‰∏é‰ºòÊÉ†Á†Å‰ΩøÁî®Ôºö https://www.vultr.com/?ref=8289861 ‰∏ÄÈîÆÊê≠Âª∫Shadowsocks Ëøû‰∏äË¥≠‰π∞ÁöÑVPSÂêéÔºà‰ª•Xshell‰∏∫‰æãÔºâÔºå‰Ω†Â∞ÜÁúãÂà∞Â¶Ç‰∏ãÂõæÊâÄÁ§∫ÁöÑÁïåÈù¢ Â¶ÇÁ∫¢Ê°Ü‰∏≠ÊâÄÁ§∫Ôºåroot@vultÔºàroot@ubuntuÔºâËØ¥ÊòéÂ∑≤ÁªèËøûÊé•ÊàêÂäü‰∫ÜÔºå‰πãÂêé‰Ω†Âè™ÈúÄË¶ÅÂú®ÁªøËâ≤ÂÖâÊ†áÂ§ÑÁõ¥Êé•Â§çÂà∂‰ª•‰∏ã‰ª£Á†ÅÂπ∂ÂõûËΩ¶Â∞±ÂèØ‰ª•‰∫ÜÔºàÁõ¥Êé•Â§çÂà∂Âç≥ÂèØÔºåÂ¶ÇÊØèÊÆµ‰ª£Á†Å‰∏ãÊñπÊà™Âõæ‰∏≠ÊâÄÁ§∫Ôºâ„ÄÇ 1„ÄÅÂÆâË£Ögit 1yum -y install git 2„ÄÅÂ∞Ü‰ª£Á†ÅcloneÂà∞Êú¨Âú∞ 1git clone -b master https://github.com/flyzy2005/ss-fly 3„ÄÅËøêË°åÊê≠Âª∫ssËÑöÊú¨‰ª£Á†Å 1ss-fly/ss-fly.sh -i ÂØÜÁ†Å Á´ØÂè£Âè∑ ÁïåÈù¢Â¶Ç‰∏ãÂ∞±Ë°®Á§∫‰∏ÄÈîÆÊê≠Âª∫ssÊàêÂäü‰∫ÜÔºö 4„ÄÅ Áõ∏ÂÖ≥ssÊìç‰Ωú 1234‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂Ôºövim /etc/shadowsocks.jsonÂÅúÊ≠¢ssÊúçÂä°Ôºössserver -c /etc/shadowsocks.json -d stopÂêØÂä®ssÊúçÂä°Ôºössserver -c /etc/shadowsocks.json -d startÈáçÂêØssÊúçÂä°Ôºössserver -c /etc/shadowsocks.json -d restart 5„ÄÅ Âç∏ËΩΩssÊúçÂä° 1sss -fly/ss-fly.sh -uninstall]]></content>
      <categories>
        <category>software</category>
        <category>ss</category>
      </categories>
      <tags>
        <tag>software</tag>
        <tag>ss</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WarÂåÖ‰∫åÊ¨°ÂºÄÂèëÊäÄÂ∑ß]]></title>
    <url>%2Fjava%2Fwar%2Fjava%2Fwar%2F1%2F</url>
    <content type="text"><![CDATA[WarÂåÖ‰∫åÊ¨°ÂºÄÂèëÊäÄÂ∑ßÊ¶ÇËø∞ËøëÊúüÊãøÂà∞‰∏Ä‰∏™warÂåÖÈ°πÁõÆÔºåÈáåÈù¢Ê≤°ÊúâËÆ§ËØÅÂäüËÉΩÔºå‰πüÊ≤°ÊúâÊ∫êÁ†Å„ÄÇÂØπ‰∫éÁ≥ªÁªüÂÆâÂÖ®Êù•ËØ¥ÔºåÁõ¥Êé•ËÉΩËÆøÈóÆÈáåÈù¢ÁöÑÊï∞ÊçÆÔºåÂπ∂ÂØπÊï∞ÊçÆÊìç‰ΩúÔºåÊòØÁõ∏ÂΩì‰∏çÂÆâÂÖ®ÁöÑ„ÄÇÊâÄ‰ª•ÊÉ≥Âú®È°πÁõÆÈáåÈù¢Â¢ûÂä†‰∏Ä‰∏™ÁÆÄÂçïÁöÑBasicËÆ§ËØÅÂäüËÉΩÔºåÂπ∂‰∏î‰ΩøÁî®ideaÂ∑•ÂÖ∑ËÉΩÂ§üÂø´ÈÄüÁÉ≠ÈÉ®ÁΩ≤ÂºÄÂèë„ÄÇ TomcatÊ®°Âºè‰ΩøÁî®TomcatÊù•ËøõË°åBasicËÆ§ËØÅÊéßÂà∂Êñ∞Â¢ûconfig/tomcat-users.xmlÂÜÖÂÆπ 123456789&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;tomcat-users xmlns="http://tomcat.apache.org/xml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://tomcat.apache.org/xml tomcat-users.xsd" version="1.0"&gt; &lt;role rolename="test"/&gt; &lt;user username="root" password="000000" roles="test" /&gt;&lt;/tomcat-users&gt; ‰øÆÊîπwar‰∏≠ÁöÑweb.xml 12345678910111213&lt;security-constraint&gt; &lt;web-resource-collection&gt; &lt;web-resource-name&gt;protected Resource&lt;/web-resource-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/web-resource-collection&gt; &lt;auth-constraint&gt; &lt;role-name&gt;test&lt;/role-name&gt; &lt;/auth-constraint&gt; &lt;/security-constraint&gt; &lt;login-config&gt; &lt;auth-method&gt;BASIC&lt;/auth-method&gt; &lt;realm-name&gt;Default&lt;/realm-name&gt; &lt;/login-config&gt; ËøôÊ†∑Â∞±ÁÆÄÂçïÂÆûÁé∞warÈ°πÁõÆÊñ∞Â¢ûBasicËÆ§ËØÅ‰∫Ü Êã¶Êà™Âô®Ê®°ÂºèÁõÆÂΩïÁªìÊûÑ123456789101112131415161718report|- out # tomcatÁºñËØëËøêË°åÁõÆÂΩï| |- artifacts| |- xx| |- xx_war_exploded|- src # ‰∫åÊ¨°ÂºÄÂèëÁõÆÂΩï| |- main| |- java| |- com.xx.xx.safe.filter| |- HttpAuthBasicFilter.java| |- resources| |- http-auth-basic.properties|- target # ‰∫åÊ¨°ÂºÄÂèëÁºñËØëÁõÆÂΩï|- tomcat| |- webapps # Ê∫êÁ†ÅÁõÆÂΩï| |- WEB-INF | |- web.xml # ÂêØÂä®ÈÖçÁΩÆ|- pom.xml # ‰∫åÊ¨°ÂºÄÂèëpom ‰ª£Á†ÅË∞ÉÊï¥HttpAuthBasicFilter.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384public class HttpAuthBasicFilter implements Filter &#123; private static final String SECURITY_BASIC = "BASIC"; private Properties properties; public void init(FilterConfig filterConfig) throws ServletException &#123; InputStream in = HttpAuthBasicFilter.class.getClassLoader().getResourceAsStream("http-auth-basic.properties"); properties = new Properties(); try &#123; properties.load(in); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123; HttpServletRequest req = (HttpServletRequest) servletRequest; HttpServletResponse resp = (HttpServletResponse) servletResponse; String sessionAuth = (String) req.getSession().getAttribute("auth"); if (!Strings.isNullOrEmpty(sessionAuth)) &#123; filterChain.doFilter(servletRequest, servletResponse); return; &#125; if(!checkHeaderAuth(req)) &#123; resp.setStatus(401); resp.setHeader("Cache-Control", "no-store"); resp.setDateHeader("Expires", 0); resp.setHeader("WWW-authenticate", "Basic Realm=\"test\""); return; &#125; req.getSession().setAttribute("auth", "true"); filterChain.doFilter(servletRequest, servletResponse); &#125; public void destroy() &#123; &#125; /** * È™åËØÅHttp Header ‰∏≠ÁöÑAuthorizationÊòØÂê¶Ê≠£Á°Æ * @param request HttpServletRequest * @return boolean * @throws IOException */ private boolean checkHeaderAuth(HttpServletRequest request) throws IOException &#123; String auth = request.getHeader("Authorization"); if (Strings.isNullOrEmpty(auth)) &#123; return false; &#125; if (!auth.toUpperCase().startsWith(SECURITY_BASIC)) &#123; return false; &#125; String decodeVal = getFromBASE64(auth.substring(6)); String authBasicFormat = String.format("%s:%s" , properties.getProperty("BASIC_ACCOUNT") , properties.getProperty("BASIC_PASS")); if (!decodeVal.startsWith(authBasicFormat)) &#123; return false; &#125; return true; &#125; /** * Ëß£ÊûêAuthorization‰∏≠ÁöÑÂÄº * @param s Authorization * @return Decode Authorization * @throws IOException */ private String getFromBASE64(String s) throws IOException &#123; BASE64Decoder decoder = new BASE64Decoder(); byte[] b = decoder.decodeBuffer(s); return new String(b); &#125;&#125; pom.xml 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.eclipse.jetty.orbit&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet&lt;/artifactId&gt; &lt;version&gt;3.0.0.v201112011016&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.google.guava&lt;/groupId&gt; &lt;artifactId&gt;guava&lt;/artifactId&gt; &lt;version&gt;27.0.1-jre&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt; &lt;version&gt;3.1.1&lt;/version&gt; &lt;configuration&gt; &lt;outputDirectory&gt; tomcat/webapps/WEB-INF/lib/ &lt;/outputDirectory&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;!-- ÂÜÖÁΩÆÊâìÂåÖÊ≥ï --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt; &lt;version&gt;2.3&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;package&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;shade&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt; &lt;transformers&gt; &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt; &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt; &lt;/transformer&gt; &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt; &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt; &lt;/transformer&gt; &lt;/transformers&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; web.xml 12345678&lt;filter&gt; &lt;filter-name&gt;HttpAuthBasicFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.xxx.xx.safe.filter.HttpAuthBasicFilter&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;HttpAuthBasicFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; IDEAËÆæÁΩÆÁé∞Âú®‰ª£Á†ÅÈÉΩÂáÜÂ§áÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåÊàë‰ª¨ÂºÄÂßãÂáÜÂ§áideaÁöÑ‰∏Ä‰∫õÈÖçÁΩÆ 1„ÄÅÈ¶ñÂÖàÂ∞Üwebapps‰∏≠ÁöÑlibÂåÖÂä†ÂÖ•Âà∞‰Ω†ÁöÑÈ°πÁõÆ‰∏≠ 2„ÄÅÈÖçÁΩÆArtifacts 3„ÄÅÈÖçÁΩÆtomcatÂíådeployment Áé∞Âú®Â§ßÂäüÂëäÊàê‰∫ÜÔºå‰∏ãÈù¢ËøõË°åÂêØÂä® È¶ñÂÖàÂêØÂä®tomcat‰∏∫Ë∞ÉËØïÊ®°ÂºèÔºåÂõ†‰∏∫Êàë‰ª¨Ë¶Å‰ΩøÁî®ÁÉ≠ÈÉ®ÁΩ≤ÔºåÈÉΩÊáÇ Âú®‰Ω†ÁöÑ‰∫åÂºÄÂ∑•Á®ã‰∏≠ÔºåËøõË°åpackageÂ∞±ÂèØ‰ª•ÊâìÂåÖÂà∞tomcat‰∏≠ËøõË°åËá™Âä®‰æùËµñ‰∫Ü]]></content>
      <categories>
        <category>java</category>
        <category>war</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>war</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ApiGatewayÊï¥ÂêàSwagger2]]></title>
    <url>%2Fjava%2Fspring-cloud%2Fjava%2Fspring-cloud%2Fspring-cloud-gateway-1%2F</url>
    <content type="text"><![CDATA[ApiGatewayÊï¥ÂêàSwagger2Ê¶ÇËø∞ÊúÄËøëÂú®È°πÁõÆ‰∏≠Â∞ùËØï‰ΩøÁî®Spring Cloud.GreenwichÁâàÊï¥ÂêàSwagger2„ÄÇÂèëÁé∞SwaggerÂπ∂‰∏çÊîØÊåÅ‰ª•WebFlux‰∏∫Â∫ïÂ±ÇÁöÑGatewayÔºåÊó†Ê≥ïÈõÜÊàêÔºåËøêË°åÊä•Èîô„ÄÇ‰∏ãÈù¢ÂàÜ‰∫´ÊàëÁöÑËß£ÂÜ≥ÊÄùË∑ØÔºåÂíåÂÖ≥ÈîÆ‰ª£Á†Å„ÄÇ ÂºïÂÖ•‰æùËµñ1234567891011121314151617&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;&lt;/dependency&gt;&lt;!-- Swagger2 --&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt; Ê†∏ÂøÉ‰ª£Á†ÅÈÖçÁΩÆSwaggerProviderÔºåËé∑ÂèñApi-docÔºåÂç≥SwaggerResources„ÄÇSwaggerProvider.java 1234567891011121314151617181920212223242526272829303132333435363738@Component@Primary@AllArgsConstructorpublic class SwaggerProvider implements SwaggerResourcesProvider &#123; public static final String API_URI = "/v2/api-docs"; private final RouteLocator routeLocator; private final GatewayProperties gatewayProperties; @Override public List&lt;SwaggerResource&gt; get() &#123; List&lt;SwaggerResource&gt; resources = new ArrayList&lt;&gt;(); List&lt;String&gt; routes = new ArrayList&lt;&gt;(); //ÂèñÂá∫gatewayÁöÑroute routeLocator.getRoutes().subscribe(route -&gt; routes.add(route.getId())); //ÁªìÂêàÈÖçÁΩÆÁöÑroute-Ë∑ØÂæÑ(Path)ÔºåÂíårouteËøáÊª§ÔºåÂè™Ëé∑ÂèñÊúâÊïàÁöÑrouteËäÇÁÇπ gatewayProperties.getRoutes() .stream() .filter(routeDefinition -&gt; routes.contains(routeDefinition.getId())) .forEach(routeDefinition -&gt; routeDefinition.getPredicates().stream() .filter(predicateDefinition -&gt; ("Path").equalsIgnoreCase(predicateDefinition.getName())) .forEach(predicateDefinition -&gt; &#123; resources.add(swaggerResource( routeDefinition.getId(), predicateDefinition.getArgs().get(NameUtils.GENERATED_NAME_PREFIX + "0").replace("/**", API_URI) )); &#125;)); return resources; &#125; private SwaggerResource swaggerResource(String name, String location) &#123; SwaggerResource swaggerResource = new SwaggerResource(); swaggerResource.setName(name); swaggerResource.setLocation(location); swaggerResource.setSwaggerVersion("1.0"); return swaggerResource; &#125;&#125; Âõ†‰∏∫GatewayÈáåÊ≤°ÊúâÈÖçÁΩÆSwaggerConfigÔºåËÄåËøêË°åSwagger-uiÂèàÈúÄË¶Å‰æùËµñ‰∏Ä‰∫õÊé•Âè£ÔºåÊâÄ‰ª•ÊàëÁöÑÊÉ≥Ê≥ïÊòØËá™Â∑±Âª∫Á´ãÁõ∏Â∫îÁöÑswagger-resourceÁ´ØÁÇπSwaggerHandler.java 1234567891011121314151617181920212223242526272829303132333435@RestController@ConditionalOnExpression("#&#123;'true'.equals(environment['neusoft.hype.swagger.enable'])&#125;")@RequestMapping("/swagger-resources")public class SwaggerHandler &#123; @Autowired(required = false) private SecurityConfiguration securityConfiguration; @Autowired(required = false) private UiConfiguration uiConfiguration; private final SwaggerResourcesProvider swaggerResources; @Autowired public SwaggerHandler(SwaggerResourcesProvider swaggerResources) &#123; this.swaggerResources = swaggerResources; &#125; @GetMapping("/configuration/security") public Mono&lt;ResponseEntity&lt;SecurityConfiguration&gt;&gt; securityConfiguration() &#123; return Mono.just(new ResponseEntity&lt;&gt;( Optional.ofNullable(securityConfiguration).orElse(SecurityConfigurationBuilder.builder().build()), HttpStatus.OK)); &#125; @GetMapping("/configuration/ui") public Mono&lt;ResponseEntity&lt;UiConfiguration&gt;&gt; uiConfiguration() &#123; return Mono.just(new ResponseEntity&lt;&gt;( Optional.ofNullable(uiConfiguration).orElse(UiConfigurationBuilder.builder().build()), HttpStatus.OK)); &#125; @GetMapping("") public Mono&lt;ResponseEntity&gt; swaggerResources() &#123; return Mono.just((new ResponseEntity&lt;&gt;(swaggerResources.get(), HttpStatus.OK))); &#125;&#125;]]></content>
      <categories>
        <category>java</category>
        <category>spring-cloud</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring-cloud</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kettle]]></title>
    <url>%2Fdwh%2Fetl%2Fdwh%2Fkettle-1%2F</url>
    <content type="text"><![CDATA[KettleÊ¶ÇËø∞KettleÊòØ‰∏ÄÊ¨æÂõΩÂ§ñÂºÄÊ∫êÁöÑETLÂ∑•ÂÖ∑ÔºåÁ∫ØjavaÁºñÂÜôÔºåÂèØ‰ª•Âú®Window„ÄÅLinux„ÄÅUnix‰∏äËøêË°åÔºåÁªøËâ≤Êó†ÈúÄÂÆâË£ÖÔºåÊï∞ÊçÆÊäΩÂèñÈ´òÊïàÁ®≥ÂÆö„ÄÇ‰∏≠ÊñáÂêçÁß∞Âè´Ê∞¥Â£∂ÔºåËØ•È°πÁõÆÁöÑ‰∏ªÁ®ãÂ∫èÂëòMATT Â∏åÊúõÊääÂêÑÁßçÊï∞ÊçÆÊîæÂà∞‰∏Ä‰∏™Â£∂ÈáåÔºåÁÑ∂Âêé‰ª•‰∏ÄÁßçÊåáÂÆöÁöÑÊ†ºÂºèÊµÅÂá∫„ÄÇ ‰∫ßÂìÅÂÆ∂ÊóèKettleÂÆ∂ÊóèÁõÆÂâçÂåÖÊã¨4‰∏™‰∫ßÂìÅÔºöSpoon„ÄÅPan„ÄÅCHEF„ÄÅKitchen SPOON ÂÖÅËÆ∏‰Ω†ÈÄöËøáÂõæÂΩ¢ÁïåÈù¢Êù•ËÆæËÆ°ETLËΩ¨Êç¢ËøáÁ®ãÔºàTransformationÔºâ„ÄÇ PAN ÂÖÅËÆ∏‰Ω†ÊâπÈáèËøêË°åÁî±SpoonËÆæËÆ°ÁöÑETLËΩ¨Êç¢ (‰æãÂ¶Ç‰ΩøÁî®‰∏Ä‰∏™Êó∂Èó¥Ë∞ÉÂ∫¶Âô®)„ÄÇPanÊòØ‰∏Ä‰∏™ÂêéÂè∞ÊâßË°åÁöÑÁ®ãÂ∫èÔºåÊ≤°ÊúâÂõæÂΩ¢ÁïåÈù¢„ÄÇ CHEF ÂÖÅËÆ∏‰Ω†ÂàõÂª∫‰ªªÂä°ÔºàJobÔºâ„ÄÇ ‰ªªÂä°ÈÄöËøáÂÖÅËÆ∏ÊØè‰∏™ËΩ¨Êç¢Ôºå‰ªªÂä°ÔºåËÑöÊú¨Á≠âÁ≠âÔºåÊõ¥ÊúâÂà©‰∫éËá™Âä®ÂåñÊõ¥Êñ∞Êï∞ÊçÆ‰ªìÂ∫ìÁöÑÂ§çÊùÇÂ∑•‰Ωú„ÄÇ‰ªªÂä°ÈÄöËøáÂÖÅËÆ∏ÊØè‰∏™ËΩ¨Êç¢Ôºå‰ªªÂä°ÔºåËÑöÊú¨Á≠âÁ≠â„ÄÇ‰ªªÂä°Â∞Ü‰ºöË¢´Ê£ÄÊü•ÔºåÁúãÁúãÊòØÂê¶Ê≠£Á°ÆÂú∞ËøêË°å‰∫Ü„ÄÇ KITCHEN ÂÖÅËÆ∏‰Ω†ÊâπÈáè‰ΩøÁî®Áî±ChefËÆæËÆ°ÁöÑ‰ªªÂä° (‰æãÂ¶Ç‰ΩøÁî®‰∏Ä‰∏™Êó∂Èó¥Ë∞ÉÂ∫¶Âô®)„ÄÇKITCHEN‰πüÊòØ‰∏Ä‰∏™ÂêéÂè∞ËøêË°åÁöÑÁ®ãÂ∫è„ÄÇ ÊâãÂä®ÁºñËØëÂíåËøêË°åÂáÜÂ§áÂ∑•‰Ωú JDK1.8+ ‰∏ãËΩΩÊ∫êÁ†ÅÔºöÂú∞ÂùÄ ÁâàÊú¨Âè∑Ôºöpentaho-kettle-8.3.0.4-R Maven version 3+ settings.xmlÈÖçÁΩÆ ÁºñËØëÂú®Ê∫êÁ†ÅÁöÑÊ†πÁõÆÂΩï‰∏≠ÊâßË°åÔºå‰ºöÁ≠â‰∏ÄÊÆµÊó∂Èó¥ 1mvn clean install -DskipTests ËøêË°åÁºñËØëÊàêÂäüÂêéÔºå‰ºöÂú®assemblies/client/targetÁîüÊàê‰∏Ä‰∏™pdi-ce-*.zipÂéãÁº©ÂåÖÊñá‰ª∂ÔºåËß£ÂéãÂêéÂèåÂáªËøêË°åSpoon.batÂ∞±ÂêØÂä®‰∫Ü„ÄÇ ÈóÆÈ¢ò ÈóÆÈ¢òÔºöÁºñËØëÊó∂Êñá‰ª∂ËøáÂ§ßÔºåÈÄöËøámavenÊó†Ê≥ï‰∏ãËΩΩÊñá‰ª∂ Ëß£ÂÜ≥ÔºöÂèØ‰ª•Ê†πÊçÆÊãâÂèñÁöÑÂú∞ÂùÄËøõË°åÁõ¥Êé•‰∏ãËΩΩÔºåÂπ∂ÂèëÂä®mavenÊú¨Âú∞‰ªìÂ∫ì‰ΩçÁΩÆ ÈóÆÈ¢òÔºöSpoon.batÂêØÂä®Áõ¥Êé•Êú™ÂìçÂ∫î Ëß£ÂÜ≥Ôºö‰øÆÊîπËØ•Êñá‰ª∂‰∏≠ÁöÑ-XmsÔºå-Xmx 1if "%PENTAHO_DI_JAVA_OPTIONS%"=="" set PENTAHO_DI_JAVA_OPTIONS="-Xms512m" "-Xmx512m" "-XX:MaxPermSize=256m"]]></content>
      <categories>
        <category>dwh</category>
        <category>etl</category>
      </categories>
      <tags>
        <tag>dwh</tag>
        <tag>etl</tag>
        <tag>kettle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆ‰ªìÂ∫ì‰πãETL]]></title>
    <url>%2Fdwh%2Fetl%2Fdwh%2Fetl-1%2F</url>
    <content type="text"><![CDATA[Êï∞ÊçÆ‰ªìÂ∫ì‰πãETLÊ¶ÇËø∞ETLÔºåExtraction-Transformation-LoadingÁöÑÁº©ÂÜôÔºå‰∏≠ÊñáÂêçÁß∞‰∏∫Êï∞ÊçÆÊäΩÂèñ„ÄÅËΩ¨Êç¢ÂíåÂä†ËΩΩ„ÄÇ‰∏ÄËà¨ÈöèÁùÄ‰∏öÂä°ÁöÑÂèëÂ±ïÊâ©Âº†Ôºå‰∫ßÁ∫ø‰πüË∂äÊù•Ë∂äÂ§öÔºå‰∫ßÁîüÁöÑÊï∞ÊçÆ‰πüË∂äÊù•Ë∂äÂ§öÔºåËøô‰∫õÊï∞ÊçÆÁöÑÊî∂ÈõÜÊñπÂºè„ÄÅÂéüÂßãÊï∞ÊçÆÊ†ºÂºè„ÄÅÊï∞ÊçÆÈáè„ÄÅÂ≠òÂÇ®Ë¶ÅÊ±Ç„ÄÅ‰ΩøÁî®Âú∫ÊôØÁ≠âÊñπÈù¢ÊúâÂæàÂ§ßÁöÑÂ∑ÆÂºÇ„ÄÇ‰Ωú‰∏∫Êï∞ÊçÆ‰∏≠ÂøÉÔºåÊó¢Ë¶Å‰øùËØÅÊï∞ÊçÆÁöÑÂáÜÁ°ÆÊÄßÔºåÂ≠òÂÇ®ÁöÑÂÆâÂÖ®ÊÄßÔºåÂêéÁª≠ÁöÑÊâ©Â±ïÊÄßÔºå‰ª•ÂèäÊï∞ÊçÆÂàÜÊûêÁöÑÊó∂ÊïàÊÄßÔºåËøôÊòØ‰∏Ä‰∏™ÂæàÂ§ßÁöÑÊåëÊàò„ÄÇ ÂêçËØçËß£Èáä ODS‚Äî‚ÄîÊìç‰ΩúÊÄßÊï∞ÊçÆ DW‚Äî‚ÄîÊï∞ÊçÆ‰ªìÂ∫ì DM‚Äî‚ÄîÊï∞ÊçÆÈõÜÂ∏Ç Êï∞ÊçÆÊäΩÂèñÊï∞ÊçÆÊäΩÂèñÊòØÊåáÊääODSÊ∫êÊï∞ÊçÆÊäΩÂèñÂà∞DW‰∏≠ÔºåÁÑ∂ÂêéÂ§ÑÁêÜÊàêÂ±ïÁ§∫ÁªôÁõ∏ÂÖ≥‰∫∫ÂëòÊü•ÁúãÁöÑÊï∞ÊçÆ Ê∫êÊï∞ÊçÆÔºö Áî®Êà∑ËÆøÈóÆÊó•Âøó Ëá™ÂÆö‰πâ‰∫ã‰ª∂Êó•Âøó„ÄÅÊìç‰ΩúÊó•Âøó ‰∏öÂä°Êó•Âøó ÂêÑÊúçÂä°‰∫ßÁîüÁöÑÊó•Âøó Á≥ªÁªüÊó•ÂøóÔºöÊìç‰ΩúÁ≥ªÁªüÊó•ÂøóÔºåCDNÊó•ÂøóÁ≠â ÁõëÊéßÊó•Âøó ÂÖ∂ÂÆÉÊó•Âøó ÊäΩÂèñÈ¢ëÊ¨°Ôºö Â¶ÇÊûúÊ≤°ÊúâÁâπÊÆäË¶ÅÊ±ÇÂèØ‰ª•‰∏ÄÂ§©‰∏ÄÊ¨°Ôºå‰ΩÜÊòØÈúÄË¶ÅÈÅøÂºÄÊãâÂéªÊó•ÂøóÁöÑÈ´òÂ≥∞Êúü ÂØπ‰∫éÊúâÂÆûÊó∂ÊÄßË¶ÅÊ±ÇÁöÑÊó•ÂøóÔºåÂèØ‰ª•‰∏ÄÂ∞èÊó∂‰∏ÄÊ¨°ÔºåÊàñËÄÖÁõ¥Êé•‰ΩøÁî®kafkaÁ≠âÁõ∏ÂÖ≥Â∑•ÂÖ∑Êî∂ÈõÜÔºåÈúÄË¶ÅËÄÉËôëÂà∞Á≥ªÁªüËÉΩÂê¶ÊâøÂèó ÊäΩÂèñÁ≠ñÁï•Ôºö Áî±‰∫éÊï∞ÊçÆÈáèËæÉÂ§ßÔºå‰∏ÄËà¨ÈÉΩÊòØÈááÁî®Â¢ûÈáèÊäΩÂèñÔºå‰ΩÜÊòØÂØπ‰∫é‰∏Ä‰∫õÁâπÊÆäÂú∫ÊôØÁöÑÊï∞ÊçÆÔºåÊØîÂ¶ÇËÆ¢ÂçïÊï∞ÊçÆÔºåÁî±‰∫éËÆ¢ÂçïÁöÑÁä∂ÊÄÅ‰ºöÂèëÁîüÂèòÂåñÔºåÂπ∂‰∏îËÆ¢ÂçïÁöÑÈáèÁ∫ßÊòØÂèØÈ¢ÑÁü•ÂíåÁõ∏ÂØπËæÉÂ∞ëÁöÑÔºåÂ∞±ÈúÄË¶ÅÈááÁî®ÂÖ®ÈáèÊãâÂèñÁöÑÁ≠ñÁï• ÂØπ‰∫éÂ¢ûÈáèÊãâÂèñÁöÑÊó•ÂøóÔºåÂ¶ÇÊûúÊòØÊñá‰ª∂Á±ªÂûãÔºåÂèØ‰ª•Âú®Êñá‰ª∂ÂêçÁß∞‰∏äËøΩÂä†Êó•ÊúüÔºå‰æãÂ¶Ç server_log_2018082718.logÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Êª°Ë∂≥ÊåâÂ∞èÊó∂ÊãâÂèñÁöÑÈúÄÊ±Ç ÂØπ‰∫éÊ∫êÊï∞ÊçÆÁöÑ‰øùÁïôÔºåËÄÉËôëÂà∞Á™ÅÂèëÊÉÖÂÜµÔºåÊúçÂä°Âô®‰∏äÁöÑÊ∫êÊï∞ÊçÆËá≥Â∞ëË¶Å‰øùËØÅ2Â§©‰ª•‰∏äÁöÑÊó∂Èó¥ Êï∞ÊçÆËΩ¨Êç¢„ÄÅÊ∏ÖÊ¥óÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÊää‰∏çÈúÄË¶ÅÁöÑÂíå‰∏çÁ¨¶ÂêàËßÑËåÉÁöÑÊï∞ÊçÆËøõË°åÂ§ÑÁêÜ„ÄÇÊï∞ÊçÆÊ∏ÖÊ¥óÊúÄÂ•Ω‰∏çË¶ÅÊîæÂú®ÊäΩÂèñÁöÑÁéØËäÇËøõË°åÔºåËÄÉËôëÂà∞ÊúâÊó∂ÂèØËÉΩ‰ºöÊü•ÂéüÂßãÊï∞ÊçÆ„ÄÇ‰∏ÄËà¨ÂêÑÂÖ¨Âè∏ÈÉΩ‰ºöÊúâËá™Â∑±ÁöÑËßÑËåÉÔºå‰ª•‰∏ãÂàóÂá∫Âá†ÁÇπ‰ªÖ‰æõÂèÇËÄÉ Êï∞ÊçÆÊ∏ÖÊ¥ó‰∏ªË¶ÅÂåÖÊã¨‰ª•‰∏ãÂá†‰∏™ÊñπÈù¢Ôºö Á©∫ÂÄºÂ§ÑÁêÜÔºõÊ†πÊçÆ‰∏öÂä°ÈúÄË¶ÅÔºåÂèØ‰ª•Â∞ÜÁ©∫ÂÄºÊõøÊç¢‰∏∫ÁâπÂÆöÁöÑÂÄºÊàñËÄÖÁõ¥Êé•ËøáÊª§ÊéâÔºõ È™åËØÅÊï∞ÊçÆÊ≠£Á°ÆÊÄßÔºõ‰∏ªË¶ÅÊòØÊää‰∏çÁ¨¶Âêà‰∏öÂä°Âê´‰πâÁöÑÊï∞ÊçÆÂÅö‰∏ÄÂ§ÑÁêÜÔºåÊØîÂ¶ÇÔºåÊää‰∏Ä‰∏™Ë°®Á§∫Êï∞ÈáèÁöÑÂ≠óÊÆµ‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÊõøÊç¢‰∏∫0ÔºåÊää‰∏Ä‰∏™Êó•ÊúüÂ≠óÊÆµÁöÑÈùûÊó•ÊúüÂ≠óÁ¨¶‰∏≤ËøáÊª§ÊéâÁ≠âÁ≠âÔºõ ËßÑËåÉÊï∞ÊçÆÊ†ºÂºèÔºõÊØîÂ¶ÇÔºåÊääÊâÄÊúâÁöÑÊó•ÊúüÈÉΩÊ†ºÂºèÂåñÊàêyyyy-MM-dd HH:mm:ssÁöÑÊ†ºÂºèÁ≠âÔºõ Êï∞ÊçÆËΩ¨Á†ÅÔºõÊää‰∏Ä‰∏™Ê∫êÊï∞ÊçÆ‰∏≠Áî®ÁºñÁ†ÅË°®Á§∫ÁöÑÂ≠óÊÆµÔºåÈÄöËøáÂÖ≥ËÅîÁºñÁ†ÅË°®ÔºåËΩ¨Êç¢Êàê‰ª£Ë°®ÂÖ∂ÁúüÂÆûÊÑè‰πâÁöÑÂÄºÁ≠âÁ≠âÔºõ Êï∞ÊçÆÊ†áÂáÜÔºåÁªü‰∏ÄÔºõÊØîÂ¶ÇÂú®Ê∫êÊï∞ÊçÆ‰∏≠Ë°®Á§∫Áî∑Â•≥ÁöÑÊñπÂºèÊúâÂæàÂ§öÁßçÔºåÂú®ÊäΩÂèñÁöÑÊó∂ÂÄôÔºåÁõ¥Êé•Ê†πÊçÆÊ®°Âûã‰∏≠ÂÆö‰πâÁöÑÂÄºÂÅöËΩ¨ÂåñÔºåÁªü‰∏ÄË°®Á§∫Áî∑Â•≥Ôºõ ÂÖ∂‰ªñ‰∏öÂä°ËßÑÂàôÂÆö‰πâÁöÑÊï∞ÊçÆÊ∏ÖÊ¥ó‚Ä¶ Êï∞ÊçÆÂä†ËΩΩÊï∞ÊçÆÊãâÂèñÔºåÊ∏ÖÊ¥óÂÆå‰πãÂêéÔºåÂ∞±ÈúÄË¶ÅÂ±ïÁ§∫‰∫Ü„ÄÇ‰∏ÄËà¨ÊòØÊääÊ∏ÖÊ¥óÂ•ΩÁöÑÊï∞ÊçÆÂä†ËΩΩÂà∞mysql‰∏≠ÔºåÁÑ∂ÂêéÂú®ÂêÑÁ≥ªÁªü‰∏≠‰ΩøÁî®ÔºåÊàñËÄÖ‰ΩøÁî®TableauÁõ¥Êé•ÁªôÁõ∏ÂÖ≥‰∫∫ÂëòÂ±ïÁ§∫ ÂºÄÊ∫êÂ∑•ÂÖ∑TalendÊòìÁî®ÊÄßÔºöÊúâ GUI ÂõæÂΩ¢ÁïåÈù¢‰ΩÜÊòØ‰ª• Eclipse ÁöÑÊèí‰ª∂ÊñπÂºèÊèê‰æõ ÊäÄÊúØÊîØÊåÅÔºö‰∏ªË¶ÅÂú®ÁæéÂõΩ ÈÄüÂ∫¶ÔºöÈúÄË¶ÅÊâãÂ∑•Ë∞ÉÊï¥ÔºåÂØπÁâπÂÆöÊï∞ÊçÆÊ∫êÊúâ‰ºòÂåñÁü•ËØÜ ÁõëÊéßÔºöÊúâÁõëÊéßÂíåÊó•ÂøóÂ∑•ÂÖ∑ ËøûÊé•ÊÄßÔºöÂêÑÁßçÂ∏∏Áî® Êï∞ÊçÆÂ∫ì ÔºåÊñá‰ª∂Ôºå webÔºåservice KettleÊòìÁî®ÊÄßÔºöÊúâÈùûÂ∏∏ÂÆπÊòì‰ΩøÁî®ÁöÑ GUIÔºåÂá∫Áé∞ÈóÆÈ¢òÂèØ‰ª•Âà∞Á§æÂå∫Âí®ËØ¢ ÊäÄÊúØÊîØÊåÅÔºöÂú®ÁæéÂõΩÔºåÊ¨ßÊ¥≤ÔºàÊØîÂà©Êó∂ÔºåÂæ∑ÂõΩÔºåÊ≥ïÂõΩÔºåËã±ÂõΩÔºâÔºå‰∫öÊ¥≤Ôºà ‰∏≠ÂõΩ ÔºåÊó•Êú¨ÔºåÈü©ÂõΩÔºâÈÉΩÂèØ‰ª•ÊâæÂà∞Áõ∏ÂÖ≥ÊäÄÊúØÊîØÊåÅ‰∫∫Âëò ÈÄüÂ∫¶ÔºöÊØî Talend Âø´Ôºå‰∏çËøá‰πüÈúÄË¶ÅÊâãÂ∑•Ë∞ÉÊï¥ÔºåÂØπ Oracle Âíå PostGre Á≠âÊï∞ÊçÆÊ∫êÂÅö‰∫Ü‰ºòÂåñÔºåÂêåÊó∂‰πüÂèñÂÜ≥‰∫éËΩ¨Êç¢‰ªªÂä°ÁöÑËÆæËÆ° ÁõëÊéßÔºöÊúâÁõëÊéßÂíåÊó•ÂøóÂ∑•ÂÖ∑ ËøûÊé•ÊÄßÔºöÈùûÂ∏∏ÂπøÊ≥õÁöÑÊï∞ÊçÆÂ∫ìÔºåÊñá‰ª∂ÔºåÂè¶Â§ñÂèØ‰ª•ÈÄöËøáÊèí‰ª∂Êâ©Â±ï InformaticaÊòìÁî®ÊÄßÔºöÊúâÈùûÂ∏∏ÂÆπÊòì‰ΩøÁî®ÁöÑ GUIÔºå‰ΩÜÊòØË¶Å‰∏ìÈó®ÁöÑËÆ≠ÁªÉ ÊäÄÊúØÊîØÊåÅÔºöÈÅçÂ∏ÉÂÖ®‰∏ñÁïå ÈÄüÂ∫¶ÔºöÊòØÊúÄÂø´ÁöÑ ÁõëÊéßÔºöÊúâÈùûÂ∏∏ËØ¶ÁªÜÁöÑÁõëÊéßÂíåÊó•ÂøóÂ∑•ÂÖ∑ ËøûÊé•ÊÄßÔºöÂêÑÁßçÊï∞ÊçÆÊ∫ê]]></content>
      <categories>
        <category>dwh</category>
        <category>etl</category>
      </categories>
      <tags>
        <tag>etl</tag>
        <tag>data-warehouse</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÂÆ¢Êà∑Á´ØÈÄâÊã©]]></title>
    <url>%2Funcategorized%2Fspring%2Fredis-1%2F</url>
    <content type="text"><![CDATA[Redis ÂÆ¢Êà∑Á´ØÁöÑÈÄâÊã©Ê¶ÇÂøµ JedisÔºöÊòØËÄÅÁâåÁöÑRedisÁöÑJavaÂÆûÁé∞ÂÆ¢Êà∑Á´ØÔºåÊèê‰æõ‰∫ÜÊØîËæÉÂÖ®Èù¢ÁöÑRedisÂëΩ‰ª§ÁöÑÊîØÊåÅÔºå RedissonÔºöÂÆûÁé∞‰∫ÜÂàÜÂ∏ÉÂºèÂíåÂèØÊâ©Â±ïÁöÑJavaÊï∞ÊçÆÁªìÊûÑ„ÄÇ LettuceÔºöÈ´òÁ∫ßRedisÂÆ¢Êà∑Á´ØÔºåÁî®‰∫éÁ∫øÁ®ãÂÆâÂÖ®ÂêåÊ≠•ÔºåÂºÇÊ≠•ÂíåÂìçÂ∫î‰ΩøÁî®ÔºåÊîØÊåÅÈõÜÁæ§ÔºåSentinelÔºåÁÆ°ÈÅìÂíåÁºñÁ†ÅÂô®„ÄÇ ‰ºòÁº∫ÁÇπ JedisÔºöÊØîËæÉÂÖ®Èù¢ÁöÑÊèê‰æõ‰∫ÜRedisÁöÑÊìç‰ΩúÁâπÊÄß RedissonÔºö‰øÉ‰Ωø‰ΩøÁî®ËÄÖÂØπRedisÁöÑÂÖ≥Ê≥®ÂàÜÁ¶ªÔºåÊèê‰æõÂæàÂ§öÂàÜÂ∏ÉÂºèÁõ∏ÂÖ≥Êìç‰ΩúÊúçÂä°Ôºå‰æãÂ¶ÇÔºåÂàÜÂ∏ÉÂºèÈîÅÔºåÂàÜÂ∏ÉÂºèÈõÜÂêàÔºåÂèØÈÄöËøáRedisÊîØÊåÅÂª∂ËøüÈòüÂàó LettuceÔºöÂü∫‰∫éNettyÊ°ÜÊû∂ÁöÑ‰∫ã‰ª∂È©±Âä®ÁöÑÈÄö‰ø°Â±ÇÔºåÂÖ∂ÊñπÊ≥ïË∞ÉÁî®ÊòØÂºÇÊ≠•ÁöÑ„ÄÇLettuceÁöÑAPIÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•Êìç‰ΩúÂçï‰∏™LettuceËøûÊé•Êù•ÂÆåÊàêÂêÑÁßçÊìç‰Ωú ÂèØ‰º∏Áº© JedisÔºö‰ΩøÁî®ÈòªÂ°ûÁöÑI/OÔºå‰∏îÂÖ∂ÊñπÊ≥ïË∞ÉÁî®ÈÉΩÊòØÂêåÊ≠•ÁöÑÔºåÁ®ãÂ∫èÊµÅÈúÄË¶ÅÁ≠âÂà∞socketsÂ§ÑÁêÜÂÆåI/OÊâçËÉΩÊâßË°åÔºå‰∏çÊîØÊåÅÂºÇÊ≠•„ÄÇJedisÂÆ¢Êà∑Á´ØÂÆû‰æã‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•ÈúÄË¶ÅÈÄöËøáËøûÊé•Ê±†Êù•‰ΩøÁî®Jedis„ÄÇ RedissonÔºöÂü∫‰∫éNettyÊ°ÜÊû∂ÁöÑ‰∫ã‰ª∂È©±Âä®ÁöÑÈÄö‰ø°Â±ÇÔºåÂÖ∂ÊñπÊ≥ïË∞ÉÁî®ÊòØÂºÇÊ≠•ÁöÑ„ÄÇRedissonÁöÑAPIÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•Êìç‰ΩúÂçï‰∏™RedissonËøûÊé•Êù•ÂÆåÊàêÂêÑÁßçÊìç‰Ωú LettuceÔºöÂü∫‰∫éNettyÊ°ÜÊû∂ÁöÑ‰∫ã‰ª∂È©±Âä®ÁöÑÈÄö‰ø°Â±ÇÔºåÂÖ∂ÊñπÊ≥ïË∞ÉÁî®ÊòØÂºÇÊ≠•ÁöÑ„ÄÇLettuceÁöÑAPIÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•Êìç‰ΩúÂçï‰∏™LettuceËøûÊé•Êù•ÂÆåÊàêÂêÑÁßçÊìç‰ΩúÔºålettuceËÉΩÂ§üÊîØÊåÅredis4ÔºåÈúÄË¶Åjava8Âèä‰ª•‰∏ä„ÄÇlettuceÊòØÂü∫‰∫énettyÂÆûÁé∞ÁöÑ‰∏éredisËøõË°åÂêåÊ≠•ÂíåÂºÇÊ≠•ÁöÑÈÄö‰ø°„ÄÇ ÊØîËæÉ jedis‰ΩøÁõ¥Êé•ËøûÊé•redis server,Â¶ÇÊûúÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËøô‰∏™Êó∂ÂÄôÂè™Êúâ‰ΩøÁî®ËøûÊé•Ê±†Ôºå‰∏∫ÊØè‰∏™jedisÂÆû‰æãÂ¢ûÂä†Áâ©ÁêÜËøûÊé• Ôºõ lettuceÁöÑËøûÊé•ÊòØÂü∫‰∫éNettyÁöÑÔºåËøûÊé•ÂÆû‰æãÔºàStatefulRedisConnectionÔºâÂèØ‰ª•Âú®Â§ö‰∏™Á∫øÁ®ãÈó¥Âπ∂ÂèëËÆøÈóÆÔºåStatefulRedisConnectionÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•‰∏Ä‰∏™ËøûÊé•ÂÆû‰æãÂèØ‰ª•Êª°Ë∂≥Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÁöÑÂπ∂ÂèëËÆøÈóÆÔºåÂΩìÁÑ∂Ëøô‰πüÊòØÂèØ‰º∏Áº©ÁöÑËÆæËÆ°Ôºå‰∏Ä‰∏™ËøûÊé•ÂÆû‰æã‰∏çÂ§üÁöÑÊÉÖÂÜµ‰πüÂèØ‰ª•ÊåâÈúÄÂ¢ûÂä†ËøûÊé•ÂÆû‰æã„ÄÇ RedissonÂÆûÁé∞‰∫ÜÂàÜÂ∏ÉÂºèÂíåÂèØÊâ©Â±ïÁöÑJavaÊï∞ÊçÆÁªìÊûÑÔºåÂíåJedisÁõ∏ÊØîÔºåÂäüËÉΩËæÉ‰∏∫ÁÆÄÂçïÔºå‰∏çÊîØÊåÅÂ≠óÁ¨¶‰∏≤Êìç‰ΩúÔºå‰∏çÊîØÊåÅÊéíÂ∫è„ÄÅ‰∫ãÂä°„ÄÅÁÆ°ÈÅì„ÄÅÂàÜÂå∫Á≠âRedisÁâπÊÄß„ÄÇRedissonÁöÑÂÆóÊó®ÊòØ‰øÉËøõ‰ΩøÁî®ËÄÖÂØπRedisÁöÑÂÖ≥Ê≥®ÂàÜÁ¶ªÔºå‰ªéËÄåËÆ©‰ΩøÁî®ËÄÖËÉΩÂ§üÂ∞ÜÁ≤æÂäõÊõ¥ÈõÜ‰∏≠Âú∞ÊîæÂú®Â§ÑÁêÜ‰∏öÂä°ÈÄªËæë‰∏ä„ÄÇ ÊÄªÁªì‰ºòÂÖà‰ΩøÁî®LettuceÔºåÂ¶ÇÊûúÈúÄË¶ÅÂàÜÂ∏ÉÂºèÈîÅÔºåÂàÜÂ∏ÉÂºèÈõÜÂêàÁ≠âÂàÜÂ∏ÉÂºèÁöÑÈ´òÁ∫ßÁâπÊÄßÔºåÊ∑ªÂä†RedissonÁªìÂêà‰ΩøÁî®ÔºåÂõ†‰∏∫RedissonÊú¨Ë∫´ÂØπÂ≠óÁ¨¶‰∏≤ÁöÑÊìç‰ΩúÊîØÊåÅÂæàÂ∑Æ„ÄÇ]]></content>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[K8sÊê≠Âª∫-YAPI]]></title>
    <url>%2Fdocker%2Fk8s%2Fdocker%2Fk8s%2Fyapi-1%2F</url>
    <content type="text"><![CDATA[YAPIÊê≠Âª∫Ê¶ÇËø∞YApi ÊòØ‰∏Ä‰∏™ÂèØÊú¨Âú∞ÈÉ®ÁΩ≤ÁöÑ„ÄÅÊâìÈÄöÂâçÂêéÁ´ØÂèäQAÁöÑ„ÄÅÂèØËßÜÂåñÁöÑÊé•Âè£ÁÆ°ÁêÜÂπ≥Âè∞ ÂáÜÂ§áÂ∑•‰Ωú1„ÄÅÂáÜÂ§áYapiÈïúÂÉè 2„ÄÅÂáÜÂ§áMongoÈïúÂÉè 3„ÄÅÂàõÂª∫NFSÂÖ±‰∫´Êñá‰ª∂ Ëøô‰∫õÂáÜÂ§áÂ∑•‰ΩúÔºåÈÉΩÂú®ÊàëÁöÑÂçöÂÆ¢‰∏≠ÊúâÂÜôÈÅìÔºåÊúâÁñëÈóÆÂèØ‰ª•ÂéªÊâæ‰∏Ä‰∏ã http://blog.appydm.com ÂÆâË£Ö/ÂêØÂä®(Mongo)Mongo-K8SÈÖçÁΩÆmongo-nfs-pv.yamlÊñá‰ª∂ÂÜÖÂÆπ 123456789101112131415161718192021222324apiVersion: v1kind: PersistentVolumemetadata: name: mongo-nfs-pvspec: capacity: storage: 10Gi accessModes: - ReadWriteOnce nfs: path: /nfs/data/mongo server: 172.24.2.70---apiVersion: v1kind: PersistentVolumeClaimmetadata: name: mongo-nfs-pvcspec: storageClassName: "" accessModes: - ReadWriteOnce resources: requests: storage: 10Gi mongo.yamlÊñá‰ª∂ÂÜÖÂÆπ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960kind: ServiceapiVersion: v1metadata: labels: app: mongo name: mongospec: ports: - port: 19098 targetPort: 27017 selector: app: mongo---apiVersion: extensions/v1beta1kind: Deploymentmetadata: name: mongo labels: app: mongospec: replicas: 1 template: metadata: labels: app: mongo spec: initContainers: - name: 'busyboxplus' image: registry.cn-shenzhen.aliyuncs.com/zhouqi-kubernetes/busyboxplus:v1 command: [ "sh", "-c", "nslookup mysql-system.default.svc.cluster.local" ] containers: - name: mongo image: mongo imagePullPolicy: Always resources: limits: cpu: 2 memory: 2Gi requests: memory: "512Mi" cpu: "200m" ports: - containerPort: 27017 env: - name: "MONGO_INITDB_ROOT_USERNAME" value: "root" - name: "MONGO_INITDB_ROOT_PASSWORD" value: "48660960" volumeMounts: - name: datadir mountPath: /data/db subPath: data volumes: - name: datadir persistentVolumeClaim: claimName: mongo-nfs-pvc Mongo-ÂêØÂä®1kubectl apply -f mongo-nfs-pv.yaml 1kubectl apply -f mongo.yaml ÂÆâË£Ö/ÂêØÂä®(YAPI)ÂàõÂª∫YAPIÁî®Êà∑ÂíåÊï∞ÊçÆÂ∫ìËøõÂÖ•mongoÂÆπÂô®‰∏≠ÔºåÊâßË°å‰∏ãÈù¢ÂëΩ‰ª§ 1234567891011root@mongo-69f8cbc957-xw47b:/# mongoMongoDB shell version v4.0.10connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName=mongodbImplicit session: session &#123; "id" : UUID("d333ace7-d3e7-40bd-9d41-81a72b12771d") &#125;MongoDB server version: 4.0.10&gt; use adminswitched to db admin&gt; db.auth("root", "48660960")1&gt; use yapi&gt; db.createUser(&#123;user:"yapi",pwd:"yapi",roles:[&#123;"role":"readWrite","db":"yapi"&#125;]&#125;) ÂàõÂª∫YAPIÁöÑconfig.jsonÈÖçÁΩÆ12345678910111213141516171819202122232425cat &lt;&lt; EOF &gt; config.json&gt; &#123; "port": "3000", "adminAccount": "admin@admin.com", "db": &#123; "servername": "mongo.default.svc.cluster.local", "DATABASE": "yapi", "port": 19098, "user": "yapi", "pass": "yapi", "authSource": "" &#125;, "mail": &#123; "enable": true, "host": "smtp.163.com", "port": 465, "from": "***@163.com", "auth": &#123; "user": "***@163.com", "pass": "*****" &#125; &#125;&#125;&gt; EOF YAPI-K8SÈÖçÁΩÆyapi.yamlÊñá‰ª∂ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061kind: ServiceapiVersion: v1metadata: labels: app: yapi name: yapispec: ports: - port: 19080 targetPort: 3000 selector: app: yapi---apiVersion: extensions/v1beta1kind: Deploymentmetadata: name: yapi labels: app: yapispec: replicas: 1 template: metadata: labels: app: yapi spec: initContainers: - name: 'busyboxplus' image: registry.cn-shenzhen.aliyuncs.com/zhouqi-kubernetes/busyboxplus:v1 command: [ "sh", "-c", "nslookup mongo.default.svc.cluster.local" ] containers: - name: yapi image: registry.cn-shenzhen.aliyuncs.com/zhouqi-kubernetes/yapi:v1.7.2 imagePullPolicy: Always resources: limits: cpu: 1 memory: 1Gi requests: memory: "512Mi" cpu: "200m" ports: - containerPort: 3000 command: [ "/bin/bash", "-c", "[ ! -e /home/yapi/log/init.lock ] &amp;&amp; npm run install-server &amp;&amp; touch /home/yapi/log/init.lock; npm run start" ] volumeMounts: - name: yapi-nfs mountPath: /home/yapi/config.json subPath: config.json volumes: - name: yapi-nfs nfs: server: 172.24.2.71 path: /nfs/data/yapi YAPI-ÂêØÂä®1kubectl apply -f yapi.yaml]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[K8sÊê≠Âª∫-CoreDns]]></title>
    <url>%2Fdocker%2Fk8s%2Fdocker%2Fk8s%2FcoreDns-1%2F</url>
    <content type="text"><![CDATA[CoreDNSÁÆÄ‰ªãCoreDNS ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™ DNS ÊúçÂä°ÔºåËÄå DNS ‰Ωú‰∏∫‰∏ÄÁßçÂ∏∏ËßÅÁöÑÊúçÂä°ÂèëÁé∞ÊâãÊÆµÔºåÊâÄ‰ª•ÂæàÂ§öÂºÄÊ∫êÈ°πÁõÆ‰ª•ÂèäÂ∑•Á®ãÂ∏àÈÉΩ‰ºö‰ΩøÁî® CoreDNS ‰∏∫ÈõÜÁæ§Êèê‰æõÊúçÂä°ÂèëÁé∞ÁöÑÂäüËÉΩÔºåKubernetes Â∞±Âú®ÈõÜÁæ§‰∏≠‰ΩøÁî® CoreDNS Ëß£ÂÜ≥ÊúçÂä°ÂèëÁé∞ÁöÑÈóÆÈ¢ò„ÄÇ Â¶ÇÊûúÊÉ≥Ë¶ÅÂú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂÆûÁé∞ÊúçÂä°ÂèëÁé∞ÁöÑÂäüËÉΩÔºåCoreDNS ÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑÈÄâÊã©ÔºåCoreDNS‰Ωú‰∏∫‰∏Ä‰∏™Â∑≤ÁªèËøõÂÖ•CNCFÂπ∂‰∏îÂú®Kubernetes‰∏≠‰Ωú‰∏∫DNSÊúçÂä°‰ΩøÁî®ÁöÑÂ∫îÁî®ÔºåÂÖ∂Êú¨Ë∫´ÁöÑÁ®≥ÂÆöÊÄßÂíåÂèØÁî®ÊÄßÂ∑≤ÁªèÂæóÂà∞‰∫ÜËØÅÊòéÔºåÂêåÊó∂ÂÆÉÂü∫‰∫éÊèí‰ª∂ÂÆûÁé∞ÁöÑÊñπÂºèÈùûÂ∏∏ËΩªÈáèÂπ∂‰∏îÊòì‰∫é‰ΩøÁî®ÔºåÊèí‰ª∂ÈìæÁöÑ‰ΩøÁî®‰πü‰ΩøÂæóÁ¨¨‰∏âÊñπÊèí‰ª∂ÁöÑÂÆö‰πâÂèòÂæóÈùûÂ∏∏ÁöÑÊñπ‰æø„ÄÇ Coredns Êû∂ÊûÑÊï¥‰∏™ CoreDNS ÊúçÂä°ÈÉΩÂª∫Á´ãÂú®‰∏Ä‰∏™‰ΩøÁî® Go ÁºñÂÜôÁöÑ HTTP/2 Web ÊúçÂä°Âô® Caddy „ÄÇ Coredns È°πÁõÆ‰∏ãËΩΩ‰∏ãËΩΩÂú∞ÂùÄ1Ôºö wget https://github.com/coredns/deployment/archive/master.zipunzip master.zip ‰∏ãËΩΩÂú∞ÂùÄ2Ôºögit clone https://github.com/coredns/deployment.git ÂÆâË£ÖÈÉ®ÁΩ≤Á°ÆËÆ§ÊòØÂê¶Â≠òÂú®Â∑≤ËøêË°ådnsÊúçÂä° 1kubectl get pods -o wide -n=kube-system Âà†Èô§ÂëΩ‰ª§1kubectl delete --namespace=kube-system deployment ****-dns ÁîüÊàêÂÆâË£ÖÈÖçÁΩÆÊñá‰ª∂12cd /workspace/deployment/kubernetes./deploy.sh -r 10.254.0.0/16 -i 10.254.0.2 -d cluster.local -t coredns.yaml.sed -s &gt;coredns.yaml È™åËØÅÈÖçÁΩÆÊñá‰ª∂Ê†∏ÂøÉÈÖçÁΩÆ1cat coredns.yaml ÊâßË°åÂÆâË£Ö 1kubectl create -f coredns.yaml È™åËØÅÂÆâË£Ö 12345678kubectl get svc -o wide -n=kube-systemNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) heapster ClusterIP 10.109.196.102 &lt;none&gt; 80/TCP kube-dns ClusterIP 10.96.0.2 &lt;none&gt; 53/UDP,53/TCP,9153/TCPkubernetes-dashboard NodePort 10.110.231.202 &lt;none&gt; 443:30001/TCP monitoring-grafana NodePort 10.98.242.145 &lt;none&gt; 80:30108/TCP monitoring-influxdb ClusterIP 10.100.60.54 &lt;none&gt; 8086/TCP Êü•ÁúãcorednsËØ¶ÁªÜ ËÆæÁΩÆmasterÂíåËäÇÁÇπDNS‰ΩøÁî®ÂëΩ‰ª§Êü•ÁúãkubeletÈÖçÁΩÆÁöÑ‰ΩçÁΩÆ 1systemctl status kubelet -l ‰øÆÊîπ/var/lib/kubelet/config.yamlÊñá‰ª∂ÁöÑÂÜÖÂÆπ 123clusterDNS:- 10.96.0.2clusterDomain: cluster.local. ÈáçÂêØ 12systemctl daemon-reloadsystemctl restart kubelet È™åËØÅDNS1„ÄÅÂàõÂª∫‰∏Ä‰∏™curl 1kubectl run -it --image=registry.cn-shenzhen.aliyuncs.com/zhouqi-kubernetes/busyboxplus:v1 curl --rm Ëøô‰∏™Âú∞ÊñπÂ¶ÇÊûúË¶ÅÈ™åËØÅÂêÑËäÇÁÇπÔºåÂèØ‰ª•‰º∏Áº©Â§ö‰∏™Ôºå‰ºöËøêË°åÂú®‰∏çÂêåÁöÑËäÇÁÇπ‰∏≠ ÂØπËäÇÁÇπÁöÑÈ™åËØÅÔºåÂè™ÈúÄË¶ÅËøõÂÖ•ÂÆπÂô®‰ΩøÁî®nslookup kubernetesÂëΩ‰ª§ÔºåÂ∞±ÂèØ‰ª•ÊòæÁ§∫‰∏ãÂõæ ÊñáÁåÆÂèÇËÄÉÔºöhttps://blog.51cto.com/michaelkang/2367800]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[K8sÊê≠Âª∫-ZookeeperÈõÜÁæ§]]></title>
    <url>%2Fdocker%2Fk8s%2Fdocker%2Fk8s%2Fzookeeper-1%2F</url>
    <content type="text"><![CDATA[K8SÊê≠Âª∫ZookeeperÈõÜÁæ§ÊúçÂä°Âô®ËµÑÊ∫ê ÊúçÂä°Âô®Âú∞ÂùÄ k8s NFS 172.24.2.67 k8s-node-3 service 172.24.2.69 k8s-master client 172.24.2.70 k8s-node-2 client 172.24.2.71 k8s-node-1 client ÂÆâË£ÖNFS1„ÄÅÂú®67ÊúçÂä°Âô®‰∏≠ÂÆâË£ÖNFS 123456789101112131415161718192021222324252627#masterËäÇÁÇπÂÆâË£Önfsyum -y install nfs-utils#ÂàõÂª∫nfsÁõÆÂΩïmkdir -p /nfs/data/#‰øÆÊîπÊùÉÈôêchmod -R 777 /nfs/data#ÁºñËæëexportÊñá‰ª∂,Ëøô‰∏™Êñá‰ª∂Â∞±ÊòØnfsÈªòËÆ§ÁöÑÈÖçÁΩÆÊñá‰ª∂vi /etc/exports/nfs/data *(rw,no_root_squash,sync)#ÈÖçÁΩÆÁîüÊïàexportfs -r#Êü•ÁúãÁîüÊïàexportfs#ÂêØÂä®rpcbind„ÄÅnfsÊúçÂä°systemctl restart rpcbind &amp;&amp; systemctl enable rpcbindsystemctl restart nfs &amp;&amp; systemctl enable nfs#Êü•Áúã RPC ÊúçÂä°ÁöÑÊ≥®ÂÜåÁä∂ÂÜµrpcinfo -p localhost#showmountÊµãËØïshowmount -e 172.24.2.67 2„ÄÅÊâÄÊúânodeËäÇÁÇπÂÆâË£ÖÂÆ¢Êà∑Á´ØÔºåÂºÄÊú∫ÂêØÂä® 12yum -y install nfs-utilssystemctl start nfs &amp;&amp; systemctl enable nfs ÈÉ®ÁΩ≤NSF-Zookeeper-PV1„ÄÅÊñ∞Âª∫‰∏Ä‰∏™zk-nfs-pv.yamlÊñá‰ª∂ÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950apiVersion: v1kind: PersistentVolumemetadata: name: zk-nfs-pv-01 labels: pv: zk-nfs-pv-01spec: capacity: storage: 3Gi accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Recycle storageClassName: zk-nfs nfs: path: /nfs/data/zookeeper/pv-01 server: 172.24.2.67--- apiVersion: v1kind: PersistentVolumemetadata: name: zk-nfs-pv-02 labels: pv: zk-nfs-pv-02spec: capacity: storage: 3Gi accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Recycle storageClassName: zk-nfs nfs: path: /nfs/data/zookeeper/pv-02 server: 172.24.2.67---apiVersion: v1kind: PersistentVolumemetadata: name: zk-nfs-pv-03 labels: pv: zk-nfs-pv-03spec: capacity: storage: 3Gi accessModes: - ReadWriteOnce persistentVolumeReclaimPolicy: Recycle storageClassName: zk-nfs nfs: path: /nfs/data/zookeeper/pv-03 server: 172.24.2.67 2„ÄÅÂêØÂä®zk-nfs-pv 1kubectl create -f zk-nfs-pv.yaml 3„ÄÅÊü•ÁúãÁä∂ÊÄÅ ÈÉ®ÁΩ≤ZookeeperÈõÜÁæ§1„ÄÅÊñ∞Âª∫Êñá‰ª∂zookeeper.yamlÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183apiVersion: v1kind: Servicemetadata: name: zk-headless labels: app: zk-headless spec: ports: - port: 2888 name: server - port: 3888 name: leader-election clusterIP: None selector: app: zk---apiVersion: v1kind: Servicemetadata: name: zk-cs labels: app: zkspec: ports: - port: 2181 name: client nodePort: 30002 selector: app: zk type: NodePort ---apiVersion: v1kind: ConfigMapmetadata: name: zk-configdata: ensemble: "zk-0;zk-1;zk-2" jvm.heap: "2G" tick: "2000" init: "10" sync: "5" client.cnxns: "60" snap.retain: "3" purge.interval: "1"---apiVersion: policy/v1beta1kind: PodDisruptionBudgetmetadata: name: zk-budgetspec: selector: matchLabels: app: zk minAvailable: 2---apiVersion: apps/v1kind: StatefulSetmetadata: name: zkspec: selector: matchLabels: app: zk serviceName: zk-headless replicas: 3 template: metadata: labels: app: zk spec: affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: "app" operator: In values: - zk topologyKey: "kubernetes.io/hostname" containers: - name: kubernetes-zookeeper imagePullPolicy: Always image: "registry.cn-shenzhen.aliyuncs.com/zhouqi-kubernetes/k8szk:v3" resources: limits: cpu: 1 memory: 1Gi requests: memory: 512Mi cpu: 500m ports: - containerPort: 2181 name: client - containerPort: 2888 name: server - containerPort: 3888 name: leader-election env: - name : ZK_REPLICAS value: "3" - name : ZK_ENSEMBLE valueFrom: configMapKeyRef: name: zk-config key: ensemble - name : ZK_HEAP_SIZE valueFrom: configMapKeyRef: name: zk-config key: jvm.heap - name : ZK_TICK_TIME valueFrom: configMapKeyRef: name: zk-config key: tick - name : ZK_INIT_LIMIT valueFrom: configMapKeyRef: name: zk-config key: init - name : ZK_SYNC_LIMIT valueFrom: configMapKeyRef: name: zk-config key: tick - name : ZK_MAX_CLIENT_CNXNS valueFrom: configMapKeyRef: name: zk-config key: client.cnxns - name: ZK_SNAP_RETAIN_COUNT valueFrom: configMapKeyRef: name: zk-config key: snap.retain - name: ZK_PURGE_INTERVAL valueFrom: configMapKeyRef: name: zk-config key: purge.interval - name: ZK_CLIENT_PORT value: "2181" - name: ZK_SERVER_PORT value: "2888" - name: ZK_ELECTION_PORT value: "3888" command: - sh - -c - zkGenConfig.sh &amp;&amp; zkServer.sh start-foreground readinessProbe: exec: command: - "zkOk.sh" initialDelaySeconds: 10 timeoutSeconds: 5 livenessProbe: exec: command: - "zkOk.sh" initialDelaySeconds: 10 timeoutSeconds: 5 volumeMounts: - name: datadir mountPath: /var/lib/zookeeper subPath: data/ - name: datadir mountPath: /opt/zookeeper/conf subPath: config/ securityContext: runAsUser: 1000 fsGroup: 1000 volumeClaimTemplates: - metadata: name: datadir annotations: volume.beta.kubernetes.io/storage-class: "zk-nfs" spec: accessModes: [ "ReadWriteOnce" ] resources: requests: storage: 3Gi 2„ÄÅÂêØÂä®zookeeper.yaml 1kubectl create -f zookeeper.yaml 3„ÄÅÊü•ÁúãÂêØÂä®ÊÉÖÂÜµ 1kubectl get pod -o wide 4„ÄÅÊúÄÂêéÊù•È™åËØÅZookeeperÈõÜÁæ§ÊòØÂê¶Ê≠£Â∏∏ÔºåÊü•ÁúãÈõÜÁæ§ËäÇÁÇπÁä∂ÊÄÅ 1for i in 0 1 2; do kubectl exec zk-$i zkServer.sh status; done ÂèÇËÄÉÊñáÁåÆÔºöhttps://www.jianshu.com/p/2633b95c244c]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[K8s-DashboardÂÆâË£Ö]]></title>
    <url>%2Fdocker%2Fk8s%2Fdocker%2Fk8s%2Fdashboard-1%2F</url>
    <content type="text"><![CDATA[ÂÆâË£ÖKubernetes-dashboardÊ¶ÇËø∞Kubernetes DashboardÊòØKubernetesÈõÜÁæ§ÁöÑÂü∫‰∫éWebÁöÑÈÄöÁî®UI„ÄÇÂÆÉÂÖÅËÆ∏Áî®Êà∑ÁÆ°ÁêÜÂú®Áæ§ÈõÜ‰∏≠ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÂπ∂ÂØπÂÖ∂ËøõË°åÊïÖÈöúÊéíÈô§Ôºå‰ª•ÂèäÁÆ°ÁêÜÁæ§ÈõÜÊú¨Ë∫´„ÄÇ ÂàõÂª∫ÂàõÂª∫DashboardÁöÑyamlÊñá‰ª∂ÔºåÂπ∂ËÆæÁΩÆÁ´ØÂè£‰∏∫30001ÔºåÊãâÂèñÈïúÂÉèÊñá‰ª∂Âú∞ÂùÄ 123wget https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yamlsed -i 's/k8s.gcr.io/loveone/g' kubernetes-dashboard.yamlsed -i '/targetPort:/a\ \ \ \ \ \ nodePort: 30001\n\ \ type: NodePort' kubernetes-dashboard.yaml ËØÅ‰π¶ÁîüÊàêËá™Á≠æËØÅ‰π¶1ÔºâÁîüÊàêËØÅ‰π¶ËØ∑Ê±ÇÁöÑkey openssl genrsa -out dashboard.key 2048 2ÔºâÁîüÊàêËØÅ‰π¶ËØ∑Ê±Ç openssl req -days 3650 -new -out dashboard.csr -key dashboard.key -subj ‚Äò/CN=172.24.2.69‚Äò 3ÔºâÁîüÊàêËá™Á≠æËØÅ‰π¶ openssl x509 -req -in dashboard.csr -signkey dashboard.key -out dashboard.crt ‰ª•‰∏äÈÉΩÊòØÂú®ÊúçÂä°Âô®‰∏äÊâßË°å ÂàõÂª∫Secret1ÔºâÂà†Èô§‰πãÂâçÈÉ®ÁΩ≤ÁöÑDashboard kubectl delete -f kubernetes-dashboard.yaml 2) ÂàõÂª∫‰∏éKubernetesDashboard ÈÉ®ÁΩ≤Êñá‰ª∂‰∏≠ÂêåÂêçÁöÑsecret kubectl create secret generic kubernetes-dashboard-certs ‚Äìfrom-file=./dashboard.key ‚Äìfrom-file=./dashboard.crt -n kube-system Ê≥®ÊÑè ÂëΩÂêçÁ©∫Èó¥Ôºökube-system Âà†Èô§ËØÅ‰π¶Ôºökubectl delete secret kubernetes-dashboard-certs 3)Ê≥®Èáä kubernetes-dashboard.yamlÊñá‰ª∂‰∏≠ÂÖ≥‰∫éDashboard SecretÈÉ®ÂàÜ ÂÆâË£Ö1„ÄÅÈÉ®ÁΩ≤Dashboard 1kubectl create -f kubernetes-dashboard.yaml 2„ÄÅÂàõÂª∫ÂÆåÊàêÂêéÔºåÊ£ÄÊü•Áõ∏ÂÖ≥ÊúçÂä°ËøêË°åÁä∂ÊÄÅ 123456789kubectl get deployment kubernetes-dashboard -n kube-systemkubectl get pods -n kube-system -o widekubectl get services -n kube-systemkubectl describe pod kubernetes-dashboard-fd674d9c5-dp5k6 --namespace=kube-systemnetstat -ntlp|grep 30001 3„ÄÅÊü•ÁúãËÆøÈóÆDashboardÁöÑËÆ§ËØÅ‰ª§Áâå 123kubectl create serviceaccount dashboard-admin -n kube-systemkubectl create clusterrolebinding dashboard-admin --clusterrole=cluster-admin --serviceaccount=kube-system:dashboard-adminkubectl describe secrets -n kube-system $(kubectl -n kube-system get secret | awk '/dashboard-admin/&#123;print $1&#125;') ÈóÆÈ¢òÈõÜÂêà ÈóÆÈ¢òÔºöChromeÊó†Ê≥ïËÆøÈóÆ Ëß£ÂÜ≥Ôºöchrome.exe‚Äù Âú®Âø´Êç∑ÊñπÂºè‰∏≠Â¢ûÂä† ‚Äìdisable-infobars ‚Äìignore-certificate-errors ÈóÆÈ¢òÔºöMasterÁöÑTokenËøáÊúü ‰ΩøÁî®ÂëΩ‰ª§Ôºökubeadm token createÈáçÊñ∞ÁîüÊàêTokenÂú®Âä†ÂÖ• ÈóÆÈ¢òÔºöÂ≠êËäÇÁÇπÂä†ÂÖ•ÂêéÂá∫Áé∞NotReady Âú®master‰∏≠ÈáçÂêØdockerÔºåÊñπÂèØËß£ÂÜ≥]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[K8sÂÆâË£Ö]]></title>
    <url>%2Fdocker%2Fk8s%2Fdocker%2Fk8s%2F1%2F</url>
    <content type="text"><![CDATA[K8SÂÆâË£ÖKubernetesÊîØÊåÅÂú®Áâ©ÁêÜÊúçÂä°Âô®ÊàñËôöÊãüÊú∫‰∏≠ËøêË°åÔºåÊú¨Ê¨°‰ΩøÁî®ËôöÊãüÊú∫ÂáÜÂ§áÊµãËØïÁéØÂ¢ÉÔºåÁ°¨‰ª∂ÈÖçÁΩÆ‰ø°ÊÅØÂ¶ÇË°®ÊâÄÁ§∫ IPÂú∞ÂùÄ ËäÇÁÇπËßíËâ≤ Hostname 172.24.2.69 master k8s-master 172.24.2.71 worker k8s-node-1 172.24.2.70 worker k8s-node-2 ÁéØÂ¢ÉÂáÜÂ§á1„ÄÅËÆæÁΩÆ‰∏ªÊú∫ÂêçhostnameÔºåÁÆ°ÁêÜËäÇÁÇπËÆæÁΩÆ‰∏ªÊú∫Âêç‰∏∫ k8s-master „ÄÇ 1hostnamectl set-hostname k8s-master 2„ÄÅÂÖ≥Èó≠Èò≤ÁÅ´Â¢ô„ÄÅselinuxÂíåswap 123456systemctl stop firewalldsystemctl disable firewalldsetenforce 0sed -i "s/^SELINUX=enforcing/SELINUX=disabled/g" /etc/selinux/configswapoff -ased -i 's/.*swap.*/#&amp;/' /etc/fstab 3„ÄÅÈÖçÁΩÆÂÜÖÊ†∏ÂèÇÊï∞ÔºåÂ∞ÜÊ°•Êé•ÁöÑIPv4ÊµÅÈáè‰º†ÈÄíÂà∞iptablesÁöÑÈìæ 123456cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt;EOFnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1EOFsysctl --system 4„ÄÅÈÖçÁΩÆÂõΩÂÜÖyumÊ∫ê 123456789yum install -y wgetmkdir /etc/yum.repos.d/bak &amp;&amp; mv /etc/yum.repos.d/*.repo /etc/yum.repos.d/bakwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repowget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repoyum clean all &amp;&amp; yum makecache 5„ÄÅÈÖçÁΩÆÂõΩÂÜÖKubernetesÊ∫ê 12345678910cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo[kubernetes]name=Kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/enabled=1gpgcheck=1repo_gpgcheck=1gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgEOF 6„ÄÅÈÖçÁΩÆ docker Ê∫ê 1wget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo ËΩØ‰ª∂ÂÆâË£Ö1„ÄÅÂÆâË£Ödocker 12345yum install docker-ce-18.06.1.ce-3.el7systemctl enable docker &amp;&amp; systemctl start dockerdocker --version 2„ÄÅÂÆâË£Ökubeadm„ÄÅkubelet„ÄÅkubectl 123yum install kubelet-1.14.3-0 kubeadm-1.14.3-0 kubectl-1.14.3-0systemctl enable kubelet ÈÉ®ÁΩ≤ÂêØÂä®1„ÄÅÂú®masterËøõË°åKubernetesÈõÜÁæ§ÂàùÂßãÂåñ 1kubeadm init --kubernetes-version=1.14.3 --image-repository registry.aliyuncs.com/google_containers --pod-network-cidr=10.244.0.0/16 2„ÄÅÈÖçÁΩÆkubectlÂ∑•ÂÖ∑ 12345mkdir -p /root/.kubecp /etc/kubernetes/admin.conf /root/.kube/configkubectl get nodeskubectl get cs 3„ÄÅÈÉ®ÁΩ≤flannelÁΩëÁªú 1kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml Â≠êËäÇÁÇπÈÉ®ÁΩ≤1„ÄÅËÆæÁΩÆÂ≠êËäÇÁÇπÁöÑÂêçÁß∞ 1hostnamectl set-hostname k8s-node-1 2„ÄÅÂ≠êËäÇÁÇπÂèØ‰ª•ÁªßÁª≠ÊâßË°å‰∏ªËäÇÁÇπ‰∏≠ÔºàÁéØÂ¢ÉÂáÜÂ§á„ÄÅËΩØ‰ª∂ÂÆâË£ÖÔºâ 3„ÄÅÂ∞ÜÂ≠êËäÇÁÇπÂä†ÂÖ•Âà∞‰∏ªËäÇÁÇπ‰∏≠ 12kubeadm join 172.24.2.69:6443 --token 94zry6.lzob4h452am02f0d \ --discovery-token-ca-cert-hash sha256:bf8e4fcdbf4001cafe5ab5325e429dcb3f8a52a836d0a6b80f683db506611043 4„ÄÅÂ¶ÇÊûúÂΩìtokenËøáÊúü‰∫ÜÔºåÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÂëΩ‰ª§ÈáçÊñ∞ÁîüÊàêtoken1kubeadm token create ÈõÜÁæ§Áä∂ÊÄÅÊ£ÄÊü•Âú®masterËäÇÁÇπËæìÂÖ•ÂëΩ‰ª§Ê£ÄÊü•ÈõÜÁæ§Áä∂ÊÄÅÔºåËøîÂõûÂ¶Ç‰∏ãÁªìÊûúÂàôÈõÜÁæ§Áä∂ÊÄÅÊ≠£Â∏∏ 123456kubectl get nodesNAME STATUS ROLES AGE VERSIONk8s-master Ready master 7d6h v1.14.3k8s-node-1 Ready &lt;none&gt; 7d5h v1.14.3k8s-node-2 Ready &lt;none&gt; 100s v1.14.3 ÂèÇËÄÉÊñáÁåÆÔºöhttps://www.kubernetes.org.cn/5462.html]]></content>
      <categories>
        <category>docker</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring OAuth2Âü∫Á°Ä]]></title>
    <url>%2Fjava%2Fspring%2Fspring%2Fspring-oauth2%2F</url>
    <content type="text"><![CDATA[Spring OAuth2.0 Êèê‰æõËÄÖÂÆûÁé∞ÂéüÁêÜSpring OAuth2.0Êèê‰æõËÄÖÂÆûÈôÖ‰∏äÂàÜ‰∏∫ ÊéàÊùÉÊúçÂä° Authorization Service. ËµÑÊ∫êÊúçÂä° Resource Service. ËôΩÁÑ∂Ëøô‰∏§‰∏™Êèê‰æõËÄÖÊúâÊó∂ÂÄôÂèØËÉΩÂ≠òÂú®Âêå‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫è‰∏≠Ôºå‰ΩÜÂú®Spring Security OAuth‰∏≠‰Ω†ÂèØ‰ª•Êää‰ªñÂÆÉ‰ª¨ÂêÑËá™ÊîæÂú®‰∏çÂêåÁöÑÂ∫îÁî®‰∏äÔºåËÄå‰∏î‰Ω†ÂèØ‰ª•ÊúâÂ§ö‰∏™ËµÑÊ∫êÊúçÂä°ÔºåÂÆÉ‰ª¨ÂÖ±‰∫´Âêå‰∏Ä‰∏™‰∏≠Â§ÆÊéàÊùÉÊúçÂä°„ÄÇ ÈÖçÁΩÆ‰∏Ä‰∏™ÊéàÊùÉÊúçÂä°ÂøÖÈ°ªË¶ÅÂÆûÁé∞ÁöÑendpointsÔºö AuthorizationEndpointÔºöÁî®Êù•‰Ωú‰∏∫ËØ∑Ê±ÇËÄÖËé∑ÂæóÊéàÊùÉÁöÑÊúçÂä°ÔºåÈªòËÆ§ÁöÑURLÊòØ/oauth/authorize. TokenEndpointÔºöÁî®Êù•‰Ωú‰∏∫ËØ∑Ê±ÇËÄÖËé∑Âæó‰ª§ÁâåÔºàTokenÔºâÁöÑÊúçÂä°ÔºåÈªòËÆ§ÁöÑURLÊòØ/oauth/token. ÈÖçÁΩÆ‰∏Ä‰∏™ËµÑÊ∫êÊúçÂä°ÂøÖÈ°ªË¶ÅÂÆûÁé∞ÁöÑËøáÊª§Âô®Ôºö OAuth2AuthenticationProcessingFilterÔºöÁî®Êù•‰Ωú‰∏∫ËÆ§ËØÅ‰ª§ÁâåÔºàTokenÔºâÁöÑ‰∏Ä‰∏™Â§ÑÁêÜÊµÅÁ®ãËøáÊª§Âô®„ÄÇÂè™ÊúâÂΩìËøáÊª§Âô®ÈÄöËøá‰πãÂêéÔºåËØ∑Ê±ÇËÄÖÊâçËÉΩËé∑ÂæóÂèó‰øùÊä§ÁöÑËµÑÊ∫ê ÊéàÊùÉÊúçÂä°ÈÖçÁΩÆÈÖçÁΩÆ‰∏Ä‰∏™ÊéàÊùÉÊúçÂä°Ôºå‰Ω†ÈúÄË¶ÅËÄÉËôëÂá†ÁßçÊéàÊùÉÁ±ªÂûãÔºàGrant TypeÔºâÔºå‰∏çÂêåÁöÑÊéàÊùÉÁ±ªÂûã‰∏∫ÂÆ¢Êà∑Á´ØÔºàClientÔºâÊèê‰æõ‰∫Ü‰∏çÂêåÁöÑËé∑Âèñ‰ª§ÁâåÔºàTokenÔºâÊñπÂºèÔºå‰∏∫‰∫ÜÂÆûÁé∞Âπ∂Á°ÆÂÆöËøôÂá†ÁßçÊéàÊùÉÔºåÈúÄË¶ÅÈÖçÁΩÆ‰ΩøÁî® ClientDetailsService Âíå TokenService Êù•ÂºÄÂêØÊàñËÄÖÁ¶ÅÁî®ËøôÂá†ÁßçÊéàÊùÉÊú∫Âà∂„ÄÇÂà∞ËøôÈáåÂ∞±ËØ∑Ê≥®ÊÑè‰∫ÜÔºå‰∏çÁÆ°‰Ω†‰ΩøÁî®‰ªÄ‰πàÊ†∑ÁöÑÊéàÊùÉÁ±ªÂûãÔºàGrant TypeÔºâÔºåÊØè‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÔºàClientÔºâÈÉΩËÉΩÂ§üÈÄöËøáÊòéÁ°ÆÁöÑÈÖçÁΩÆ‰ª•ÂèäÊùÉÈôêÊù•ÂÆûÁé∞‰∏çÂêåÁöÑÊéàÊùÉËÆøÈóÆÊú∫Âà∂„ÄÇËøô‰πüÂ∞±ÊòØËØ¥ÔºåÂÅáÂ¶Ç‰Ω†Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÊîØÊåÅ‚Äùclient_credentials‚ÄùÁöÑÊéàÊùÉÊñπÂºèÔºåÂπ∂‰∏çÊÑèÂë≥ÁùÄÂÆ¢Êà∑Á´ØÂ∞±ÈúÄË¶Å‰ΩøÁî®ËøôÁßçÊñπÂºèÊù•Ëé∑ÂæóÊéàÊùÉ„ÄÇ authorization_codeÔºöÊéàÊùÉÁ†ÅÁ±ªÂûã„ÄÇ implicitÔºöÈöêÂºèÊéàÊùÉÁ±ªÂûã„ÄÇ passwordÔºöËµÑÊ∫êÊâÄÊúâËÄÖÔºàÂç≥Áî®Êà∑ÔºâÂØÜÁ†ÅÁ±ªÂûã„ÄÇ client_credentialsÔºöÂÆ¢Êà∑Á´ØÂá≠ÊçÆÔºàÂÆ¢Êà∑Á´ØID‰ª•ÂèäKeyÔºâÁ±ªÂûã„ÄÇ refresh_tokenÔºöÈÄöËøá‰ª•‰∏äÊéàÊùÉËé∑ÂæóÁöÑÂà∑Êñ∞‰ª§ÁâåÊù•Ëé∑ÂèñÊñ∞ÁöÑ‰ª§Áâå„ÄÇ ÈÖçÁΩÆÂÆ¢Êà∑Á´ØËØ¶ÊÉÖ‰ø°ÊÅØClientDetailsServiceConfigurer (AuthorizationServerConfigurer ÁöÑ‰∏Ä‰∏™ÂõûË∞ÉÈÖçÁΩÆÈ°πÔºåËßÅ‰∏äÁöÑÊ¶ÇËø∞) ËÉΩÂ§ü‰ΩøÁî®ÂÜÖÂ≠òÊàñËÄÖJDBCÊù•ÂÆûÁé∞ÂÆ¢Êà∑Á´ØËØ¶ÊÉÖÊúçÂä°ÔºàClientDetailsServiceÔºâÔºåÊúâÂá†‰∏™ÈáçË¶ÅÁöÑÂ±ûÊÄßÂ¶Ç‰∏ãÂàóË°®Ôºö clientIdÔºöÔºàÂøÖÈ°ªÁöÑÔºâÁî®Êù•Ê†áËØÜÂÆ¢Êà∑ÁöÑId„ÄÇ secretÔºöÔºàÈúÄË¶ÅÂÄºÂæó‰ø°‰ªªÁöÑÂÆ¢Êà∑Á´ØÔºâÂÆ¢Êà∑Á´ØÂÆâÂÖ®Á†ÅÔºåÂ¶ÇÊûúÊúâÁöÑËØù„ÄÇ scopeÔºöÁî®Êù•ÈôêÂà∂ÂÆ¢Êà∑Á´ØÁöÑËÆøÈóÆËåÉÂõ¥ÔºåÂ¶ÇÊûú‰∏∫Á©∫ÔºàÈªòËÆ§ÔºâÁöÑËØùÔºåÈÇ£‰πàÂÆ¢Êà∑Á´ØÊã•ÊúâÂÖ®ÈÉ®ÁöÑËÆøÈóÆËåÉÂõ¥„ÄÇ authorizedGrantTypesÔºöÊ≠§ÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ΩøÁî®ÁöÑÊéàÊùÉÁ±ªÂûãÔºåÈªòËÆ§‰∏∫Á©∫„ÄÇ authoritiesÔºöÊ≠§ÂÆ¢Êà∑Á´ØÂèØ‰ª•‰ΩøÁî®ÁöÑÊùÉÈôêÔºàÂü∫‰∫éSpring Security authoritiesÔºâ„ÄÇ ÈÖçÁΩÆÊéàÊùÉÁ±ªÂûãÊéàÊùÉÊòØ‰ΩøÁî® AuthorizationEndpoint Ëøô‰∏™Á´ØÁÇπÊù•ËøõË°åÊéßÂà∂ÁöÑÔºå‰Ω†ËÉΩÂ§ü‰ΩøÁî® AuthorizationServerEndpointsConfigurer Ëøô‰∏™ÂØπË±°ÁöÑÂÆû‰æãÊù•ËøõË°åÈÖçÁΩÆ(AuthorizationServerConfigurer ÁöÑ‰∏Ä‰∏™ÂõûË∞ÉÈÖçÁΩÆÈ°πÔºåËßÅ‰∏äÁöÑÊ¶ÇËø∞) ÔºåÂ¶ÇÊûú‰Ω†‰∏çËøõË°åËÆæÁΩÆÁöÑËØùÔºåÈªòËÆ§ÊòØÈô§‰∫ÜËµÑÊ∫êÊâÄÊúâËÄÖÂØÜÁ†ÅÔºàpasswordÔºâÊéàÊùÉÁ±ªÂûã‰ª•Â§ñÔºåÊîØÊåÅÂÖ∂‰ΩôÊâÄÊúâÊ†áÂáÜÊéàÊùÉÁ±ªÂûãÁöÑÔºàRFC6749ÔºâÔºåÊàë‰ª¨Êù•Áúã‰∏Ä‰∏ãËøô‰∏™ÈÖçÁΩÆÂØπË±°ÊúâÂì™‰∫õÂ±ûÊÄßÂèØ‰ª•ËÆæÁΩÆÂêßÔºåÂ¶Ç‰∏ãÂàóË°®Ôºö authenticationManagerÔºöËÆ§ËØÅÁÆ°ÁêÜÂô®ÔºåÂΩì‰Ω†ÈÄâÊã©‰∫ÜËµÑÊ∫êÊâÄÊúâËÄÖÂØÜÁ†ÅÔºàpasswordÔºâÊéàÊùÉÁ±ªÂûãÁöÑÊó∂ÂÄôÔºåËØ∑ËÆæÁΩÆËøô‰∏™Â±ûÊÄßÊ≥®ÂÖ•‰∏Ä‰∏™ AuthenticationManager ÂØπË±°„ÄÇ userDetailsServiceÔºöÂ¶ÇÊûúÂïäÔºå‰Ω†ËÆæÁΩÆ‰∫ÜËøô‰∏™Â±ûÊÄßÁöÑËØùÔºåÈÇ£ËØ¥Êòé‰Ω†Êúâ‰∏Ä‰∏™Ëá™Â∑±ÁöÑ UserDetailsService Êé•Âè£ÁöÑÂÆûÁé∞ÔºåÊàñËÄÖ‰Ω†ÂèØ‰ª•ÊääËøô‰∏™‰∏úË•øËÆæÁΩÆÂà∞ÂÖ®Â±ÄÂüü‰∏äÈù¢ÂéªÔºà‰æãÂ¶Ç GlobalAuthenticationManagerConfigurer Ëøô‰∏™ÈÖçÁΩÆÂØπË±°ÔºâÔºåÂΩì‰Ω†ËÆæÁΩÆ‰∫ÜËøô‰∏™‰πãÂêéÔºåÈÇ£‰πà ‚Äúrefresh_token‚Äù Âç≥Âà∑Êñ∞‰ª§ÁâåÊéàÊùÉÁ±ªÂûãÊ®°ÂºèÁöÑÊµÅÁ®ã‰∏≠Â∞±‰ºöÂåÖÂê´‰∏Ä‰∏™Ê£ÄÊü•ÔºåÁî®Êù•Á°Æ‰øùËøô‰∏™Ë¥¶Âè∑ÊòØÂê¶‰ªçÁÑ∂ÊúâÊïàÔºåÂÅáÂ¶ÇËØ¥‰Ω†Á¶ÅÁî®‰∫ÜËøô‰∏™Ë¥¶Êà∑ÁöÑËØù„ÄÇ authorizationCodeServicesÔºöËøô‰∏™Â±ûÊÄßÊòØÁî®Êù•ËÆæÁΩÆÊéàÊùÉÁ†ÅÊúçÂä°ÁöÑÔºàÂç≥ AuthorizationCodeServices ÁöÑÂÆû‰æãÂØπË±°ÔºâÔºå‰∏ªË¶ÅÁî®‰∫é ‚Äúauthorization_code‚Äù ÊéàÊùÉÁ†ÅÁ±ªÂûãÊ®°Âºè„ÄÇ implicitGrantServiceÔºöËøô‰∏™Â±ûÊÄßÁî®‰∫éËÆæÁΩÆÈöêÂºèÊéàÊùÉÊ®°ÂºèÔºåÁî®Êù•ÁÆ°ÁêÜÈöêÂºèÊéàÊùÉÊ®°ÂºèÁöÑÁä∂ÊÄÅ„ÄÇ tokenGranterÔºöËøô‰∏™Â±ûÊÄßÂ∞±ÂæàÁâõB‰∫ÜÔºåÂΩì‰Ω†ËÆæÁΩÆ‰∫ÜËøô‰∏™‰∏úË•øÔºàÂç≥ TokenGranter Êé•Âè£ÂÆûÁé∞ÔºâÔºåÈÇ£‰πàÊéàÊùÉÂ∞Ü‰ºö‰∫§Áî±‰Ω†Êù•ÂÆåÂÖ®ÊéåÊéßÔºåÂπ∂‰∏î‰ºöÂøΩÁï•Êéâ‰∏äÈù¢ÁöÑËøôÂá†‰∏™Â±ûÊÄßÔºåËøô‰∏™Â±ûÊÄß‰∏ÄËà¨ÊòØÁî®‰ΩúÊãìÂ±ïÁî®ÈÄîÁöÑÔºåÂç≥Ê†áÂáÜÁöÑÂõõÁßçÊéàÊùÉÊ®°ÂºèÂ∑≤ÁªèÊª°Ë∂≥‰∏ç‰∫Ü‰Ω†ÁöÑÈúÄÊ±ÇÁöÑÊó∂ÂÄôÔºåÊâç‰ºöËÄÉËôë‰ΩøÁî®Ëøô‰∏™„ÄÇ ÈÖçÁΩÆÊéàÊùÉÁ´ØÁÇπÁöÑURLAuthorizationServerEndpointsConfigurer Ëøô‰∏™ÈÖçÁΩÆÂØπË±°(AuthorizationServerConfigurer ÁöÑ‰∏Ä‰∏™ÂõûË∞ÉÈÖçÁΩÆÈ°πÔºåËßÅ‰∏äÁöÑÊ¶ÇËø∞) Êúâ‰∏Ä‰∏™Âè´ÂÅö pathMapping() ÁöÑÊñπÊ≥ïÁî®Êù•ÈÖçÁΩÆÁ´ØÁÇπURLÈìæÊé•ÔºåÂÆÉÊúâ‰∏§‰∏™ÂèÇÊï∞Ôºö Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºöString Á±ªÂûãÁöÑÔºåËøô‰∏™Á´ØÁÇπURLÁöÑÈªòËÆ§ÈìæÊé•„ÄÇ Á¨¨‰∫å‰∏™ÂèÇÊï∞ÔºöString Á±ªÂûãÁöÑÔºå‰Ω†Ë¶ÅËøõË°åÊõø‰ª£ÁöÑURLÈìæÊé•„ÄÇ ‰ª•‰∏äÁöÑÂèÇÊï∞ÈÉΩÂ∞Ü‰ª• ‚Äú/‚Äú Â≠óÁ¨¶‰∏∫ÂºÄÂßãÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÊ°ÜÊû∂ÁöÑÈªòËÆ§URLÈìæÊé•Â¶Ç‰∏ãÂàóË°®ÔºåÂèØ‰ª•‰Ωú‰∏∫Ëøô‰∏™ pathMapping() ÊñπÊ≥ïÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Ôºö /oauth/authorizeÔºöÊéàÊùÉÁ´ØÁÇπ„ÄÇ /oauth/tokenÔºö‰ª§ÁâåÁ´ØÁÇπ„ÄÇ /oauth/confirm_accessÔºöÁî®Êà∑Á°ÆËÆ§ÊéàÊùÉÊèê‰∫§Á´ØÁÇπ„ÄÇ /oauth/errorÔºöÊéàÊùÉÊúçÂä°ÈîôËØØ‰ø°ÊÅØÁ´ØÁÇπ„ÄÇ /oauth/check_tokenÔºöÁî®‰∫éËµÑÊ∫êÊúçÂä°ËÆøÈóÆÁöÑ‰ª§ÁâåËß£ÊûêÁ´ØÁÇπ„ÄÇ ËµÑÊ∫êÊúçÂä°ÈÖçÁΩÆ‰∏Ä‰∏™ËµÑÊ∫êÊúçÂä°ÔºàÂèØ‰ª•ÂíåÊéàÊùÉÊúçÂä°Âú®Âêå‰∏Ä‰∏™Â∫îÁî®‰∏≠ÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•ÂàÜÁ¶ªÂºÄÊàê‰∏∫‰∏§‰∏™‰∏çÂêåÁöÑÂ∫îÁî®Á®ãÂ∫èÔºâÊèê‰æõ‰∏Ä‰∫õÂèótoken‰ª§Áâå‰øùÊä§ÁöÑËµÑÊ∫êÔºåSpring OAuthÊèê‰æõËÄÖÊòØÈÄöËøáSpring Security authentication filter Âç≥È™åËØÅËøáÊª§Âô®Êù•ÂÆûÁé∞ÁöÑ‰øùÊä§Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøá @EnableResourceServer Ê≥®Ëß£Âà∞‰∏Ä‰∏™ @Configuration ÈÖçÁΩÆÁ±ª‰∏äÔºåÂπ∂‰∏îÂøÖÈ°ª‰ΩøÁî® ResourceServerConfigurer Ëøô‰∏™ÈÖçÁΩÆÂØπË±°Êù•ËøõË°åÈÖçÁΩÆÔºàÂèØ‰ª•ÈÄâÊã©ÁªßÊâøËá™ ResourceServerConfigurerAdapter ÁÑ∂ÂêéË¶ÜÂÜôÂÖ∂‰∏≠ÁöÑÊñπÊ≥ïÔºåÂèÇÊï∞Â∞±ÊòØËøô‰∏™ÂØπË±°ÁöÑÂÆû‰æãÔºâÔºå‰∏ãÈù¢ÊòØ‰∏Ä‰∫õÂèØ‰ª•ÈÖçÁΩÆÁöÑÂ±ûÊÄßÔºö tokenServicesÔºöResourceServerTokenServices Á±ªÁöÑÂÆû‰æãÔºåÁî®Êù•ÂÆûÁé∞‰ª§ÁâåÊúçÂä°„ÄÇ resourceIdÔºöËøô‰∏™ËµÑÊ∫êÊúçÂä°ÁöÑIDÔºåËøô‰∏™Â±ûÊÄßÊòØÂèØÈÄâÁöÑÔºå‰ΩÜÊòØÊé®ËçêËÆæÁΩÆÂπ∂Âú®ÊéàÊùÉÊúçÂä°‰∏≠ËøõË°åÈ™åËØÅ„ÄÇ ÂÖ∂‰ªñÁöÑÊãìÂ±ïÂ±ûÊÄß‰æãÂ¶Ç tokenExtractor ‰ª§ÁâåÊèêÂèñÂô®Áî®Êù•ÊèêÂèñËØ∑Ê±Ç‰∏≠ÁöÑ‰ª§Áâå„ÄÇ ËØ∑Ê±ÇÂåπÈÖçÂô®ÔºåÁî®Êù•ËÆæÁΩÆÈúÄË¶ÅËøõË°å‰øùÊä§ÁöÑËµÑÊ∫êË∑ØÂæÑÔºåÈªòËÆ§ÁöÑÊÉÖÂÜµ‰∏ãÊòØÂèó‰øùÊä§ËµÑÊ∫êÊúçÂä°ÁöÑÂÖ®ÈÉ®Ë∑ØÂæÑ„ÄÇ Âèó‰øùÊä§ËµÑÊ∫êÁöÑËÆøÈóÆËßÑÂàôÔºåÈªòËÆ§ÁöÑËßÑÂàôÊòØÁÆÄÂçïÁöÑË∫´‰ªΩÈ™åËØÅÔºàplain authenticatedÔºâ„ÄÇ ÂÖ∂‰ªñÁöÑËá™ÂÆö‰πâÊùÉÈôê‰øùÊä§ËßÑÂàôÈÄöËøá HttpSecurity Êù•ËøõË°åÈÖçÁΩÆ„ÄÇ]]></content>
      <categories>
        <category>java</category>
        <category>spring</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
        <tag>oauth2</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring SecurityÂü∫Á°Ä]]></title>
    <url>%2Fjava%2Fspring%2Fspring%2Fspring-security-1%2F</url>
    <content type="text"><![CDATA[ÊúÄËøëÂÖ¨Âè∏È°πÁõÆ‰ΩøÁî®‰∫ÜSpring SecurityÔºå‰∏ãÈù¢Êï¥ÁêÜ‰∏Ä‰∏ãÂü∫Á°ÄÁü•ËØÜ Ê¶ÇËø∞‰∏Ä‰∏™ËÉΩÂ§ü‰∏∫Âü∫‰∫éSpringÁöÑ‰ºÅ‰∏öÂ∫îÁî®Á≥ªÁªüÊèê‰æõÂ£∞ÊòéÂºèÁöÑÂÆâÂÖ®Ë®™ÈóÆÊéßÂà∂Ëß£ÂÜ≥ÊñπÂºèÁöÑÂÆâÂÖ®Ê°ÜÊû∂ÔºàÁÆÄÂçïËØ¥ÊòØÂØπËÆøÈóÆÊùÉÈôêËøõË°åÊéßÂà∂ÂòõÔºâÔºåÂ∫îÁî®ÁöÑÂÆâÂÖ®ÊÄßÂåÖÊã¨Áî®Êà∑ËÆ§ËØÅÔºàAuthenticationÔºâÂíåÁî®Êà∑ÊéàÊùÉÔºàAuthorizationÔºâ‰∏§‰∏™ÈÉ®ÂàÜ„ÄÇÁî®Êà∑ËÆ§ËØÅÊåáÁöÑÊòØÈ™åËØÅÊüê‰∏™Áî®Êà∑ÊòØÂê¶‰∏∫Á≥ªÁªü‰∏≠ÁöÑÂêàÊ≥ï‰∏ª‰ΩìÔºå‰πüÂ∞±ÊòØËØ¥Áî®Êà∑ËÉΩÂê¶ËÆøÈóÆËØ•Á≥ªÁªü„ÄÇÁî®Êà∑ËÆ§ËØÅ‰∏ÄËà¨Ë¶ÅÊ±ÇÁî®Êà∑Êèê‰æõÁî®Êà∑ÂêçÂíåÂØÜÁ†Å„ÄÇÁ≥ªÁªüÈÄöËøáÊ†°È™åÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÊù•ÂÆåÊàêËÆ§ËØÅËøáÁ®ã„ÄÇÁî®Êà∑ÊéàÊùÉÊåáÁöÑÊòØÈ™åËØÅÊüê‰∏™Áî®Êà∑ÊòØÂê¶ÊúâÊùÉÈôêÊâßË°åÊüê‰∏™Êìç‰Ωú„ÄÇÂú®‰∏Ä‰∏™Á≥ªÁªü‰∏≠Ôºå‰∏çÂêåÁî®Êà∑ÊâÄÂÖ∑ÊúâÁöÑÊùÉÈôêÊòØ‰∏çÂêåÁöÑ„ÄÇÊØîÂ¶ÇÂØπ‰∏Ä‰∏™Êñá‰ª∂Êù•ËØ¥ÔºåÊúâÁöÑÁî®Êà∑Âè™ËÉΩËøõË°åËØªÂèñÔºåËÄåÊúâÁöÑÁî®Êà∑ÂèØ‰ª•ËøõË°å‰øÆÊîπ„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåÁ≥ªÁªü‰ºö‰∏∫‰∏çÂêåÁöÑÁî®Êà∑ÂàÜÈÖç‰∏çÂêåÁöÑËßíËâ≤ÔºåËÄåÊØè‰∏™ËßíËâ≤ÂàôÂØπÂ∫î‰∏ÄÁ≥ªÂàóÁöÑÊùÉÈôê„ÄÇ spring securityÁöÑ‰∏ªË¶ÅÊ†∏ÂøÉÂäüËÉΩ‰∏∫ ËÆ§ËØÅÂíåÊéàÊùÉÔºåÊâÄÊúâÁöÑÊû∂ÊûÑ‰πüÊòØÂü∫‰∫éËøô‰∏§‰∏™Ê†∏ÂøÉÂäüËÉΩÂéªÂÆûÁé∞ÁöÑ„ÄÇ Ê°ÜÊû∂ÂéüÁêÜ‰ºóÊâÄÂë®Áü• ÊÉ≥Ë¶ÅÂØπÂØπWebËµÑÊ∫êËøõË°å‰øùÊä§ÔºåÊúÄÂ•ΩÁöÑÂäûÊ≥ïËé´Ëøá‰∫éFilterÔºåË¶ÅÊÉ≥ÂØπÊñπÊ≥ïË∞ÉÁî®ËøõË°å‰øùÊä§ÔºåÊúÄÂ•ΩÁöÑÂäûÊ≥ïËé´Ëøá‰∫éAOP„ÄÇÊâÄ‰ª•springSecurityÂú®Êàë‰ª¨ËøõË°åÁî®Êà∑ËÆ§ËØÅ‰ª•ÂèäÊéà‰∫àÊùÉÈôêÁöÑÊó∂ÂÄôÔºåÈÄöËøáÂêÑÁßçÂêÑÊ†∑ÁöÑÊã¶Êà™Âô®Êù•ÊéßÂà∂ÊùÉÈôêÁöÑËÆøÈóÆÔºå‰ªéËÄåÂÆûÁé∞ÂÆâÂÖ®„ÄÇ Â¶Ç‰∏ã‰∏∫ÂÖ∂‰∏ªË¶ÅËøáÊª§Âô® ÂêçÁß∞ ÂäüËÉΩ ChannelProcessingFilter ÂèØÊ†πÊçÆÈÖçÁΩÆËøõË°åÂçèËÆÆÁöÑÈáçÂÆöÂêëÔºàHTTP‰∏éHTTPSÔºâ SecurityContextPersistenceFilter ÈíàÂØπÊØè‰∏™webËØ∑Ê±ÇÂºÄÂßãÊó∂Âä†ËΩΩSecurityContextÔºåÂπ∂Âú®webËØ∑Ê±ÇÁªìÊùüÊó∂Â∞ÜSecurityContext‰øùÂ≠òÂà∞HttpSession‰∏≠ ConcurrentSessionFilter ÂäüËÉΩ‰∏ÄÔºåÂà∑Êñ∞session‰∏≠ÊúÄÂêéÊõ¥Êñ∞Êó∂Èó¥ÔºõÂäüËÉΩ‰∫åÔºåÂèñsession‰ø°ÊÅØÁúãÊòØÂê¶ËøáÊúüÔºåÂ¶ÇÊûúËøáÊúüÊâßË°åÁôªÂá∫Êìç‰Ωú„ÄÇ UsernamePasswordAuthenticationFilter„ÄÅCasAuthenticationFilter„ÄÅBasicAuthenticationFilter„ÄÅÂÖ∂‰ªñ Ê†πÊçÆÈúÄË¶ÅÈÄâÊã©‰∏Ä‰∏™ÂêàÈÄÇÁöÑËÆ§ËØÅËøáÊª§Âô® SecurityContextHolderAwareRequestFilter servletÁõ∏ÂÖ≥ÂÆûÁé∞ÁöÑËøáÊª§Âô® JaasApiIntegrationFilter JaasÁõ∏ÂÖ≥ËøáÊª§Âô® RememberMeAuthenticationFilter Êèê‰æõ‚ÄúËÆ∞‰ΩèÊàë‚ÄùÂäüËÉΩÁöÑËøáÊª§Âô® AnonymousAuthenticationFilter ÂåøÂêçÊéàÊùÉËøáÊª§Âô® ExceptionTranslationFilter ÊçïËé∑ÔºàSpring SecurityÔºâ‰∫ßÁîüÁöÑÂºÇÂ∏∏ FilterSecurityInterceptor URLÁöÑÊéßÂà∂ÂèäËÆøÈóÆÊãíÁªùÊó∂‰∫ßÁîüÂºÇÂ∏∏ Ê°ÜÊû∂ÁöÑÊ†∏ÂøÉÁªÑ‰ª∂ ÂêçÁß∞ ÂäüËÉΩ SecurityContextHolder Êèê‰æõÂØπSecurityContextÁöÑËÆøÈóÆ SecurityContext ÊåÅÊúâAuthenticationÂØπË±°ÂíåÂÖ∂‰ªñÂèØËÉΩÈúÄË¶ÅÁöÑ‰ø°ÊÅØ AuthenticationManager ÂÖ∂‰∏≠ÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™AuthenticationProvider ProviderManager ÂØπË±°‰∏∫AuthenticationManagerÊé•Âè£ÁöÑÂÆûÁé∞Á±ª AuthenticationProvider ‰∏ªË¶ÅÁî®Êù•ËøõË°åËÆ§ËØÅÊìç‰ΩúÁöÑÁ±ª Ë∞ÉÁî®ÂÖ∂‰∏≠ÁöÑauthenticate()ÊñπÊ≥ïÂéªËøõË°åËÆ§ËØÅÊìç‰Ωú Authentication Spring SecurityÊñπÂºèÁöÑËÆ§ËØÅ‰∏ª‰Ωì GrantedAuthority ÂØπËÆ§ËØÅ‰∏ªÈ¢òÁöÑÂ∫îÁî®Â±ÇÈù¢ÁöÑÊéàÊùÉÔºåÂê´ÂΩìÂâçÁî®Êà∑ÁöÑÊùÉÈôê‰ø°ÊÅØÔºåÈÄöÂ∏∏‰ΩøÁî®ËßíËâ≤Ë°®Á§∫ UserDetails ÊûÑÂª∫AuthenticationÂØπË±°ÂøÖÈ°ªÁöÑ‰ø°ÊÅØÔºåÂèØ‰ª•Ëá™ÂÆö‰πâÔºåÂèØËÉΩÈúÄË¶ÅËÆøÈóÆDBÂæóÂà∞ UserDetailsService ÈÄöËøáusernameÊûÑÂª∫UserDetailsÂØπË±°ÔºåÈÄöËøáloadUserByUsernameÊ†πÊçÆuserNameËé∑ÂèñUserDetailÂØπË±° ÔºàÂèØ‰ª•Âú®ËøôÈáåÂü∫‰∫éËá™Ë∫´‰∏öÂä°ËøõË°åËá™ÂÆö‰πâÁöÑÂÆûÁé∞ Â¶ÇÈÄöËøáÊï∞ÊçÆÂ∫ìÔºåxml,ÁºìÂ≠òËé∑ÂèñÁ≠âÔºâ HttpSecurity‰ΩøÁî® ÂêçÁß∞ ÂäüËÉΩ antMatchers(‚Äú/resources/**‚Äù, ‚Äú/signup‚Äù, ‚Äú/about‚Äù).permitAll() ‰ªª‰ΩïÁî®Êà∑ÈÉΩÂèØ‰ª•ËÆøÈóÆ‰ª•‚Äù/resources/‚Äú,‚Äù/signup‚Äù, ÊàñËÄÖ ‚Äú/about‚ÄùÂºÄÂ§¥ÁöÑURL„ÄÇ antMatchers(‚Äú/admin/**‚Äù).hasRole(‚ÄúADMIN‚Äù) ‰ª• ‚Äú/admin/‚Äú ÂºÄÂ§¥ÁöÑURLÂè™ËÉΩËÆ©Êã•Êúâ ‚ÄúROLE_ADMIN‚ÄùËßíËâ≤ÁöÑÁî®Êà∑ËÆøÈóÆ„ÄÇ antMatchers(‚Äú/db/**‚Äù).access(‚ÄúhasRole(‚ÄòADMIN‚Äô) and hasRole(‚ÄòDBA‚Äô)‚Äù) ‰ªª‰Ωï‰ª•‚Äù/db/‚Äú ÂºÄÂ§¥ÁöÑURLÈúÄË¶ÅÂêåÊó∂ÂÖ∑Êúâ ‚ÄúROLE_ADMIN‚Äù Âíå ‚ÄúROLE_DBA‚ÄùÊùÉÈôêÁöÑÁî®Êà∑ÊâçÂèØ‰ª•ËÆøÈóÆ„ÄÇ antMatchers(‚Äú/db/**‚Äù).hasAnyRole(‚ÄúADMIN‚Äù, ‚ÄúDBA‚Äù) ‰ªª‰Ωï‰ª•‚Äù/db/‚Äú ÂºÄÂ§¥ÁöÑURLÂè™ÈúÄË¶ÅÊã•Êúâ ‚ÄúROLE_ADMIN‚Äù Âíå ‚ÄúROLE_DBA‚ÄùÂÖ∂‰∏≠‰∏Ä‰∏™ÊùÉÈôêÁöÑÁî®Êà∑ÊâçÂèØ‰ª•ËÆøÈóÆ„ÄÇ anyRequest().authenticated() Â∞öÊú™ÂåπÈÖçÁöÑ‰ªª‰ΩïURLÈÉΩË¶ÅÊ±ÇÁî®Êà∑ËøõË°åË∫´‰ªΩÈ™åËØÅ logout().logoutUrl(‚Äú/api/user/logout‚Äù) ÊåáÂÆöÁôªÂá∫ÁöÑurl defaultSuccessUrl(‚Äú/index‚Äù) ÊåáÂÆöÁôªÂΩïÊàêÂäüÂêéË∑≥ËΩ¨Âà∞/indexÈ°µÈù¢ failureUrl(‚Äú/login?error‚Äù) ÊåáÂÆöÁôªÂΩïÂ§±Ë¥•ÂêéË∑≥ËΩ¨Âà∞/login?errorÈ°µÈù¢ rememberMe().tokenValiditySeconds(1209600).key(‚Äúmykey‚Äù) ÂºÄÂêØcookieÂÇ®Â≠òÁî®Êà∑‰ø°ÊÅØÔºåÂπ∂ËÆæÁΩÆÊúâÊïàÊúü‰∏∫14Â§©ÔºåÊåáÂÆöcookie‰∏≠ÁöÑÂØÜÈí• formLogin().loginPage(‚Äú/api/user/login‚Äù) ÈÄöËøáformloginÊñπÊ≥ïÁôªÂΩïÔºåÂπ∂ËÆæÁΩÆÁôªÂΩïurl‰∏∫/api/user/login]]></content>
      <categories>
        <category>java</category>
        <category>spring</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
        <tag>security</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Security + OAuth2Ôºà‰∏ÄÔºâ]]></title>
    <url>%2Fjava%2Fspring%2Fspring%2Fspring-security-oauth2-1%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄÁªèËøáÂâçÊÆµÊó∂Èó¥ÂØπSSOÂçïÁÇπÁôªÂΩïÁöÑÁ†îÁ©∂ÂèëÁé∞ÔºåÊúâ‰ª•‰∏ãÂá†Á±ªÊñπÊ°àÂèØ‰ª•ÂÆûÁé∞ Spring Session + Redis Spring Security + JWT Spring Security + OAuth2 + Redis Êú¨ÊñáÁ´†Â∞ÜËÆ≤Ëø∞Spring Security + OAuth2 + RedisÔºåÂÖ∂‰ªñÊñπÂºè‰∏çÂÅöÊõ¥Â§öËØ¥ÊòéÔºåÁõ¥Êé•‰∏äÂπ≤Ë¥ßÔºå‰∏ãÈù¢ÊòØÂ§ßÊ¶ÇÁöÑÊµÅÁ®ã„ÄÇ ÁõÆÂΩïÁªìÊûÑ12345678910111213neusoft-sso-login ÊéàÊùÉÊúçÂä°‚îú‚îÄ‚îÄ AuthApplication‚îî‚îÄ‚îÄ security ‚îú‚îÄ‚îÄ WebSecurityConfigurer ‚îú‚îÄ‚îÄ WebResponseException ‚îî‚îÄ‚îÄ auth ‚îú‚îÄ‚îÄ AuthFailHandler ‚îú‚îÄ‚îÄ AuthRequestFilter ‚îú‚îÄ‚îÄ AuthServerConfigurerAdapter ‚îî‚îÄ‚îÄ AuthSuccessHandler ‚îî‚îÄ‚îÄ service ‚îú‚îÄ‚îÄ ClientDetailsServiceImpl ‚îî‚îÄ‚îÄ UserDetailsServiceImpl SQLËÑöÊú¨1234567891011121314151617181920212223242526272829CREATE TABLE `neusoft_sr_oper` ( `OPER_ID` varchar(64) NOT NULL COMMENT 'Áî®Êà∑ID', `OPER_ACCOUNT` varchar(20) DEFAULT NULL COMMENT 'Ë¥¶Âè∑', `OPER_PWD` varchar(128) DEFAULT NULL COMMENT 'ÂØÜÁ†Å', `OPER_NAME` varchar(64) DEFAULT NULL COMMENT 'Ë¥¶Âè∑ÂêçÁß∞', `CREATOR_ID` varchar(64) DEFAULT '0' COMMENT 'ÂàõÂª∫ËÄÖIDÔºà0-Ê≥®ÂÜåÁî®Êà∑Ôºåsuper-Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëòÔºåÂÖ∂‰ªñ-Â≠êÁî®Êà∑Ôºâ', `LAST_LOGIN_IP` varchar(20) DEFAULT NULL COMMENT 'ÊúÄÂêéÁôªÂΩïIP', `LAST_LOGIN_TIME` datetime DEFAULT NULL COMMENT 'ÊúÄÂêéÁôªÂΩïÊó∂Èó¥', `LOGIN_COUNT` int(11) DEFAULT '0' COMMENT 'ÁôªÂΩïÊ¨°Êï∞', `STATUS` varchar(2) DEFAULT '0' COMMENT '0-Ê≠£Â∏∏Ôºå1-ÂÅúÁî®Ôºå2-ÈîÅÂÆöÔºå99-Ê≥®ÈîÄÔºàÂà†Èô§Ôºâ', `PWD_MODIFY_DATE` datetime DEFAULT NULL COMMENT 'ÂØÜÁ†ÅÊõ¥Êñ∞Êó∂Èó¥', `STATUS_MODIFY_DATE` datetime DEFAULT NULL COMMENT 'Áä∂ÊÄÅÊõ¥Êñ∞Êó∂Èó¥', `CREATE_TIME` datetime DEFAULT NULL COMMENT 'ÂàõÂª∫Êó∂Èó¥', `UPDATE_TIME` datetime DEFAULT NULL COMMENT 'Êõ¥Êñ∞Êó∂Èó¥', PRIMARY KEY (`OPER_ID`), UNIQUE KEY `OPER_ACCOUNT` (`OPER_ACCOUNT`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Áî®Êà∑Âü∫Á°Ä‰ø°ÊÅØË°®';CREATE TABLE `neusoft_sys_oauth_client` ( `CLIENT_ID` varchar(64) NOT NULL COMMENT 'ÂÆ¢Êà∑Á´ØID', `CLIENT_NAME` varchar(32) DEFAULT NULL COMMENT 'ÂÆ¢Êà∑Á´ØÂêçÁß∞', `CLIENT_SECRET` varchar(128) DEFAULT NULL COMMENT 'ÂÆ¢Êà∑Á´ØÂØÜÂåô', `CLIENT_SECRET_PLAIN` varchar(128) DEFAULT NULL COMMENT 'ÂÆ¢Êà∑Á´ØÂØÜÂåôÊòéÁ†Å', `SCOPE` varchar(32) DEFAULT NULL COMMENT 'ÈôêÂÆöËåÉÂõ¥ÔºàreadÔºåwriteÔºâ', `AUTHORIZED_GRANT_TYPES` varchar(32) DEFAULT NULL COMMENT 'ÊéàÊùÉÁ±ªÂûãÔºàclient_credentials,password,refresh_tokenÔºâ', `CREATE_TIME` datetime DEFAULT NULL COMMENT 'ÂàõÂª∫Êó∂Èó¥', `UPDATE_TIME` datetime DEFAULT NULL COMMENT 'Êõ¥Êñ∞Êó∂Èó¥', PRIMARY KEY (`CLIENT_ID`) USING BTREE) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='OAuthÂÆ¢Êà∑Á´Ø'; Ëá™ÂÆö‰πâÂíåÊúçÂä°ÂÆûÁé∞ÂØπSpring Security + OAuth2ÔºåËá™ÂÆö‰πâÂíåÊúçÂä°ÂÆûÁé∞‰∏ªË¶ÅÊòØ‰ª•‰∏ãÂá†‰∏™Á±ª WebSecurityConfigurerAdapterÔºåÊéàÊùÉÊã¶Êà™Âô®ÈÖçÁΩÆ WebResponseExceptionTranslatorÔºåÂºÇÂ∏∏ÊçïËé∑Â§ÑÁêÜ UsernamePasswordAuthenticationFilterÔºåËØ∑Ê±ÇÊã¶Êà™Âô® UserDetailsServiceÔºåËé∑ÂèñÁî®Êà∑‰ø°ÊÅØ ClientDetailsServiceÔºåËé∑ÂèñÂÆ¢Êà∑Á´Ø‰ø°ÊÅØ AuthenticationSuccessHandlerÔºåËÆ§ËØÅÊàêÂäüÂ§ÑÁêÜ AuthenticationFailureHandlerÔºåËÆ§ËØÅÂ§±Ë¥•Â§ÑÁêÜ AuthorizationServerConfigurerAdapter ËÆ§ËØÅÊúçÂä°ÈÖçÁΩÆ CODINGAuthApplication.javaÂêØÂä®Êñá‰ª∂ÔºåÂõ†Êàë‰ΩøÁî®ÁöÑÊòØRedis ClusterÈõÜÁæ§Ê®°ÂºèÔºåÊâÄ‰ª•Ë¶ÅÊääËá™Â∏¶ÁöÑRedisÂä†ËΩΩÂéªÊéâ12345678@EnableEurekaClient@SpringBootApplication(exclude = &#123;RedisAutoConfiguration.class&#125;)public class AuthApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(AuthApplication.class); &#125;&#125; pom.xml123456789101112131415161718192021&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-security&lt;/artifactId&gt; &lt;exclusions&gt; &lt;!--ÊóßÁâàÊú¨ redisÊìç‰ΩúÊúâÈóÆÈ¢ò--&gt; &lt;exclusion&gt; &lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt; &lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt; &lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt; &lt;version&gt;2.3.5.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; WebSecurityConfigurer.javaËá™ÂÆö‰πâWebSecurityConfigurerAdapterÔºåËøáÊª§MATCHER_URLË∑ØÂæÑ‰∏∫‰∏çÁî®Èâ¥ÊùÉÔºåÁôªÂΩïÂú∞ÂùÄËÆæÁΩÆ‰∏∫LOGIN_URLÔºåÂú®UsernamePasswordAuthenticationFilterÊã¶Êà™Âô®ÂâçÈù¢Êñ∞Â¢ûAuthRequestFilterÔºåËÆæÂÆöËÆ§ËØÅÂØÜÁ†ÅÊ®°Âºè‰∏∫BCryptPasswordEncoder12345678910111213141516171819202122232425262728293031323334353637383940414243444546@Configurationpublic class WebSecurityConfigurer extends WebSecurityConfigurerAdapter &#123; @Autowired private AuthFailHandler authFailHandler; @Autowired private AuthSuccessHandler authSuccessHandler; private final static String LOGIN_URL = "/sso/login"; private final static String[] MATCHER_URL = &#123;"/info", "/sso/*"&#125;; @Override protected void configure(HttpSecurity http) throws Exception &#123; http .authorizeRequests() .antMatchers(MATCHER_URL).permitAll() .anyRequest().authenticated() .and().csrf().disable(); http.addFilterAt(authRequestFilter(), UsernamePasswordAuthenticationFilter.class); &#125; @Bean public AuthRequestFilter authRequestFilter() &#123; AuthRequestFilter authRequestFilter = new AuthRequestFilter(); authRequestFilter.setAuthenticationManager(authenticationManagerBean()); authRequestFilter.setRequiresAuthenticationRequestMatcher(new AntPathRequestMatcher(LOGIN_URL, HttpMethod.POST.toString())); authRequestFilter.setAuthenticationFailureHandler(authFailHandler); authRequestFilter.setAuthenticationSuccessHandler(authSuccessHandler); return authRequestFilter; &#125; @Bean @Override @SneakyThrows public AuthenticationManager authenticationManagerBean() &#123; return super.authenticationManagerBean(); &#125; @Bean public PasswordEncoder passwordEncoder() &#123; return new BCryptPasswordEncoder(); &#125;&#125; AuthRequestFilter.javaËá™ÂÆö‰πâUsernamePasswordAuthenticationFilterÔºåÂ∞ÜÈªòËÆ§ÁöÑFormÊ®°ÂºèÂèòÊõ¥‰∏∫JSONÊ®°Âºè12345678910111213141516171819202122232425262728public class AuthRequestFilter extends UsernamePasswordAuthenticationFilter &#123; private final static Logger LOGGER = LoggerFactory.getLogger(AuthRequestFilter.class); private final static String ACCOUNT_STR = "account"; private final static String PASSWORD_STR = "password"; @Override public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException &#123; if (!request.getContentType().equals(MediaType.APPLICATION_JSON_UTF8_VALUE) &amp;&amp; !request.getContentType().equals(MediaType.APPLICATION_JSON_VALUE)) &#123; return super.attemptAuthentication(request, response); &#125; ObjectMapper mapper = new ObjectMapper(); UsernamePasswordAuthenticationToken authRequest = null; try (InputStream is = request.getInputStream()) &#123; Map authenticationBean = mapper.readValue(is, Map.class); authRequest = new UsernamePasswordAuthenticationToken(authenticationBean.get(ACCOUNT_STR), authenticationBean.get(PASSWORD_STR)); &#125; catch (IOException e) &#123; LOGGER.error("JsonAuthenticationFilter form to json error!"); authRequest = new UsernamePasswordAuthenticationToken("", ""); &#125; setDetails(request, authRequest); return this.getAuthenticationManager().authenticate(authRequest); &#125;&#125; AuthFailHandler.javaËá™ÂÆö‰πâAuthenticationFailureHandler,Ê†πÊçÆ‰∏çÂêåÁöÑÂºÇÂ∏∏‰ø°ÊÅØËøõË°åËøîÂõûÂ§ÑÁêÜ1234567891011121314151617181920212223242526272829303132333435@Componentpublic class AuthFailHandler implements AuthenticationFailureHandler &#123; @Autowired private ObjectMapper objectMapper; @Override public void onAuthenticationFailure(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AuthenticationException e) throws IOException, ServletException &#123; String code = null; // ÈîÅ if (e instanceof LockedException) &#123; code = ERROR_AUTH_SSO_LOGIN_LOCK; &#125; // ÂÅúÁî® if (e instanceof DisabledException) &#123; code = ERROR_AUTH_SSO_LOGIN_EXPIRED; &#125; // Ë¥¶Âè∑ÂØÜÁ†ÅÈîôËØØ if (e instanceof BadCredentialsException) &#123; code = ERROR_AUTH_SSO_LOGIN; &#125; if (code == null) &#123; return; &#125; httpServletResponse.setStatus(HttpStatus.OK.value()); httpServletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE); httpServletResponse.getWriter().write(objectMapper.writeValueAsString(ResponseUtil.fail(code))); &#125;&#125; AuthSuccessHandler.javaËá™ÂÆö‰πâAuthenticationSuccessHandlerÔºåËØªÂèñheader‰∏≠ÁöÑAUTHORIZATIONÔºåÊ†°È™åÂÆ¢Êà∑Á´ØsecretÔºåÊ†°È™åÂÆ¢Êà∑Á´ØscopeÔºåÁîüÊàêTokenÂπ∂Ëá™Âä®Â≠òÂÇ®Âà∞Redis‰∏≠123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687@Componentpublic class AuthSuccessHandler implements AuthenticationSuccessHandler &#123; @Autowired private ObjectMapper objectMapper; @Autowired private PasswordEncoder passwordEncoder; @Autowired private ClientDetailsService clientDetailsService; @Autowired private AuthorizationServerTokenServices defaultAuthorizationServerTokenServices; private final static Logger LOGGER = LoggerFactory.getLogger(AuthSuccessHandler.class); private static final String BASIC_ = "Basic "; @Override public void onAuthenticationSuccess(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication) throws IOException &#123; String header = httpServletRequest.getHeader(HttpHeaders.AUTHORIZATION); if (header == null || !header.startsWith(BASIC_)) &#123; HttpUtil.writeJson(httpServletResponse, ResponseUtil.fail(ERROR_AUTH_BASIC_CLIENT), objectMapper); return; &#125; String[] tokens; try &#123; tokens = extractAndDecodeHeader(header); &#125; catch (Exception e) &#123; HttpUtil.writeJson(httpServletResponse, ResponseUtil.fail(ERROR_AUTH_BASIC_CLIENT), objectMapper); return; &#125; assert tokens.length == 2; String clientId = tokens[0]; ClientDetails clientDetails = clientDetailsService.loadClientByClientId(clientId); //Ê†°È™åsecret if (!passwordEncoder.matches(tokens[1], clientDetails.getClientSecret())) &#123; HttpUtil.writeJson(httpServletResponse, ResponseUtil.fail(ERROR_AUTH_CLIENT), objectMapper); return; &#125; TokenRequest tokenRequest = new TokenRequest(Maps.newConcurrentMap(), clientId, clientDetails.getScope(), "all"); //Ê†°È™åscope new DefaultOAuth2RequestValidator().validateScope(tokenRequest, clientDetails); OAuth2Request oAuth2Request = tokenRequest.createOAuth2Request(clientDetails); OAuth2Authentication oAuth2Authentication = new OAuth2Authentication(oAuth2Request, authentication); OAuth2AccessToken oAuth2AccessToken = defaultAuthorizationServerTokenServices.createAccessToken(oAuth2Authentication); LOGGER.info("token builder [&#123;&#125;]", oAuth2AccessToken.getValue()); Map&lt;String, String&gt; result = Maps.newConcurrentMap(); result.put(HttpHeaders.ACCESS_TOKEN, oAuth2AccessToken.getValue()); HttpUtil.writeJson(httpServletResponse, ResponseUtil.success(result), objectMapper); &#125; @SneakyThrows private String[] extractAndDecodeHeader(String header) &#123; byte[] base64Token = header.substring(6).getBytes(UTF_8); byte[] decoded; try &#123; decoded = Base64.getDecoder().decode(base64Token); &#125; catch (IllegalArgumentException e) &#123; throw new RuntimeException( "Failed to decode basic authentication token"); &#125; String token = new String(decoded, UTF_8); int delim = token.indexOf(":"); if (delim == -1) &#123; throw new RuntimeException("Invalid basic authentication token"); &#125; return new String[]&#123;token.substring(0, delim), token.substring(delim + 1)&#125;; &#125;&#125; ClientDetailsServiceImpl.javaÊé•Âè£ClientDetailsServiceÂÆûÁé∞Á±ªÔºåËé∑ÂèñÂÆ¢Êà∑Á´Ø‰ø°ÊÅØÔºåÂπ∂ÁîüÊàêClientDetails12345678910111213141516171819202122232425@Servicepublic class ClientDetailsServiceImpl implements ClientDetailsService &#123; @Autowired private OAuthClientService clientService; private final static String SCOPE_LIMIT = ","; @Override public ClientDetails loadClientByClientId(String s) throws ClientRegistrationException &#123; OAuthClient client = clientService.clientByName(s); if (null == client) &#123; return new BaseClientDetails(); &#125; BaseClientDetails clientDetails = new BaseClientDetails(); clientDetails.setClientId(client.getClientName()); clientDetails.setClientSecret(client.getSecret()); clientDetails.setScope(Arrays.asList(client.getScope().split(SCOPE_LIMIT))); clientDetails.setAuthorizedGrantTypes(Arrays.asList(client.getAuthorizedGrantTypes().split(SCOPE_LIMIT))); return clientDetails; &#125;&#125; UserDetailsServiceImpl.javaÊé•Âè£UserDetailsServiceÂÆûÁé∞Á±ªÔºåËé∑ÂèñÁî®Êà∑‰ø°ÊÅØÔºåÂπ∂ÁîüÊàêUserDetails123456789101112131415161718192021222324252627282930313233343536373839404142@Servicepublic class UserDetailsServiceImpl implements UserDetailsService &#123; @Autowired private AuthService authService; @Override public UserDetails loadUserByUsername(String account) throws UsernameNotFoundException &#123; if (Strings.isNullOrEmpty(account)) &#123; throw new UsernameNotFoundException(ResponseCodeSso.ERROR_AUTH_SSO_LOGIN_ACCOUNT); &#125; if (!authService.accountExtis(account)) &#123; throw new UsernameNotFoundException(ResponseCodeSso.ERROR_AUTH_SSO_LOGIN_ACCOUNT); &#125; return getUserDetails(account); &#125; private UserDetails getUserDetails(String account) &#123; Oper oper = authService.infoByWhere(account); if (null == oper) &#123; throw new UsernameNotFoundException(ResponseCodeSso.ERROR_AUTH_SSO_LOGIN_ACCOUNT); &#125; // Ëé∑ÂèñËßíËâ≤ÔºåÊú™ËøõË°åÂ§ÑÁêÜ Collection&lt;? extends GrantedAuthority&gt; authorities = AuthorityUtils.createAuthorityList("ROLE_USER"); User user = new User( oper.getOperAccont(), oper.getOperPwd(), oper.getStatus().startsWith("0"), // ÊòØÂê¶Ê≠£Â∏∏ !oper.getStatus().startsWith("1"), // ÊòØÂê¶ÂÅúÁî® true, !oper.getStatus().startsWith("2"), // ÊòØÂê¶ÈîÅÂÆö authorities ); return user; &#125;&#125; AuthServerConfigurerAdapter.javaTokenÂ≠òÂÇ®Ê®°ÂºèËÆæÁΩÆ‰∏∫Redis ClusterÂ≠òÂÇ®ÔºåÂ∞ÜLettuceÊõø‰ª£JedisÔºåÈáçÂÆö‰πâ/oauth/check_tokenË∑ØÂæÑ‰∏∫/sso/checkÔºåÂµåÂÖ•Ëá™ÂÆö‰πâÊéàÊùÉÂºÇÂ∏∏1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889@Configurationpublic class AuthServerConfigurerAdapter &#123; @Autowired private RedisCacheConfig redisCacheConfig; @Autowired private CacheConfig cacheConfig; @Bean public LettuceConnectionFactory lettuceConnectionFactory() &#123; RedisClusterConfig clusterConfig = new RedisClusterConfig(redisCacheConfig); RedisClusterConfiguration clusterConfiguration = new RedisClusterConfiguration(clusterConfig.getClusterNodes()); return new LettuceConnectionFactory(clusterConfiguration); &#125; @Bean(name = "redisTemplate") public RedisTemplate&lt;String, Serializable&gt; redisCacheTemplate() &#123; RedisTemplate&lt;String, Serializable&gt; template = new RedisTemplate&lt;&gt;(); template.setKeySerializer(new StringRedisSerializer()); template.setValueSerializer(new GenericJackson2JsonRedisSerializer()); template.setConnectionFactory(lettuceConnectionFactory()); return template; &#125; @Bean public TokenStore tokenStore() &#123; RedisTokenStore tokenStore = new RedisTokenStore(redisCacheTemplate().getConnectionFactory()); tokenStore.setPrefix(cacheConfig.getRoot() + ":Token:"); return tokenStore; &#125; @Bean public TokenEnhancer tokenEnhancer() &#123; return (accessToken, authentication) -&gt; &#123; final Map&lt;String, Object&gt; additionalInfo = new HashMap&lt;&gt;(1); additionalInfo.put("license", "web"); ((DefaultOAuth2AccessToken) accessToken).setAdditionalInformation(additionalInfo); return accessToken; &#125;; &#125; @EnableAuthorizationServer protected static class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter &#123; @Autowired private AuthenticationManager authenticationManager; @Autowired private UserDetailsService userDetailsService; @Autowired private ClientDetailsServiceImpl clientDetailsService; @Autowired private TokenStore tokenStore; @Autowired private TokenEnhancer tokenEnhancer; @Autowired private WebResponseExceptionTranslator webResponseException; @Override public void configure(ClientDetailsServiceConfigurer clients) throws Exception &#123; clients.withClientDetails(clientDetailsService); &#125; @Override public void configure(AuthorizationServerSecurityConfigurer oauthServer) throws Exception &#123; oauthServer .allowFormAuthenticationForClients() .checkTokenAccess("permitAll()"); &#125; @Override public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception &#123; endpoints .allowedTokenEndpointRequestMethods(HttpMethod.GET, HttpMethod.POST) .pathMapping("/oauth/check_token", "/sso/check") .tokenStore(tokenStore) .tokenEnhancer(tokenEnhancer) .userDetailsService(userDetailsService) .authenticationManager(authenticationManager) .reuseRefreshTokens(false) .exceptionTranslator(webResponseException); &#125; &#125;&#125;]]></content>
      <categories>
        <category>java</category>
        <category>spring</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
        <tag>oauth2</tag>
        <tag>security</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[NexusÊê≠Âª∫DockerÁßÅÂ∫ì]]></title>
    <url>%2Fdocker%2Fdocker%2F4%2F</url>
    <content type="text"><![CDATA[NexusÊê≠Âª∫DockerÁßÅÂ∫ìNexusÊòØÁî®‰∫éMavenÁßÅÊúçÁöÑÔºå‰∏çËøáÂú®ÂÆòÁΩë‰∏äÂèëÁé∞ÊúÄÊñ∞ÁöÑNexus 3.xËøòÊîØÊåÅDocker‰ªìÂ∫ì‰∫ÜÔºåÊâÄ‰ª•‰ΩøÁî®dockerÊù•Êê≠Âª∫‰∏Ä‰∏ãNexus ÂâçÈù¢ÂÆâË£ÖdockerÔºådocker-composeÂ∞±‰∏çËØ¥‰∫ÜÔºåÁõ¥Êé•Êù•Êñá‰ª∂ docker-compose.yml12345678910nexus: image: registry.cn-shenzhen.aliyuncs.com/zhouqi/nexus:3.0 restart: always ports: - 8081:8081 - 5000:5000 volumes: - ~/docker/nexus/nexus-data:/nexus-data:Z container_name: nexus Ê≥®ÊÑèÔºöÁ´ØÂè£5000ÔºåÊòØ‰∏∫‰∫ÜËÆ©dockerËÉΩÁôªÂΩïÁöÑÁ´ØÂè£Âú∞ÂùÄÂíånexus‰∏äË¶ÅËÆæÁΩÆ‰∏ÄÊ†∑ ÂàõÂª∫‰∏Ä‰∏™dockerÊú¨Âú∞‰ªìÂ∫ì Âú®dockerÊâÄÂú®ÊúçÂä°‰∏äËøõË°åËÆæÁΩÆ 123456789vi /etc/docker/daemon.json&#123; # DockerÊ≥®ÂÜåÊú¨Âú∞ "insecure-registries":["172.24.2.65:5000"], # Docker pull ‰ºòÂÖàÊãâÂèñÊú¨Âú∞ "add-registry": ["172.24.2.65:5000"]&#125; ÈáçÂêØdockerÂπ∂ÁôªÂΩï 1234systemctl daemon-reloadsystemctl restart dockerdocker login -u admin -p admin123 172.24.2.65:5000]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>nexus</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êê∫Á®ãApolloÈÖçÁΩÆ‰∏≠ÂøÉ]]></title>
    <url>%2Funcategorized%2Fapollo-1%2F</url>
    <content type="text"><![CDATA[Êê∫Á®ã Apollo ÈÖçÁΩÆ‰∏≠ÂøÉÂú®Spring Boot 2.0 Êï¥ÂêàÊê∫Á®ãApolloÈÖçÁΩÆ‰∏≠ÂøÉ‰∏ÄÊñá‰∏≠ÔºåÊàë‰ª¨Âú®Êú¨Âú∞Âø´ÈÄüÈÉ®ÁΩ≤ËØïÁî®‰∫ÜApollo„ÄÇÊú¨ÊñáÂ∞Ü‰ªãÁªçÂ¶Ç‰ΩïÊåâÁÖßÂàÜÂ∏ÉÂºèÈÉ®ÁΩ≤ÔºàÈááÁî®DockerÈÉ®ÁΩ≤ÔºâÁöÑÊñπÂºèÁºñËØë„ÄÅÊâìÂåÖ„ÄÅÈÉ®ÁΩ≤ApolloÈÖçÁΩÆ‰∏≠ÂøÉÔºå‰ªéËÄåÂèØ‰ª•Âú®ÂºÄÂèë„ÄÅÊµãËØï„ÄÅÁîü‰∫ßÁ≠âÁéØÂ¢ÉÂàÜÂà´ÈÉ®ÁΩ≤ËøêË°å„ÄÇ ÈÉ®ÁΩ≤ÂáÜÂ§á docker ÂÆâË£Ö docker-compose ÂÆâË£Ö mysql ÂÆâË£Ö ApolloÂ∑•Á®ã Â∑•Á®ãÂêç ‰ºòÂÖàÁ∫ß ËØ¥Êòé Á´ØÂè£ sql apollo-configservice 1 ÊúçÂä° 8090 apolloconfigdb.sql apollo-adminservice 2 ÁÆ°ÁêÜ 8091 apolloconfigdb.sql apollo-portal 3 ÁïåÈù¢ 8092 apolloportaldb.sql ÈÉ®ÁΩ≤Á≠ñÁï•ApolloÁõÆÂâçÊîØÊåÅ‰ª•‰∏ãÁéØÂ¢ÉÔºö DEV ÂºÄÂèëÁéØÂ¢É FAT ÊµãËØïÁéØÂ¢ÉÔºåÁõ∏ÂΩì‰∫éalphaÁéØÂ¢É(ÂäüËÉΩÊµãËØï) UAT ÈõÜÊàêÁéØÂ¢ÉÔºåÁõ∏ÂΩì‰∫ébetaÁéØÂ¢ÉÔºàÂõûÂΩíÊµãËØïÔºâ PRO Áîü‰∫ßÁéØÂ¢É ÁΩëÁªúÁ≠ñÁï•ÔºàÂÆòÁΩëÔºâÂàÜÂ∏ÉÂºèÈÉ®ÁΩ≤ÁöÑÊó∂ÂÄôÔºåapollo-configserviceÂíåapollo-adminserviceÈúÄË¶ÅÊääËá™Â∑±ÁöÑIPÂíåÁ´ØÂè£Ê≥®ÂÜåÂà∞Meta ServerÔºàapollo-configserviceÊú¨Ë∫´Ôºâ„ÄÇApolloÂÆ¢Êà∑Á´ØÂíåPortal‰ºö‰ªéMeta ServerËé∑ÂèñÊúçÂä°ÁöÑÂú∞ÂùÄÔºàIP+Á´ØÂè£ÔºâÔºåÁÑ∂ÂêéÈÄöËøáÊúçÂä°Âú∞ÂùÄÁõ¥Êé•ËÆøÈóÆ„ÄÇÊâÄ‰ª•Â¶ÇÊûúÂÆûÈôÖÈÉ®ÁΩ≤ÁöÑÊú∫Âô®ÊúâÂ§öÂùóÁΩëÂç°ÔºàÂ¶ÇdockerÔºâÔºåÊàñËÄÖÂ≠òÂú®Êüê‰∫õÁΩëÂç°ÁöÑIPÊòØApolloÂÆ¢Êà∑Á´ØÂíåPortalÊó†Ê≥ïËÆøÈóÆÁöÑÔºàÂ¶ÇÁΩëÁªúÂÆâÂÖ®ÈôêÂà∂ÔºâÔºåÈÇ£‰πàÊàë‰ª¨Â∞±ÈúÄË¶ÅÂú®apollo-configserviceÂíåapollo-adminservice‰∏≠ÂÅöÁõ∏ÂÖ≥ÈôêÂà∂‰ª•ÈÅøÂÖçEurekaÂ∞ÜËøô‰∫õÁΩëÂç°ÁöÑIPÊ≥®ÂÜåÂà∞Meta Server„ÄÇÂ¶Ç‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÂ∞±ÊòØÂØπ‰∫éapollo-configserviceÔºåÊäädocker0Âíåveth.* ÁöÑÁΩëÂç°Âú®Ê≥®ÂÜåÂà∞EurekaÊó∂ÂøΩÁï•Êéâ„ÄÇ 12345678910spring: application: name: apollo-configservice profiles: active: $&#123;apollo_profile&#125; cloud: inetutils: ignoredInterfaces: - docker0 - veth.* Âè¶Â§ñ‰∏ÄÁßçÊñπÂºèÊòØÁõ¥Êé•ÊåáÂÆöË¶ÅÊ≥®ÂÜåÁöÑIPÔºåÂèØ‰ª•‰øÆÊîπstartup.shÔºåÈÄöËøáJVM System PropertyÂú®ËøêË°åÊó∂‰º†ÂÖ•ÔºåÂ¶Ç-Deureka.instance.ip-address=${ÊåáÂÆöÁöÑIP}ÔºåÊàñËÄÖ‰πüÂèØ‰ª•‰øÆÊîπapollo-adminserviceÊàñapollo-configservice ÁöÑbootstrap.ymlÊñá‰ª∂ÔºåÂä†ÂÖ•‰ª•‰∏ãÈÖçÁΩÆ 123eureka: instance: ip-address: $&#123;ÊåáÂÆöÁöÑIP&#125; ÊúÄÂêé‰∏ÄÁßçÊñπÂºèÊòØÁõ¥Êé•ÊåáÂÆöË¶ÅÊ≥®ÂÜåÁöÑIP+PORTÔºåÂèØ‰ª•‰øÆÊîπstartup.shÔºåÈÄöËøáJVM System PropertyÂú®ËøêË°åÊó∂‰º†ÂÖ•ÔºåÂ¶Ç-Deureka.instance.homePageUrl=http://${ÊåáÂÆöÁöÑIP}:${ÊåáÂÆöÁöÑPort}ÔºåÊàñËÄÖ‰πüÂèØ‰ª•‰øÆÊîπapollo-adminserviceÊàñapollo-configservice ÁöÑbootstrap.ymlÊñá‰ª∂ÔºåÂä†ÂÖ•‰ª•‰∏ãÈÖçÁΩÆ 1234eureka: instance: homePageUrl: http://$&#123;ÊåáÂÆöÁöÑIP&#125;:$&#123;ÊåáÂÆöÁöÑPort&#125; preferIpAddress: false Â¶ÇÊûúApolloÈÉ®ÁΩ≤Âú®ÂÖ¨Êúâ‰∫ë‰∏äÔºåÊú¨Âú∞ÂºÄÂèëÁéØÂ¢ÉÊó†Ê≥ïËøûÊé•Ôºå‰ΩÜÂèàÈúÄË¶ÅÂÅöÂºÄÂèëÊµãËØïÁöÑËØùÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•ÂçáÁ∫ßÂà∞0.11.0ÁâàÊú¨Âèä‰ª•‰∏äÔºåÁÑ∂ÂêéÈÄöËøá-Dapollo.configService=http://config-serviceÁöÑÂÖ¨ÁΩëIP:Á´ØÂè£Êù•Ë∑≥Ëøámeta serviceÁöÑÊúçÂä°ÂèëÁé∞ ÈÉ®ÁΩ≤Ê≠•È™§ÈÉ®ÁΩ≤Ê≠•È™§ÂÖ±ÂõõÊ≠•Ôºö ÂàõÂª∫Êï∞ÊçÆÂ∫ìÔºåÊâÄÊúâApolloÊúçÂä°Á´ØÈÉΩ‰æùËµñ‰∫éMySQLÊï∞ÊçÆÂ∫ìÔºåÊâÄ‰ª•Âú®ÂêØÂä®Êó∂ÔºåÂ∫îÂÖàÈÖçÁΩÆÊï∞ÊçÆÊâçËÉΩÂêØÂä®ÊúçÂä°Ôºõ Ëé∑ÂèñÂÆâË£ÖÂåÖÔºöÈÄöËøáÊ∫êÁ†ÅÊûÑÂª∫ ÊûÑÂª∫dockerÈïúÂÉèÔºö‰∏∫apollo-configservice, apollo-adminservice, apollo-portalÊûÑÂª∫DockerÈïúÂÉè ÈÉ®ÁΩ≤ApolloÊúçÂä°Á´ØÔºöÊûÑÂª∫ÈïúÂÉèÂêéÈÄöËøádocker composeÂ∞±ÂèØ‰ª•ÈÉ®ÁΩ≤Âà∞ÂÖ¨Âè∏ÁöÑÊµãËØïÂíåÁîü‰∫ßÁéØÂ¢É‰∫Ü ÂàõÂª∫Êï∞ÊçÆÂ∫ìApolloÊúçÂä°Á´ØÂÖ±ÈúÄË¶Å‰∏§‰∏™Êï∞ÊçÆÂ∫ìÔºöApolloPortalDBÂíåApolloConfigDBÔºåÂÆòÁΩëÊääÊï∞ÊçÆÂ∫ì„ÄÅË°®ÁöÑÂàõÂª∫ÂíåÊ†∑‰æãÊï∞ÊçÆÈÉΩÂàÜÂà´ÂáÜÂ§á‰∫ÜsqlÊñá‰ª∂ÔºåÂè™ÈúÄË¶ÅÂØºÂÖ•Êï∞ÊçÆÂ∫ìÂç≥ÂèØ„ÄÇ ÊúçÂä°Âô® Êï∞ÊçÆÂ∫ì Á´ØÂè£ ÁéØÂ¢É 172.24.2.65 ApolloConfigDB 3306 dev 172.24.2.65 ApolloPortalDB 3306 dev Ë∞ÉÊï¥ÊúçÂä°Á´ØÈÖçÁΩÆApolloËá™Ë∫´ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÊòØÊîæÂú®Êï∞ÊçÆÂ∫ìÈáåÈù¢ÁöÑÔºåÊâÄ‰ª•ÈúÄË¶ÅÈíàÂØπÂÆûÈôÖÊÉÖÂÜµÂÅö‰∏Ä‰∫õË∞ÉÊï¥ ApolloPortalDB ÈÖçÁΩÆÈ°πÁªü‰∏ÄÂ≠òÂÇ®Âú®ServerConfigË°®‰∏≠Ôºå‰πüÂèØ‰ª•ÈÄöËøáÁÆ°ÁêÜÂëòÂ∑•ÂÖ∑ - Á≥ªÁªüÂèÇÊï∞È°µÈù¢ËøõË°åÈÖçÁΩÆ„ÄÇ apollo.portal.envs - ÂèØÊîØÊåÅÁöÑÁéØÂ¢ÉÂàóË°®ÔºåÈªòËÆ§ÂÄºÊòØdevÔºåÂ¶ÇÊûúportalÈúÄË¶ÅÁÆ°ÁêÜÂ§ö‰∏™ÁéØÂ¢ÉÁöÑËØùÔºå‰ª•ÈÄóÂè∑ÂàÜÈöîÂç≥ÂèØÔºàÂ§ßÂ∞èÂÜô‰∏çÊïèÊÑüÔºâ ApolloConfigDB ÈÖçÁΩÆÈ°πÁªü‰∏ÄÂ≠òÂÇ®Âú®ServerConfigË°®‰∏≠ÔºåÈúÄË¶ÅÊ≥®ÊÑèÊØè‰∏™ÁéØÂ¢ÉÁöÑApolloConfigDB.ServerConfigÈÉΩÈúÄË¶ÅÂçïÁã¨ÈÖçÁΩÆ„ÄÇ eureka.service.url - EurekaÊúçÂä°UrlÔºå‰∏çÁÆ°ÊòØapollo-configserviceËøòÊòØapollo-adminserviceÈÉΩÈúÄË¶ÅÂêëeurekaÊúçÂä°Ê≥®ÂÜåÔºåÊâÄ‰ª•ÈúÄË¶ÅÈÖçÁΩÆeurekaÊúçÂä°Âú∞ÂùÄ„ÄÇ ÊåâÁÖßÁõÆÂâçÁöÑÂÆûÁé∞Ôºåapollo-configserviceÊú¨Ë∫´Â∞±ÊòØ‰∏Ä‰∏™eurekaÊúçÂä°ÔºåÊâÄ‰ª•Âè™ÈúÄË¶ÅÂ°´ÂÖ•apollo-configserviceÁöÑÂú∞ÂùÄÂç≥ÂèØÔºåÂ¶ÇÊúâÂ§ö‰∏™ÔºåÁî®ÈÄóÂè∑ÂàÜÈöîÔºàÊ≥®ÊÑè‰∏çË¶ÅÂøò‰∫Ü/eureka/ÂêéÁºÄÔºâ„ÄÇËøôÈáåÊàëÂ°´ÂÜôhttp://172.24.2.63:8090/eureka„ÄÇ Ëé∑ÂèñÂÆâË£ÖÂåÖÂà∞github‰∏äËøõË°åÊ∫êÁ†Å‰∏ãËΩΩÔºåÂ¶ÇÊûúgithub‰∏ãËΩΩÊØîËæÉÊÖ¢ÔºåÂèØ‰ª•ÂéªipaddressÊääCDN‰ø°ÊÅØÊêúÁ¥¢Âá∫Êù•ÔºåÊ∑ªÂä†Âà∞hosts‰∏≠ 151.101.185.194 github.global.ssl.fastly.net 192.30.253.113 github.com 192.30.253.120 codeload.github.com Ë∞ÉÊï¥Ê∫êÁ†ÅÈÖçÁΩÆÊï∞ÊçÆÂ∫ìËøûÊé•‰ø°ÊÅØscripts/build.bat 12345678910111213# configset apollo_config_db_url="jdbc:mysql://172.24.2.65:3306/ApolloConfigDB?characterEncoding=utf8"set apollo_config_db_username="apollo-config"set apollo_config_db_password="apollo-config"# portalset apollo_portal_db_url="jdbc:mysql://172.24.2.65:3306/ApolloPortalDB?characterEncoding=utf8"set apollo_portal_db_username="apollo-portal"set apollo_portal_db_password="apollo-portal"# dev_metaset dev_meta="http://172.24.2.63:8090"set META_SERVERS_OPTS=-Ddev_meta=%dev_meta% Ë∞ÉÊï¥apollo-configserviceÂ∑•Á®ã Â∞ÜÊâÄÊúâÁ´ØÂè£Êîπ‰∏∫8090 bootstrap.ymlË∞ÉÊï¥defaultZone: http://${eureka.instance.hostname}:8090/eureka/ startup.sh Êñ∞Â¢û export JAVA_OPTS=&quot;-Deureka.instance.ip-address=172.24.2.63&quot; Ë∞ÉÊï¥apollo-configserviceÂ∑•Á®ã Â∞ÜÊâÄÊúâÁ´ØÂè£Êîπ‰∏∫8091 bootstrap.ymlË∞ÉÊï¥ defaultZone: http://${eureka.instance.hostname}:8090/eureka/ startup.sh Êñ∞Â¢û export JAVA_OPTS=&quot;-Deureka.instance.ip-address=172.24.2.63&quot; Ë∞ÉÊï¥apollo-portalÂ∑•Á®ã Â∞ÜÊâÄÊúâÁ´ØÂè£Êîπ‰∏∫8092 apollo-env.propertiesË∞ÉÊï¥local.meta=http://172.24.2.63:8090 ÊâßË°åÁºñËØë„ÄÅÊâìÂåÖÂÅöÂÆå‰∏äËø∞ÈÖçÁΩÆÂêéÔºåÂ∞±ÂèØ‰ª•ÊâßË°åÁºñËØëÂíåÊâìÂåÖ‰∫Ü„ÄÇÊâßË°å/scriptsÁõÆÂΩï‰∏ãbuild.shËÑöÊú¨ÔºåËØ•ËÑöÊú¨‰ºö‰æùÊ¨°ÊâìÂåÖapollo-configservice, apollo-adminservice, apollo-portal„ÄÇ ÊûÑÂª∫dockerÈïúÂÉèÂ∞Ütarget‰∏ãÁöÑapollo-*-github.zipÂíåDockerfile‰∏ä‰º†Âà∞ÊúçÂä°Âô®ÔºåÂΩ¢ÊàêÁªìÊûÑ ÊûÑÂª∫ÈïúÂÉè docker build -t apollo-configservice:1.0.0 . docker build -t apollo-adminservice:1.0.0 . docker build -t apollo-portal:1.0.0 . ÈÉ®ÁΩ≤ApolloÊúçÂä°Á´Ø Âú®ÈÖçÁΩÆÊñá‰ª∂ÁõÆÂΩïÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§ÂêØÂä®ÊúçÂä°Ôºö1docker-compose up]]></content>
      <tags>
        <tag>spring cloud</tag>
        <tag>apollo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DockerÊê≠Âª∫RedisÈõÜÁæ§]]></title>
    <url>%2Fdocker%2Fredis%2Fdocker%2Fredis%2F1%2F</url>
    <content type="text"><![CDATA[ÂâçÊ≤øredisÊòØÊúÄÂ∏∏Áî®ÁöÑÁºìÂ≠òÊúçÂä°Ôºå‰∏ãÈù¢ÊàëÂ∞±‰ΩøÁî®dockerÊù•Êê≠Âª∫‰∏ÄÂ•óredisÁöÑÈõÜÁæ§„ÄÇ ÂàõÂª∫redisÂÆπÂô® È¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÊñ∞Âª∫‰∏Ä‰∏™redisÈÖçÁΩÆÊ®°ÊùøÔºåÁî®‰∫éÊâπÈáèÁîüÊàêredisÈÖçÁΩÆÊñá‰ª∂redis-cluster.tmpl 123mkdir -p ~/docker/redis-cluster;cd ~/docker/redis-cluster;touch redis-cluster.tmpl; Â∞Ü‰∏Ä‰∏ãÂÜÖÂÆπÂÜôÂÖ•Âà∞redis-cluster.tmplÊñá‰ª∂‰∏≠ 123456789port $&#123;PORT&#125;protected-mode nocluster-enabled yescluster-config-file nodes.confcluster-node-timeout 5000cluster-announce-ip 192.168.3.60cluster-announce-port $&#123;PORT&#125;cluster-announce-bus-port 1$&#123;PORT&#125;appendonly yes Ê≥®ÊÑè: cluster-announce-ip ÊòØÊú¨Êú∫ipÔºåËÄå‰∏çÊòØ127.0.0.1 Âú®docker‰∏≠ÂàõÂª∫‰∏Ä‰∏™Ëá™ÂÆö‰πâÁΩëÁªúÔºåÂèØ‰ª•‰ΩøÁî®docker network createÂëΩ‰ª§Êù•ÂàõÂª∫Ôºådocker network lsÂëΩ‰ª§Êù•Êü•ÁúãÊòØÂê¶ÂàõÂª∫ÊàêÂäü„ÄÇ 1234567docker network create redis-net[root@localhost ~/docker/redis-cluster]# docker network lsNETWORK ID NAME DRIVER SCOPEe98dcf06eec6 bridge bridge local845f1245483b host host localf72ff3f690a0 none null local72aa0ec39b32 redis-net bridge local Áé∞Âú®Êàë‰ª¨Êù•ÊâπÈáèÊâßË°åÁîüÊàêÈÖçÁΩÆÊñá‰ª∂ÂíåÊï∞ÊçÆÂ≠òÂÇ®ÁõÆÂΩï 12345for port in `seq 7000 7005`; do \ mkdir -p ~/docker/redis-cluster/$&#123;port&#125;/conf \ &amp;&amp; PORT=$&#123;port&#125; envsubst &lt; ~/docker/redis-cluster/redis-cluster.tmpl &gt; ~/docker/redis-cluster/$&#123;port&#125;/conf/redis.conf \ &amp;&amp; mkdir -p ~/docker/redis-cluster/$&#123;port&#125;/data; \done ÂÖ±ÁîüÊàê6‰∏™Êñá‰ª∂Â§πÔºå‰ªé7000Âà∞7005ÔºåÊØè‰∏™Êñá‰ª∂Â§π‰∏ãÂåÖÂê´dataÂíåconfÊñá‰ª∂Â§πÔºåÂêåÊó∂confÈáåÈù¢Êúâredis.confÈÖçÁΩÆÊñá‰ª∂ ÂàõÂª∫6‰∏™redisÂÆπÂô®ÔºåÂπ∂ÂêØÂä®registry.cn-shenzhen.aliyuncs.com/zhouqi/redis:4.0ÊòØÊàëËá™Â∑±ÁöÑdockerÈïúÂÉèÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÂÆòÊñπÈïúÂÉè„ÄÇ1234567for port in `seq 7000 7005`; do \ docker run -d -ti -p $&#123;port&#125;:$&#123;port&#125; -p 1$&#123;port&#125;:1$&#123;port&#125; \ -v ~/docker/redis-cluster/$&#123;port&#125;/conf/redis.conf:/usr/local/etc/redis/redis.conf:z \ -v ~/docker/redis-cluster/$&#123;port&#125;/data:/data:z \ --restart always --name redis-$&#123;port&#125; --net redis-net \ --sysctl net.core.somaxconn=1024 registry.cn-shenzhen.aliyuncs.com/zhouqi/redis:4.0 redis-server /usr/local/etc/redis/redis.conf; \done Êàë‰ª¨Êü•Áúã‰∏Ä‰∏ãÊòØÂê¶ÂêØÂä®ÊàêÂäü Âª∫Á´ãRedisÈõÜÁæ§ÂÖ≥Á≥ª12345678echo yes | docker run -i --rm --net redis-net ruby sh -c '\ gem install redis \ &amp;&amp; wget http://download.redis.io/releases/redis-4.0.10.tar.gz \ &amp;&amp; tar -xzvf redis-4.0.10.tar.gz \ &amp;&amp; ruby redis-4.0.10/src/redis-trib.rb create --replicas 1 \ '"$(for port in `seq 7000 7005`; do \ echo -n "$(docker inspect --format '&#123;&#123; (index .NetworkSettings.Networks "redis-net").IPAddress &#125;&#125;' "redis-$&#123;port&#125;")":$&#123;port&#125; ' ' ; \ done)" ÊúÄÂêéÊàë‰ª¨Âú®Áúã‰∏Ä‰∏ãredisÁöÑÈõÜÁæ§‰ø°ÊÅØ ÈóÆÈ¢ò centos7ÂàõÂª∫redisÈõÜÁæ§‰∏ÄÁõ¥Âç°Âú®Waiting for the cluster to join ÈóÆÈ¢òÔºöÊú∫Âô®Ê≤°ÊúâÂºÄÊîæredisÈõÜÁæ§ÊÄªÁ∫øÁ´ØÂè£„ÄÇ Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÂºÄÊîæredisÈõÜÁæ§ÊÄªÁ∫øÁ´ØÂè£„ÄÇÈõÜÁæ§ÊÄªÁ∫øÁ´ØÂè£ÊòØredisÂÆ¢Êà∑Á´ØËøûÊé•ÁöÑÁ´ØÂè£+10000„ÄÇÂ¶ÇÔºöredisÂÆ¢Êà∑Á´ØÁ´ØÂè£ÊòØ7001„ÄÇÂàôÔºöÈõÜÁæ§ÊÄªÁ∫øÁ´ØÂè£Â∞±ÊòØ17001„ÄÇÊ≥®ÊÑè„ÄÅÊâÄ‰ª•redisÈõÜÁæ§Êú∫Âô®ÈÉΩË¶ÅÊîæÂºÄÂØπÂ∫îÁöÑredisÂÆ¢Êà∑Á´ØÁ´ØÂè£ÂíåÈõÜÁæ§ÊÄªÁ∫øÁ´ØÂè£„ÄÇÂ¶ÇÊûú‰Ω†ÊòØÂú®ËôöÊãüÊú∫‰∏äÊê≠Âª∫redisÈõÜÁæ§„ÄÅÈÇ£‰πà‰Ω†Áõ¥Êé•ÂÖ≥Èó≠Èò≤ÁÅ´Â¢ôÂç≥ÂèØËß£ÂÜ≥ centos7ÂàõÂª∫redisÈõÜÁæ§‰∏ÄÁõ¥Âç°Âú®Waiting for the cluster to join ÈóÆÈ¢ò:‰πüËÆ∏‰Ω†ÁöÑredisÈõÜÁæ§ÁöÑipËÆæÁΩÆÊàê‰∫Ü127.0.0.1Êàñloclahost Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÂ∞Üredis-cluster.tmpl‰∏≠ÁöÑipËÆæÁΩÆÊàêÊú¨Êú∫ip WARNING: redis-trib.rb is not longer available! ÈóÆÈ¢òÔºöÂè™Êúâredis 5.0‰ª•‰∏ãÁöÑÁâàÊú¨ÊâçÊîØÊåÅ Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÂéªhttp://download.redis.io/releases‰∏≠‰∏ãËΩΩ‰Ω†ÂØπÂ∫îÁöÑÁâàÊú¨Âè∑ ÊâπÈáèÂ§ÑÁêÜÂëΩ‰ª§ RedisÂÅúÊ≠¢ 123for port in `seq 7000 7005`; do \docker stop redis-$&#123;port&#125;; \done RedisÂà†Èô§ 1234for port in `seq 7000 7005`; do \docker stop redis-$&#123;port&#125;; \docker rm redis-$&#123;port&#125;; \done RedisÂêØÂä® 123for port in `seq 7000 7005`; do \docker start redis-$&#123;port&#125;; \done]]></content>
      <categories>
        <category>docker</category>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker‰ΩøÁî®ÂõΩÂÜÖÈïúÂÉè]]></title>
    <url>%2Fdocker%2Fdocker%2F2%2F</url>
    <content type="text"><![CDATA[‰∏∫‰ªÄ‰πàË¶Å‰∏∫dockerÈÖçÁΩÆÂõΩÂÜÖÈïúÂÉèÂú®Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºådockerÊúâ‰∏Ä‰∏™ÈªòËÆ§ËøûÊé•ÁöÑÂõΩÂ§ñÂÆòÊñπÈïúÂÉèÔºåÂú®ÂõΩÂ§ñÁöÑÁΩëÂèãËÆøÈóÆËØ•ÂÆòÊñπÈïúÂÉèËá™ÁÑ∂‰∏çÊàêÈóÆÈ¢òÔºå‰ΩÜÊòØÂõΩÂÜÖÊØïÁ´ü‰∏çÊòØÂõΩÂ§ñÔºåÁî±‰∫éÂõΩÊÉÖ‰∏çÂêåÔºå‰∏≠ÂõΩÁöÑÁΩëÁªúËÆøÈóÆÂõΩÂ§ñÂÆòÊñπÈïúÂÉèÁΩëÈÄü‰∏ÄÂêëÂæàÊÖ¢ÔºåËÄå‰∏îÂæÄÂæÄËøò‰ºöÈÅ≠ÈÅáÊñ≠ÁΩëÁöÑÁ™òÂ¢ÉÔºåÊâÄ‰ª•ËØ¥Êàë‰ª¨Ë¶ÅÊÉ≥Ê≠£Â∏∏‰ΩøÁî®dockerÁöÑÈïúÂÉèÔºåÈÇ£‰πàÊàë‰ª¨Â∞±‰∏çÂæó‰∏çÈÖçÁΩÆÁõ∏Â∫îÁöÑÂõΩÂÜÖÈïúÂÉè„ÄÇ ÂèØ‰ª•‰ΩøÁî®ÁöÑÂõΩÂÜÖÈïúÂÉèÊúâÂì™‰∫õDockerÂèØ‰ª•ÈÖçÁΩÆÁöÑÂõΩÂÜÖÈïúÂÉèÊúâÂæàÂ§öÂèØ‰æõÈÄâÊã©ÔºåÊØîÂ¶ÇËØ¥ÔºöÈòøÈáå‰∫ëÔºåÁΩëÊòìËúÇÂ∑¢ÔºåDaoCloudÔºåDocker‰∏≠ÂõΩÂå∫ÂÆòÊñπÈïúÂÉèÁ≠âÔºåËøô‰∫õÈÉΩÊòØÂèØ‰ª•Êèê‰æõÁªôÂ§ßÂÆ∂ÈöèÊÑèÈÄâÊã©ÁöÑ‰∏çÈîôÁöÑÈïúÂÉè‰ªìÂ∫ì„ÄÇ ÈÖçÁΩÆDocker‰∏≠ÂõΩÂå∫ÂÆòÊñπÈïúÂÉèDocker‰∏≠ÂõΩÂå∫ÂÆòÊñπÈïúÂÉèÁÆÄ‰ªãÂú®ÂõΩÂÜÖÔºåÂèØ‰ª•ÈÄöËøáregistry.docker-cn.comËÆøÈóÆÂÆòÊñπÈïúÂÉèÂ∫ìÔºåÁõÆÂâçËØ•ÈïúÂÉèÂ∫ìÂè™ÂåÖÂê´ÊµÅË°åÁöÑÂÖ¨ÊúâÈïúÂÉèÔºåËÄåÁßÅÊúâÈïúÂÉè‰ªçÈúÄË¶Å‰ªéÁæéÂõΩÈïúÂÉèÂ∫ì‰∏≠ÊãâÂèñ„ÄÇ ÈÖçÁΩÆDocker‰∏≠ÂõΩÂå∫ÂÆòÊñπÈïúÂÉè‰ΩøÁî®vi‰øÆÊîπ /etc/docker/daemon.json Êñá‰ª∂Âπ∂Ê∑ªÂä†‰∏ä‚Äùregistry-mirrors‚Äù: [‚Äúhttps://registry.docker-cn.com‚Äú]ÔºåÂ¶Ç‰∏ãÔºö12345[neusoft@172 ~]$ sudo vi /etc/docker/daemon.json &#123;"registry-mirrors": ["https://registry.docker-cn.com"]&#125; ÈáçÂêØDockerÈÖçÁΩÆÂÆå‰πãÂêéÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ôºå‰ª•‰ΩødockerÁöÑÈÖçÁΩÆÊñá‰ª∂ÁîüÊïà12systemctl daemon-reload systemctl restart docker]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker‰ΩøÁî®ÈùûrootÁî®Êà∑]]></title>
    <url>%2Fdocker%2Fdocker%2F1%2F</url>
    <content type="text"><![CDATA[Docker‰ΩøÁî®ÈùûrootÁî®Êà∑ÈÄöÂ∏∏Êàë‰ª¨‰ΩøÁî®DockerÁöÑÊó∂ÂÄôÈÉΩÊòØ‰ΩøÁî®ÁöÑrootÔºåÂÆòÊñπËØ¥Ê≥ïÂ¶Ç‰∏ãÔºö The docker daemon binds to a Unix socket instead of a TCP port. By default that Unix socket is owned by the user root and other users can access it with sudo. For this reason, docker daemon always runs as the root user.To avoid having to use sudo when you use the docker command, create a Unix group called docker and add users to it. When the docker daemon starts, it makes the ownership of the Unix socket read/writable by the docker group. ‰∏ãÈù¢ÊòØ‰ΩøÁî®ÈùûrootÁî®Êà∑Êìç‰ΩúÁöÑÊ≠•È™§ ÂàõÂª∫dockerÁªÑ sudo groupadd docker Â∞ÜÂΩìÂâçÁî®Êà∑Âä†ÂÖ•dockerÁªÑ sudo gpasswd -a ${USER} docker ÈáçÊñ∞ÂêØÂä®dockerÊúçÂä°Ôºà‰∏ãÈù¢ÊòØCentOS7ÁöÑÂëΩ‰ª§Ôºâ sudo systemctl restart docker ÂΩìÂâçÁî®Êà∑ÈÄÄÂá∫Á≥ªÁªüÈáçÊñ∞ÁôªÈôÜËøêË°ådockerÂëΩ‰ª§ docker ps]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DockerÈõÜÁæ§(‰∫å)]]></title>
    <url>%2Fdocker%2Fdocker%2Fjq-2%2F</url>
    <content type="text"><![CDATA[Docker‰ΩøÁî®PortainerÁÆ°ÁêÜSwarmÈõÜÁæ§Âú®‰∏ä‰∏ÄËäÇ‰∏≠Â∑≤ÁªèÂ∞Ü‰∫ÜÔºåÂ¶ÇÊûúÂ∞ÜÂ≠êËäÇÁÇπÂä†ÂÖ•Âà∞‰∏ªËäÇÁÇπ‰∏≠ÔºåÊú¨ËäÇÂ∞Ü‰ΩøÁî®portainerÊù•ÂØπswarmÈõÜÁæ§ËøõË°åÁÆ°ÁêÜ ÂÆâË£ÖportainerÁÆ°ÁêÜÂ∑•ÂÖ∑‰∏ãËΩΩportainerÂ∑•ÂÖ∑ÔºåÂπ∂ÂêØÁî®dockerÊúçÂä°123456789[neusoft@localhost ~/docker]$ docker pull registry.cn-shenzhen.aliyuncs.com/zhouqi/portainer:1.20.0[neusoft@localhost ~/docker]$ docker service create \&gt; --name portainer \&gt; --publish 9000:9000 \&gt; --constraint 'node.role == manager' \&gt; --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock \&gt; registry.cn-shenzhen.aliyuncs.com/zhouqi/portainer:1.20.0 \&gt; -H unix:///var/run/docker.sock Êü•ÁúãdockerÁöÑÊúçÂä°ÔºåÂ∑≤ÁªèÂêØÁî®ÊàêÂäü123[neusoft@localhost ~/docker]$ docker service lsID NAME MODE REPLICAS IMAGEy6ydozgujzjo portainer replicated 1/1 registry.cn-shenzhen.aliyuncs.com/zhouqi/portainer:1.20.0 Â¶ÇÊûúÊÉ≥ÂÅúÁî®ËØ•ÊúçÂä°ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Ôºö12[neusoft@localhost ~/docker]$ docker service rm portainerportainer Êü•ÁúãportainerÂπ∂ËøõË°åÈõÜÁæ§ËÆæÁΩÆËÆøÈóÆhttp://172.24.2.63:9000Âú∞ÂùÄÔºåÈ¶ñÂÖàËøõË°åËÆæÁΩÆÂØÜÁ†Å ÁôªÂΩïËøõÂéªÂêéÔºåËÉΩÊü•ÁúãÂà∞È¶ñÈ°µÁöÑ‰ø°ÊÅØ Ê∑ªÂä†‰∏Ä‰∏™Â≠êËäÇÁÇπÂà∞portainer‰∏≠ Áé∞Âú®ÂèØ‰ª•Êü•ÁúãÊ∑ªÂä†ËøõÂéªÁöÑËäÇÁÇπ‰ø°ÊÅØ‰∫Ü]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DockerÈõÜÁæ§(‰∏Ä)]]></title>
    <url>%2Fdocker%2Fdocker%2Fjq-1%2F</url>
    <content type="text"><![CDATA[Docker‰ΩøÁî®SwarmÊê≠Âª∫ÈõÜÁæ§selinuxÊü•ÁúãselinuxÊòØÂê¶ÂÖ≥Èó≠12[root@localhost ~]# /usr/sbin/sestatus -vSELinux status: disabled Â¶ÇÊûúÊ≤°ÊúâÂÖ≥Èó≠ÔºåÂèØ‰ª•Áõ¥Êé•‰øÆÊîπ/etc/selinux/config‰∏≠ÁöÑSELINUX‰∏∫disabledÔºö12345678910111213[neusoft@localhost ~/docker]$ vi /etc/selinux/config# This file controls the state of SELinux on the system.# SELINUX= can take one of these three values:# enforcing - SELinux security policy is enforced.# permissive - SELinux prints warnings instead of enforcing.# disabled - No SELinux policy is loaded.#SELINUX=enforcingSELINUX=disabled# SELINUXTYPE= can take one of three two values:# targeted - Targeted processes are protected,# minimum - Modification of targeted policy. Only selected processes are protected. # mls - Multi Level Security protection.SELINUXTYPE=targeted Ê≥®ÊÑèÔºö‰øÆÊîπxelinuxÂêéÈúÄÈáçÂêØÊúçÂä°Âô® ÊâìÂºÄdocker.service‰∏≠ÁöÑ2375Á´ØÂè£12345678910111213141516171819202122232425262728293031323334[neusoft@localhost ~]$ sudo vi /usr/lib/systemd/system/docker.service[Unit]Description=Docker Application Container EngineDocumentation=http://docs.docker.comAfter=network.target rhel-push-plugin.socket registries.serviceWants=docker-storage-setup.serviceRequires=docker-cleanup.timer[Service]Type=notifyNotifyAccess=allEnvironmentFile=-/run/containers/registries.confEnvironmentFile=-/etc/sysconfig/dockerEnvironmentFile=-/etc/sysconfig/docker-storageEnvironmentFile=-/etc/sysconfig/docker-networkEnvironment=GOTRACEBACK=crashEnvironment=DOCKER_HTTP_HOST_COMPAT=1Environment=PATH=/usr/libexec/docker:/usr/bin:/usr/sbinExecStart=/usr/bin/dockerd-current \ --add-runtime docker-runc=/usr/libexec/docker/docker-runc-current \ --default-runtime=docker-runc \ --exec-opt native.cgroupdriver=systemd \ --userland-proxy-path=/usr/libexec/docker/docker-proxy-current \ --init-path=/usr/libexec/docker/docker-init-current \ --seccomp-profile=/etc/docker/seccomp.json \ $OPTIONS \ $DOCKER_STORAGE_OPTIONS \ $DOCKER_NETWORK_OPTIONS \ $ADD_REGISTRY \ $BLOCK_REGISTRY \ $INSECURE_REGISTRY \ $REGISTRIES \ -H unix:///var/run/docker.sock -H 0.0.0.0:2375 ÈáçÂêØdocker ÂàõÂª∫swarmÁÆ°ÁêÜËäÇÁÇπ‰∏ãÈù¢ÂºÄÂßãÂàõÂª∫swarm„ÄÇÁôªÂΩïÂà∞centos7‰∏ªÊú∫‰∏äÔºåÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö12345678910[neusoft@localhost ~/docker]$ docker swarm init --advertise-addr 172.24.2.63Swarm initialized: current node (5levgh6t0qizmgwyn789dcuqx) is now a manager.To add a worker to this swarm, run the following command: docker swarm join \ --token SWMTKN-1-5g3hxk4q7eg3atnuw45ijrqei21y2aopiqha31v04jwmnz5svt-bsudrrah0zgdx7qzjcm6xvfy3 \ 172.24.2.63:2377To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions. Â¶ÇÊûú‰Ω†‰∏çÁü•ÈÅìÊàñËÄÖÂøòËÆ∞‰∫ÜSwarm ManagerËäÇÁÇπÁöÑToken‰ø°ÊÅØÔºå ‰Ω†ÂèØ‰ª•Âú®ManagerËäÇÁÇπ‰∏äÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãWorkerËäÇÁÇπËøûÊé•ÊâÄÈúÄË¶ÅÁöÑToken‰ø°ÊÅØ„ÄÇ123456[neusoft@localhost ~/docker]$ docker swarm join-token workerTo add a worker to this swarm, run the following command: docker swarm join \ --token SWMTKN-1-5g3hxk4q7eg3atnuw45ijrqei21y2aopiqha31v04jwmnz5svt-bsudrrah0zgdx7qzjcm6xvfy3 \ 172.24.2.63:2377 ‰ΩøÁî®docker infoÂíådocker node lsÊü•ÁúãÈõÜÁæ§‰∏≠ÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºö123[neusoft@localhost ~/docker]$ docker node lsID HOSTNAME STATUS AVAILABILITY MANAGER STATUS5levgh6t0qizmgwyn789dcuqx * localhost.localdomain Ready Active Leader Êäädocker‰∏≠ÁöÑselinuxÂéªÊéâÔºåÁÑ∂ÂêéÈáçÂêØdocker123456789101112[root@localhost ~]# vi /etc/sysconfig/docker# /etc/sysconfig/docker# Modify these options if you want to change the way the docker daemon runs#OPTIONS='--selinux-enabled --log-driver=journald --signature-verification=false'OPTIONS='--log-driver=journald --signature-verification=false'if [ -z "$&#123;DOCKER_CERT_PATH&#125;" ]; then DOCKER_CERT_PATH=/etc/dockerfi[root@localhost ~]# systemctl restart docker Â∞ÜWorkerËäÇÁÇπÂä†ÂÖ•swarmÈõÜÁæ§ÁôªÂΩïÂà∞172.24.2.62‰∏ªÊú∫‰∏äÔºåÊâßË°åÂâçÈù¢ÂàõÂª∫swarmÊó∂ËæìÂá∫ÁöÑÂëΩ‰ª§Ôºö1234[root@localhost ~]# docker swarm join \&gt; --token SWMTKN-1-5g3hxk4q7eg3atnuw45ijrqei21y2aopiqha31v04jwmnz5svt-bsudrrah0zgdx7qzjcm6xvfy3 \&gt; 172.24.2.63:2377This node joined a swarm as a worker. ÂéªmasterÊü•ÁúãËäÇÁÇπ‰ø°ÊÅØ1234[neusoft@localhost ~/docker]$ docker node lsID HOSTNAME STATUS AVAILABILITY MANAGER STATUS5levgh6t0qizmgwyn789dcuqx * localhost.localdomain Ready Active Leaderi8x5wur7ux01rewkffavfyw3x localhost.localdomain Ready Active Ëøô‰∏™Êó∂ÂÄôËÉΩÁúãËßÅÊúâ2‰∏™ËäÇÁÇπ‰∫ÜÔºå‰ΩÜÊòØhostnameÊó†Ê≥ïËØÜÂà´ÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂëΩ‰ª§Êù•‰øÆÊîπhostnameÁöÑÂÜÖÂÆπ12[root@localhost ~]# hostnamectl set-hostname 172.24.2.62[root@localhost ~]# systemctl restart docker Êàë‰ª¨Âú®Âéªmaster‰∏≠Êü•ÁúãËäÇÁÇπ‰ø°ÊÅØ1234[neusoft@localhost ~/docker]$ docker node lsID HOSTNAME STATUS AVAILABILITY MANAGER STATUS5levgh6t0qizmgwyn789dcuqx * localhost.localdomain Ready Active Leaderi8x5wur7ux01rewkffavfyw3x 172.24.2.62 Ready Active ÈÇ£‰πàËäÇÁÇπÂä†ÂÖ•ÊàêÂäü‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JVMËøêË°åÂéüÁêÜ]]></title>
    <url>%2Fjava%2Fjava%2Fjvm%2F2%2F</url>
    <content type="text"><![CDATA[JVMËøêË°åÂéüÁêÜËØ¶Ëß£JVMÁÆÄÊûê‰Ωú‰∏∫‰∏ÄÂêçJava‰ΩøÁî®ËÄÖÔºåÊéåÊè°JVMÁöÑ‰ΩìÁ≥ªÁªìÊûÑ‰πüÊòØÂæàÊúâÂøÖË¶ÅÁöÑ„ÄÇËØ¥Ëµ∑JavaÔºåÊàë‰ª¨È¶ñÂÖàÊÉ≥Âà∞ÁöÑÊòØJavaÁºñÁ®ãËØ≠Ë®ÄÔºåÁÑ∂ËÄå‰∫ãÂÆû‰∏äÔºåJavaÊòØ‰∏ÄÁßçÊäÄÊúØÔºåÂÆÉÁî±ÂõõÊñπÈù¢ÁªÑÊàêÔºöJavaÁºñÁ®ãËØ≠Ë®Ä„ÄÅJavaÁ±ªÊñá‰ª∂Ê†ºÂºè„ÄÅJavaËôöÊãüÊú∫ÂíåJavaÂ∫îÁî®Á®ãÂ∫èÊé•Âè£(Java API)„ÄÇÂÆÉ‰ª¨ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö JavaÂπ≥Âè∞Áî±JavaËôöÊãüÊú∫ÂíåJavaÂ∫îÁî®Á®ãÂ∫èÊé•Âè£Êê≠Âª∫ÔºåJavaËØ≠Ë®ÄÂàôÊòØËøõÂÖ•Ëøô‰∏™Âπ≥Âè∞ÁöÑÈÄöÈÅìÔºåÁî®JavaËØ≠Ë®ÄÁºñÂÜôÂπ∂ÁºñËØëÁöÑÁ®ãÂ∫èÂèØ‰ª•ËøêË°åÂú®Ëøô‰∏™Âπ≥Âè∞‰∏ä„ÄÇËøô‰∏™Âπ≥Âè∞ÁöÑÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ËøêË°åÊúüÁéØÂ¢É‰ª£Ë°®ÁùÄJavaÂπ≥Âè∞ÔºåÂºÄÂèë‰∫∫ÂëòÁºñÂÜôJava‰ª£Á†Å(.javaÊñá‰ª∂)ÔºåÁÑ∂ÂêéÂ∞Ü‰πãÁºñËØëÊàêÂ≠óËäÇÁ†Å(.classÊñá‰ª∂)ÔºåÂÜçÁÑ∂ÂêéÂ≠óËäÇÁ†ÅË¢´Ë£ÖÂÖ•ÂÜÖÂ≠òÔºå‰∏ÄÊó¶Â≠óËäÇÁ†ÅËøõÂÖ•ËôöÊãüÊú∫ÔºåÂÆÉÂ∞±‰ºöË¢´Ëß£ÈáäÂô®Ëß£ÈáäÊâßË°åÔºåÊàñËÄÖÊòØË¢´Âç≥Êó∂‰ª£Á†ÅÂèëÁîüÂô®ÊúâÈÄâÊã©ÁöÑËΩ¨Êç¢ÊàêÊú∫Âô®Á†ÅÊâßË°å„ÄÇ JVMÂú®ÂÆÉÁöÑÁîüÂ≠òÂë®Êúü‰∏≠Êúâ‰∏Ä‰∏™ÊòéÁ°ÆÁöÑ‰ªªÂä°ÔºåÈÇ£Â∞±ÊòØËøêË°åJavaÁ®ãÂ∫èÔºåÂõ†Ê≠§ÂΩìJavaÁ®ãÂ∫èÂêØÂä®ÁöÑÊó∂ÂÄôÔºåÂ∞±‰∫ßÁîüJVMÁöÑ‰∏Ä‰∏™ÂÆû‰æãÔºõÂΩìÁ®ãÂ∫èËøêË°åÁªìÊùüÁöÑÊó∂ÂÄôÔºåËØ•ÂÆû‰æã‰πüË∑üÁùÄÊ∂àÂ§±‰∫Ü„ÄÇ Âú®JavaÂπ≥Âè∞ÁöÑÁªìÊûÑ‰∏≠, ÂèØ‰ª•ÁúãÂá∫ÔºåJavaËôöÊãüÊú∫(JVM) Â§ÑÂú®Ê†∏ÂøÉÁöÑ‰ΩçÁΩÆÔºåÊòØÁ®ãÂ∫è‰∏éÂ∫ïÂ±ÇÊìç‰ΩúÁ≥ªÁªüÂíåÁ°¨‰ª∂Êó†ÂÖ≥ÁöÑÂÖ≥ÈîÆ„ÄÇÂÆÉÁöÑ‰∏ãÊñπÊòØÁßªÊ§çÊé•Âè£ÔºåÁßªÊ§çÊé•Âè£Áî±‰∏§ÈÉ®ÂàÜÁªÑÊàêÔºöÈÄÇÈÖçÂô®ÂíåJavaÊìç‰ΩúÁ≥ªÁªü, ÂÖ∂‰∏≠‰æùËµñ‰∫éÂπ≥Âè∞ÁöÑÈÉ®ÂàÜÁß∞‰∏∫ÈÄÇÈÖçÂô®ÔºõJVM ÈÄöËøáÁßªÊ§çÊé•Âè£Âú®ÂÖ∑‰ΩìÁöÑÂπ≥Âè∞ÂíåÊìç‰ΩúÁ≥ªÁªü‰∏äÂÆûÁé∞ÔºõÂú®JVM ÁöÑ‰∏äÊñπÊòØJavaÁöÑÂü∫Êú¨Á±ªÂ∫ìÂíåÊâ©Â±ïÁ±ªÂ∫ì‰ª•ÂèäÂÆÉ‰ª¨ÁöÑAPIÔºå Âà©Áî®Java APIÁºñÂÜôÁöÑÂ∫îÁî®Á®ãÂ∫è(application) ÂíåÂ∞èÁ®ãÂ∫è(Java applet) ÂèØ‰ª•Âú®‰ªª‰ΩïJavaÂπ≥Âè∞‰∏äËøêË°åËÄåÊó†ÈúÄËÄÉËôëÂ∫ïÂ±ÇÂπ≥Âè∞, Â∞±ÊòØÂõ†‰∏∫ÊúâJavaËôöÊãüÊú∫(JVM)ÂÆûÁé∞‰∫ÜÁ®ãÂ∫è‰∏éÊìç‰ΩúÁ≥ªÁªüÁöÑÂàÜÁ¶ªÔºå‰ªéËÄåÂÆûÁé∞‰∫ÜJava ÁöÑÂπ≥Âè∞Êó†ÂÖ≥ÊÄß„ÄÇ ‰∏ãÈù¢Êàë‰ª¨‰ªéJVMÁöÑÂü∫Êú¨Ê¶ÇÂøµÂíåËøêËøáÁ®ãÁ®ãËøô‰∏§‰∏™ÊñπÈù¢ÂÖ•ÊâãÊù•ÂØπÂÆÉËøõË°åÊ∑±ÂÖ•ÁöÑÁ†îÁ©∂„ÄÇ JVMÂü∫Êú¨Ê¶ÇÂøµÂü∫Êú¨Ê¶ÇÂøµJVMÊòØÂèØËøêË°åJava‰ª£Á†ÅÁöÑÂÅáÊÉ≥ËÆ°ÁÆóÊú∫ ÔºåÂåÖÊã¨‰∏ÄÂ•óÂ≠óËäÇÁ†ÅÊåá‰ª§ÈõÜ„ÄÅ‰∏ÄÁªÑÂØÑÂ≠òÂô®„ÄÅ‰∏Ä‰∏™Ê†à„ÄÅ‰∏Ä‰∏™ÂûÉÂúæÂõûÊî∂ÔºåÂ†Ü Âíå ‰∏Ä‰∏™Â≠òÂÇ®ÊñπÊ≥ïÂüü„ÄÇJVMÊòØËøêË°åÂú®Êìç‰ΩúÁ≥ªÁªü‰πã‰∏äÁöÑÔºåÂÆÉ‰∏éÁ°¨‰ª∂Ê≤°ÊúâÁõ¥Êé•ÁöÑ‰∫§‰∫í„ÄÇ ËøêË°åËøáÁ®ãÊàë‰ª¨ÈÉΩÁü•ÈÅìJavaÊ∫êÊñá‰ª∂ÔºåÈÄöËøáÁºñËØëÂô®ÔºåËÉΩÂ§üÁîü‰∫ßÁõ∏Â∫îÁöÑ.ClassÊñá‰ª∂Ôºå‰πüÂ∞±ÊòØÂ≠óËäÇÁ†ÅÊñá‰ª∂ÔºåËÄåÂ≠óËäÇÁ†ÅÊñá‰ª∂ÂèàÈÄöËøáJavaËôöÊãüÊú∫‰∏≠ÁöÑËß£ÈáäÂô®ÔºåÁºñËØëÊàêÁâπÂÆöÊú∫Âô®‰∏äÁöÑÊú∫Âô®Á†Å „ÄÇ‰πüÂ∞±ÊòØÂ¶Ç‰∏ãÔºö JavaÊ∫êÊñá‰ª∂‚Äî&gt;ÁºñËØëÂô®‚Äî&gt;Â≠óËäÇÁ†ÅÊñá‰ª∂ Â≠óËäÇÁ†ÅÊñá‰ª∂-&gt;JVM‚Äî&gt;Êú∫Âô®Á†Å ÊØè‰∏ÄÁßçÂπ≥Âè∞ÁöÑËß£ÈáäÂô®ÊòØ‰∏çÂêåÁöÑÔºå‰ΩÜÊòØÂÆûÁé∞ÁöÑËôöÊãüÊú∫ÊòØÁõ∏ÂêåÁöÑÔºåËøô‰πüÂ∞±ÊòØJava‰∏∫‰ªÄ‰πàËÉΩÂ§üË∑®Âπ≥Âè∞ÁöÑÂéüÂõ†‰∫Ü ÔºåÂΩì‰∏Ä‰∏™Á®ãÂ∫è‰ªéÂºÄÂßãËøêË°åÔºåËøôÊó∂ËôöÊãüÊú∫Â∞±ÂºÄÂßãÂÆû‰æãÂåñ‰∫ÜÔºåÂ§ö‰∏™Á®ãÂ∫èÂêØÂä®Â∞±‰ºöÂ≠òÂú®Â§ö‰∏™ËôöÊãüÊú∫ÂÆû‰æã„ÄÇÁ®ãÂ∫èÈÄÄÂá∫ÊàñËÄÖÂÖ≥Èó≠ÔºåÂàôËôöÊãüÊú∫ÂÆû‰æãÊ∂à‰∫°ÔºåÂ§ö‰∏™ËôöÊãüÊú∫ÂÆû‰æã‰πãÈó¥Êï∞ÊçÆ‰∏çËÉΩÂÖ±‰∫´„ÄÇ ‰∏âÁßçJVM SunÂÖ¨Âè∏ÁöÑHotSpot BEAÂÖ¨Âè∏ÁöÑJRockit IBMÂÖ¨Âè∏ÁöÑJ9 JVM Âú®JDK1.7ÂèäÂÖ∂‰ª•ÂâçÊàë‰ª¨ÊâÄ‰ΩøÁî®ÁöÑÈÉΩÊòØSunÂÖ¨Âè∏ÁöÑHotSpotÔºå‰ΩÜÁî±‰∫éSunÂÖ¨Âè∏ÂíåBEAÂÖ¨Âè∏ÈÉΩË¢´oracleÊî∂Ë¥≠Ôºåjdk1.8Â∞ÜÈááÁî®SunÂÖ¨Âè∏ÁöÑHotSpotÂíåBEAÂÖ¨Âè∏ÁöÑJRockit‰∏§‰∏™JVM‰∏≠Á≤æÂçéÂΩ¢Êàêjdk1.8ÁöÑJVM„ÄÇ JVMÁöÑ‰ΩìÁ≥ªÁªìÊûÑ Class LoaderÁ±ªÂä†ËΩΩÂô®Ë¥üË¥£Âä†ËΩΩ .classÊñá‰ª∂ÔºåclassÊñá‰ª∂Âú®Êñá‰ª∂ÂºÄÂ§¥ÊúâÁâπÂÆöÁöÑÊñá‰ª∂Ê†áÁ§∫ÔºåÂπ∂‰∏îClassLoaderË¥üË¥£classÊñá‰ª∂ÁöÑÂä†ËΩΩÁ≠âÔºåËá≥‰∫éÂÆÉÊòØÂê¶ÂèØ‰ª•ËøêË°åÔºåÂàôÁî±Execution EngineÂÜ≥ÂÆö„ÄÇ ÂÆö‰ΩçÂíåÂØºÂÖ•‰∫åËøõÂà∂classÊñá‰ª∂ È™åËØÅÂØºÂÖ•Á±ªÁöÑÊ≠£Á°ÆÊÄß ‰∏∫Á±ªÂàÜÈÖçÂàùÂßãÂåñÂÜÖÂ≠ò Â∏ÆÂä©Ëß£ÊûêÁ¨¶Âè∑ÂºïÁî® Native InterfaceÊú¨Âú∞Êé•Âè£Êú¨Âú∞Êé•Âè£ÁöÑ‰ΩúÁî®ÊòØËûçÂêà‰∏çÂêåÁöÑÁºñÁ®ãËØ≠Ë®Ä‰∏∫JavaÊâÄÁî®ÔºåÂÆÉÁöÑÂàùË°∑ÊòØËûçÂêàC/C++Á®ãÂ∫èÔºåJavaËØûÁîüÁöÑÊó∂ÂÄôC/C++Ê®™Ë°åÁöÑÊó∂ÂÄôÔºåË¶ÅÊÉ≥Á´ãË∂≥ÔºåÂøÖÈ°ªÊúâË∞ÉÁî®C/C++Á®ãÂ∫èÔºå‰∫éÊòØÂ∞±Âú®ÂÜÖÂ≠ò‰∏≠‰∏ìÈó®ÂºÄËæü‰∫Ü‰∏ÄÂùóÂå∫ÂüüÂ§ÑÁêÜÊ†áËÆ∞‰∏∫nativeÁöÑ‰ª£Á†ÅÔºåÂÆÉÁöÑÂÖ∑‰Ωì‰ΩúÊ≥ïÊòØNative Method Stack‰∏≠ÁôªËÆ∞nativeÊñπÊ≥ïÔºåÂú®Execution EngineÊâßË°åÊó∂Âä†ËΩΩnative libraies„ÄÇ ÁõÆÂâçËØ•ÊñπÊ≥ï‰ΩøÁî®ÁöÑË∂äÊù•Ë∂äÂ∞ë‰∫ÜÔºåÈô§ÈùûÊòØ‰∏éÁ°¨‰ª∂ÊúâÂÖ≥ÁöÑÂ∫îÁî®ÔºåÊØîÂ¶ÇÈÄöËøáJavaÁ®ãÂ∫èÈ©±Âä®ÊâìÂç∞Êú∫ÔºåÊàñËÄÖJavaÁ≥ªÁªüÁÆ°ÁêÜÁîü‰∫ßËÆæÂ§áÔºåÂú®‰ºÅ‰∏öÁ∫ßÂ∫îÁî®‰∏≠Â∑≤ÁªèÊØîËæÉÂ∞ëËßÅ„ÄÇ Âõ†‰∏∫Áé∞Âú®ÁöÑÂºÇÊûÑÈ¢ÜÂüüÈó¥ÁöÑÈÄö‰ø°ÂæàÂèëËææÔºåÊØîÂ¶ÇÂèØ‰ª•‰ΩøÁî®SocketÈÄö‰ø°Ôºå‰πüÂèØ‰ª•‰ΩøÁî®Web ServiceÁ≠â„ÄÇ Execution Engine ÊâßË°åÂºïÊìéÔºöÊâßË°åÂåÖÂú®Ë£ÖËΩΩÁ±ªÁöÑÊñπÊ≥ï‰∏≠ÁöÑÊåá‰ª§Ôºå‰πüÂ∞±ÊòØÊñπÊ≥ïRuntime data area ËøêË°åÊï∞ÊçÆÂå∫ËôöÊãüÊú∫ÂÜÖÂ≠òÊàñËÄÖJvmÂÜÖÂ≠òÔºåÂÜ≤Êï¥‰∏™ËÆ°ÁÆóÊú∫ÂÜÖÂ≠ò‰∏≠ÂºÄËæü‰∏ÄÂùóÂÜÖÂ≠òÂ≠òÂÇ®JvmÈúÄË¶ÅÁî®Âà∞ÁöÑÂØπË±°ÔºåÂèòÈáèÁ≠âÔºåËøêË°åÂå∫Êï∞ÊçÆÊúâÂàÜÂæàÂ§öÂ∞èÂå∫ÔºåÂàÜÂà´‰∏∫ÔºöÊñπÊ≥ïÂå∫ÔºåËôöÊãüÊú∫Ê†àÔºåÊú¨Âú∞ÊñπÊ≥ïÊ†àÔºåÂ†ÜÔºåÁ®ãÂ∫èËÆ°Êï∞Âô® JVMÊï∞ÊçÆËøêË°åÂå∫ËØ¶Ëß£ÔºàÊ†àÁÆ°ËøêË°åÔºåÂ†ÜÁÆ°Â≠òÂÇ®ÔºâJVMË∞É‰ºò‰∏ªË¶ÅÂ∞±ÊòØ‰ºòÂåñ HeapÂ†Ü Âíå Method Area ÊñπÊ≥ïÂå∫ Native Method StackÊú¨Âú∞ÊñπÊ≥ïÊ†àÂÆÉÁöÑÂÖ∑‰ΩìÂÅöÊ≥ïÊòØNative Method Stack‰∏≠ÁôªËÆ∞nativeÊñπÊ≥ïÔºåÂú®Execution EngineÊâßË°åÊó∂Âä†ËΩΩnative libraies PC RegisterÁ®ãÂ∫èËÆ°Êï∞Âô®ÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™Á®ãÂ∫èËÆ°ÁÆóÂô®ÔºåÂ∞±ÊòØ‰∏Ä‰∏™ÊåáÈíàÔºåÊåáÂêëÊñπÊ≥ïÂå∫‰∏≠ÁöÑÊñπÊ≥ïÂ≠óËäÇÁ†ÅÔºà‰∏ã‰∏Ä‰∏™Â∞ÜË¶ÅÊâßË°åÁöÑÊåá‰ª§‰ª£Á†ÅÔºâÔºåÁî±ÊâßË°åÂºïÊìéËØªÂèñ‰∏ã‰∏ÄÊù°Êåá‰ª§ÔºåÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â∞èÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂá†‰πéÂèØ‰ª•ÂøΩÁï•‰∏çËÆ∞ Method AreaÊñπÊ≥ïÂå∫ÊñπÊ≥ïÂå∫ÊòØË¢´ÊâÄÊúâÁ∫øÁ®ãÂÖ±‰∫´ÔºåÊâÄÊúâÂ≠óÊÆµÂíåÊñπÊ≥ïÂ≠óËäÇÁ†ÅÔºå‰ª•Âèä‰∏Ä‰∫õÁâπÊÆäÊñπÊ≥ïÂ¶ÇÊûÑÈÄ†ÂáΩÊï∞ÔºåÊé•Âè£‰ª£Á†Å‰πüÂú®Ê≠§ÂÆö‰πâ„ÄÇÁÆÄÂçïËØ¥ÔºåÊâÄÊúâÂÆö‰πâÁöÑÊñπÊ≥ïÁöÑ‰ø°ÊÅØÈÉΩ‰øùÂ≠òÂú®ËØ•Âå∫ÂüüÔºåÊ≠§Âå∫ÂüüÂ±û‰∫éÂÖ±‰∫´Âå∫Èó¥ ÈùôÊÄÅÂèòÈáè+Â∏∏Èáè+Á±ª‰ø°ÊÅØ+ËøêË°åÊó∂Â∏∏ÈáèÊ±†Â≠òÂú®ÊñπÊ≥ïÂå∫‰∏≠ÔºåÂÆû‰æãÂèòÈáèÂ≠òÂú®Â†ÜÂÜÖÂ≠ò‰∏≠ Stack Ê†à Ê†àÊòØ‰ªÄ‰πà Ê†à‰πüÂè´Ê†àÂÜÖÂ≠òÔºå‰∏ªÁÆ°JavaÁ®ãÂ∫èÁöÑËøêË°åÔºåÊòØÂú®Á∫øÁ®ãÂàõÂª∫Êó∂ÂàõÂª∫ÔºåÂÆÉÁöÑÁîüÂëΩÊúüÊòØË∑üÈöèÁ∫øÁ®ãÁöÑÁîüÂëΩÊúüÔºåÁ∫øÁ®ãÁªìÊùüÊ†àÂÜÖÂ≠ò‰πüÂ∞±ÈáäÊîæÔºåÂØπ‰∫éÊ†àÊù•ËØ¥‰∏çÂ≠òÂú®ÂûÉÂúæÂõûÊî∂ÈóÆÈ¢òÔºåÂè™Ë¶ÅÁ∫øÁ®ã‰∏ÄÁªìÊùüËØ•Ê†àÂ∞±OverÔºåÁîüÂëΩÂë®ÊúüÂíåÁ∫øÁ®ã‰∏ÄËá¥ÔºåÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑ„ÄÇ Âü∫Êú¨Á±ªÂûãÁöÑÂèòÈáèÂíåÂØπË±°ÁöÑÂºïÁî®ÂèòÈáèÈÉΩÊòØÂú®ÂáΩÊï∞ÁöÑÊ†àÂÜÖÂ≠ò‰∏≠ÂàÜÈÖç Ê†àÂ≠òÂÇ®‰ªÄ‰πàÔºü Ê†àÂ∏ß‰∏≠‰∏ªË¶Å‰øùÂ≠ò3Á±ªÊï∞ÊçÆ Êú¨Âú∞ÂèòÈáèÔºàLocal VariablesÔºâÔºöËæìÂÖ•ÂèÇÊï∞ÂíåËæìÂá∫ÂèÇÊï∞‰ª•ÂèäÊñπÊ≥ïÂÜÖÁöÑÂèòÈáèÔºõ Ê†àÊìç‰ΩúÔºàOperand StackÔºâÔºöËÆ∞ÂΩïÂá∫Ê†à„ÄÅÂÖ•Ê†àÁöÑÊìç‰ΩúÔºõ Ê†àÂ∏ßÊï∞ÊçÆÔºàFrame DataÔºâÔºöÂåÖÊã¨Á±ªÊñá‰ª∂„ÄÅÊñπÊ≥ïÁ≠âÁ≠âÔºõ Ê†àËøêË°åÂéüÁêÜ Ê†à‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÊòØ‰ª•Ê†àÂ∏ßÔºàStack FrameÔºâÁöÑÊ†ºÂºèÂ≠òÂú®ÔºåÊ†àÂ∏ßÊòØ‰∏Ä‰∏™ÂÜÖÂ≠òÂå∫ÂùóÔºåÊòØ‰∏Ä‰∏™Êï∞ÊçÆÈõÜÔºåÊòØ‰∏Ä‰∏™ÊúâÂÖ≥ÊñπÊ≥ïÂíåËøêË°åÊúüÊï∞ÊçÆÁöÑÊï∞ÊçÆÈõÜÔºåÂΩì‰∏Ä‰∏™ÊñπÊ≥ïAË¢´Ë∞ÉÁî®Êó∂Â∞±‰∫ßÁîü‰∫Ü‰∏Ä‰∏™Ê†àÂ∏ßF1ÔºåÂπ∂Ë¢´ÂéãÂÖ•Âà∞Ê†à‰∏≠ÔºåAÊñπÊ≥ïÂèàË∞ÉÁî®‰∫ÜBÊñπÊ≥ïÔºå‰∫éÊòØ‰∫ßÁîüÊ†àÂ∏ßF2‰πüË¢´ÂéãÂÖ•Ê†àÔºåBÊñπÊ≥ïÂèàË∞ÉÁî®‰∫ÜCÊñπÊ≥ïÔºå‰∫éÊòØ‰∫ßÁîüÊ†àÂ∏ßF3‰πüË¢´ÂéãÂÖ•Ê†à‚Ä¶‚Ä¶ ‰æùÊ¨°ÊâßË°åÂÆåÊØïÂêéÔºåÂÖàÂºπÂá∫ÂêéËøõ‚Ä¶‚Ä¶F3Ê†àÂ∏ßÔºåÂÜçÂºπÂá∫F2Ê†àÂ∏ßÔºåÂÜçÂºπÂá∫F1Ê†àÂ∏ß„ÄÇ ÈÅµÂæ™‚ÄúÂÖàËøõÂêéÂá∫‚Äù/‚ÄúÂêéËøõÂÖàÂá∫‚ÄùÂéüÂàô Heap Â†ÜÂ†ÜËøôÂùóÂå∫ÂüüÊòØJVM‰∏≠ÊúÄÂ§ßÁöÑÔºåÂ∫îÁî®ÁöÑÂØπË±°ÂíåÊï∞ÊçÆÈÉΩÊòØÂ≠òÂú®Ëøô‰∏™Âå∫ÂüüÔºåËøôÂùóÂå∫Âüü‰πüÊòØÁ∫øÁ®ãÂÖ±‰∫´ÁöÑÔºå‰πüÊòØgc‰∏ªË¶ÅÁöÑÂõûÊî∂Âå∫Ôºå‰∏Ä‰∏™ JVM ÂÆû‰æãÂè™Â≠òÂú®‰∏Ä‰∏™Â†ÜÁ±ªÂ≠òÔºåÂ†ÜÂÜÖÂ≠òÁöÑÂ§ßÂ∞èÊòØÂèØ‰ª•Ë∞ÉËäÇÁöÑ„ÄÇÁ±ªÂä†ËΩΩÂô®ËØªÂèñ‰∫ÜÁ±ªÊñá‰ª∂ÂêéÔºåÈúÄË¶ÅÊääÁ±ª„ÄÅÊñπÊ≥ï„ÄÅÂ∏∏ÂèòÈáèÊîæÂà∞Â†ÜÂÜÖÂ≠ò‰∏≠Ôºå‰ª•Êñπ‰æøÊâßË°åÂô®ÊâßË°åÔºåÂ†ÜÂÜÖÂ≠òÂàÜ‰∏∫‰∏âÈÉ®ÂàÜÔºö Êñ∞ÁîüÂå∫ Êñ∞ÁîüÂå∫ÊòØÁ±ªÁöÑËØûÁîü„ÄÅÊàêÈïø„ÄÅÊ∂à‰∫°ÁöÑÂå∫ÂüüÔºå‰∏Ä‰∏™Á±ªÂú®ËøôÈáå‰∫ßÁîüÔºåÂ∫îÁî®ÔºåÊúÄÂêéË¢´ÂûÉÂúæÂõûÊî∂Âô®Êî∂ÈõÜÔºåÁªìÊùüÁîüÂëΩ„ÄÇÊñ∞ÁîüÂå∫ÂèàÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºö‰ºäÁî∏Âå∫ÔºàEden spaceÔºâÂíåÂπ∏Â≠òËÄÖÂå∫ÔºàSurvivor paceÔºâÔºåÊâÄÊúâÁöÑÁ±ªÈÉΩÊòØÂú®‰ºäÁî∏Âå∫Ë¢´newÂá∫Êù•ÁöÑ„ÄÇÂπ∏Â≠òÂå∫Êúâ‰∏§‰∏™Ôºö0Âå∫ÔºàSurvivor 0 spaceÔºâÂíå1Âå∫ÔºàSurvivor 1 spaceÔºâ„ÄÇÂΩì‰ºäÁî∏Âõ≠ÁöÑÁ©∫Èó¥Áî®ÂÆåÊó∂ÔºåÁ®ãÂ∫èÂèàÈúÄË¶ÅÂàõÂª∫ÂØπË±°ÔºåJVMÁöÑÂûÉÂúæÂõûÊî∂Âô®Â∞ÜÂØπ‰ºäÁî∏Âõ≠ËøõË°åÂûÉÂúæÂõûÊî∂ÔºàMinor GCÔºâ,Â∞Ü‰ºäÁî∏Âõ≠‰∏≠ÁöÑÂâ©‰ΩôÂØπË±°ÁßªÂä®Âà∞Âπ∏Â≠ò0Âå∫„ÄÇËã•Âπ∏Â≠ò0Âå∫‰πüÊª°‰∫ÜÔºåÂÜçÂØπËØ•Âå∫ËøõË°åÂûÉÂúæÂõûÊî∂ÔºåÁÑ∂ÂêéÁßªÂä®Âà∞1Âå∫„ÄÇÈÇ£Â¶ÇÊûú1Âéª‰πüÊª°‰∫ÜÂë¢ÔºüÂÜçÁßªÂä®Âà∞ÂÖªËÄÅÂå∫„ÄÇËã•ÂÖªËÄÅÂå∫‰πüÊª°‰∫ÜÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞Ü‰∫ßÁîüMajor GCÔºàFullGCCÔºâÔºåËøõË°åÂÖªËÄÅÂå∫ÁöÑÂÜÖÂ≠òÊ∏ÖÁêÜ„ÄÇËã•ÂÖªËÄÅÂå∫ÊâßË°åFull GC ‰πãÂêéÂèëÁé∞‰æùÁÑ∂Êó†Ê≥ïËøõË°åÂØπË±°ÁöÑ‰øùÂ≠òÔºåÂ∞±‰ºö‰∫ßÁîüOOMÂºÇÂ∏∏‚ÄúOutOfMemoryError‚Äù„ÄÇ Â¶ÇÊûúÂá∫Áé∞java.lang.OutOfMemoryError: Java heap spaceÂºÇÂ∏∏ÔºåËØ¥ÊòéJavaËôöÊãüÊú∫ÁöÑÂ†ÜÂÜÖÂ≠ò‰∏çÂ§ü„ÄÇ ÂéüÂõ†Êúâ‰∫å JavaËôöÊãüÊú∫ÁöÑÂ†ÜÂÜÖÂ≠òËÆæÁΩÆ‰∏çÂ§üÔºåÂèØ‰ª•ÈÄöËøáÂèÇÊï∞-Xms„ÄÅ-XmxÊù•Ë∞ÉÊï¥ ‰ª£Á†Å‰∏≠ÂàõÂª∫‰∫ÜÂ§ßÈáèÂ§ßÂØπË±°ÔºåÂπ∂‰∏îÈïøÊó∂Èó¥‰∏çËÉΩË¢´ÂûÉÂúæÊî∂ÈõÜÂô®Êî∂ÈõÜÔºàÂ≠òÂú®Ë¢´ÂºïÁî®Ôºâ ÂÖªËÄÅÂå∫ ÂÖªËÄÅÂå∫Áî®‰∫é‰øùÂ≠ò‰ªéÊñ∞ÁîüÂå∫Á≠õÈÄâÂá∫Êù•ÁöÑ JAVA ÂØπË±°Ôºå‰∏ÄËà¨Ê±†ÂØπË±°ÈÉΩÂú®Ëøô‰∏™Âå∫ÂüüÊ¥ªË∑É Ê∞∏‰πÖÂå∫ Ê∞∏‰πÖÂ≠òÂÇ®Âå∫ÊòØ‰∏Ä‰∏™Â∏∏È©ªÂÜÖÂ≠òÂå∫ÂüüÔºåÁî®‰∫éÂ≠òÊîæJDKËá™Ë∫´ÊâÄÊê∫Â∏¶ÁöÑ Class,Interface ÁöÑÂÖÉÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØËØ¥ÂÆÉÂ≠òÂÇ®ÁöÑÊòØËøêË°åÁéØÂ¢ÉÂøÖÈ°ªÁöÑÁ±ª‰ø°ÊÅØÔºåË¢´Ë£ÖËΩΩËøõÊ≠§Âå∫ÂüüÁöÑÊï∞ÊçÆÊòØ‰∏ç‰ºöË¢´ÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂ÊéâÁöÑÔºåÂÖ≥Èó≠ JVM Êâç‰ºöÈáäÊîæÊ≠§Âå∫ÂüüÊâÄÂç†Áî®ÁöÑÂÜÖÂ≠ò Â¶ÇÊûúÂá∫Áé∞java.lang.OutOfMemoryError: PermGen spaceÔºåËØ¥ÊòéÊòØJavaËôöÊãüÊú∫ÂØπÊ∞∏‰πÖ‰ª£PermÂÜÖÂ≠òËÆæÁΩÆ‰∏çÂ§ü„ÄÇ ÂéüÂõ†Êúâ‰∫å Á®ãÂ∫èÂêØÂä®ÈúÄË¶ÅÂä†ËΩΩÂ§ßÈáèÁöÑÁ¨¨‰∏âÊñπjarÂåÖ„ÄÇ‰æãÂ¶ÇÔºöÂú®‰∏Ä‰∏™Tomcat‰∏ãÈÉ®ÁΩ≤‰∫ÜÂ§™Â§öÁöÑÂ∫îÁî® Â§ßÈáèÂä®ÊÄÅÂèçÂ∞ÑÁîüÊàêÁöÑÁ±ª‰∏çÊñ≠Ë¢´Âä†ËΩΩÔºåÊúÄÁªàÂØºËá¥PermÂå∫Ë¢´Âç†Êª° ËØ¥ÊòéÔºö Jdk1.6Âèä‰πãÂâçÔºöÂ∏∏ÈáèÊ±†ÂàÜÈÖçÂú®Ê∞∏‰πÖ‰ª£ „ÄÇ Jdk1.7ÔºöÊúâÔºå‰ΩÜÂ∑≤ÁªèÈÄêÊ≠•‚ÄúÂéªÊ∞∏‰πÖ‰ª£‚Äù „ÄÇ Jdk1.8Âèä‰πãÂêéÔºöÊó†(java.lang.OutOfMemoryError: PermGen space,ËøôÁßçÈîôËØØÂ∞Ü‰∏ç‰ºöÂá∫Áé∞Âú®JDK1.8‰∏≠)„ÄÇ ËØ¥ÊòéÔºö ÊñπÊ≥ïÂå∫ÂíåÂ†ÜÂÜÖÂ≠òÁöÑÂºÇËÆÆÔºåÂÆûÈôÖËÄåË®ÄÔºåÊñπÊ≥ïÂå∫ÂíåÂ†Ü‰∏ÄÊ†∑ÔºåÊòØÂêÑ‰∏™Á∫øÁ®ãÂÖ±‰∫´ÁöÑÂÜÖÂ≠òÂå∫ÂüüÔºåÂÆÉÁî®‰∫éÂ≠òÂÇ®ËôöÊãüÊú∫Âä†ËΩΩÁöÑÔºöÁ±ª‰ø°ÊÅØ+ÊôÆÈÄöÂ∏∏Èáè+ÈùôÊÄÅÂ∏∏Èáè+ÁºñËØëÂô®ÁºñËØëÂêéÁöÑ‰ª£Á†ÅÁ≠âÁ≠âÔºåËôΩÁÑ∂JVMËßÑËåÉÂ∞ÜÊñπÊ≥ïÂå∫ÊèèËø∞‰∏∫Â†ÜÁöÑ‰∏Ä‰∏™ÈÄªËæëÈÉ®ÂàÜÔºå‰ΩÜÂÆÉÂç¥ËøòÊúâ‰∏Ä‰∏™Âà´ÂêçÂè´ÂÅöNon-HeapÔºàÈùûÂ†ÜÔºâÔºåÁõÆÁöÑÂ∞±ÊòØË¶ÅÂíåÂ†ÜÂàÜÂºÄ„ÄÇ ÂØπ‰∫éHotSpotËôöÊãüÊú∫ÔºåÂæàÂ§öÂºÄÂèëËÄÖ‰π†ÊÉØÂ∞ÜÊñπÊ≥ïÂå∫Áß∞‰πã‰∏∫‚ÄúÊ∞∏‰πÖ‰ª£ÔºàParmanent GenÔºâ‚Äù,‰ΩÜ‰∏•Ê†ºÊú¨Ë¥®‰∏äËØ¥‰∏§ËÄÖ‰∏çÂêåÔºåÊàñËÄÖËØ¥‰ΩøÁî®Ê∞∏‰πÖ‰ª£Êù•ÂÆûÁé∞ÊñπÊ≥ïÂå∫ËÄåÂ∑≤ÔºåÊ∞∏‰πÖ‰ª£ÊòØÊñπÊ≥ïÂå∫ÁöÑ‰∏Ä‰∏™ÂÆûÁé∞Ôºåjdk1.7ÁöÑÁâàÊú¨‰∏≠ÔºåÂ∑≤ÁªèÂ∞ÜÂéüÊú¨ÊîæÂú®Ê∞∏‰πÖ‰ª£ÁöÑÂ≠óÁ¨¶‰∏≤Â∏∏ÈáèÊ±†ÁßªËµ∞„ÄÇ Â∏∏ÈáèÊ±†ÔºàConstant PoolÔºâÊòØÊñπÊ≥ïÂå∫ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåClassÊñá‰ª∂Èô§‰∫ÜÊúâÁ±ªÁöÑÁâàÊú¨„ÄÅÂ≠óÊÆµ„ÄÅÊñπÊ≥ï„ÄÅÊé•Âè£Á≠âÊèèËø∞‰ø°ÊÅØÂ§ñÔºåËøòÊúâ‰∏ÄÈ°π‰ø°ÊÅØÂ∞±ÊòØÂ∏∏ÈáèÊ±†ÔºåËøôÈÉ®ÂàÜÂÜÖÂÆπÂ∞ÜÂú®Á±ªÂä†ËΩΩÂêéËøõÂÖ•ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏≠Â≠òÊîæ„ÄÇ Â†ÜÂÜÖÂ≠òË∞É‰ºòÁÆÄ‰ªã ‰ª£Á†ÅÊµãËØïÔºö 12345678 public class JVMTest &#123; public static void main(String[] args)&#123; long maxMemory = Runtime.getRuntime().maxMemory();//ËøîÂõûJavaËôöÊãüÊú∫ËØïÂõæ‰ΩøÁî®ÁöÑÊúÄÂ§ßÂÜÖÂ≠òÈáè„ÄÇ Long totalMemory = Runtime. getRuntime().totalMemory();//ËøîÂõûJavaËôöÊãüÊú∫‰∏≠ÁöÑÂÜÖÂ≠òÊÄªÈáè„ÄÇ System.out.println("MAX_MEMORY ="+maxMemory +"(Â≠óËäÇ)„ÄÅ"+(maxMemory/(double)1024/1024) + "MB"); System.out.println("TOTAL_ MEMORY = "+totalMemory +"(Â≠óËäÇ)"+(totalMemory/(double)1024/1024) + "MB"); &#125; &#125; Âú®Run as -&gt;Run Configurations‰∏≠ËæìÂÖ•‚Äù-XX:+PrintGCDetails‚ÄùÂèØ‰ª•Êü•ÁúãÂ†ÜÂÜÖÂ≠òËøêË°åÂéüÁêÜÂõæ Âú®jdk1.7‰∏≠ Âú®jdk1.8‰∏≠ ÈÄöËøáÂèÇÊï∞ËÆæÁΩÆËá™Âä®Ëß¶ÂèëÂûÉÂúæÂõûÊî∂123456789101112public class JVMTest &#123; public static void main(String[] args)&#123; long maxMemory = Runtime.getRuntime().maxMemory();//ËøîÂõûJavaËôöÊãüÊú∫ËØïÂõæ‰ΩøÁî®ÁöÑÊúÄÂ§ßÂÜÖÂ≠òÈáè„ÄÇ Long totalMemory = Runtime. getRuntime().totalMemory();//ËøîÂõûJavaËôöÊãüÊú∫‰∏≠ÁöÑÂÜÖÂ≠òÊÄªÈáè„ÄÇ System.out.println("MAX_MEMORY ="+maxMemory +"(Â≠óËäÇ)„ÄÅ"+(maxMemory/(double)1024/1024) + "MB"); System.out.println("TOTAL_ MEMORY = "+totalMemory +"(Â≠óËäÇ)"+(totalMemory/(double)1024/1024) + "MB"); String str = "www.baidu.com"; while(true)&#123; str += str + new Random().nextInt(88888888) + new Random().nextInt(99999999); &#125; &#125;&#125; Âú®Run as -&gt;Run Configurations‰∏≠ËæìÂÖ•ËÆæÁΩÆ‚Äú-Xmx8m ‚ÄìXms8m ‚Äìxx:+PrintGCDetails‚ÄùÂèØ‰ª•ÂèÇÁúãÂûÉÂúæÂõûÊî∂Êú∫Âà∂ÂéüÁêÜ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>jvm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVAË∞É‰ºò‰πãJVM-GC]]></title>
    <url>%2Fjava%2Fjava%2Fjvm%2F1%2F</url>
    <content type="text"><![CDATA[JAVAË∞É‰ºò‰πãJVM-GCÂú®ÂàÜ‰∫´‰πãÂâçÈúÄË¶ÅÁªôÂ§ßÂÆ∂ËØ¥‰∏Ä‰∏ãÔºåJVMÁöÑÂ†Ü‰∏ÄËà¨ÂàÜ‰∏∫Êñ∞Áîü‰ª£,ËÄÅÂπ¥‰ª£ÔºåÊ∞∏‰πÖ‰ª£Ëøô‰∏â‰∏™Âå∫Èó¥Ôºå‰∏ãÈù¢Êàë‰ª¨Â∞±Êù•ËØ¥ÊòéÊ†πÊçÆÂêÑÁßçÊÉÖÂÜµÊù•ËøõË°åÊéíÊü•ÔºåÂπ∂ÂØπËøô‰∏â‰∏™Âå∫ËøõË°åÂàÜÈÖçÂêàÁêÜÁöÑÂå∫Èó¥„ÄÇ ÊúçÂä°Âô® Â∫îÁî®Ôºödal-service-5.1.4.0-SNAPSHOT.jar CPUÔºö24Ê†∏ ÂÜÖÂ≠òÔºö125G JDKÔºö8.144 ÂêØÂä®Â∫îÁî®1java -jar ./dal-service-5.1.4.0-SNAPSHOT.jar --spring.profiles.active=test ‰ΩøÁî®‰∏äÈù¢ÁöÑÂëΩ‰ª§ÔºåÊàë‰ª¨ÁöÑÂ∫îÁî®Â∞±ÂêØÂä®ÂÆåÊàêÊù•ÔºåÁÑ∂ÂêéÊàë‰ª¨Êù•Áúã‰∏Ä‰∏ãÂ∫îÁî®ÁöÑÂêÑÁßçÊï∞ÊçÆ„ÄÇ Êü•ÁúãÂ∫îÁî®ÁöÑPIDËøõÁ®ãÂè∑Ôºå‰ΩøÁî®JPS Êü•ÁúãCPUÂíåÂÜÖÂ≠òÊÉÖÂÜµÔºåÂèØ‰ª•‰ΩøÁî®TOPÔºåÂπ∂Êåâ‰∏ã1 Áé∞Âú®Â∫îÁî®ÁöÑÂü∫Êú¨ÊÉÖÂÜµÂ∞±Áü•ÈÅìÊù•Ôºå‰ΩÜËøôÂè™ÊòØ‰∏Ä‰∏™Âü∫Á°ÄÁöÑ‰ø°ÊÅØÔºåÊÄéÊ†∑ËÉΩÁúãËØ¶ÁªÜÁöÑËµÑÊ∫êÔºåÊØîÂ¶ÇGCÊÄé‰πàÂõûÊî∂ÁöÑÔºåGCËß¶ÂèëÊó∂Èó¥ÔºåGCÈ¢ëÁéáÁ≠â„ÄÇÁé∞Âú®Êàë‰ª¨ÊääÂ∫îÁî®ÂÅú‰∫ÜÔºåÂä†ËΩΩGCÁöÑ‰∏Ä‰∫õÂèÇÊï∞ÂíåGCÁöÑÊó•ÂøóÔºåÂÜçÊ¨°ÂêØÂä® 1234567java \-verbose:gc \-XX:+PrintGCDetails \-XX:+PrintGCTimeStamps \-XX:+PrintHeapAtGC \-Xloggc:/home/iot/dal-service-gc.log \-jar /home/iot/portal/dal-service-5.1.4.0-SNAPSHOT.jar --spring.profiles.active=test Êü•ÁúãGCÊÉÖÂÜµÊü•ÁúãGCÊÉÖÂÜµÔºåÊúâ2ÁßçÊñπÊ≥ïÂèØ‰ª•Êü•Áúã 1„ÄÅÁõ¥Êé•Êü•Áúãdal-service-gc.logÊó•ÂøóÊñá‰ª∂ 2„ÄÅ‰ΩøÁî®jstatdËøõË°åÁõëÂê¨ÔºåÁÑ∂ÂêéÈÄöËøájvisualvmÊù•Êü•Áúã 1jstatd -J-Djava.security.policy=/home/iot/jdk1.8.0_131/bin/jstatd.all.policy -J-Djava.rmi.server.hostname=192.168.156.22 -p 1099 -J-Djava.rmi.server.logCalls=true ÂÖ∂ÂÆûÔºåÊàë‰ª¨Âú®Êó•Âøó‰∏≠Â∞±ÁúãËßÅÂΩìÂ∫îÁî®ÂêØÂä®ÁöÑÊó∂ÂÄôÊâßË°åÊù•3Ê¨°FULL GC„ÄÇ Êñ∞Áîü‰ª£ÊÉÖÂÜµÔºö PSYoungGen total 3185152K, used 3185120K eden space 3150848K, 100% used from space 34304K, 99% used ËÄÅÂπ¥‰ª£ÊÉÖÂÜµÔºö ParOldGen total 1429504K, used 56198K object space 1429504K, 3% used ÊåÅ‰πÖ‰ª£ÊÉÖÂÜµÔºö Metaspace used 74104K, capacity 74936K, committed 75544K, reserved 1116160K class space used 8951K, capacity 9137K, committed 9256K, reserved 1048576K ‰ºòÂåñJVMÂ§ßÂÆ∂ÈÉΩÁü•ÈÅìFULL GC‰∏ÄÊ¨°ÔºåÂ∞Ü‰ºöÈôç‰ΩéTPSÔºåÂπ∂‰∏î‰ºöÊöÇÁî®Á∫øÁ®ãÊó∂Èó¥„ÄÇÊú¨Ê¨°‰ºòÂåñËÆ©Â∫îÁî®Â∞ΩÈáèÂêØÂä®Âêé‰∏çÂÜç‰∫ßÁîüFULL GCÔºåÊàë‰ª¨Ë∞ÉÊï¥‰∏Ä‰∏ãÂêØÂä®ÂëΩ‰ª§„ÄÇ Ë∞ÉÊï¥ÂêéÔºåÊàë‰ª¨ËôΩÁÑ∂ËøõË°åÊù•GCÔºå‰ΩÜÊòØÊ≤°ÊúâÂÜçÊ¨°ÊâßË°åFULL GC‰∫ÜÔºåËøô‰πüÁÆóË∞ÉÊï¥ÂÆåÊàê‰∫Ü„ÄÇ ÂêØÂä®ÂëΩ‰ª§ÂèÇÊï∞‚Äì GC 1234-XX:+PrintGCDetails GCÂÜÖÂÆπ-XX:+PrintGCTimeStamps ËæìÂá∫GCÁöÑÊó∂Èó¥Êà≥Ôºà‰ª•Âü∫ÂáÜÊó∂Èó¥ÁöÑÂΩ¢ÂºèÔºâ-XX:+PrintHeapAtGC Âú®ËøõË°åGCÁöÑÂâçÂêéÊâìÂç∞Âá∫Â†ÜÁöÑ‰ø°ÊÅØ-Xloggc:../logs/gc.log Êó•ÂøóÊñá‰ª∂ÁöÑËæìÂá∫Ë∑ØÂæÑ ‚Äì JVM 12345-Xmn Êñ∞Áîü‰ª£Á©∫Èó¥Â§ßÂ∞èÔºåÊ≠§Â§ÑÁöÑÂ§ßÂ∞èÊòØ(eden+2 survivor space) -XX:NewSize Êñ∞Áîü‰ª£Á©∫Èó¥Â§ßÂ∞èÂàùÂßãÂÄº-XX:MaxNewSize Êñ∞Áîü‰ª£Á©∫Èó¥Â§ßÂ∞èÊúÄÂ§ßÂÄº-XX:MetaspaceSize ÊåÅ‰πÖ‰ª£ÂàùÂßãÂÄº-XX:MaxMetaspaceSize ÊúÄÂ§ßÊåÅ‰πÖ‰ª£ÂÄº LinuxË∞É‰ºò‰øÆÊîπ/etc/sysctl.confÊñá‰ª∂ÔºåÂ¢ûÂä† net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle = 1]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>jvm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mobaxterm session stopped]]></title>
    <url>%2Funcategorized%2Flinux%2Fmobaxterm-1%2F</url>
    <content type="text"><![CDATA[Mobaxterm Session Stopped ÁÇπÂáªÂΩìÂâçÁöÑSession ÁºñËæëEdit Session ÁÇπÂáªTelnetËÆæÁΩÆRemote hostÂú∞ÂùÄ‰∏∫‰Ω†ÁöÑSSHÂú∞ÂùÄ Âú®Advanced Telnet settingsÈÄâÈ°πÂç°ÁöÑTelnet Client‰∏≠ÈÄâÊã©Busybox telnet Â∞ùËØïËøûÊé•ÔºàËÇØÂÆöÊ≤°ÊïàÊûúÔºâ ÂàáÊç¢Âà∞SSHÔºåÈáçÊñ∞ËæìÂÖ•Remote hostÔºåÁÇπÂáªËøûÊé•ÔºåËæìÂÖ•Ë¥¶Âè∑ÂØÜÁ†ÅÔºåokËøû‰∏ä‰∫ÜÔºÅ]]></content>
      <tags>
        <tag>linux</tag>
        <tag>mobaxterm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring ÈòÖËØªÊ∫êÁ†ÅÁ¨îËÆ∞]]></title>
    <url>%2Fjava%2Fjava%2Fspring%2F5%2F</url>
    <content type="text"><![CDATA[Spring ÈòÖËØªÊ∫êÁ†ÅÁ¨îËÆ∞ÔºàÂéüÂàõÔºâ‰ªÄ‰πàÊòØÊéßÂà∂ÂèçËΩ¨ÊâÄË∞ìÊéßÂà∂ÂèçËΩ¨ÔºåÂ∞±ÊòØÊääÂéüÂÖàÊàë‰ª¨‰ª£Á†ÅÈáåÈù¢ÈúÄË¶ÅÂÆûÁé∞ÁöÑÂØπË±°ÂàõÂª∫„ÄÅ‰æùËµñÁöÑ‰ª£Á†ÅÔºåÂèçËΩ¨ÁªôÂÆπÂô®Êù•Â∏ÆÂøôÂÆûÁé∞„ÄÇÈÇ£‰πàÂøÖÁÑ∂ÁöÑÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™ÂÆπÂô®ÔºåÂêåÊó∂ÈúÄË¶Å‰∏ÄÁßçÊèèËø∞Êù•ËÆ©ÂÆπÂô®Áü•ÈÅìÈúÄË¶ÅÂàõÂª∫ÁöÑÂØπË±°‰∏éÂØπË±°ÁöÑÂÖ≥Á≥ª„ÄÇËøô‰∏™ÊèèËø∞ÊúÄÂÖ∑‰ΩìË°®Áé∞Â∞±ÊòØÊàë‰ª¨ÂèØÈÖçÁΩÆÁöÑÊñá‰ª∂„ÄÇ ÂØπË±°ÂíåÂØπË±°ÂÖ≥Á≥ªÊÄé‰πàË°®Á§∫ÔºüÂèØ‰ª•Áî® xml Ôºå properties Êñá‰ª∂Á≠âËØ≠‰πâÂåñÈÖçÁΩÆÊñá‰ª∂Ë°®Á§∫„ÄÇ ÊèèËø∞ÂØπË±°ÂÖ≥Á≥ªÁöÑÊñá‰ª∂Â≠òÊîæÂú®Âì™ÈáåÔºüÂèØËÉΩÊòØ classpath Ôºå filesystem ÔºåÊàñËÄÖÊòØ URL ÁΩëÁªúËµÑÊ∫êÔºå servletContext Á≠â„ÄÇ Êúâ‰∫ÜÈÖçÁΩÆÊñá‰ª∂ÔºåËøòÈúÄË¶ÅÂØπÈÖçÁΩÆÊñá‰ª∂Ëß£Êûê‰∏çÂêåÁöÑÈÖçÁΩÆÊñá‰ª∂ÂØπÂØπË±°ÁöÑÊèèËø∞‰∏ç‰∏ÄÊ†∑ÔºåÂ¶ÇÊ†áÂáÜÁöÑÔºåËá™ÂÆö‰πâÂ£∞ÊòéÂºèÁöÑÔºåÂ¶Ç‰ΩïÁªü‰∏ÄÔºü Âú®ÂÜÖÈÉ®ÈúÄË¶ÅÊúâ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂÖ≥‰∫éÂØπË±°ÁöÑÂÆö‰πâÔºåÊâÄÊúâÂ§ñÈÉ®ÁöÑÊèèËø∞ÈÉΩÂøÖÈ°ªËΩ¨ÂåñÊàêÁªü‰∏ÄÁöÑÊèèËø∞ÂÆö‰πâ„ÄÇÂ¶Ç‰ΩïÂØπ‰∏çÂêåÁöÑÈÖçÁΩÆÊñá‰ª∂ËøõË°åËß£ÊûêÔºüÈúÄË¶ÅÂØπ‰∏çÂêåÁöÑÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ïÔºåÈááÁî®‰∏çÂêåÁöÑËß£ÊûêÂô® IOCÂÆπÂô®Êé•Âè£BeanFactory ÊúÄÈ°∂Â±ÇÁöÑ‰∏Ä‰∏™Êé•Âè£Á±ªÔºåÂÆÉÂÆö‰πâ‰∫ÜIOCÂÆπÂô®ÁöÑÂü∫Êú¨ÂäüËÉΩËßÑËåÉÔºå‰ªñ‰∏ãÈù¢Êúâ‰∏â‰∏™Â≠êÁ±ªÂàÜÂà´ÊòØÔºàListableBeanFactoryÔºåHierarchicalBeanFactoryÔºåAutowireCapableBeanFactoryÔºâÔºåËøôÂõõ‰∏™Êé•Âè£ÂÖ±ÂêåÂÆö‰πâ‰∫Ü Bean ÁöÑÈõÜÂêà„ÄÅBean ‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÅ‰ª•Âèä Bean Ë°å‰∏∫„ÄÇ ListableBeanFactoryË°®Á§∫Ëøô‰∫õ Bean ÊòØÂèØÂàóË°®ÁöÑ HierarchicalBeanFactoryË°®Á§∫Ëøô‰∫õ Bean ÊòØÊúâÁªßÊâøÂÖ≥Á≥ªÁöÑ AutowireCapableBeanFactoryË°®Á§∫Ëøô‰∫õ Bean ÁöÑËá™Âä®Ë£ÖÈÖçËßÑÂàô IOCÂÆπÂô®ÂÆûÁé∞ XmlBeanFactoryÊúÄÂü∫Á°ÄÁöÑÂÆπÂô®ÂÆûÁé∞ÔºåËøô‰∏™IOCÂÆπÂô®ÂèØ‰ª•ËØªÂèñXMLÊñá‰ª∂ÂÆö‰πâXMLÊñá‰ª∂‰∏≠ÂØπbeanÁöÑÊèèËø∞ÔºàBeanDefinitionÔºâ ClasspathXmlApplicationContextÈ´òÁ∫ßÁöÑIOCÂÆπÂô®ÂÆûÁé∞ ApplicationContextÈ´òÁ∫ßÁöÑIoCÂÆπÂô®ÂÆûÁé∞ÔºåÂπ∂ÈôÑÂä†‰∫ÜÔºàÂõΩÈôÖÂåñMessageSourceÔºåËÆøÈóÆËµÑÊ∫êResourcePatternResolverÔºåÂ∫îÁî®‰∫ã‰ª∂ApplicationEventPublisherÔºâÁöÑÂÆûÁé∞ SpringIOCÂÆπÂô®ÁÆ°ÁêÜ‰∫ÜÊàë‰ª¨ÂÆö‰πâÁöÑÂêÑÁßçBeanÂØπË±°ÂèäÂÖ∂Áõ∏‰∫íÁöÑÂÖ≥Á≥ªÔºåBeanÂØπË±°Âú®SpringÂÆûÁé∞‰∏≠ÊòØ‰ª•BeanDefinitionÊù•ÊèèËø∞ÁöÑ IOCÂÆπÂô®ÂàùÂßãÂåñ BeanDefinitionÁöÑResourceÂÆö‰Ωç BeanDefinitionÁöÑResourceËΩΩÂÖ• BeanDefinitionÁöÑResourceÊ≥®ÂÜå IOCÂÆπÂô®ÂàõÂª∫ËøáÁ®ãIOCÂÆπÂô®ÂàõÂª∫ÂàÜ‰∏∫‰∏§Áßç XmlBeanFactoryFileSystemXmlApplicationContext XmlBeanFactoryÂàõÂª∫12345678//Ê†πÊçÆXmlÈÖçÁΩÆÊñá‰ª∂ÂàõÂª∫ResourceËµÑÊ∫êÂØπË±°ÔºåËØ•ÂØπË±°‰∏≠ÂåÖÂê´‰∫ÜBeanDefinitionÁöÑ‰ø°ÊÅØ ClassPathResource resource =new ClassPathResource("application-context.xml");//ÂàõÂª∫DefaultListableBeanFactory DefaultListableBeanFactory factory =new DefaultListableBeanFactory();//ÂàõÂª∫XmlBeanDefinitionReaderËØªÂèñÂô®ÔºåÁî®‰∫éËΩΩÂÖ•BeanDefinition„ÄÇ‰πãÊâÄ‰ª•ÈúÄË¶ÅBeanFactory‰Ωú‰∏∫ÂèÇÊï∞ÔºåÊòØÂõ†‰∏∫‰ºöÂ∞ÜËØªÂèñÁöÑ‰ø°ÊÅØÂõûË∞ÉÈÖçÁΩÆÁªôfactory XmlBeanDefinitionReader reader =new XmlBeanDefinitionReader(factory);//XmlBeanDefinitionReaderÊâßË°åËΩΩÂÖ•BeanDefinitionÁöÑÊñπÊ≥ïÔºåÊúÄÂêé‰ºöÂÆåÊàêBeanÁöÑËΩΩÂÖ•ÂíåÊ≥®ÂÜå„ÄÇÂÆåÊàêÂêéBeanÂ∞±ÊàêÂäüÁöÑÊîæÁΩÆÂà∞IOCÂÆπÂô®ÂΩì‰∏≠Ôºå‰ª•ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•‰ªé‰∏≠ÂèñÂæóBeanÊù•‰ΩøÁî® reader.loadBeanDefinitions(resource); FileSystemXmlApplicationContextÂàõÂª∫ ÊâßË°åFileSystemXmlApplicationContextÁöÑÊûÑÈÄ†ÂáΩÊï∞ ËÆæÁΩÆËµÑÊ∫êÂä†ËΩΩÂô®ÔºàÁà∂Á±ªsuperÔºâÂíåËµÑÊ∫êÂÆö‰ΩçÔºàAbstractRefreshableConfigApplicationContext‰∏≠ÁöÑsetConfigLocationsÔºâ AbstractApplicationContextÁöÑrefreshÂáΩÊï∞ËΩΩÂÖ•Bean AbstractRefreshableApplicationContextÂÆûÁé∞ËΩΩÂÖ•Bean AbstractBeanDefinitionReaderËØªÂèñBeanÂÆö‰πâËµÑÊ∫ê ËµÑÊ∫êÂä†ËΩΩÂô®Ëé∑ÂèñË¶ÅËØªÂÖ•ÁöÑËµÑÊ∫ê XmlBeanDefinitionReaderÂä†ËΩΩBeanÂÆö‰πâËµÑÊ∫ê DocumentLoaderÂ∞ÜBeanÂÆö‰πâËµÑÊ∫êËΩ¨Êç¢‰∏∫DocumentÂØπË±° XmlBeanDefinitionReaderËß£ÊûêËΩΩÂÖ•ÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ DefaultBeanDefinitionDocumentReaderÂØπBeanÂÆö‰πâÁöÑDocumentÂØπË±°Ëß£Êûê BeanDefinitionParserDelegateËß£Êûê&lt;Bean&gt;ÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰∏≠ÁöÑBeanÂÖÉÁ¥† BeanDefinitionParserDelegateËß£Êûê&lt;property&gt;ÂÖÉÁ¥† Ëß£Êûê&lt;property&gt;ÂÖÉÁ¥†ÁöÑÂ≠êÂÖÉÁ¥† Ëß£Êûê&lt;list&gt;Â≠êÂÖÉÁ¥† Ëß£ÊûêËøáÂêéÁöÑBeanDefinitionÂú®IoCÂÆπÂô®‰∏≠ÁöÑÊ≥®ÂÜå]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Idea‰∏≠Êï¥ÂêàDocker]]></title>
    <url>%2Fidea%2Fidea%2F1%2F</url>
    <content type="text"><![CDATA[IDEAÂú®Windows‰∏äÁªìÂêàDockerÂú®ÁΩë‰∏äÊâæ‰∫ÜÂæàÂ§öÊñáÁ´†ÔºåÂç¥Ê≤°Êúâ‰∏ÄÁØáÊñáÁ´†ÊòéÁ°ÆËØ¥ÊòéÂ¶Ç‰ΩïÊï¥ÂêàÔºåÂ¶Ç‰Ωï‰ΩøÁî®Idea+DockerÔºå‰∏ãÈù¢Êù•‰∏Ä‰∏ÄËØ¥‰∏ãÊï¥Âêà„ÄÇ ËôöÊãüÊú∫Ôºà192.168.3.60ÔºâÂú®ËôöÊãüÊú∫‰∏äÂÆâË£ÖDockerÔºåÊàëËøôÈáåÂÆâË£ÖÁöÑÊòØDocker version 1.13.1, build 092cba3„ÄÇÁºñËæëDockerËøêË°åÊñá‰ª∂ 1# vi /etc/systemd/system/docker.service Âú®ExecStartËäÇÁÇπ‰∏äÂ¢ûÂä†unix:///var/run/docker.sock -H 0.0.0.0:2375ÔºåÊâìÂºÄDockerÂ§ñÈÉ®ËÆøÈóÆÔºå‰øùÂ≠òÂêéÈáçÂêØDockerÊúçÂä° 12# systemctl daemon-reload# systemctl start docker Êü•ÁúãDocker‰∏≠ÊòØÂê¶ÂºÄÂêØ2375Á´ØÂè£1# netstat -anp|grep 2375 Âú®ËôöÊãüÊú∫‰∏äÁöÑÈÖçÁΩÆÂ∞±ÂÆåÊØï‰∫Ü„ÄÇ WindowsÂú®windowsÁ≥ªÁªüÁéØÂ¢ÉÂèòÈáè‰∏≠Êñ∞Âª∫DOCKER_HOST,ÂÄº‰∏∫tcp://192.168.3.60:2375 ÊâìÂºÄIdeaÔºåÂÆâË£ÖDockerÊèí‰ª∂ ËÆæÁΩÆDockerËøúÁ®ãËÆøÈóÆÂú∞ÂùÄ‰∏∫tcp://192.168.3.60:2375 Âú®IdeaÁöÑËøêË°å‰∏≠ÔºåËøêË°åDockerÔºåÂ∞±ÂèØÊü•ÁúãÂà∞ËøúÁ®ãDockerÁöÑÊúçÂä°‰∫Ü Êàë‰ª¨Áé∞Âú®Âú®POM.xml‰∏≠Â¢ûÂä†Êèí‰ª∂Âπ∂ËÆæÁΩÆË¶ÅÁºñËØëÂêéÁöÑÊñá‰ª∂ 1234567891011121314151617&lt;plugin&gt; &lt;groupId&gt;com.spotify&lt;/groupId&gt; &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;configuration&gt; &lt;imageName&gt;test/test:1.0&lt;/imageName&gt; &lt;baseImage&gt;java&lt;/baseImage&gt; &lt;entryPoint&gt;["java", "-jar", "/$&#123;project.build.finalName&#125;.jar"]&lt;/entryPoint&gt; &lt;resources&gt; &lt;resource&gt; &lt;targetPath&gt;/&lt;/targetPath&gt; &lt;directory&gt;$&#123;project.build.directory&#125;&lt;/directory&gt; &lt;include&gt;$&#123;project.build.finalName&#125;.jar&lt;/include&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;/configuration&gt; &lt;/plugin&gt; ÊâßË°åmvn clean package docker:buildÔºåÂ∞±ÂèØ‰ª•ËøõË°åËøúÁ®ãÁºñËØë‰∫Ü„ÄÇÁºñËØëÂêéÂú®‰ºötarget‰∏ãÁîüÊàê‰∏Ä‰∏™Dockerfile 123FROM javaADD /demo-1.0-SNAPSHOT.jar //ENTRYPOINT ["java", "-jar", "/demo-1.0-SNAPSHOT.jar"] Êü•ÁúãËøúÁ®ãÁºñËØëÂêéÁöÑÂåÖ]]></content>
      <categories>
        <category>idea</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºàÂõõÔºâ]]></title>
    <url>%2Fjava%2Fspring%2Fjava%2Fspring%2F4%2F</url>
    <content type="text"><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºàÂõõÔºâIOCÂÆπÂô®ÁöÑÈ´òÁ∫ßÁâπÊÄß‰ªãÁªçÈÄöËøáÂâçÈù¢4ÁØáÊñáÁ´†ÂØπSpring IoCÂÆπÂô®ÁöÑÊ∫êÁ†ÅÂàÜÊûêÔºåÊàë‰ª¨Â∑≤ÁªèÂü∫Êú¨‰∏ä‰∫ÜËß£‰∫ÜSpring IoCÂÆπÂô®ÂØπBeanÂÆö‰πâËµÑÊ∫êÁöÑÂÆö‰Ωç„ÄÅËØªÂÖ•ÂíåËß£ÊûêËøáÁ®ãÔºåÂêåÊó∂‰πüÊ∏ÖÊ•ö‰∫ÜÂΩìÁî®Êà∑ÈÄöËøágetBeanÊñπÊ≥ïÂêëIoCÂÆπÂô®Ëé∑ÂèñË¢´ÁÆ°ÁêÜÁöÑBeanÊó∂ÔºåIoCÂÆπÂô®ÂØπBeanËøõË°åÁöÑÂàùÂßãÂåñÂíå‰æùËµñÊ≥®ÂÖ•ËøáÁ®ãÔºåËøô‰∫õÊòØSpring IoCÂÆπÂô®ÁöÑÂü∫Êú¨ÂäüËÉΩÁâπÊÄß„ÄÇSpring IoCÂÆπÂô®ËøòÊúâ‰∏Ä‰∫õÈ´òÁ∫ßÁâπÊÄßÔºåÂ¶Ç‰ΩøÁî®lazy-initÂ±ûÊÄßÂØπBeanÈ¢ÑÂàùÂßãÂåñ„ÄÅFactoryBean‰∫ßÁîüÊàñËÄÖ‰øÆÈ•∞BeanÂØπË±°ÁöÑÁîüÊàê„ÄÅIoCÂÆπÂô®ÂàùÂßãÂåñBeanËøáÁ®ã‰∏≠‰ΩøÁî®BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÂØπBeanÂ£∞ÊòéÂë®Êúü‰∫ã‰ª∂ÁÆ°ÁêÜÂíåIoCÂÆπÂô®ÁöÑautowiringËá™Âä®Ë£ÖÈÖçÂäüËÉΩÁ≠â„ÄÇ Spring IoCÂÆπÂô®ÁöÑlazy-initÂ±ûÊÄßÂÆûÁé∞È¢ÑÂÆû‰æãÂåñÈÄöËøáÂâçÈù¢Êàë‰ª¨ÂØπIoCÂÆπÂô®ÁöÑÂÆûÁé∞ÂíåÂ∑•‰ΩúÂéüÁêÜÂàÜÊûêÔºåÊàë‰ª¨Áü•ÈÅìIoCÂÆπÂô®ÁöÑÂàùÂßãÂåñËøáÁ®ãÂ∞±ÊòØÂØπBeanÂÆö‰πâËµÑÊ∫êÁöÑÂÆö‰Ωç„ÄÅËΩΩÂÖ•ÂíåÊ≥®ÂÜåÔºåÊ≠§Êó∂ÂÆπÂô®ÂØπBeanÁöÑ‰æùËµñÊ≥®ÂÖ•Âπ∂Ê≤°ÊúâÂèëÁîüÔºå‰æùËµñÊ≥®ÂÖ•‰∏ªË¶ÅÊòØÂú®Â∫îÁî®Á®ãÂ∫èÁ¨¨‰∏ÄÊ¨°ÂêëÂÆπÂô®Á¥¢ÂèñBeanÊó∂ÔºåÈÄöËøágetBeanÊñπÊ≥ïÁöÑË∞ÉÁî®ÂÆåÊàê„ÄÇ ÂΩìBeanÂÆö‰πâËµÑÊ∫êÁöÑÂÖÉÁ¥†‰∏≠ÈÖçÁΩÆ‰∫Ülazy-initÂ±ûÊÄßÊó∂ÔºåÂÆπÂô®Â∞Ü‰ºöÂú®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂØπÊâÄÈÖçÁΩÆÁöÑBeanËøõË°åÈ¢ÑÂÆû‰æãÂåñÔºåBeanÁöÑ‰æùËµñÊ≥®ÂÖ•Âú®ÂÆπÂô®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂ∞±Â∑≤ÁªèÂÆåÊàê„ÄÇËøôÊ†∑ÔºåÂΩìÂ∫îÁî®Á®ãÂ∫èÁ¨¨‰∏ÄÊ¨°ÂêëÂÆπÂô®Á¥¢ÂèñË¢´ÁÆ°ÁêÜÁöÑBeanÊó∂ÔºåÂ∞±‰∏çÁî®ÂÜçÂàùÂßãÂåñÂíåÂØπBeanËøõË°å‰æùËµñÊ≥®ÂÖ•‰∫ÜÔºåÁõ¥Êé•‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñÂ∑≤ÁªèÂÆåÊàê‰æùËµñÊ≥®ÂÖ•ÁöÑÁé∞ÊàêBeanÔºåÂèØ‰ª•ÊèêÈ´òÂ∫îÁî®Á¨¨‰∏ÄÊ¨°ÂêëÂÆπÂô®Ëé∑ÂèñBeanÁöÑÊÄßËÉΩ„ÄÇ ‰∏ãÈù¢Êàë‰ª¨ÈÄöËøá‰ª£Á†ÅÂàÜÊûêÂÆπÂô®È¢ÑÂÆû‰æãÂåñÁöÑÂÆûÁé∞ËøáÁ®ãÔºö (1). refresh()ÂÖà‰ªéIoCÂÆπÂô®ÁöÑÂàùÂßã‰ºöËøáÁ®ãÂºÄÂßãÔºåÈÄöËøáÂâçÈù¢ÊñáÁ´†ÂàÜÊûêÔºåÊàë‰ª¨Áü•ÈÅìIoCÂÆπÂô®ËØªÂÖ•Â∑≤ÁªèÂÆö‰ΩçÁöÑBeanÂÆö‰πâËµÑÊ∫êÊòØ‰ªérefreshÊñπÊ≥ïÂºÄÂßãÁöÑÔºåÊàë‰ª¨È¶ñÂÖà‰ªéAbstractApplicationContextÁ±ªÁöÑrefreshÊñπÊ≥ïÂÖ•ÊâãÂàÜÊûêÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940//ÂÆπÂô®ÂàùÂßãÂåñÁöÑËøáÁ®ãÔºåËØªÂÖ•BeanÂÆö‰πâËµÑÊ∫êÔºåÂπ∂Ëß£ÊûêÊ≥®ÂÜå public void refresh() throws BeansException, IllegalStateException &#123; synchronized (this.startupShutdownMonitor) &#123; //Ë∞ÉÁî®ÂÆπÂô®ÂáÜÂ§áÂà∑Êñ∞ÁöÑÊñπÊ≥ïÔºåËé∑ÂèñÂÆπÂô®ÁöÑÂΩìÊó∂Êó∂Èó¥ÔºåÂêåÊó∂ÁªôÂÆπÂô®ËÆæÁΩÆÂêåÊ≠•Ê†áËØÜ prepareRefresh(); //ÂëäËØâÂ≠êÁ±ªÂêØÂä®refreshBeanFactory()ÊñπÊ≥ïÔºåBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑËΩΩÂÖ•‰ªé //Â≠êÁ±ªÁöÑrefreshBeanFactory()ÊñπÊ≥ïÂêØÂä® ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory(); //‰∏∫BeanFactoryÈÖçÁΩÆÂÆπÂô®ÁâπÊÄßÔºå‰æãÂ¶ÇÁ±ªÂä†ËΩΩÂô®„ÄÅ‰∫ã‰ª∂Â§ÑÁêÜÂô®Á≠â prepareBeanFactory(beanFactory); try &#123; //‰∏∫ÂÆπÂô®ÁöÑÊüê‰∫õÂ≠êÁ±ªÊåáÂÆöÁâπÊÆäÁöÑBeanPost‰∫ã‰ª∂Â§ÑÁêÜÂô® postProcessBeanFactory(beanFactory); //Ë∞ÉÁî®ÊâÄÊúâÊ≥®ÂÜåÁöÑBeanFactoryPostProcessorÁöÑBean invokeBeanFactoryPostProcessors(beanFactory); //‰∏∫BeanFactoryÊ≥®ÂÜåBeanPost‰∫ã‰ª∂Â§ÑÁêÜÂô®. //BeanPostProcessorÊòØBeanÂêéÁΩÆÂ§ÑÁêÜÂô®ÔºåÁî®‰∫éÁõëÂê¨ÂÆπÂô®Ëß¶ÂèëÁöÑ‰∫ã‰ª∂ registerBeanPostProcessors(beanFactory); //ÂàùÂßãÂåñ‰ø°ÊÅØÊ∫êÔºåÂíåÂõΩÈôÖÂåñÁõ∏ÂÖ≥. initMessageSource(); //ÂàùÂßãÂåñÂÆπÂô®‰∫ã‰ª∂‰º†Êí≠Âô®. initApplicationEventMulticaster(); //Ë∞ÉÁî®Â≠êÁ±ªÁöÑÊüê‰∫õÁâπÊÆäBeanÂàùÂßãÂåñÊñπÊ≥ï onRefresh(); //‰∏∫‰∫ã‰ª∂‰º†Êí≠Âô®Ê≥®ÂÜå‰∫ã‰ª∂ÁõëÂê¨Âô®. registerListeners(); //ËøôÈáåÊòØÂØπÂÆπÂô®lazy-initÂ±ûÊÄßËøõË°åÂ§ÑÁêÜÁöÑÂÖ•Âè£ÊñπÊ≥ï finishBeanFactoryInitialization(beanFactory); //ÂàùÂßãÂåñÂÆπÂô®ÁöÑÁîüÂëΩÂë®Êúü‰∫ã‰ª∂Â§ÑÁêÜÂô®ÔºåÂπ∂ÂèëÂ∏ÉÂÆπÂô®ÁöÑÁîüÂëΩÂë®Êúü‰∫ã‰ª∂ finishRefresh(); &#125; catch (BeansException ex) &#123; //ÈîÄÊØÅ‰ª•ÂàõÂª∫ÁöÑÂçïÊÄÅBean destroyBeans(); //ÂèñÊ∂àrefreshÊìç‰ΩúÔºåÈáçÁΩÆÂÆπÂô®ÁöÑÂêåÊ≠•Ê†áËØÜ. cancelRefresh(ex); throw ex; &#125; &#125; &#125; Âú®refreshÊñπÊ≥ï‰∏≠ConfigurableListableBeanFactorybeanFactory = obtainFreshBeanFactory();ÂêØÂä®‰∫ÜBeanÂÆö‰πâËµÑÊ∫êÁöÑËΩΩÂÖ•„ÄÅÊ≥®ÂÜåËøáÁ®ãÔºåËÄåfinishBeanFactoryInitializationÊñπÊ≥ïÊòØÂØπÊ≥®ÂÜåÂêéÁöÑBeanÂÆö‰πâ‰∏≠ÁöÑÈ¢ÑÂÆû‰æãÂåñ(lazy-init=falseÔºåSpringÈªòËÆ§Â∞±ÊòØÈ¢ÑÂÆû‰æãÂåñÔºåÂç≥‰∏∫true)ÁöÑBeanËøõË°åÂ§ÑÁêÜÁöÑÂú∞Êñπ„ÄÇ (2). finishBeanFactoryInitializationÂ§ÑÁêÜÈ¢ÑÂÆû‰æãÂåñBean ÂΩìBeanÂÆö‰πâËµÑÊ∫êË¢´ËΩΩÂÖ•IoCÂÆπÂô®‰πãÂêéÔºåÂÆπÂô®Â∞ÜBeanÂÆö‰πâËµÑÊ∫êËß£Êûê‰∏∫ÂÆπÂô®ÂÜÖÈÉ®ÁöÑÊï∞ÊçÆÁªìÊûÑBeanDefinitionÊ≥®ÂÜåÂà∞ÂÆπÂô®‰∏≠ÔºåAbstractApplicationContextÁ±ª‰∏≠ÁöÑfinishBeanFactoryInitializationÊñπÊ≥ïÂØπÈÖçÁΩÆ‰∫ÜÈ¢ÑÂÆû‰æãÂåñÂ±ûÊÄßÁöÑBeanËøõË°åÈ¢ÑÂàùÂßãÂåñËøáÁ®ãÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516//ÂØπÈÖçÁΩÆ‰∫Ülazy-initÂ±ûÊÄßÁöÑBeanËøõË°åÈ¢ÑÂÆû‰æãÂåñÂ§ÑÁêÜ protected void finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) &#123; //ËøôÊòØSpring3‰ª•ÂêéÊñ∞Âä†ÁöÑ‰ª£Á†ÅÔºå‰∏∫ÂÆπÂô®ÊåáÂÆö‰∏Ä‰∏™ËΩ¨Êç¢ÊúçÂä°(ConversionService) //Âú®ÂØπÊüê‰∫õBeanÂ±ûÊÄßËøõË°åËΩ¨Êç¢Êó∂‰ΩøÁî® if (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp; beanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) &#123; beanFactory.setConversionService( beanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)); &#125; //‰∏∫‰∫ÜÁ±ªÂûãÂåπÈÖçÔºåÂÅúÊ≠¢‰ΩøÁî®‰∏¥Êó∂ÁöÑÁ±ªÂä†ËΩΩÂô® beanFactory.setTempClassLoader(null); //ÁºìÂ≠òÂÆπÂô®‰∏≠ÊâÄÊúâÊ≥®ÂÜåÁöÑBeanDefinitionÂÖÉÊï∞ÊçÆÔºå‰ª•Èò≤Ë¢´‰øÆÊîπ beanFactory.freezeConfiguration(); //ÂØπÈÖçÁΩÆ‰∫Ülazy-initÂ±ûÊÄßÁöÑÂçïÊÄÅÊ®°ÂºèBeanËøõË°åÈ¢ÑÂÆû‰æãÂåñÂ§ÑÁêÜ beanFactory.preInstantiateSingletons(); &#125; ConfigurableListableBeanFactoryÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂÖ∂preInstantiateSingletonsÊñπÊ≥ïÁî±ÂÖ∂Â≠êÁ±ªDefaultListableBeanFactoryÊèê‰æõ„ÄÇ (3). DefaultListableBeanFactoryÂØπÈÖçÁΩÆlazy-initÂ±ûÊÄßÂçïÊÄÅBeanÁöÑÈ¢ÑÂÆû‰æãÂåñ1234567891011121314151617181920212223242526272829303132333435363738394041424344//ÂØπÈÖçÁΩÆlazy-initÂ±ûÊÄßÂçïÊÄÅBeanÁöÑÈ¢ÑÂÆû‰æãÂåñ public void preInstantiateSingletons() throws BeansException &#123; if (this.logger.isInfoEnabled()) &#123; this.logger.info("Pre-instantiating singletons in " + this); &#125; //Âú®ÂØπÈÖçÁΩÆlazy-initÂ±ûÊÄßÂçïÊÄÅBeanÁöÑÈ¢ÑÂÆû‰æãÂåñËøáÁ®ã‰∏≠ÔºåÂøÖÈ°ªÂ§öÁ∫øÁ®ãÂêåÊ≠•Ôºå‰ª•Á°Æ‰øùÊï∞ÊçÆ‰∏ÄËá¥ÊÄß synchronized (this.beanDefinitionMap) &#123; for (String beanName : this.beanDefinitionNames) &#123; //Ëé∑ÂèñÊåáÂÆöÂêçÁß∞ÁöÑBeanÂÆö‰πâ RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName); //Bean‰∏çÊòØÊäΩË±°ÁöÑÔºåÊòØÂçïÊÄÅÊ®°ÂºèÁöÑÔºå‰∏îlazy-initÂ±ûÊÄßÈÖçÁΩÆ‰∏∫false if (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) &#123; //Â¶ÇÊûúÊåáÂÆöÂêçÁß∞ÁöÑbeanÊòØÂàõÂª∫ÂÆπÂô®ÁöÑBean if (isFactoryBean(beanName)) &#123; //FACTORY_BEAN_PREFIX=‚Äù&amp;‚ÄùÔºåÂΩìBeanÂêçÁß∞ÂâçÈù¢Âä†‚Äù&amp;‚ÄùÁ¨¶Âè∑ //Êó∂ÔºåËé∑ÂèñÁöÑÊòØ‰∫ßÁîüÂÆπÂô®ÂØπË±°Êú¨Ë∫´ÔºåËÄå‰∏çÊòØÂÆπÂô®‰∫ßÁîüÁöÑBean. //Ë∞ÉÁî®getBeanÊñπÊ≥ïÔºåËß¶ÂèëÂÆπÂô®ÂØπBeanÂÆû‰æãÂåñÂíå‰æùËµñÊ≥®ÂÖ•ËøáÁ®ã final FactoryBean factory = (FactoryBean) getBean(FACTORY_BEAN_PREFIX + beanName); //Ê†áËØÜÊòØÂê¶ÈúÄË¶ÅÈ¢ÑÂÆû‰æãÂåñ boolean isEagerInit; if (System.getSecurityManager() != null &amp;&amp; factory instanceof SmartFactoryBean) &#123; //‰∏Ä‰∏™ÂåøÂêçÂÜÖÈÉ®Á±ª isEagerInit = AccessController.doPrivileged(new PrivilegedAction&lt;Boolean&gt;() &#123; public Boolean run() &#123; return ((SmartFactoryBean) factory).isEagerInit(); &#125; &#125;, getAccessControlContext()); &#125; else &#123; isEagerInit = factory instanceof SmartFactoryBean &amp;&amp; ((SmartFactoryBean) factory).isEagerInit(); &#125; if (isEagerInit) &#123; //Ë∞ÉÁî®getBeanÊñπÊ≥ïÔºåËß¶ÂèëÂÆπÂô®ÂØπBeanÂÆû‰æãÂåñÂíå‰æùËµñÊ≥®ÂÖ•ËøáÁ®ã getBean(beanName); &#125; &#125; else &#123; //Ë∞ÉÁî®getBeanÊñπÊ≥ïÔºåËß¶ÂèëÂÆπÂô®ÂØπBeanÂÆû‰æãÂåñÂíå‰æùËµñÊ≥®ÂÖ•ËøáÁ®ã getBean(beanName); &#125; &#125; &#125; &#125; &#125; ÈÄöËøáÂØπlazy-initÂ§ÑÁêÜÊ∫êÁ†ÅÁöÑÂàÜÊûêÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∫Ülazy-initÂ±ûÊÄßÔºåÂàôÂÆπÂô®Âú®ÂÆåÊàêBeanÂÆö‰πâÁöÑÊ≥®ÂÜå‰πãÂêéÔºå‰ºöÈÄöËøágetBeanÊñπÊ≥ïÔºåËß¶ÂèëÂØπÊåáÂÆöBeanÁöÑÂàùÂßãÂåñÂíå‰æùËµñÊ≥®ÂÖ•ËøáÁ®ãÔºåËøôÊ†∑ÂΩìÂ∫îÁî®Á¨¨‰∏ÄÊ¨°ÂêëÂÆπÂô®Á¥¢ÂèñÊâÄÈúÄÁöÑBeanÊó∂ÔºåÂÆπÂô®‰∏çÂÜçÈúÄË¶ÅÂØπBeanËøõË°åÂàùÂßãÂåñÂíå‰æùËµñÊ≥®ÂÖ•ÔºåÁõ¥Êé•‰ªéÂ∑≤ÁªèÂÆåÊàêÂÆû‰æãÂåñÂíå‰æùËµñÊ≥®ÂÖ•ÁöÑBean‰∏≠Âèñ‰∏Ä‰∏™Á∫øÁ®ãÁöÑBeanÔºåËøôÊ†∑Â∞±ÊèêÈ´ò‰∫ÜÁ¨¨‰∏ÄÊ¨°Ëé∑ÂèñBeanÁöÑÊÄßËÉΩ„ÄÇ FactoryBeanÁöÑÂÆûÁé∞Âú®Spring‰∏≠ÔºåÊúâ‰∏§‰∏™ÂæàÂÆπÊòìÊ∑∑Ê∑ÜÁöÑÁ±ªÔºöBeanFactoryÂíåFactoryBean„ÄÇBeanFactoryÔºöBeanÂ∑•ÂéÇÔºåÊòØ‰∏Ä‰∏™Â∑•ÂéÇ(Factory)ÔºåÊàë‰ª¨Spring IoCÂÆπÂô®ÁöÑÊúÄÈ°∂Â±ÇÊé•Âè£Â∞±ÊòØËøô‰∏™BeanFactoryÔºåÂÆÉÁöÑ‰ΩúÁî®ÊòØÁÆ°ÁêÜBeanÔºåÂç≥ÂÆû‰æãÂåñ„ÄÅÂÆö‰Ωç„ÄÅÈÖçÁΩÆÂ∫îÁî®Á®ãÂ∫è‰∏≠ÁöÑÂØπË±°ÂèäÂª∫Á´ãËøô‰∫õÂØπË±°Èó¥ÁöÑ‰æùËµñ„ÄÇ FactoryBeanÔºöÂ∑•ÂéÇBeanÔºåÊòØ‰∏Ä‰∏™BeanÔºå‰ΩúÁî®ÊòØ‰∫ßÁîüÂÖ∂‰ªñbeanÂÆû‰æã„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåËøôÁßçbeanÊ≤°Êúâ‰ªÄ‰πàÁâπÂà´ÁöÑË¶ÅÊ±ÇÔºå‰ªÖÈúÄË¶ÅÊèê‰æõ‰∏Ä‰∏™Â∑•ÂéÇÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÁî®Êù•ËøîÂõûÂÖ∂‰ªñbeanÂÆû‰æã„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåbeanÊó†È°ªËá™Â∑±ÂÆûÁé∞Â∑•ÂéÇÊ®°ÂºèÔºåSpringÂÆπÂô®ÊãÖ‰ªªÂ∑•ÂéÇËßíËâ≤Ôºõ‰ΩÜÂ∞ëÊï∞ÊÉÖÂÜµ‰∏ãÔºåÂÆπÂô®‰∏≠ÁöÑbeanÊú¨Ë∫´Â∞±ÊòØÂ∑•ÂéÇÔºåÂÖ∂‰ΩúÁî®ÊòØ‰∫ßÁîüÂÖ∂ÂÆÉbeanÂÆû‰æã„ÄÇ ÂΩìÁî®Êà∑‰ΩøÁî®ÂÆπÂô®Êú¨Ë∫´Êó∂ÔºåÂèØ‰ª•‰ΩøÁî®ËΩ¨‰πâÂ≠óÁ¨¶‚Äù&amp;‚ÄùÊù•ÂæóÂà∞FactoryBeanÊú¨Ë∫´Ôºå‰ª•Âå∫Âà´ÈÄöËøáFactoryBean‰∫ßÁîüÁöÑÂÆû‰æãÂØπË±°ÂíåFactoryBeanÂØπË±°Êú¨Ë∫´„ÄÇÂú®BeanFactory‰∏≠ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÂÆö‰πâ‰∫ÜËØ•ËΩ¨‰πâÂ≠óÁ¨¶Ôºö StringFACTORY_BEAN_PREFIX = ‚Äú&amp;‚Äù; Â¶ÇÊûúmyJndiObjectÊòØ‰∏Ä‰∏™FactoryBeanÔºåÂàô‰ΩøÁî®&amp;myJndiObjectÂæóÂà∞ÁöÑÊòØmyJndiObjectÂØπË±°ÔºåËÄå‰∏çÊòØmyJndiObject‰∫ßÁîüÂá∫Êù•ÁöÑÂØπË±°„ÄÇ (1).FactoryBeanÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910//Â∑•ÂéÇBeanÔºåÁî®‰∫é‰∫ßÁîüÂÖ∂‰ªñÂØπpublic interface FactoryBean&lt;T&gt; &#123; //Ëé∑ÂèñÂÆπÂô®ÁÆ°ÁêÜÁöÑÂØπË±°ÂÆû‰æã T getObject() throws Exception; //Ëé∑ÂèñBeanÂ∑•ÂéÇÂàõÂª∫ÁöÑÂØπË±°ÁöÑÁ±ªÂûã Class getObjectType(); //BeanÂ∑•ÂéÇÂàõÂª∫ÁöÑÂØπË±°ÊòØÂê¶ÊòØÂçïÊÄÅÊ®°ÂºèÔºåÂ¶ÇÊûúÊòØÂçïÊÄÅÊ®°ÂºèÔºåÂàôÊï¥‰∏™ÂÆπÂô®‰∏≠Âè™Êúâ‰∏Ä‰∏™ÂÆû‰æã //ÂØπË±°ÔºåÊØèÊ¨°ËØ∑Ê±ÇÈÉΩËøîÂõûÂêå‰∏Ä‰∏™ÂÆû‰æãÂØπË±° boolean isSingleton();&#125; (2). AbstractBeanFactoryÁöÑgetBeanÊñπÊ≥ïË∞ÉÁî®FactoryBeanÂú®ÂâçÈù¢Êàë‰ª¨ÂàÜÊûêSpring IocÂÆπÂô®ÂÆû‰æãÂåñBeanÂπ∂ËøõË°å‰æùËµñÊ≥®ÂÖ•ËøáÁ®ãÁöÑÊ∫êÁ†ÅÊó∂ÔºåÊèêÂà∞Âú®getBeanÊñπÊ≥ïËß¶ÂèëÂÆπÂô®ÂÆû‰æãÂåñBeanÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®AbstractBeanFactoryÁöÑdoGetBeanÊñπÊ≥ïÊù•ËøõË°åÂÆû‰æãÂåñÁöÑËøáÁ®ãÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970//ÁúüÊ≠£ÂÆûÁé∞ÂêëIoCÂÆπÂô®Ëé∑ÂèñBeanÁöÑÂäüËÉΩÔºå‰πüÊòØËß¶Âèë‰æùËµñÊ≥®ÂÖ•ÂäüËÉΩÁöÑÂú∞Êñπ @SuppressWarnings("unchecked") protected &lt;T&gt; T doGetBean( final String name, final Class&lt;T&gt; requiredType, final Object[] args, boolean typeCheckOnly) throws BeansException &#123; //Ê†πÊçÆÊåáÂÆöÁöÑÂêçÁß∞Ëé∑ÂèñË¢´ÁÆ°ÁêÜBeanÁöÑÂêçÁß∞ÔºåÂâ•Á¶ªÊåáÂÆöÂêçÁß∞‰∏≠ÂØπÂÆπÂô®ÁöÑÁõ∏ÂÖ≥‰æùËµñ //Â¶ÇÊûúÊåáÂÆöÁöÑÊòØÂà´ÂêçÔºåÂ∞ÜÂà´ÂêçËΩ¨Êç¢‰∏∫ËßÑËåÉÁöÑBeanÂêçÁß∞ final String beanName = transformedBeanName(name); Object bean; //ÂÖà‰ªéÁºìÂ≠ò‰∏≠ÂèñÊòØÂê¶Â∑≤ÁªèÊúâË¢´ÂàõÂª∫ËøáÁöÑÂçïÊÄÅÁ±ªÂûãÁöÑBeanÔºåÂØπ‰∫éÂçïÊÄÅÊ®°ÂºèÁöÑBeanÊï¥ //‰∏™IoCÂÆπÂô®‰∏≠Âè™ÂàõÂª∫‰∏ÄÊ¨°Ôºå‰∏çÈúÄË¶ÅÈáçÂ§çÂàõÂª∫ Object sharedInstance = getSingleton(beanName); //IoCÂÆπÂô®ÂàõÂª∫ÂçïÊÄÅÊ®°ÂºèBeanÂÆû‰æãÂØπË±° if (sharedInstance != null &amp;&amp; args == null) &#123; if (logger.isDebugEnabled()) &#123; //Â¶ÇÊûúÊåáÂÆöÂêçÁß∞ÁöÑBeanÂú®ÂÆπÂô®‰∏≠Â∑≤ÊúâÂçïÊÄÅÊ®°ÂºèÁöÑBeanË¢´ÂàõÂª∫ÔºåÁõ¥Êé•ËøîÂõû //Â∑≤ÁªèÂàõÂª∫ÁöÑBean if (isSingletonCurrentlyInCreation(beanName)) &#123; logger.debug("Returning eagerly cached instance of singleton bean '" + beanName + "' that is not fully initialized yet - a consequence of a circular reference"); &#125; else &#123; logger.debug("Returning cached instance of singleton bean '" + beanName + "'"); &#125; &#125; //Ëé∑ÂèñÁªôÂÆöBeanÁöÑÂÆû‰æãÂØπË±°Ôºå‰∏ªË¶ÅÊòØÂÆåÊàêFactoryBeanÁöÑÁõ∏ÂÖ≥Â§ÑÁêÜ bean = getObjectForBeanInstance(sharedInstance, name, beanName, null); &#125; ‚Ä¶‚Ä¶ &#125; //Ëé∑ÂèñÁªôÂÆöBeanÁöÑÂÆû‰æãÂØπË±°Ôºå‰∏ªË¶ÅÊòØÂÆåÊàêFactoryBeanÁöÑÁõ∏ÂÖ≥Â§ÑÁêÜ protected Object getObjectForBeanInstance( Object beanInstance, String name, String beanName, RootBeanDefinition mbd) &#123; //ÂÆπÂô®Â∑≤ÁªèÂæóÂà∞‰∫ÜBeanÂÆû‰æãÂØπË±°ÔºåËøô‰∏™ÂÆû‰æãÂØπË±°ÂèØËÉΩÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑBeanÔºå‰πüÂèØËÉΩÊòØ //‰∏Ä‰∏™Â∑•ÂéÇBeanÔºåÂ¶ÇÊûúÊòØ‰∏Ä‰∏™Â∑•ÂéÇBeanÔºåÂàô‰ΩøÁî®ÂÆÉÂàõÂª∫‰∏Ä‰∏™BeanÂÆû‰æãÂØπË±°ÔºåÂ¶ÇÊûú //Ë∞ÉÁî®Êú¨Ë∫´Â∞±ÊÉ≥Ëé∑Âæó‰∏Ä‰∏™ÂÆπÂô®ÁöÑÂºïÁî®ÔºåÂàôÊåáÂÆöËøîÂõûËøô‰∏™Â∑•ÂéÇBeanÂÆû‰æãÂØπË±° //Â¶ÇÊûúÊåáÂÆöÁöÑÂêçÁß∞ÊòØÂÆπÂô®ÁöÑËß£ÂºïÁî®(dereferenceÔºåÂç≥ÊòØÂØπË±°Êú¨Ë∫´ËÄåÈùûÂÜÖÂ≠òÂú∞ÂùÄ)Ôºå //‰∏îBeanÂÆû‰æã‰πü‰∏çÊòØÂàõÂª∫BeanÂÆû‰æãÂØπË±°ÁöÑÂ∑•ÂéÇBean if (BeanFactoryUtils.isFactoryDereference(name) &amp;&amp; !(beanInstance instanceof FactoryBean)) &#123; throw new BeanIsNotAFactoryException(transformedBeanName(name), beanInstance.getClass()); &#125; //Â¶ÇÊûúBeanÂÆû‰æã‰∏çÊòØÂ∑•ÂéÇBeanÔºåÊàñËÄÖÊåáÂÆöÂêçÁß∞ÊòØÂÆπÂô®ÁöÑËß£ÂºïÁî®ÔºåË∞ÉÁî®ËÄÖÂêëËé∑ÂèñÂØπ //ÂÆπÂô®ÁöÑÂºïÁî®ÔºåÂàôÁõ¥Êé•ËøîÂõûÂΩìÂâçÁöÑBeanÂÆû‰æã if (!(beanInstance instanceof FactoryBean) || BeanFactoryUtils.isFactoryDereference(name)) &#123; return beanInstance; &#125; //Â§ÑÁêÜÊåáÂÆöÂêçÁß∞‰∏çÊòØÂÆπÂô®ÁöÑËß£ÂºïÁî®ÔºåÊàñËÄÖÊ†πÊçÆÂêçÁß∞Ëé∑ÂèñÁöÑBeanÂÆû‰æãÂØπË±°ÊòØ‰∏Ä‰∏™Â∑•ÂéÇBean //‰ΩøÁî®Â∑•ÂéÇBeanÂàõÂª∫‰∏Ä‰∏™BeanÁöÑÂÆû‰æãÂØπË±° Object object = null; if (mbd == null) &#123; //‰ªéBeanÂ∑•ÂéÇÁºìÂ≠ò‰∏≠Ëé∑ÂèñÁªôÂÆöÂêçÁß∞ÁöÑBeanÂÆû‰æãÂØπË±° object = getCachedObjectForFactoryBean(beanName); &#125; //ËÆ©BeanÂ∑•ÂéÇÁîü‰∫ßÁªôÂÆöÂêçÁß∞ÁöÑBeanÂØπË±°ÂÆû‰æã if (object == null) &#123; FactoryBean factory = (FactoryBean) beanInstance; //Â¶ÇÊûú‰ªéBeanÂ∑•ÂéÇÁîü‰∫ßÁöÑBeanÊòØÂçïÊÄÅÊ®°ÂºèÁöÑÔºåÂàôÁºìÂ≠ò if (mbd == null &amp;&amp; containsBeanDefinition(beanName)) &#123; //‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñÊåáÂÆöÂêçÁß∞ÁöÑBeanÂÆö‰πâÔºåÂ¶ÇÊûúÁªßÊâøÂü∫Á±ªÔºåÂàôÂêàÂπ∂Âü∫Á±ªÁõ∏ÂÖ≥Â±ûÊÄß mbd = getMergedLocalBeanDefinition(beanName); &#125; //Â¶ÇÊûú‰ªéÂÆπÂô®ÂæóÂà∞BeanÂÆö‰πâ‰ø°ÊÅØÔºåÂπ∂‰∏îBeanÂÆö‰πâ‰ø°ÊÅØ‰∏çÊòØËôöÊûÑÁöÑÔºåÂàôËÆ©Â∑•ÂéÇ //BeanÁîü‰∫ßBeanÂÆû‰æãÂØπË±° boolean synthetic = (mbd != null &amp;&amp; mbd.isSynthetic()); //Ë∞ÉÁî®FactoryBeanRegistrySupportÁ±ªÁöÑgetObjectFromFactoryBean //ÊñπÊ≥ïÔºåÂÆûÁé∞Â∑•ÂéÇBeanÁîü‰∫ßBeanÂØπË±°ÂÆû‰æãÁöÑËøáÁ®ã object = getObjectFromFactoryBean(factory, beanName, !synthetic); &#125; return object; &#125; (3)„ÄÅAbstractBeanFactoryÁîü‰∫ßBeanÂÆû‰æãÂØπË±°Ôºö AbstractBeanFactoryÁ±ª‰∏≠Áîü‰∫ßBeanÂÆû‰æãÂØπË±°ÁöÑ‰∏ªË¶ÅÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//BeanÂ∑•ÂéÇÁîü‰∫ßBeanÂÆû‰æãÂØπË±° protected Object getObjectFromFactoryBean(FactoryBean factory, String beanName, boolean shouldPostProcess) &#123; //BeanÂ∑•ÂéÇÊòØÂçïÊÄÅÊ®°ÂºèÔºåÂπ∂‰∏îBeanÂ∑•ÂéÇÁºìÂ≠ò‰∏≠Â≠òÂú®ÊåáÂÆöÂêçÁß∞ÁöÑBeanÂÆû‰æãÂØπË±° if (factory.isSingleton() &amp;&amp; containsSingleton(beanName)) &#123; //Â§öÁ∫øÁ®ãÂêåÊ≠•Ôºå‰ª•Èò≤Ê≠¢Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ synchronized (getSingletonMutex()) &#123; //Áõ¥Êé•‰ªéBeanÂ∑•ÂéÇÁºìÂ≠ò‰∏≠Ëé∑ÂèñÊåáÂÆöÂêçÁß∞ÁöÑBeanÂÆû‰æãÂØπË±° Object object = this.factoryBeanObjectCache.get(beanName); //BeanÂ∑•ÂéÇÁºìÂ≠ò‰∏≠Ê≤°ÊúâÊåáÂÆöÂêçÁß∞ÁöÑÂÆû‰æãÂØπË±°ÔºåÂàôÁîü‰∫ßËØ•ÂÆû‰æãÂØπË±° if (object == null) &#123; //Ë∞ÉÁî®BeanÂ∑•ÂéÇÁöÑgetObjectÊñπÊ≥ïÁîü‰∫ßÊåáÂÆöBeanÁöÑÂÆû‰æãÂØπË±° object = doGetObjectFromFactoryBean(factory, beanName, shouldPostProcess); //Â∞ÜÁîü‰∫ßÁöÑÂÆû‰æãÂØπË±°Ê∑ªÂä†Âà∞BeanÂ∑•ÂéÇÁºìÂ≠ò‰∏≠ this.factoryBeanObjectCache.put(beanName, (object != null ? object : NULL_OBJECT)); &#125; return (object != NULL_OBJECT ? object : null); &#125; &#125; //Ë∞ÉÁî®BeanÂ∑•ÂéÇÁöÑgetObjectÊñπÊ≥ïÁîü‰∫ßÊåáÂÆöBeanÁöÑÂÆû‰æãÂØπË±° else &#123; return doGetObjectFromFactoryBean(factory, beanName, shouldPostProcess); &#125; &#125; //Ë∞ÉÁî®BeanÂ∑•ÂéÇÁöÑgetObjectÊñπÊ≥ïÁîü‰∫ßÊåáÂÆöBeanÁöÑÂÆû‰æãÂØπË±° private Object doGetObjectFromFactoryBean( final FactoryBean factory, final String beanName, final boolean shouldPostProcess) throws BeanCreationException &#123; Object object; try &#123; if (System.getSecurityManager() != null) &#123; AccessControlContext acc = getAccessControlContext(); try &#123; //ÂÆûÁé∞PrivilegedExceptionActionÊé•Âè£ÁöÑÂåøÂêçÂÜÖÁΩÆÁ±ª //Ê†πÊçÆJVMÊ£ÄÊü•ÊùÉÈôêÔºåÁÑ∂ÂêéÂÜ≥ÂÆöBeanFactoryÂàõÂª∫ÂÆû‰æãÂØπË±° object = AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Object&gt;() &#123; public Object run() throws Exception &#123; //Ë∞ÉÁî®BeanFactoryÊé•Âè£ÂÆûÁé∞Á±ªÁöÑÂàõÂª∫ÂØπË±°ÊñπÊ≥ï return factory.getObject(); &#125; &#125;, acc); &#125; catch (PrivilegedActionException pae) &#123; throw pae.getException(); &#125; &#125; else &#123; //Ë∞ÉÁî®BeanFactoryÊé•Âè£ÂÆûÁé∞Á±ªÁöÑÂàõÂª∫ÂØπË±°ÊñπÊ≥ï object = factory.getObject(); &#125; &#125; catch (FactoryBeanNotInitializedException ex) &#123; throw new BeanCurrentlyInCreationException(beanName, ex.toString()); &#125; catch (Throwable ex) &#123; throw new BeanCreationException(beanName, "FactoryBean threw exception on object creation", ex); &#125; //ÂàõÂª∫Âá∫Êù•ÁöÑÂÆû‰æãÂØπË±°‰∏∫nullÔºåÊàñËÄÖÂõ†‰∏∫ÂçïÊÄÅÂØπË±°Ê≠£Âú®ÂàõÂª∫ËÄåËøîÂõûnull if (object == null &amp;&amp; isSingletonCurrentlyInCreation(beanName)) &#123; throw new BeanCurrentlyInCreationException( beanName, "FactoryBean which is currently in creation returned null from getObject"); &#125; //‰∏∫ÂàõÂª∫Âá∫Êù•ÁöÑBeanÂÆû‰æãÂØπË±°Ê∑ªÂä†BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô® if (object != null &amp;&amp; shouldPostProcess) &#123; try &#123; object = postProcessObjectFromFactoryBean(object, beanName); &#125; catch (Throwable ex) &#123; throw new BeanCreationException(beanName, "Post-processing of the FactoryBean's object failed", ex); &#125; &#125; return object; &#125; ‰ªé‰∏äÈù¢ÁöÑÊ∫êÁ†ÅÂàÜÊûê‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåBeanFactoryÊé•Âè£Ë∞ÉÁî®ÂÖ∂ÂÆûÁé∞Á±ªÁöÑgetObjectÊñπÊ≥ïÊù•ÂÆûÁé∞ÂàõÂª∫BeanÂÆû‰æãÂØπË±°ÁöÑÂäüËÉΩ„ÄÇ (4).Â∑•ÂéÇBeanÁöÑÂÆûÁé∞Á±ªgetObjectÊñπÊ≥ïÂàõÂª∫BeanÂÆû‰æãÂØπË±°ÔºöFactoryBeanÁöÑÂÆûÁé∞Á±ªÊúâÈùûÂ∏∏Â§öÔºåÊØîÂ¶ÇÔºöProxy„ÄÅRMI„ÄÅJNDI„ÄÅServletContextFactoryBeanÁ≠âÁ≠âÔºåFactoryBeanÊé•Âè£‰∏∫SpringÂÆπÂô®Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂ∞ÅË£ÖÊú∫Âà∂ÔºåÂÖ∑‰ΩìÁöÑgetObjectÊúâ‰∏çÂêåÁöÑÂÆûÁé∞Á±ªÊ†πÊçÆ‰∏çÂêåÁöÑÂÆûÁé∞Á≠ñÁï•Êù•ÂÖ∑‰ΩìÊèê‰æõÔºåÊàë‰ª¨ÂàÜÊûê‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑAnnotationTestFactoryBeanÁöÑÂÆûÁé∞Ê∫êÁ†ÅÔºö 12345678910111213141516public class AnnotationTestBeanFactory implements FactoryBean&lt;IJmxTestBean&gt; &#123; private final FactoryCreatedAnnotationTestBean instance = new FactoryCreatedAnnotationTestBean(); public AnnotationTestBeanFactory() &#123; this.instance.setName("FACTORY"); &#125; //AnnotationTestBeanFactory‰∫ßÁîüBeanÂÆû‰æãÂØπË±°ÁöÑÂÆûÁé∞ public IJmxTestBean getObject() throws Exception &#123; return this.instance; &#125; public Class&lt;? extends IJmxTestBean&gt; getObjectType() &#123; return FactoryCreatedAnnotationTestBean.class; &#125; public boolean isSingleton() &#123; return true; &#125; &#125; ÂÖ∂‰ªñÁöÑProxyÔºåRMIÔºåJNDIÁ≠âÁ≠âÔºåÈÉΩÊòØÊ†πÊçÆÁõ∏Â∫îÁöÑÁ≠ñÁï•Êèê‰æõgetObjectÁöÑÂÆûÁé∞„ÄÇËøôÈáå‰∏çÂÅö‰∏Ä‰∏ÄÂàÜÊûêÔºåËøôÂ∑≤Áªè‰∏çÊòØSpringÁöÑÊ†∏ÂøÉÂäüËÉΩÔºåÊúâÈúÄË¶ÅÁöÑÊó∂ÂÄôÂÜçÂéªÊ∑±ÂÖ•Á†îÁ©∂„ÄÇ BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÁöÑÂÆûÁé∞BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÊòØSpring IoCÂÆπÂô®ÁªèÂ∏∏‰ΩøÁî®Âà∞ÁöÑ‰∏Ä‰∏™ÁâπÊÄßÔºåËøô‰∏™BeanÂêéÁΩÆÂ§ÑÁêÜÂô®ÊòØ‰∏Ä‰∏™ÁõëÂê¨Âô®ÔºåÂèØ‰ª•ÁõëÂê¨ÂÆπÂô®Ëß¶ÂèëÁöÑBeanÂ£∞ÊòéÂë®Êúü‰∫ã‰ª∂„ÄÇÂêéÁΩÆÂ§ÑÁêÜÂô®ÂêëÂÆπÂô®Ê≥®ÂÜå‰ª•ÂêéÔºåÂÆπÂô®‰∏≠ÁÆ°ÁêÜÁöÑBeanÂ∞±ÂÖ∑Â§á‰∫ÜÊé•Êî∂IoCÂÆπÂô®‰∫ã‰ª∂ÂõûË∞ÉÁöÑËÉΩÂäõ„ÄÇ BeanPostProcessorÁöÑ‰ΩøÁî®ÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÊèê‰æõ‰∏Ä‰∏™ÂÆûÁé∞Êé•Âè£BeanPostProcessorÁöÑÂÆûÁé∞Á±ªÔºåÁÑ∂ÂêéÂú®BeanÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆæÁΩÆÂç≥ÂèØ„ÄÇ (1).BeanPostProcessorÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 12345678package org.springframework.beans.factory.config; import org.springframework.beans.BeansException; public interface BeanPostProcessor &#123; //‰∏∫Âú®BeanÁöÑÂàùÂßãÂåñÂâçÊèê‰æõÂõûË∞ÉÂÖ•Âè£ Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException; //‰∏∫Âú®BeanÁöÑÂàùÂßãÂåñ‰πãÂêéÊèê‰æõÂõûË∞ÉÂÖ•Âè£ Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException; &#125; Ëøô‰∏§‰∏™ÂõûË∞ÉÁöÑÂÖ•Âè£ÈÉΩÊòØÂíåÂÆπÂô®ÁÆ°ÁêÜÁöÑBeanÁöÑÁîüÂëΩÂë®Êúü‰∫ã‰ª∂Á¥ßÂØÜÁõ∏ÂÖ≥ÔºåÂèØ‰ª•‰∏∫Áî®Êà∑Êèê‰æõÂú®Spring IoCÂÆπÂô®ÂàùÂßãÂåñBeanËøáÁ®ã‰∏≠Ëá™ÂÆö‰πâÁöÑÂ§ÑÁêÜÊìç‰Ωú„ÄÇ (2).AbstractAutowireCapableBeanFactoryÁ±ªÂØπÂÆπÂô®ÁîüÊàêÁöÑBeanÊ∑ªÂä†ÂêéÁΩÆÂ§ÑÁêÜÂô®ÔºöBeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÁöÑË∞ÉÁî®ÂèëÁîüÂú®Spring IoCÂÆπÂô®ÂÆåÊàêÂØπBeanÂÆû‰æãÂØπË±°ÁöÑÂàõÂª∫ÂíåÂ±ûÊÄßÁöÑ‰æùËµñÊ≥®ÂÖ•ÂÆåÊàê‰πãÂêéÔºåÂú®ÂØπSpring‰æùËµñÊ≥®ÂÖ•ÁöÑÊ∫êÁ†ÅÂàÜÊûêËøáÁ®ã‰∏≠Êàë‰ª¨Áü•ÈÅìÔºåÂΩìÂ∫îÁî®Á®ãÂ∫èÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®getBeanÊñπÊ≥ï(lazy-initÈ¢ÑÂÆû‰æãÂåñÈô§Â§ñ)ÂêëSpring IoCÂÆπÂô®Á¥¢ÂèñÊåáÂÆöBeanÊó∂Ëß¶ÂèëSpring IoCÂÆπÂô®ÂàõÂª∫BeanÂÆû‰æãÂØπË±°Âπ∂ËøõË°å‰æùËµñÊ≥®ÂÖ•ÁöÑËøáÁ®ãÔºåÂÖ∂‰∏≠ÁúüÊ≠£ÂÆûÁé∞ÂàõÂª∫BeanÂØπË±°Âπ∂ËøõË°å‰æùËµñÊ≥®ÂÖ•ÁöÑÊñπÊ≥ïÊòØAbstractAutowireCapableBeanFactoryÁ±ªÁöÑdoCreateBeanÊñπÊ≥ïÔºå‰∏ªË¶ÅÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021//ÁúüÊ≠£ÂàõÂª∫BeanÁöÑÊñπÊ≥ï protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args) &#123; //ÂàõÂª∫BeanÂÆû‰æãÂØπË±° ‚Ä¶‚Ä¶ try &#123; //ÂØπBeanÂ±ûÊÄßËøõË°å‰æùËµñÊ≥®ÂÖ• populateBean(beanName, mbd, instanceWrapper); if (exposedObject != null) &#123; //Âú®ÂØπBeanÂÆû‰æãÂØπË±°ÁîüÊàêÂíå‰æùËµñÊ≥®ÂÖ•ÂÆåÊàê‰ª•ÂêéÔºåÂºÄÂßãÂØπBeanÂÆû‰æãÂØπË±° //ËøõË°åÂàùÂßãÂåñ Ôºå‰∏∫BeanÂÆû‰æãÂØπË±°Â∫îÁî®BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô® exposedObject = initializeBean(beanName, exposedObject, mbd); &#125; &#125; catch (Throwable ex) &#123; if (ex instanceof BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123; throw (BeanCreationException) ex; &#125; ‚Ä¶‚Ä¶ //‰∏∫Â∫îÁî®ËøîÂõûÊâÄÈúÄË¶ÅÁöÑÂÆû‰æãÂØπË±° return exposedObject; &#125; ‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏≠Êàë‰ª¨Áü•ÈÅìÔºå‰∏∫BeanÂÆû‰æãÂØπË±°Ê∑ªÂä†BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÁöÑÂÖ•Âè£ÁöÑÊòØinitializeBeanÊñπÊ≥ï„ÄÇ (3).initializeBeanÊñπÊ≥ï‰∏∫ÂÆπÂô®‰∫ßÁîüÁöÑBeanÂÆû‰æãÂØπË±°Ê∑ªÂä†BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÔºöÂêåÊ†∑Âú®AbstractAutowireCapableBeanFactoryÁ±ª‰∏≠ÔºåinitializeBeanÊñπÊ≥ïÂÆûÁé∞‰∏∫ÂÆπÂô®ÂàõÂª∫ÁöÑBeanÂÆû‰æãÂØπË±°Ê∑ªÂä†BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869//ÂàùÂßãÂÆπÂô®ÂàõÂª∫ÁöÑBeanÂÆû‰æãÂØπË±°Ôºå‰∏∫ÂÖ∂Ê∑ªÂä†BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô® protected Object initializeBean(final String beanName, final Object bean, RootBeanDefinition mbd) &#123; //JDKÁöÑÂÆâÂÖ®Êú∫Âà∂È™åËØÅÊùÉÈôê if (System.getSecurityManager() != null) &#123; //ÂÆûÁé∞PrivilegedActionÊé•Âè£ÁöÑÂåøÂêçÂÜÖÈÉ®Á±ª AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123; public Object run() &#123; invokeAwareMethods(beanName, bean); return null; &#125; &#125;, getAccessControlContext()); &#125; else &#123; //‰∏∫BeanÂÆû‰æãÂØπË±°ÂåÖË£ÖÁõ∏ÂÖ≥Â±ûÊÄßÔºåÂ¶ÇÂêçÁß∞ÔºåÁ±ªÂä†ËΩΩÂô®ÔºåÊâÄÂ±ûÂÆπÂô®Á≠â‰ø°ÊÅØ invokeAwareMethods(beanName, bean); &#125; Object wrappedBean = bean; //ÂØπBeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÁöÑpostProcessBeforeInitialization //ÂõûË∞ÉÊñπÊ≥ïÁöÑË∞ÉÁî®Ôºå‰∏∫BeanÂÆû‰æãÂàùÂßãÂåñÂâçÂÅö‰∏Ä‰∫õÂ§ÑÁêÜ if (mbd == null || !mbd.isSynthetic()) &#123; wrappedBean = applyBeanPostProcessorsBeforeInitialization(wrappedBean, beanName); &#125; //Ë∞ÉÁî®BeanÂÆû‰æãÂØπË±°ÂàùÂßãÂåñÁöÑÊñπÊ≥ïÔºåËøô‰∏™ÂàùÂßãÂåñÊñπÊ≥ïÊòØÂú®Spring BeanÂÆö‰πâÈÖçÁΩÆ //Êñá‰ª∂‰∏≠ÈÄöËøáinit-methodÂ±ûÊÄßÊåáÂÆöÁöÑ try &#123; invokeInitMethods(beanName, wrappedBean, mbd); &#125; catch (Throwable ex) &#123; throw new BeanCreationException( (mbd != null ? mbd.getResourceDescription() : null), beanName, "Invocation of init method failed", ex); &#125; //ÂØπBeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÁöÑpostProcessAfterInitialization //ÂõûË∞ÉÊñπÊ≥ïÁöÑË∞ÉÁî®Ôºå‰∏∫BeanÂÆû‰æãÂàùÂßãÂåñ‰πãÂêéÂÅö‰∏Ä‰∫õÂ§ÑÁêÜ if (mbd == null || !mbd.isSynthetic()) &#123; wrappedBean = applyBeanPostProcessorsAfterInitialization(wrappedBean, beanName); &#125; return wrappedBean; &#125; //Ë∞ÉÁî®BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÂÆû‰æãÂØπË±°ÂàùÂßãÂåñ‰πãÂâçÁöÑÂ§ÑÁêÜÊñπÊ≥ï public Object applyBeanPostProcessorsBeforeInitialization(Object existingBean, String beanName) throws BeansException &#123; Object result = existingBean; //ÈÅçÂéÜÂÆπÂô®‰∏∫ÊâÄÂàõÂª∫ÁöÑBeanÊ∑ªÂä†ÁöÑÊâÄÊúâBeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô® for (BeanPostProcessor beanProcessor : getBeanPostProcessors()) &#123; //Ë∞ÉÁî®BeanÂÆû‰æãÊâÄÊúâÁöÑÂêéÁΩÆÂ§ÑÁêÜ‰∏≠ÁöÑÂàùÂßãÂåñÂâçÂ§ÑÁêÜÊñπÊ≥ïÔºå‰∏∫BeanÂÆû‰æãÂØπË±°Âú® //ÂàùÂßãÂåñ‰πãÂâçÂÅö‰∏Ä‰∫õËá™ÂÆö‰πâÁöÑÂ§ÑÁêÜÊìç‰Ωú result = beanProcessor.postProcessBeforeInitialization(result, beanName); if (result == null) &#123; return result; &#125; &#125; return result; &#125; //Ë∞ÉÁî®BeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô®ÂÆû‰æãÂØπË±°ÂàùÂßãÂåñ‰πãÂêéÁöÑÂ§ÑÁêÜÊñπÊ≥ï public Object applyBeanPostProcessorsAfterInitialization(Object existingBean, String beanName) throws BeansException &#123; Object result = existingBean; //ÈÅçÂéÜÂÆπÂô®‰∏∫ÊâÄÂàõÂª∫ÁöÑBeanÊ∑ªÂä†ÁöÑÊâÄÊúâBeanPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô® for (BeanPostProcessor beanProcessor : getBeanPostProcessors()) &#123; //Ë∞ÉÁî®BeanÂÆû‰æãÊâÄÊúâÁöÑÂêéÁΩÆÂ§ÑÁêÜ‰∏≠ÁöÑÂàùÂßãÂåñÂêéÂ§ÑÁêÜÊñπÊ≥ïÔºå‰∏∫BeanÂÆû‰æãÂØπË±°Âú® //ÂàùÂßãÂåñ‰πãÂêéÂÅö‰∏Ä‰∫õËá™ÂÆö‰πâÁöÑÂ§ÑÁêÜÊìç‰Ωú result = beanProcessor.postProcessAfterInitialization(result, beanName); if (result == null) &#123; return result; &#125; &#125; return result; &#125; BeanPostProcessorÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåÂÖ∂ÂàùÂßãÂåñÂâçÁöÑÊìç‰ΩúÊñπÊ≥ïÂíåÂàùÂßãÂåñÂêéÁöÑÊìç‰ΩúÊñπÊ≥ïÂùáÂßîÊâòÂÖ∂ÂÆûÁé∞Â≠êÁ±ªÊù•ÂÆûÁé∞ÔºåÂú®Spring‰∏≠ÔºåBeanPostProcessorÁöÑÂÆûÁé∞Â≠êÁ±ªÈùûÂ∏∏ÁöÑÂ§öÔºåÂàÜÂà´ÂÆåÊàê‰∏çÂêåÁöÑÊìç‰ΩúÔºåÂ¶ÇÔºöAOPÈù¢ÂêëÂàáÈù¢ÁºñÁ®ãÁöÑÊ≥®ÂÜåÈÄöÁü•ÈÄÇÈÖçÂô®„ÄÅBeanÂØπË±°ÁöÑÊï∞ÊçÆÊ†°È™å„ÄÅBeanÁªßÊâøÂ±ûÊÄß/ÊñπÊ≥ïÁöÑÂêàÂπ∂Á≠âÁ≠âÔºåÊàë‰ª¨‰ª•ÊúÄÁÆÄÂçïÁöÑAOPÂàáÈù¢ÁªáÂÖ•Êù•ÁÆÄÂçï‰∫ÜËß£ÂÖ∂‰∏ªË¶ÅÁöÑÂäüËÉΩ„ÄÇ (4).AdvisorAdapterRegistrationManagerÂú®BeanÂØπË±°ÂàùÂßãÂåñÂêéÊ≥®ÂÜåÈÄöÁü•ÈÄÇÈÖçÂô®ÔºöAdvisorAdapterRegistrationManagerÊòØBeanPostProcessorÁöÑ‰∏Ä‰∏™ÂÆûÁé∞Á±ªÔºåÂÖ∂‰∏ªË¶ÅÁöÑ‰ΩúÁî®‰∏∫ÂÆπÂô®‰∏≠ÁÆ°ÁêÜÁöÑBeanÊ≥®ÂÜå‰∏Ä‰∏™Èù¢ÂêëÂàáÈù¢ÁºñÁ®ãÁöÑÈÄöÁü•ÈÄÇÈÖçÂô®Ôºå‰ª•‰æøÂú®SpringÂÆπÂô®‰∏∫ÊâÄÁÆ°ÁêÜÁöÑBeanËøõË°åÈù¢ÂêëÂàáÈù¢ÁºñÁ®ãÊó∂Êèê‰æõÊñπ‰æøÔºåÂÖ∂Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021//‰∏∫ÂÆπÂô®‰∏≠ÁÆ°ÁêÜÁöÑBeanÊ≥®ÂÜå‰∏Ä‰∏™Èù¢ÂêëÂàáÈù¢ÁºñÁ®ãÁöÑÈÄöÁü•ÈÄÇÈÖçÂô® public class AdvisorAdapterRegistrationManager implements BeanPostProcessor &#123; //ÂÆπÂô®‰∏≠Ë¥üË¥£ÁÆ°ÁêÜÂàáÈù¢ÈÄöÁü•ÈÄÇÈÖçÂô®Ê≥®ÂÜåÁöÑÂØπË±° private AdvisorAdapterRegistry advisorAdapterRegistry = GlobalAdvisorAdapterRegistry.getInstance(); public void setAdvisorAdapterRegistry(AdvisorAdapterRegistry advisorAdapterRegistry) &#123; this.advisorAdapterRegistry = advisorAdapterRegistry; &#125; //BeanPostProcessorÂú®BeanÂØπË±°ÂàùÂßãÂåñÂâçÁöÑÊìç‰Ωú public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123; //Ê≤°ÊúâÂÅö‰ªª‰ΩïÊìç‰ΩúÔºåÁõ¥Êé•ËøîÂõûÂÆπÂô®ÂàõÂª∫ÁöÑBeanÂØπË±° return bean; &#125; //BeanPostProcessorÂú®BeanÂØπË±°ÂàùÂßãÂåñÂêéÁöÑÊìç‰Ωú public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123; if (bean instanceof AdvisorAdapter)&#123; //Â¶ÇÊûúÂÆπÂô®ÂàõÂª∫ÁöÑBeanÂÆû‰æãÂØπË±°ÊòØ‰∏Ä‰∏™ÂàáÈù¢ÈÄöÁü•ÈÄÇÈÖçÂô®ÔºåÂàôÂêëÂÆπÂô®ÁöÑÊ≥®ÂÜå this.advisorAdapterRegistry.registerAdvisorAdapter((AdvisorAdapter) bean); &#125; return bean; &#125; &#125; ÂÖ∂‰ªñÁöÑBeanPostProcessorÊé•Âè£ÂÆûÁé∞Á±ªÁöÑ‰πüÁ±ª‰ººÔºåÈÉΩÊòØÂØπBeanÂØπË±°‰ΩøÁî®Âà∞ÁöÑ‰∏Ä‰∫õÁâπÊÄßËøõË°åÂ§ÑÁêÜÔºåÊàñËÄÖÂêëIoCÂÆπÂô®‰∏≠Ê≥®ÂÜåÔºå‰∏∫ÂàõÂª∫ÁöÑBeanÂÆû‰æãÂØπË±°ÂÅö‰∏Ä‰∫õËá™ÂÆö‰πâÁöÑÂäüËÉΩÂ¢ûÂä†ÔºåËøô‰∫õÊìç‰ΩúÊòØÂÆπÂô®ÂàùÂßãÂåñBeanÊó∂Ëá™Âä®Ëß¶ÂèëÁöÑÔºå‰∏çÈúÄË¶ÅËÆ§‰∏∫ÁöÑÂπ≤È¢Ñ„ÄÇ Spring IoCÂÆπÂô®autowiringÂÆûÁé∞ÂéüÁêÜSpring IoCÂÆπÂô®Êèê‰æõ‰∫Ü‰∏§ÁßçÁÆ°ÁêÜBean‰æùËµñÂÖ≥Á≥ªÁöÑÊñπÂºèÔºö ÊòæÂºèÁÆ°ÁêÜÔºöÈÄöËøáBeanDefinitionÁöÑÂ±ûÊÄßÂÄºÂíåÊûÑÈÄ†ÊñπÊ≥ïÂÆûÁé∞Bean‰æùËµñÂÖ≥Á≥ªÁÆ°ÁêÜ„ÄÇ autowiringÔºöSpring IoCÂÆπÂô®ÁöÑ‰æùËµñËá™Âä®Ë£ÖÈÖçÂäüËÉΩÔºå‰∏çÈúÄË¶ÅÂØπBeanÂ±ûÊÄßÁöÑ‰æùËµñÂÖ≥Á≥ªÂÅöÊòæÂºèÁöÑÂ£∞ÊòéÔºåÂè™ÈúÄË¶ÅÂú®ÈÖçÁΩÆÂ•ΩautowiringÂ±ûÊÄßÔºåIoCÂÆπÂô®‰ºöËá™Âä®‰ΩøÁî®ÂèçÂ∞ÑÊü•ÊâæÂ±ûÊÄßÁöÑÁ±ªÂûãÂíåÂêçÁß∞ÔºåÁÑ∂ÂêéÂü∫‰∫éÂ±ûÊÄßÁöÑÁ±ªÂûãÊàñËÄÖÂêçÁß∞Êù•Ëá™Âä®ÂåπÈÖçÂÆπÂô®‰∏≠ÁÆ°ÁêÜÁöÑBeanÔºå‰ªéËÄåËá™Âä®Âú∞ÂÆåÊàê‰æùËµñÊ≥®ÂÖ•„ÄÇ ÈÄöËøáÂØπautowiringËá™Âä®Ë£ÖÈÖçÁâπÊÄßÁöÑÁêÜËß£ÔºåÊàë‰ª¨Áü•ÈÅìÂÆπÂô®ÂØπBeanÁöÑËá™Âä®Ë£ÖÈÖçÂèëÁîüÂú®ÂÆπÂô®ÂØπBean‰æùËµñÊ≥®ÂÖ•ÁöÑËøáÁ®ã‰∏≠„ÄÇÂú®ÂâçÈù¢ÂØπSpring IoCÂÆπÂô®ÁöÑ‰æùËµñÊ≥®ÂÖ•ËøáÁ®ãÊ∫êÁ†ÅÂàÜÊûê‰∏≠ÔºåÊàë‰ª¨Â∑≤ÁªèÁü•ÈÅì‰∫ÜÂÆπÂô®ÂØπBeanÂÆû‰æãÂØπË±°ÁöÑÂ±ûÊÄßÊ≥®ÂÖ•ÁöÑÂ§ÑÁêÜÂèëÁîüÂú®AbstractAutoWireCapableBeanFactoryÁ±ª‰∏≠ÁöÑpopulateBeanÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨ÈÄöËøáÁ®ãÂ∫èÊµÅÁ®ãÂàÜÊûêautowiringÁöÑÂÆûÁé∞ÂéüÁêÜÔºö (1). AbstractAutoWireCapableBeanFactoryÂØπBeanÂÆû‰æãËøõË°åÂ±ûÊÄß‰æùËµñÊ≥®ÂÖ•ÔºöÂ∫îÁî®Á¨¨‰∏ÄÊ¨°ÈÄöËøágetBeanÊñπÊ≥ï(ÈÖçÁΩÆ‰∫Ülazy-initÈ¢ÑÂÆû‰æãÂåñÂ±ûÊÄßÁöÑÈô§Â§ñ)ÂêëIoCÂÆπÂô®Á¥¢ÂèñBeanÊó∂ÔºåÂÆπÂô®ÂàõÂª∫BeanÂÆû‰æãÂØπË±°ÔºåÂπ∂‰∏îÂØπBeanÂÆû‰æãÂØπË±°ËøõË°åÂ±ûÊÄß‰æùËµñÊ≥®ÂÖ•ÔºåAbstractAutoWireCapableBeanFactoryÁöÑpopulateBeanÊñπÊ≥ïÂ∞±ÊòØÂÆûÁé∞BeanÂ±ûÊÄß‰æùËµñÊ≥®ÂÖ•ÁöÑÂäüËÉΩÔºåÂÖ∂‰∏ªË¶ÅÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617181920protected void populateBean(String beanName, AbstractBeanDefinition mbd, BeanWrapper bw) &#123; //Ëé∑ÂèñBeanÂÆö‰πâÁöÑÂ±ûÊÄßÂÄºÔºåÂπ∂ÂØπÂ±ûÊÄßÂÄºËøõË°åÂ§ÑÁêÜ PropertyValues pvs = mbd.getPropertyValues(); ‚Ä¶‚Ä¶ //ÂØπ‰æùËµñÊ≥®ÂÖ•Â§ÑÁêÜÔºåÈ¶ñÂÖàÂ§ÑÁêÜautowiringËá™Âä®Ë£ÖÈÖçÁöÑ‰æùËµñÊ≥®ÂÖ• if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME || mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123; MutablePropertyValues newPvs = new MutablePropertyValues(pvs); //Ê†πÊçÆBeanÂêçÁß∞ËøõË°åautowiringËá™Âä®Ë£ÖÈÖçÂ§ÑÁêÜ if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME) &#123; autowireByName(beanName, mbd, bw, newPvs); &#125; //Ê†πÊçÆBeanÁ±ªÂûãËøõË°åautowiringËá™Âä®Ë£ÖÈÖçÂ§ÑÁêÜ if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123; autowireByType(beanName, mbd, bw, newPvs); &#125; &#125; //ÂØπÈùûautowiringÁöÑÂ±ûÊÄßËøõË°å‰æùËµñÊ≥®ÂÖ•Â§ÑÁêÜ ‚Ä¶‚Ä¶ &#125; (2).Spring IoCÂÆπÂô®Ê†πÊçÆBeanÂêçÁß∞ÊàñËÄÖÁ±ªÂûãËøõË°åautowiringËá™Âä®‰æùËµñÊ≥®ÂÖ•Ôºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475//Ê†πÊçÆÂêçÁß∞ÂØπÂ±ûÊÄßËøõË°åËá™Âä®‰æùËµñÊ≥®ÂÖ• protected void autowireByName( String beanName, AbstractBeanDefinition mbd, BeanWrapper bw, MutablePropertyValues pvs) &#123; //ÂØπBeanÂØπË±°‰∏≠ÈùûÁÆÄÂçïÂ±ûÊÄß(‰∏çÊòØÁÆÄÂçïÁªßÊâøÁöÑÂØπË±°ÔºåÂ¶Ç8‰∏≠ÂéüÂßãÁ±ªÂûãÔºåÂ≠óÁ¨¶‰∏≤ÔºåURLÁ≠â//ÈÉΩÊòØÁÆÄÂçïÂ±ûÊÄß)ËøõË°åÂ§ÑÁêÜ String[] propertyNames = unsatisfiedNonSimpleProperties(mbd, bw); for (String propertyName : propertyNames) &#123; //Â¶ÇÊûúSpring IoCÂÆπÂô®‰∏≠ÂåÖÂê´ÊåáÂÆöÂêçÁß∞ÁöÑBean if (containsBean(propertyName)) &#123; //Ë∞ÉÁî®getBeanÊñπÊ≥ïÂêëIoCÂÆπÂô®Á¥¢ÂèñÊåáÂÆöÂêçÁß∞ÁöÑBeanÂÆû‰æãÔºåËø≠‰ª£Ëß¶ÂèëÂ±ûÊÄßÁöÑ//ÂàùÂßãÂåñÂíå‰æùËµñÊ≥®ÂÖ• Object bean = getBean(propertyName); //‰∏∫ÊåáÂÆöÂêçÁß∞ÁöÑÂ±ûÊÄßËµã‰∫àÂ±ûÊÄßÂÄº pvs.add(propertyName, bean); //ÊåáÂÆöÂêçÁß∞Â±ûÊÄßÊ≥®ÂÜå‰æùËµñBeanÂêçÁß∞ÔºåËøõË°åÂ±ûÊÄß‰æùËµñÊ≥®ÂÖ• registerDependentBean(propertyName, beanName); if (logger.isDebugEnabled()) &#123; logger.debug("Added autowiring by name from bean name '" + beanName + "' via property '" + propertyName + "' to bean named '" + propertyName + "'"); &#125; &#125; else &#123; if (logger.isTraceEnabled()) &#123; logger.trace("Not autowiring property '" + propertyName + "' of bean '" + beanName + "' by name: no matching bean found"); &#125; &#125; &#125; &#125; //Ê†πÊçÆÁ±ªÂûãÂØπÂ±ûÊÄßËøõË°åËá™Âä®‰æùËµñÊ≥®ÂÖ• protected void autowireByType( String beanName, AbstractBeanDefinition mbd, BeanWrapper bw, MutablePropertyValues pvs) &#123; //Ëé∑ÂèñÁî®Êà∑ÂÆö‰πâÁöÑÁ±ªÂûãËΩ¨Êç¢Âô® TypeConverter converter = getCustomTypeConverter(); if (converter == null) &#123; converter = bw; &#125; //Â≠òÊîæËß£ÊûêÁöÑË¶ÅÊ≥®ÂÖ•ÁöÑÂ±ûÊÄß Set&lt;String&gt; autowiredBeanNames = new LinkedHashSet&lt;String&gt;(4); //ÂØπBeanÂØπË±°‰∏≠ÈùûÁÆÄÂçïÂ±ûÊÄß(‰∏çÊòØÁÆÄÂçïÁªßÊâøÁöÑÂØπË±°ÔºåÂ¶Ç8‰∏≠ÂéüÂßãÁ±ªÂûãÔºåÂ≠óÁ¨¶ //URLÁ≠âÈÉΩÊòØÁÆÄÂçïÂ±ûÊÄß)ËøõË°åÂ§ÑÁêÜ String[] propertyNames = unsatisfiedNonSimpleProperties(mbd, bw); for (String propertyName : propertyNames) &#123; try &#123; //Ëé∑ÂèñÊåáÂÆöÂ±ûÊÄßÂêçÁß∞ÁöÑÂ±ûÊÄßÊèèËø∞Âô® PropertyDescriptor pd = bw.getPropertyDescriptor(propertyName); //‰∏çÂØπObjectÁ±ªÂûãÁöÑÂ±ûÊÄßËøõË°åautowiringËá™Âä®‰æùËµñÊ≥®ÂÖ• if (!Object.class.equals(pd.getPropertyType())) &#123; //Ëé∑ÂèñÂ±ûÊÄßÁöÑsetterÊñπÊ≥ï MethodParameter methodParam = BeanUtils.getWriteMethodParameter(pd); //Ê£ÄÊü•ÊåáÂÆöÁ±ªÂûãÊòØÂê¶ÂèØ‰ª•Ë¢´ËΩ¨Êç¢‰∏∫ÁõÆÊ†áÂØπË±°ÁöÑÁ±ªÂûã boolean eager = !PriorityOrdered.class.isAssignableFrom(bw.getWrappedClass()); //ÂàõÂª∫‰∏Ä‰∏™Ë¶ÅË¢´Ê≥®ÂÖ•ÁöÑ‰æùËµñÊèèËø∞ DependencyDescriptor desc = new AutowireByTypeDependencyDescriptor(methodParam, eager); //Ê†πÊçÆÂÆπÂô®ÁöÑBeanÂÆö‰πâËß£Êûê‰æùËµñÂÖ≥Á≥ªÔºåËøîÂõûÊâÄÊúâË¶ÅË¢´Ê≥®ÂÖ•ÁöÑBeanÂØπË±° Object autowiredArgument = resolveDependency(desc, beanName, autowiredBeanNames, converter); if (autowiredArgument != null) &#123; //‰∏∫Â±ûÊÄßËµãÂÄºÊâÄÂºïÁî®ÁöÑÂØπË±° pvs.add(propertyName, autowiredArgument); &#125; for (String autowiredBeanName : autowiredBeanNames) &#123; //ÊåáÂÆöÂêçÁß∞Â±ûÊÄßÊ≥®ÂÜå‰æùËµñBeanÂêçÁß∞ÔºåËøõË°åÂ±ûÊÄß‰æùËµñÊ≥®ÂÖ• registerDependentBean(autowiredBeanName, beanName); if (logger.isDebugEnabled()) &#123; logger.debug("Autowiring by type from bean name '" + beanName + "' via property '" + propertyName + "' to bean named '" + autowiredBeanName + "'"); &#125; &#125; //ÈáäÊîæÂ∑≤Ëá™Âä®Ê≥®ÂÖ•ÁöÑÂ±ûÊÄß autowiredBeanNames.clear(); &#125; &#125; catch (BeansException ex) &#123; throw new UnsatisfiedDependencyException(mbd.getResourceDescription(), beanName, propertyName, ex); &#125; &#125; &#125; ÈÄöËøá‰∏äÈù¢ÁöÑÊ∫êÁ†ÅÂàÜÊûêÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫Êù•ÈÄöËøáÂ±ûÊÄßÂêçËøõË°åËá™Âä®‰æùËµñÊ≥®ÂÖ•ÁöÑÁõ∏ÂØπÊØîÈÄöËøáÂ±ûÊÄßÁ±ªÂûãËøõË°åËá™Âä®‰æùËµñÊ≥®ÂÖ•Ë¶ÅÁ®çÂæÆÁÆÄÂçï‰∏Ä‰∫õÔºå‰ΩÜÊòØÁúüÊ≠£ÂÆûÁé∞Â±ûÊÄßÊ≥®ÂÖ•ÁöÑÊòØDefaultSingletonBeanRegistryÁ±ªÁöÑregisterDependentBeanÊñπÊ≥ï„ÄÇ (3).DefaultSingletonBeanRegistryÁöÑregisterDependentBeanÊñπÊ≥ïÂØπÂ±ûÊÄßÊ≥®ÂÖ•Ôºö12345678910111213141516171819202122232425262728293031//‰∏∫ÊåáÂÆöÁöÑBeanÊ≥®ÂÖ•‰æùËµñÁöÑBean public void registerDependentBean(String beanName, String dependentBeanName) &#123; //Â§ÑÁêÜBeanÂêçÁß∞ÔºåÂ∞ÜÂà´ÂêçËΩ¨Êç¢‰∏∫ËßÑËåÉÁöÑBeanÂêçÁß∞ String canonicalName = canonicalName(beanName); //Â§öÁ∫øÁ®ãÂêåÊ≠•Ôºå‰øùËØÅÂÆπÂô®ÂÜÖÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß //ÂÖà‰ªéÂÆπÂô®‰∏≠ÔºöbeanÂêçÁß∞--&gt;ÂÖ®ÈÉ®‰æùËµñBeanÂêçÁß∞ÈõÜÂêàÊâæÊü•ÊâæÁªôÂÆöÂêçÁß∞BeanÁöÑ‰æùËµñBean synchronized (this.dependentBeanMap) &#123; //Ëé∑ÂèñÁªôÂÆöÂêçÁß∞BeanÁöÑÊâÄÊúâ‰æùËµñBeanÂêçÁß∞ Set&lt;String&gt; dependentBeans = this.dependentBeanMap.get(canonicalName); if (dependentBeans == null) &#123; //‰∏∫BeanËÆæÁΩÆ‰æùËµñBean‰ø°ÊÅØ dependentBeans = new LinkedHashSet&lt;String&gt;(8); this.dependentBeanMap.put(canonicalName, dependentBeans); &#125; //ÂêëÂÆπÂô®‰∏≠ÔºöbeanÂêçÁß∞--&gt;ÂÖ®ÈÉ®‰æùËµñBeanÂêçÁß∞ÈõÜÂêàÊ∑ªÂä†BeanÁöÑ‰æùËµñ‰ø°ÊÅØ //Âç≥ÔºåÂ∞ÜBeanÊâÄ‰æùËµñÁöÑBeanÊ∑ªÂä†Âà∞ÂÆπÂô®ÁöÑÈõÜÂêà‰∏≠ dependentBeans.add(dependentBeanName); &#125; //‰ªéÂÆπÂô®‰∏≠ÔºöbeanÂêçÁß∞--&gt;ÊåáÂÆöÂêçÁß∞BeanÁöÑ‰æùËµñBeanÈõÜÂêàÊâæÊü•ÊâæÁªôÂÆöÂêçÁß∞ //BeanÁöÑ‰æùËµñBean synchronized (this.dependenciesForBeanMap) &#123; Set&lt;String&gt; dependenciesForBean = this.dependenciesForBeanMap.get(dependentBeanName); if (dependenciesForBean == null) &#123; dependenciesForBean = new LinkedHashSet&lt;String&gt;(8); this.dependenciesForBeanMap.put(dependentBeanName, dependenciesForBean); &#125; //ÂêëÂÆπÂô®‰∏≠ÔºöbeanÂêçÁß∞--&gt;ÊåáÂÆöBeanÁöÑ‰æùËµñBeanÂêçÁß∞ÈõÜÂêàÊ∑ªÂä†BeanÁöÑ‰æùËµñ‰ø°ÊÅØ //Âç≥ÔºåÂ∞ÜBeanÊâÄ‰æùËµñÁöÑBeanÊ∑ªÂä†Âà∞ÂÆπÂô®ÁöÑÈõÜÂêà‰∏≠ dependenciesForBean.add(canonicalName); &#125; &#125; ÈÄöËøáÂØπautowiringÁöÑÊ∫êÁ†ÅÂàÜÊûêÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåautowiringÁöÑÂÆûÁé∞ËøáÁ®ãÔºö ÂØπBeanÁöÑÂ±ûÊÄßËø≠‰ª£Ë∞ÉÁî®getBeanÊñπÊ≥ïÔºåÂÆåÊàê‰æùËµñBeanÁöÑÂàùÂßãÂåñÂíå‰æùËµñÊ≥®ÂÖ•„ÄÇ Â∞Ü‰æùËµñBeanÁöÑÂ±ûÊÄßÂºïÁî®ËÆæÁΩÆÂà∞Ë¢´‰æùËµñÁöÑBeanÂ±ûÊÄß‰∏ä„ÄÇ Â∞Ü‰æùËµñBeanÁöÑÂêçÁß∞ÂíåË¢´‰æùËµñBeanÁöÑÂêçÁß∞Â≠òÂÇ®Âú®IoCÂÆπÂô®ÁöÑÈõÜÂêà‰∏≠„ÄÇ Spring IoCÂÆπÂô®ÁöÑautowiringÂ±ûÊÄßËá™Âä®‰æùËµñÊ≥®ÂÖ•ÊòØ‰∏Ä‰∏™ÂæàÊñπ‰æøÁöÑÁâπÊÄßÔºåÂèØ‰ª•ÁÆÄÂåñÂºÄÂèëÊó∂ÁöÑÈÖçÁΩÆÔºå‰ΩÜÊòØÂá°ÊòØÈÉΩÊúâ‰∏§Èù¢ÊÄßÔºåËá™Âä®Â±ûÊÄß‰æùËµñÊ≥®ÂÖ•‰πüÊúâ‰∏çË∂≥ÔºåÈ¶ñÂÖàÔºåBeanÁöÑ‰æùËµñÂÖ≥Á≥ªÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠Êó†Ê≥ïÂæàÊ∏ÖÊ•öÂú∞ÁúãÂá∫Êù•ÔºåÂØπ‰∫éÁª¥Êä§ÈÄ†Êàê‰∏ÄÂÆöÂõ∞Èöæ„ÄÇÂÖ∂Ê¨°ÔºåÁî±‰∫éËá™Âä®‰æùËµñÊ≥®ÂÖ•ÊòØSpringÂÆπÂô®Ëá™Âä®ÊâßË°åÁöÑÔºåÂÆπÂô®ÊòØ‰∏ç‰ºöÊô∫ËÉΩÂà§Êñ≠ÁöÑÔºåÂ¶ÇÊûúÈÖçÁΩÆ‰∏çÂΩìÔºåÂ∞Ü‰ºöÂ∏¶Êù•Êó†Ê≥ïÈ¢ÑÊñôÁöÑÂêéÊûúÔºåÊâÄ‰ª•Ëá™Âä®‰æùËµñÊ≥®ÂÖ•ÁâπÊÄßÂú®‰ΩøÁî®Êó∂ËøòÊòØÁªºÂêàËÄÉËôë„ÄÇ]]></content>
      <categories>
        <category>java</category>
        <category>spring</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºà‰∏âÔºâ]]></title>
    <url>%2Fjava%2Fspring%2Fjava%2Fspring%2F3%2F</url>
    <content type="text"><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºà‰∏âÔºâIOCÂÆπÂô®ÁöÑ‰æùËµñÊ≥®ÂÖ•‰æùËµñÊ≥®ÂÖ•ÂèëÁîüÁöÑÊó∂Èó¥ÂΩìSpring IoCÂÆπÂô®ÂÆåÊàê‰∫ÜBeanÂÆö‰πâËµÑÊ∫êÁöÑÂÆö‰Ωç„ÄÅËΩΩÂÖ•ÂíåËß£ÊûêÊ≥®ÂÜå‰ª•ÂêéÔºåIoCÂÆπÂô®‰∏≠Â∑≤ÁªèÁÆ°ÁêÜÁ±ªBeanÂÆö‰πâÁöÑÁõ∏ÂÖ≥Êï∞ÊçÆÔºå‰ΩÜÊòØÊ≠§Êó∂IoCÂÆπÂô®ËøòÊ≤°ÊúâÂØπÊâÄÁÆ°ÁêÜÁöÑBeanËøõË°å‰æùËµñÊ≥®ÂÖ•Ôºå‰æùËµñÊ≥®ÂÖ•Âú®‰ª•‰∏ã‰∏§ÁßçÊÉÖÂÜµÂèëÁîüÔºö Áî®Êà∑Á¨¨‰∏ÄÊ¨°ÈÄöËøágetBeanÊñπÊ≥ïÂêëIoCÂÆπÁ¥¢Ë¶ÅBeanÊó∂ÔºåIoCÂÆπÂô®Ëß¶Âèë‰æùËµñÊ≥®ÂÖ•„ÄÇ ÂΩìÁî®Êà∑Âú®BeanÂÆö‰πâËµÑÊ∫ê‰∏≠‰∏∫ÂÖÉÁ¥†ÈÖçÁΩÆ‰∫Ülazy-initÂ±ûÊÄßÔºåÂç≥ËÆ©ÂÆπÂô®Âú®Ëß£ÊûêÊ≥®ÂÜåBeanÂÆö‰πâÊó∂ËøõË°åÈ¢ÑÂÆû‰æãÂåñÔºåËß¶Âèë‰æùËµñÊ≥®ÂÖ•„ÄÇ BeanFactoryÊé•Âè£ÂÆö‰πâ‰∫ÜSpring IoCÂÆπÂô®ÁöÑÂü∫Êú¨ÂäüËÉΩËßÑËåÉÔºåÊòØSpring IoCÂÆπÂô®ÊâÄÂ∫îÈÅµÂÆàÁöÑÊúÄÂ∫ïÂ±ÇÂíåÊúÄÂü∫Êú¨ÁöÑÁºñÁ®ãËßÑËåÉ„ÄÇBeanFactoryÊé•Âè£‰∏≠ÂÆö‰πâ‰∫ÜÂá†‰∏™getBeanÊñπÊ≥ïÔºåÂ∞±ÊòØÁî®Êà∑ÂêëIoCÂÆπÂô®Á¥¢ÂèñÁÆ°ÁêÜÁöÑBeanÁöÑÊñπÊ≥ïÔºåÊàë‰ª¨ÈÄöËøáÂàÜÊûêÂÖ∂Â≠êÁ±ªÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÔºåÁêÜËß£Spring IoCÂÆπÂô®Âú®Áî®Êà∑Á¥¢ÂèñBeanÊó∂Â¶Ç‰ΩïÂÆåÊàê‰æùËµñÊ≥®ÂÖ•„ÄÇ Âú®BeanFactory‰∏≠Êàë‰ª¨ÁúãÂà∞getBeanÔºàString‚Ä¶ÔºâÂáΩÊï∞ÔºåÂÆÉÁöÑÂÖ∑‰ΩìÂÆûÁé∞Âú®AbstractBeanFactory‰∏≠ AbstractBeanFactoryÈÄöËøágetBeanÂêëIoCÂÆπÂô®Ëé∑ÂèñË¢´ÁÆ°ÁêÜÁöÑBeanAbstractBeanFactoryÁöÑgetBeanÁõ∏ÂÖ≥ÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169//Ëé∑ÂèñIoCÂÆπÂô®‰∏≠ÊåáÂÆöÂêçÁß∞ÁöÑBean public Object getBean(String name) throws BeansException &#123; //doGetBeanÊâçÊòØÁúüÊ≠£ÂêëIoCÂÆπÂô®Ëé∑ÂèñË¢´ÁÆ°ÁêÜBeanÁöÑËøáÁ®ã return doGetBean(name, null, null, false); &#125; //Ëé∑ÂèñIoCÂÆπÂô®‰∏≠ÊåáÂÆöÂêçÁß∞ÂíåÁ±ªÂûãÁöÑBean public &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException &#123; //doGetBeanÊâçÊòØÁúüÊ≠£ÂêëIoCÂÆπÂô®Ëé∑ÂèñË¢´ÁÆ°ÁêÜBeanÁöÑËøáÁ®ã return doGetBean(name, requiredType, null, false); &#125; //Ëé∑ÂèñIoCÂÆπÂô®‰∏≠ÊåáÂÆöÂêçÁß∞ÂíåÂèÇÊï∞ÁöÑBean public Object getBean(String name, Object... args) throws BeansException &#123; //doGetBeanÊâçÊòØÁúüÊ≠£ÂêëIoCÂÆπÂô®Ëé∑ÂèñË¢´ÁÆ°ÁêÜBeanÁöÑËøáÁ®ã return doGetBean(name, null, args, false); &#125; //Ëé∑ÂèñIoCÂÆπÂô®‰∏≠ÊåáÂÆöÂêçÁß∞„ÄÅÁ±ªÂûãÂíåÂèÇÊï∞ÁöÑBean public &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType, Object... args) throws BeansException &#123; //doGetBeanÊâçÊòØÁúüÊ≠£ÂêëIoCÂÆπÂô®Ëé∑ÂèñË¢´ÁÆ°ÁêÜBeanÁöÑËøáÁ®ã return doGetBean(name, requiredType, args, false); &#125; //ÁúüÊ≠£ÂÆûÁé∞ÂêëIoCÂÆπÂô®Ëé∑ÂèñBeanÁöÑÂäüËÉΩÔºå‰πüÊòØËß¶Âèë‰æùËµñÊ≥®ÂÖ•ÂäüËÉΩÁöÑÂú∞Êñπ @SuppressWarnings("unchecked") protected &lt;T&gt; T doGetBean( final String name, final Class&lt;T&gt; requiredType, final Object[] args, boolean typeCheckOnly) throws BeansException &#123; //Ê†πÊçÆÊåáÂÆöÁöÑÂêçÁß∞Ëé∑ÂèñË¢´ÁÆ°ÁêÜBeanÁöÑÂêçÁß∞ÔºåÂâ•Á¶ªÊåáÂÆöÂêçÁß∞‰∏≠ÂØπÂÆπÂô®ÁöÑÁõ∏ÂÖ≥‰æùËµñ //Â¶ÇÊûúÊåáÂÆöÁöÑÊòØÂà´ÂêçÔºåÂ∞ÜÂà´ÂêçËΩ¨Êç¢‰∏∫ËßÑËåÉÁöÑBeanÂêçÁß∞ final String beanName = transformedBeanName(name); Object bean; //ÂÖà‰ªéÁºìÂ≠ò‰∏≠ÂèñÊòØÂê¶Â∑≤ÁªèÊúâË¢´ÂàõÂª∫ËøáÁöÑÂçïÊÄÅÁ±ªÂûãÁöÑBeanÔºåÂØπ‰∫éÂçïÊÄÅÊ®°ÂºèÁöÑBeanÊï¥ //‰∏™IoCÂÆπÂô®‰∏≠Âè™ÂàõÂª∫‰∏ÄÊ¨°Ôºå‰∏çÈúÄË¶ÅÈáçÂ§çÂàõÂª∫ Object sharedInstance = getSingleton(beanName); //IoCÂÆπÂô®ÂàõÂª∫ÂçïÊÄÅÊ®°ÂºèBeanÂÆû‰æãÂØπË±° if (sharedInstance != null &amp;&amp; args == null) &#123; if (logger.isDebugEnabled()) &#123; //Â¶ÇÊûúÊåáÂÆöÂêçÁß∞ÁöÑBeanÂú®ÂÆπÂô®‰∏≠Â∑≤ÊúâÂçïÊÄÅÊ®°ÂºèÁöÑBeanË¢´ÂàõÂª∫ÔºåÁõ¥Êé•ËøîÂõû //Â∑≤ÁªèÂàõÂª∫ÁöÑBean if (isSingletonCurrentlyInCreation(beanName)) &#123; logger.debug("Returning eagerly cached instance of singleton bean '" + beanName + "' that is not fully initialized yet - a consequence of a circular reference"); &#125; else &#123; logger.debug("Returning cached instance of singleton bean '" + beanName + "'"); &#125; &#125; //Ëé∑ÂèñÁªôÂÆöBeanÁöÑÂÆû‰æãÂØπË±°Ôºå‰∏ªË¶ÅÊòØÂÆåÊàêFactoryBeanÁöÑÁõ∏ÂÖ≥Â§ÑÁêÜ //Ê≥®ÊÑèÔºöBeanFactoryÊòØÁÆ°ÁêÜÂÆπÂô®‰∏≠BeanÁöÑÂ∑•ÂéÇÔºåËÄåFactoryBeanÊòØ //ÂàõÂª∫ÂàõÂª∫ÂØπË±°ÁöÑÂ∑•ÂéÇBeanÔºå‰∏§ËÄÖ‰πãÈó¥ÊúâÂå∫Âà´ bean = getObjectForBeanInstance(sharedInstance, name, beanName, null); &#125; else &#123;//ÁºìÂ≠òÊ≤°ÊúâÊ≠£Âú®ÂàõÂª∫ÁöÑÂçïÊÄÅÊ®°ÂºèBean //ÁºìÂ≠ò‰∏≠Â∑≤ÁªèÊúâÂ∑≤ÁªèÂàõÂª∫ÁöÑÂéüÂûãÊ®°ÂºèBeanÔºå‰ΩÜÊòØÁî±‰∫éÂæ™ÁéØÂºïÁî®ÁöÑÈóÆÈ¢òÂØºËá¥ÂÆû //‰æãÂåñÂØπË±°Â§±Ë¥• if (isPrototypeCurrentlyInCreation(beanName)) &#123; throw new BeanCurrentlyInCreationException(beanName); &#125; //ÂØπIoCÂÆπÂô®‰∏≠ÊòØÂê¶Â≠òÂú®ÊåáÂÆöÂêçÁß∞ÁöÑBeanDefinitionËøõË°åÊ£ÄÊü•ÔºåÈ¶ñÂÖàÊ£ÄÊü•ÊòØÂê¶ //ËÉΩÂú®ÂΩìÂâçÁöÑBeanFactory‰∏≠Ëé∑ÂèñÁöÑÊâÄÈúÄË¶ÅÁöÑBeanÔºåÂ¶ÇÊûú‰∏çËÉΩÂàôÂßîÊâòÂΩìÂâçÂÆπÂô® //ÁöÑÁà∂Á∫ßÂÆπÂô®ÂéªÊü•ÊâæÔºåÂ¶ÇÊûúËøòÊòØÊâæ‰∏çÂà∞ÂàôÊ≤øÁùÄÂÆπÂô®ÁöÑÁªßÊâø‰ΩìÁ≥ªÂêëÁà∂Á∫ßÂÆπÂô®Êü•Êâæ BeanFactory parentBeanFactory = getParentBeanFactory(); //ÂΩìÂâçÂÆπÂô®ÁöÑÁà∂Á∫ßÂÆπÂô®Â≠òÂú®Ôºå‰∏îÂΩìÂâçÂÆπÂô®‰∏≠‰∏çÂ≠òÂú®ÊåáÂÆöÂêçÁß∞ÁöÑBean if (parentBeanFactory != null &amp;&amp; !containsBeanDefinition(beanName)) &#123; //Ëß£ÊûêÊåáÂÆöBeanÂêçÁß∞ÁöÑÂéüÂßãÂêçÁß∞ String nameToLookup = originalBeanName(name); if (args != null) &#123; //ÂßîÊ¥æÁà∂Á∫ßÂÆπÂô®Ê†πÊçÆÊåáÂÆöÂêçÁß∞ÂíåÊòæÂºèÁöÑÂèÇÊï∞Êü•Êâæ return (T) parentBeanFactory.getBean(nameToLookup, args); &#125; else &#123; //ÂßîÊ¥æÁà∂Á∫ßÂÆπÂô®Ê†πÊçÆÊåáÂÆöÂêçÁß∞ÂíåÁ±ªÂûãÊü•Êâæ return parentBeanFactory.getBean(nameToLookup, requiredType); &#125; &#125; //ÂàõÂª∫ÁöÑBeanÊòØÂê¶ÈúÄË¶ÅËøõË°åÁ±ªÂûãÈ™åËØÅÔºå‰∏ÄËà¨‰∏çÈúÄË¶Å if (!typeCheckOnly) &#123; //ÂêëÂÆπÂô®Ê†áËÆ∞ÊåáÂÆöÁöÑBeanÂ∑≤ÁªèË¢´ÂàõÂª∫ markBeanAsCreated(beanName); &#125; //Ê†πÊçÆÊåáÂÆöBeanÂêçÁß∞Ëé∑ÂèñÂÖ∂Áà∂Á∫ßÁöÑBeanÂÆö‰πâÔºå‰∏ªË¶ÅËß£ÂÜ≥BeanÁªßÊâøÊó∂Â≠êÁ±ª //ÂêàÂπ∂Áà∂Á±ªÂÖ¨ÂÖ±Â±ûÊÄßÈóÆÈ¢ò final RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName); checkMergedBeanDefinition(mbd, beanName, args); //Ëé∑ÂèñÂΩìÂâçBeanÊâÄÊúâ‰æùËµñBeanÁöÑÂêçÁß∞ String[] dependsOn = mbd.getDependsOn(); //Â¶ÇÊûúÂΩìÂâçBeanÊúâ‰æùËµñBean if (dependsOn != null) &#123; for (String dependsOnBean : dependsOn) &#123; //ÈÄíÂΩíË∞ÉÁî®getBeanÊñπÊ≥ïÔºåËé∑ÂèñÂΩìÂâçBeanÁöÑ‰æùËµñBean getBean(dependsOnBean); //ÊääË¢´‰æùËµñBeanÊ≥®ÂÜåÁªôÂΩìÂâç‰æùËµñÁöÑBean registerDependentBean(dependsOnBean, beanName); &#125; &#125; //ÂàõÂª∫ÂçïÊÄÅÊ®°ÂºèBeanÁöÑÂÆû‰æãÂØπË±° if (mbd.isSingleton()) &#123; //ËøôÈáå‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂåøÂêçÂÜÖÈÉ®Á±ªÔºåÂàõÂª∫BeanÂÆû‰æãÂØπË±°ÔºåÂπ∂‰∏îÊ≥®ÂÜåÁªôÊâÄ‰æùËµñÁöÑÂØπË±° sharedInstance = getSingleton(beanName, new ObjectFactory() &#123; public Object getObject() throws BeansException &#123; try &#123; //ÂàõÂª∫‰∏Ä‰∏™ÊåáÂÆöBeanÂÆû‰æãÂØπË±°ÔºåÂ¶ÇÊûúÊúâÁà∂Á∫ßÁªßÊâøÔºåÂàôÂêàÂπ∂Â≠ê//Á±ªÂíåÁà∂Á±ªÁöÑÂÆö‰πâ return createBean(beanName, mbd, args); &#125; catch (BeansException ex) &#123; //ÊòæÂºèÂú∞‰ªéÂÆπÂô®ÂçïÊÄÅÊ®°ÂºèBeanÁºìÂ≠ò‰∏≠Ê∏ÖÈô§ÂÆû‰æãÂØπË±° destroySingleton(beanName); throw ex; &#125; &#125; &#125;); //Ëé∑ÂèñÁªôÂÆöBeanÁöÑÂÆû‰æãÂØπË±° bean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd); &#125; //IoCÂÆπÂô®ÂàõÂª∫ÂéüÂûãÊ®°ÂºèBeanÂÆû‰æãÂØπË±° else if (mbd.isPrototype()) &#123; //ÂéüÂûãÊ®°Âºè(Prototype)ÊòØÊØèÊ¨°ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂØπË±° Object prototypeInstance = null; try &#123; //ÂõûË∞ÉbeforePrototypeCreationÊñπÊ≥ïÔºåÈªòËÆ§ÁöÑÂäüËÉΩÊòØÊ≥®ÂÜåÂΩìÂâçÂàõ//Âª∫ÁöÑÂéüÂûãÂØπË±° beforePrototypeCreation(beanName); //ÂàõÂª∫ÊåáÂÆöBeanÂØπË±°ÂÆû‰æã prototypeInstance = createBean(beanName, mbd, args); &#125; finally &#123; //ÂõûË∞ÉafterPrototypeCreationÊñπÊ≥ïÔºåÈªòËÆ§ÁöÑÂäüËÉΩÂëäËØâIoCÂÆπÂô®Êåá//ÂÆöBeanÁöÑÂéüÂûãÂØπË±°‰∏çÂÜçÂàõÂª∫‰∫Ü afterPrototypeCreation(beanName); &#125; //Ëé∑ÂèñÁªôÂÆöBeanÁöÑÂÆû‰æãÂØπË±° bean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd); &#125; //Ë¶ÅÂàõÂª∫ÁöÑBeanÊó¢‰∏çÊòØÂçïÊÄÅÊ®°ÂºèÔºå‰πü‰∏çÊòØÂéüÂûãÊ®°ÂºèÔºåÂàôÊ†πÊçÆBeanÂÆö‰πâËµÑÊ∫ê‰∏≠ //ÈÖçÁΩÆÁöÑÁîüÂëΩÂë®ÊúüËåÉÂõ¥ÔºåÈÄâÊã©ÂÆû‰æãÂåñBeanÁöÑÂêàÈÄÇÊñπÊ≥ïÔºåËøôÁßçÂú®WebÂ∫îÁî®Á®ãÂ∫è‰∏≠ //ÊØîËæÉÂ∏∏Áî®ÔºåÂ¶ÇÔºörequest„ÄÅsession„ÄÅapplicationÁ≠âÁîüÂëΩÂë®Êúü else &#123; String scopeName = mbd.getScope(); final Scope scope = this.scopes.get(scopeName); //BeanÂÆö‰πâËµÑÊ∫ê‰∏≠Ê≤°ÊúâÈÖçÁΩÆÁîüÂëΩÂë®ÊúüËåÉÂõ¥ÔºåÂàôBeanÂÆö‰πâ‰∏çÂêàÊ≥ï if (scope == null) &#123; throw new IllegalStateException("No Scope registered for scope '" + scopeName + "'"); &#125; try &#123; //ËøôÈáåÂèà‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂåøÂêçÂÜÖÈÉ®Á±ªÔºåËé∑Âèñ‰∏Ä‰∏™ÊåáÂÆöÁîüÂëΩÂë®ÊúüËåÉÂõ¥ÁöÑÂÆû‰æã Object scopedInstance = scope.get(beanName, new ObjectFactory() &#123; public Object getObject() throws BeansException &#123; beforePrototypeCreation(beanName); try &#123; return createBean(beanName, mbd, args); &#125; finally &#123; afterPrototypeCreation(beanName); &#125; &#125; &#125;); //Ëé∑ÂèñÁªôÂÆöBeanÁöÑÂÆû‰æãÂØπË±° bean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd); &#125; catch (IllegalStateException ex) &#123; throw new BeanCreationException(beanName, "Scope '" + scopeName + "' is not active for the current thread; " + "consider defining a scoped proxy for this bean if you intend to refer to it from a singleton", ex); &#125; &#125; &#125; //ÂØπÂàõÂª∫ÁöÑBeanÂÆû‰æãÂØπË±°ËøõË°åÁ±ªÂûãÊ£ÄÊü• if (requiredType != null &amp;&amp; bean != null &amp;&amp; !requiredType.isAssignableFrom(bean.getClass())) &#123; throw new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass()); &#125; return (T) bean; &#125; ÈÄöËøá‰∏äÈù¢ÂØπÂêëIoCÂÆπÂô®Ëé∑ÂèñBeanÊñπÊ≥ïÁöÑÂàÜÊûêÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Âú®Spring‰∏≠ÔºåÂ¶ÇÊûúBeanÂÆö‰πâÁöÑÂçïÊÄÅÊ®°Âºè(Singleton)ÔºåÂàôÂÆπÂô®Âú®ÂàõÂª∫‰πãÂâçÂÖà‰ªéÁºìÂ≠ò‰∏≠Êü•ÊâæÔºå‰ª•Á°Æ‰øùÊï¥‰∏™ÂÆπÂô®‰∏≠Âè™Â≠òÂú®‰∏Ä‰∏™ÂÆû‰æãÂØπË±°„ÄÇÂ¶ÇÊûúBeanÂÆö‰πâÁöÑÊòØÂéüÂûãÊ®°Âºè(Prototype)ÔºåÂàôÂÆπÂô®ÊØèÊ¨°ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂÆû‰æãÂØπË±°„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåBeanÂÆö‰πâËøòÂèØ‰ª•Êâ©Â±ï‰∏∫ÊåáÂÆöÂÖ∂ÁîüÂëΩÂë®ÊúüËåÉÂõ¥„ÄÇ ‰∏äÈù¢ÁöÑÊ∫êÁ†ÅÂè™ÊòØÂÆö‰πâ‰∫ÜÊ†πÊçÆBeanÂÆö‰πâÁöÑÊ®°ÂºèÔºåÈááÂèñÁöÑ‰∏çÂêåÂàõÂª∫BeanÂÆû‰æãÂØπË±°ÁöÑÁ≠ñÁï•ÔºåÂÖ∑‰ΩìÁöÑBeanÂÆû‰æãÂØπË±°ÁöÑÂàõÂª∫ËøáÁ®ãÁî±ÂÆûÁé∞‰∫ÜObejctFactoryÊé•Âè£ÁöÑÂåøÂêçÂÜÖÈÉ®Á±ªÁöÑcreateBeanÊñπÊ≥ïÂÆåÊàêÔºåObejctFactory‰ΩøÁî®ÂßîÊ¥æÊ®°ÂºèÔºåÂÖ∑‰ΩìÁöÑBeanÂÆû‰æãÂàõÂª∫ËøáÁ®ã‰∫§Áî±ÂÖ∂ÂÆûÁé∞Á±ªAbstractAutowireCapableBeanFactoryÂÆåÊàêÔºåÊàë‰ª¨ÁªßÁª≠ÂàÜÊûêAbstractAutowireCapableBeanFactoryÁöÑcreateBeanÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÔºåÁêÜËß£ÂÖ∂ÂàõÂª∫BeanÂÆû‰æãÁöÑÂÖ∑‰ΩìÂÆûÁé∞ËøáÁ®ã„ÄÇ AbstractAutowireCapableBeanFactoryÂàõÂª∫BeanÂÆû‰æãÂØπË±°AbstractAutowireCapableBeanFactoryÁ±ªÂÆûÁé∞‰∫ÜObejctFactoryÊé•Âè£ÔºåÂàõÂª∫ÂÆπÂô®ÊåáÂÆöÁöÑBeanÂÆû‰æãÂØπË±°ÔºåÂêåÊó∂ËøòÂØπÂàõÂª∫ÁöÑBeanÂÆû‰æãÂØπË±°ËøõË°åÂàùÂßãÂåñÂ§ÑÁêÜ„ÄÇÂÖ∂ÂàõÂª∫BeanÂÆû‰æãÂØπË±°ÁöÑÊñπÊ≥ïÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131//ÂàõÂª∫BeanÂÆû‰æãÂØπË±° protected Object createBean(final String beanName, final RootBeanDefinition mbd, final Object[] args) throws BeanCreationException &#123; if (logger.isDebugEnabled()) &#123; logger.debug("Creating instance of bean '" + beanName + "'"); &#125; //Âà§Êñ≠ÈúÄË¶ÅÂàõÂª∫ÁöÑBeanÊòØÂê¶ÂèØ‰ª•ÂÆû‰æãÂåñÔºåÂç≥ÊòØÂê¶ÂèØ‰ª•ÈÄöËøáÂΩìÂâçÁöÑÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩ resolveBeanClass(mbd, beanName); //Ê†°È™åÂíåÂáÜÂ§áBean‰∏≠ÁöÑÊñπÊ≥ïË¶ÜÁõñ try &#123; mbd.prepareMethodOverrides(); &#125; catch (BeanDefinitionValidationException ex) &#123; throw new BeanDefinitionStoreException(mbd.getResourceDescription(), beanName, "Validation of method overrides failed", ex); &#125; try &#123; //Â¶ÇÊûúBeanÈÖçÁΩÆ‰∫ÜÂàùÂßãÂåñÂâçÂíåÂàùÂßãÂåñÂêéÁöÑÂ§ÑÁêÜÂô®ÔºåÂàôËØïÂõæËøîÂõû‰∏Ä‰∏™ÈúÄË¶ÅÂàõÂª∫//BeanÁöÑ‰ª£ÁêÜÂØπË±° Object bean = resolveBeforeInstantiation(beanName, mbd); if (bean != null) &#123; return bean; &#125; &#125; catch (Throwable ex) &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, "BeanPostProcessor before instantiation of bean failed", ex); &#125; //ÂàõÂª∫BeanÁöÑÂÖ•Âè£ Object beanInstance = doCreateBean(beanName, mbd, args); if (logger.isDebugEnabled()) &#123; logger.debug("Finished creating instance of bean '" + beanName + "'"); &#125; return beanInstance; &#125; //ÁúüÊ≠£ÂàõÂª∫BeanÁöÑÊñπÊ≥ï protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final Object[] args) &#123; //Â∞ÅË£ÖË¢´ÂàõÂª∫ÁöÑBeanÂØπË±° BeanWrapper instanceWrapper = null; if (mbd.isSingleton())&#123;//ÂçïÊÄÅÊ®°ÂºèÁöÑBeanÔºåÂÖà‰ªéÂÆπÂô®‰∏≠ÁºìÂ≠ò‰∏≠Ëé∑ÂèñÂêåÂêçBean instanceWrapper = this.factoryBeanInstanceCache.remove(beanName); &#125; if (instanceWrapper == null) &#123; //ÂàõÂª∫ÂÆû‰æãÂØπË±° instanceWrapper = createBeanInstance(beanName, mbd, args); &#125; final Object bean = (instanceWrapper != null ? instanceWrapper.getWrappedInstance() : null); //Ëé∑ÂèñÂÆû‰æãÂåñÂØπË±°ÁöÑÁ±ªÂûã Class beanType = (instanceWrapper != null ? instanceWrapper.getWrappedClass() : null); //Ë∞ÉÁî®PostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô® synchronized (mbd.postProcessingLock) &#123; if (!mbd.postProcessed) &#123; applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName); mbd.postProcessed = true; &#125; &#125; // Eagerly cache singletons to be able to resolve circular references //ÂêëÂÆπÂô®‰∏≠ÁºìÂ≠òÂçïÊÄÅÊ®°ÂºèÁöÑBeanÂØπË±°Ôºå‰ª•Èò≤Âæ™ÁéØÂºïÁî® boolean earlySingletonExposure = (mbd.isSingleton() &amp;&amp; this.allowCircularReferences &amp;&amp; isSingletonCurrentlyInCreation(beanName)); if (earlySingletonExposure) &#123; if (logger.isDebugEnabled()) &#123; logger.debug("Eagerly caching bean '" + beanName + "' to allow for resolving potential circular references"); &#125; //ËøôÈáåÊòØ‰∏Ä‰∏™ÂåøÂêçÂÜÖÈÉ®Á±ªÔºå‰∏∫‰∫ÜÈò≤Ê≠¢Âæ™ÁéØÂºïÁî®ÔºåÂ∞ΩÊó©ÊåÅÊúâÂØπË±°ÁöÑÂºïÁî® addSingletonFactory(beanName, new ObjectFactory() &#123; public Object getObject() throws BeansException &#123; return getEarlyBeanReference(beanName, mbd, bean); &#125; &#125;); &#125; //BeanÂØπË±°ÁöÑÂàùÂßãÂåñÔºå‰æùËµñÊ≥®ÂÖ•Âú®Ê≠§Ëß¶Âèë //Ëøô‰∏™exposedObjectÂú®ÂàùÂßãÂåñÂÆåÊàê‰πãÂêéËøîÂõû‰Ωú‰∏∫‰æùËµñÊ≥®ÂÖ•ÂÆåÊàêÂêéÁöÑBean Object exposedObject = bean; try &#123; //Â∞ÜBeanÂÆû‰æãÂØπË±°Â∞ÅË£ÖÔºåÂπ∂‰∏îBeanÂÆö‰πâ‰∏≠ÈÖçÁΩÆÁöÑÂ±ûÊÄßÂÄºËµãÂÄºÁªôÂÆû‰æãÂØπË±° populateBean(beanName, mbd, instanceWrapper); if (exposedObject != null) &#123; //ÂàùÂßãÂåñBeanÂØπË±° exposedObject = initializeBean(beanName, exposedObject, mbd); &#125; &#125; catch (Throwable ex) &#123; if (ex instanceof BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123; throw (BeanCreationException) ex; &#125; else &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, "Initialization of bean failed", ex); &#125; &#125; if (earlySingletonExposure) &#123; //Ëé∑ÂèñÊåáÂÆöÂêçÁß∞ÁöÑÂ∑≤Ê≥®ÂÜåÁöÑÂçïÊÄÅÊ®°ÂºèBeanÂØπË±° Object earlySingletonReference = getSingleton(beanName, false); if (earlySingletonReference != null) &#123; //Ê†πÊçÆÂêçÁß∞Ëé∑ÂèñÁöÑ‰ª•Ê≥®ÂÜåÁöÑBeanÂíåÊ≠£Âú®ÂÆû‰æãÂåñÁöÑBeanÊòØÂêå‰∏Ä‰∏™ if (exposedObject == bean) &#123; //ÂΩìÂâçÂÆû‰æãÂåñÁöÑBeanÂàùÂßãÂåñÂÆåÊàê exposedObject = earlySingletonReference; &#125; //ÂΩìÂâçBean‰æùËµñÂÖ∂‰ªñBeanÔºåÂπ∂‰∏îÂΩìÂèëÁîüÂæ™ÁéØÂºïÁî®Êó∂‰∏çÂÖÅËÆ∏Êñ∞ÂàõÂª∫ÂÆû‰æãÂØπË±° else if (!this.allowRawInjectionDespiteWrapping &amp;&amp; hasDependentBean(beanName)) &#123; String[] dependentBeans = getDependentBeans(beanName); Set&lt;String&gt; actualDependentBeans = new LinkedHashSet&lt;String&gt;(dependentBeans.length); //Ëé∑ÂèñÂΩìÂâçBeanÊâÄ‰æùËµñÁöÑÂÖ∂‰ªñBean for (String dependentBean : dependentBeans) &#123; //ÂØπ‰æùËµñBeanËøõË°åÁ±ªÂûãÊ£ÄÊü• if (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123; actualDependentBeans.add(dependentBean); &#125; &#125; if (!actualDependentBeans.isEmpty()) &#123; throw new BeanCurrentlyInCreationException(beanName, "Bean with name '" + beanName + "' has been injected into other beans [" + StringUtils.collectionToCommaDelimitedString(actualDependentBeans) + "] in its raw version as part of a circular reference, but has eventually been " + "wrapped. This means that said other beans do not use the final version of the " + "bean. This is often the result of over-eager type matching - consider using " + "'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example."); &#125; &#125; &#125; &#125; //Ê≥®ÂÜåÂÆåÊàê‰æùËµñÊ≥®ÂÖ•ÁöÑBean try &#123; registerDisposableBeanIfNecessary(beanName, bean, mbd); &#125; catch (BeanDefinitionValidationException ex) &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, "Invalid destruction signature", ex); &#125; return exposedObject; &#125; ÈÄöËøáÂØπÊñπÊ≥ïÊ∫êÁ†ÅÁöÑÂàÜÊûêÔºåÊàë‰ª¨ÁúãÂà∞ÂÖ∑‰ΩìÁöÑ‰æùËµñÊ≥®ÂÖ•ÂÆûÁé∞Âú®‰ª•‰∏ã‰∏§‰∏™ÊñπÊ≥ï‰∏≠Ôºö createBeanInstanceÔºöÁîüÊàêBeanÊâÄÂåÖÂê´ÁöÑjavaÂØπË±°ÂÆû‰æã„ÄÇ populateBean ÔºöÂØπBeanÂ±ûÊÄßÁöÑ‰æùËµñÊ≥®ÂÖ•ËøõË°åÂ§ÑÁêÜ„ÄÇ ‰∏ãÈù¢ÁªßÁª≠ÂàÜÊûêËøô‰∏§‰∏™ÊñπÊ≥ïÁöÑ‰ª£Á†ÅÂÆûÁé∞„ÄÇ createBeanInstanceÊñπÊ≥ïÂàõÂª∫BeanÁöÑjavaÂÆû‰æãÂØπË±°Âú®createBeanInstanceÊñπÊ≥ï‰∏≠ÔºåÊ†πÊçÆÊåáÂÆöÁöÑÂàùÂßãÂåñÁ≠ñÁï•Ôºå‰ΩøÁî®ÈùôÊÄÅÂ∑•ÂéÇ„ÄÅÂ∑•ÂéÇÊñπÊ≥ïÊàñËÄÖÂÆπÂô®ÁöÑËá™Âä®Ë£ÖÈÖçÁâπÊÄßÁîüÊàêjavaÂÆû‰æãÂØπË±°ÔºåÂàõÂª∫ÂØπË±°ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//ÂàõÂª∫BeanÁöÑÂÆû‰æãÂØπË±° protected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, Object[] args) &#123; //Ê£ÄÊü•Á°ÆËÆ§BeanÊòØÂèØÂÆû‰æãÂåñÁöÑ Class beanClass = resolveBeanClass(mbd, beanName); //‰ΩøÁî®Â∑•ÂéÇÊñπÊ≥ïÂØπBeanËøõË°åÂÆû‰æãÂåñ if (beanClass != null &amp;&amp; !Modifier.isPublic(beanClass.getModifiers()) &amp;&amp; !mbd.isNonPublicAccessAllowed()) &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, "Bean class isn't public, and non-public access not allowed: " + beanClass.getName()); &#125; if (mbd.getFactoryMethodName() != null) &#123; //Ë∞ÉÁî®Â∑•ÂéÇÊñπÊ≥ïÂÆû‰æãÂåñ return instantiateUsingFactoryMethod(beanName, mbd, args); &#125; //‰ΩøÁî®ÂÆπÂô®ÁöÑËá™Âä®Ë£ÖÈÖçÊñπÊ≥ïËøõË°åÂÆû‰æãÂåñ boolean resolved = false; boolean autowireNecessary = false; if (args == null) &#123; synchronized (mbd.constructorArgumentLock) &#123; if (mbd.resolvedConstructorOrFactoryMethod != null) &#123; resolved = true; autowireNecessary = mbd.constructorArgumentsResolved; &#125; &#125; &#125; if (resolved) &#123; if (autowireNecessary) &#123; //ÈÖçÁΩÆ‰∫ÜËá™Âä®Ë£ÖÈÖçÂ±ûÊÄßÔºå‰ΩøÁî®ÂÆπÂô®ÁöÑËá™Âä®Ë£ÖÈÖçÂÆû‰æãÂåñ //ÂÆπÂô®ÁöÑËá™Âä®Ë£ÖÈÖçÊòØÊ†πÊçÆÂèÇÊï∞Á±ªÂûãÂåπÈÖçBeanÁöÑÊûÑÈÄ†ÊñπÊ≥ï return autowireConstructor(beanName, mbd, null, null); &#125; else &#123; //‰ΩøÁî®ÈªòËÆ§ÁöÑÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂÆû‰æãÂåñ return instantiateBean(beanName, mbd); &#125; &#125; //‰ΩøÁî®BeanÁöÑÊûÑÈÄ†ÊñπÊ≥ïËøõË°åÂÆû‰æãÂåñ Constructor[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName); if (ctors != null || mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_CONSTRUCTOR || mbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args)) &#123; //‰ΩøÁî®ÂÆπÂô®ÁöÑËá™Âä®Ë£ÖÈÖçÁâπÊÄßÔºåË∞ÉÁî®ÂåπÈÖçÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂÆû‰æãÂåñ return autowireConstructor(beanName, mbd, ctors, args); &#125; //‰ΩøÁî®ÈªòËÆ§ÁöÑÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂÆû‰æãÂåñ return instantiateBean(beanName, mbd); &#125; //‰ΩøÁî®ÈªòËÆ§ÁöÑÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂÆû‰æãÂåñBeanÂØπË±° protected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) &#123; try &#123; Object beanInstance; final BeanFactory parent = this; //Ëé∑ÂèñÁ≥ªÁªüÁöÑÂÆâÂÖ®ÁÆ°ÁêÜÊé•Âè£ÔºåJDKÊ†áÂáÜÁöÑÂÆâÂÖ®ÁÆ°ÁêÜAPI if (System.getSecurityManager() != null) &#123; //ËøôÈáåÊòØ‰∏Ä‰∏™ÂåøÂêçÂÜÖÁΩÆÁ±ªÔºåÊ†πÊçÆÂÆû‰æãÂåñÁ≠ñÁï•ÂàõÂª∫ÂÆû‰æãÂØπË±° beanInstance = AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123; public Object run() &#123; return getInstantiationStrategy().instantiate(mbd, beanName, parent); &#125; &#125;, getAccessControlContext()); &#125; else &#123; //Â∞ÜÂÆû‰æãÂåñÁöÑÂØπË±°Â∞ÅË£ÖËµ∑Êù• beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent); &#125; BeanWrapper bw = new BeanWrapperImpl(beanInstance); initBeanWrapper(bw); return bw; &#125; catch (Throwable ex) &#123; throw new BeanCreationException(mbd.getResourceDescription(), beanName, "Instantiation of bean failed", ex); &#125; &#125; ÁªèËøáÂØπ‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂàÜÊûêÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÂØπ‰ΩøÁî®Â∑•ÂéÇÊñπÊ≥ïÂíåËá™Âä®Ë£ÖÈÖçÁâπÊÄßÁöÑBeanÁöÑÂÆû‰æãÂåñÁõ∏ÂΩìÊØîËæÉÊ∏ÖÊ•öÔºåË∞ÉÁî®Áõ∏Â∫îÁöÑÂ∑•ÂéÇÊñπÊ≥ïÊàñËÄÖÂèÇÊï∞ÂåπÈÖçÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂç≥ÂèØÂÆåÊàêÂÆû‰æãÂåñÂØπË±°ÁöÑÂ∑•‰ΩúÔºå‰ΩÜÊòØÂØπ‰∫éÊàë‰ª¨ÊúÄÂ∏∏‰ΩøÁî®ÁöÑÈªòËÆ§Êó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂ∞±ÈúÄË¶Å‰ΩøÁî®Áõ∏Â∫îÁöÑÂàùÂßãÂåñÁ≠ñÁï•(JDKÁöÑÂèçÂ∞ÑÊú∫Âà∂ÊàñËÄÖCGLIB)Êù•ËøõË°åÂàùÂßãÂåñ‰∫ÜÔºåÂú®ÊñπÊ≥ïgetInstantiationStrategy().instantiate‰∏≠Â∞±ÂÖ∑‰ΩìÂÆûÁé∞Á±ª‰ΩøÁî®ÂàùÂßãÁ≠ñÁï•ÂÆû‰æãÂåñÂØπË±°„ÄÇ SimpleInstantiationStrategyÁ±ª‰ΩøÁî®ÈªòËÆ§ÁöÑÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂàõÂª∫BeanÂÆû‰æãÂåñÂØπË±°Âú®‰ΩøÁî®ÈªòËÆ§ÁöÑÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÂàõÂª∫BeanÁöÑÂÆû‰æãÂåñÂØπË±°Êó∂ÔºåÊñπÊ≥ïgetInstantiationStrategy().instantiateË∞ÉÁî®‰∫ÜSimpleInstantiationStrategyÁ±ª‰∏≠ÁöÑÂÆû‰æãÂåñBeanÁöÑÊñπÊ≥ïÔºåÂÖ∂Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142//‰ΩøÁî®ÂàùÂßãÂåñÁ≠ñÁï•ÂÆû‰æãÂåñBeanÂØπË±° public Object instantiate(RootBeanDefinition beanDefinition, String beanName, BeanFactory owner) &#123; //Â¶ÇÊûúBeanÂÆö‰πâ‰∏≠Ê≤°ÊúâÊñπÊ≥ïË¶ÜÁõñÔºåÂàôÂ∞±‰∏çÈúÄË¶ÅCGLIBÁà∂Á±ªÁ±ªÁöÑÊñπÊ≥ï if (beanDefinition.getMethodOverrides().isEmpty()) &#123; Constructor&lt;?&gt; constructorToUse; synchronized (beanDefinition.constructorArgumentLock) &#123; //Ëé∑ÂèñÂØπË±°ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÊàñÂ∑•ÂéÇÊñπÊ≥ï constructorToUse = (Constructor&lt;?&gt;) beanDefinition.resolvedConstructorOrFactoryMethod; //Â¶ÇÊûúÊ≤°ÊúâÊûÑÈÄ†ÊñπÊ≥ï‰∏îÊ≤°ÊúâÂ∑•ÂéÇÊñπÊ≥ï if (constructorToUse == null) &#123; //‰ΩøÁî®JDKÁöÑÂèçÂ∞ÑÊú∫Âà∂ÔºåÂà§Êñ≠Ë¶ÅÂÆû‰æãÂåñÁöÑBeanÊòØÂê¶ÊòØÊé•Âè£ final Class clazz = beanDefinition.getBeanClass(); if (clazz.isInterface()) &#123; throw new BeanInstantiationException(clazz, "Specified class is an interface"); &#125; try &#123; if (System.getSecurityManager() != null) &#123; //ËøôÈáåÊòØ‰∏Ä‰∏™ÂåøÂêçÂÜÖÁΩÆÁ±ªÔºå‰ΩøÁî®ÂèçÂ∞ÑÊú∫Âà∂Ëé∑ÂèñBeanÁöÑÊûÑÈÄ†ÊñπÊ≥ï constructorToUse = AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Constructor&gt;() &#123; public Constructor run() throws Exception &#123; return clazz.getDeclaredConstructor((Class[]) null); &#125; &#125;); &#125; else &#123; constructorToUse = clazz.getDeclaredConstructor((Class[]) null); &#125; beanDefinition.resolvedConstructorOrFactoryMethod = constructorToUse; &#125; catch (Exception ex) &#123; throw new BeanInstantiationException(clazz, "No default constructor found", ex); &#125; &#125; &#125; //‰ΩøÁî®BeanUtilsÂÆû‰æãÂåñÔºåÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂Ë∞ÉÁî®‚ÄùÊûÑÈÄ†ÊñπÊ≥ï.newInstance(arg)‚ÄùÊù•ËøõË°åÂÆû‰æãÂåñ return BeanUtils.instantiateClass(constructorToUse); &#125; else &#123; //‰ΩøÁî®CGLIBÊù•ÂÆû‰æãÂåñÂØπË±° return instantiateWithMethodInjection(beanDefinition, beanName, owner); &#125; &#125; ÈÄöËøá‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂàÜÊûêÔºåÊàë‰ª¨ÁúãÂà∞‰∫ÜÂ¶ÇÊûúBeanÊúâÊñπÊ≥ïË¢´Ë¶ÜÁõñ‰∫ÜÔºåÂàô‰ΩøÁî®JDKÁöÑÂèçÂ∞ÑÊú∫Âà∂ËøõË°åÂÆû‰æãÂåñÔºåÂê¶ÂàôÔºå‰ΩøÁî®CGLIBËøõË°åÂÆû‰æãÂåñ„ÄÇ instantiateWithMethodInjectionÊñπÊ≥ïË∞ÉÁî®SimpleInstantiationStrategyÁöÑÂ≠êÁ±ªCglibSubclassingInstantiationStrategy‰ΩøÁî®CGLIBÊù•ËøõË°åÂàùÂßãÂåñÔºåÂÖ∂Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617//‰ΩøÁî®CGLIBËøõË°åBeanÂØπË±°ÂÆû‰æãÂåñ public Object instantiate(Constructor ctor, Object[] args) &#123; //CGLIB‰∏≠ÁöÑÁ±ª Enhancer enhancer = new Enhancer(); //Â∞ÜBeanÊú¨Ë∫´‰Ωú‰∏∫ÂÖ∂Âü∫Á±ª enhancer.setSuperclass(this.beanDefinition.getBeanClass()); enhancer.setCallbackFilter(new CallbackFilterImpl()); enhancer.setCallbacks(new Callback[] &#123; NoOp.INSTANCE, new LookupOverrideMethodInterceptor(), new ReplaceOverrideMethodInterceptor() &#125;); //‰ΩøÁî®CGLIBÁöÑcreateÊñπÊ≥ïÁîüÊàêÂÆû‰æãÂØπË±° return (ctor == null) ? enhancer.create() : enhancer.create(ctor.getParameterTypes(), args); &#125; CGLIBÊòØ‰∏Ä‰∏™Â∏∏Áî®ÁöÑÂ≠óËäÇÁ†ÅÁîüÊàêÂô®ÁöÑÁ±ªÂ∫ìÔºåÂÆÉÊèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàóAPIÂÆûÁé∞javaÂ≠óËäÇÁ†ÅÁöÑÁîüÊàêÂíåËΩ¨Êç¢ÂäüËÉΩ„ÄÇÊàë‰ª¨Âú®Â≠¶‰π†JDKÁöÑÂä®ÊÄÅ‰ª£ÁêÜÊó∂ÈÉΩÁü•ÈÅìÔºåJDKÁöÑÂä®ÊÄÅ‰ª£ÁêÜÂè™ËÉΩÈíàÂØπÊé•Âè£ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Á±ªÊ≤°ÊúâÂÆûÁé∞‰ªª‰ΩïÊé•Âè£ÔºåË¶ÅÂØπÂÖ∂ËøõË°åÂä®ÊÄÅ‰ª£ÁêÜÂè™ËÉΩ‰ΩøÁî®CGLIB„ÄÇ populateBeanÊñπÊ≥ïÂØπBeanÂ±ûÊÄßÁöÑ‰æùËµñÊ≥®ÂÖ•Âú®Á¨¨3Ê≠•ÁöÑÂàÜÊûê‰∏≠Êàë‰ª¨Â∑≤Áªè‰∫ÜËß£Âà∞BeanÁöÑ‰æùËµñÊ≥®ÂÖ•ÂàÜ‰∏∫‰ª•‰∏ã‰∏§‰∏™ËøáÁ®ãÔºö createBeanInstanceÔºöÁîüÊàêBeanÊâÄÂåÖÂê´ÁöÑjavaÂØπË±°ÂÆû‰æã populateBean ÔºöÂØπBeanÂ±ûÊÄßÁöÑ‰æùËµñÊ≥®ÂÖ•ËøõË°åÂ§ÑÁêÜ Á¨¨4„ÄÅ5Ê≠•‰∏≠Êàë‰ª¨Â∑≤ÁªèÂàÜÊûê‰∫ÜÂÆπÂô®ÂàùÂßãÂåñÁîüÊàêBeanÊâÄÂåÖÂê´ÁöÑJavaÂÆû‰æãÂØπË±°ÁöÑËøáÁ®ãÔºåÁé∞Âú®Êàë‰ª¨ÁªßÁª≠ÂàÜÊûêÁîüÊàêÂØπË±°ÂêéÔºåSpring IoCÂÆπÂô®ÊòØÂ¶Ç‰ΩïÂ∞ÜBeanÁöÑÂ±ûÊÄß‰æùËµñÂÖ≥Á≥ªÊ≥®ÂÖ•BeanÂÆû‰æãÂØπË±°‰∏≠Âπ∂ËÆæÁΩÆÂ•ΩÁöÑÔºåÂ±ûÊÄß‰æùËµñÊ≥®ÂÖ•ÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175//Â∞ÜBeanÂ±ûÊÄßËÆæÁΩÆÂà∞ÁîüÊàêÁöÑÂÆû‰æãÂØπË±°‰∏ä protected void populateBean(String beanName, AbstractBeanDefinition mbd, BeanWrapper bw) &#123; //Ëé∑ÂèñÂÆπÂô®Âú®Ëß£ÊûêBeanÂÆö‰πâËµÑÊ∫êÊó∂‰∏∫BeanDefiniton‰∏≠ËÆæÁΩÆÁöÑÂ±ûÊÄßÂÄº PropertyValues pvs = mbd.getPropertyValues(); //ÂÆû‰æãÂØπË±°‰∏∫null if (bw == null) &#123; //Â±ûÊÄßÂÄº‰∏ç‰∏∫Á©∫ if (!pvs.isEmpty()) &#123; throw new BeanCreationException( mbd.getResourceDescription(), beanName, "Cannot apply property values to null instance"); &#125; else &#123; //ÂÆû‰æãÂØπË±°‰∏∫nullÔºåÂ±ûÊÄßÂÄº‰πü‰∏∫Á©∫Ôºå‰∏çÈúÄË¶ÅËÆæÁΩÆÂ±ûÊÄßÂÄºÔºåÁõ¥Êé•ËøîÂõû return; &#125; &#125; //Âú®ËÆæÁΩÆÂ±ûÊÄß‰πãÂâçË∞ÉÁî®BeanÁöÑPostProcessorÂêéÁΩÆÂ§ÑÁêÜÂô® boolean continueWithPropertyPopulation = true; if (!mbd.isSynthetic() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) &#123; for (BeanPostProcessor bp : getBeanPostProcessors()) &#123; if (bp instanceof InstantiationAwareBeanPostProcessor) &#123; InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp; if (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) &#123; continueWithPropertyPopulation = false; break; &#125; &#125; &#125; &#125; if (!continueWithPropertyPopulation) &#123; return; &#125; //‰æùËµñÊ≥®ÂÖ•ÂºÄÂßãÔºåÈ¶ñÂÖàÂ§ÑÁêÜautowireËá™Âä®Ë£ÖÈÖçÁöÑÊ≥®ÂÖ• if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME || mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123; MutablePropertyValues newPvs = new MutablePropertyValues(pvs); //ÂØπautowireËá™Âä®Ë£ÖÈÖçÁöÑÂ§ÑÁêÜÔºåÊ†πÊçÆBeanÂêçÁß∞Ëá™Âä®Ë£ÖÈÖçÊ≥®ÂÖ• if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_NAME) &#123; autowireByName(beanName, mbd, bw, newPvs); &#125; //Ê†πÊçÆBeanÁ±ªÂûãËá™Âä®Ë£ÖÈÖçÊ≥®ÂÖ• if (mbd.getResolvedAutowireMode() == RootBeanDefinition.AUTOWIRE_BY_TYPE) &#123; autowireByType(beanName, mbd, bw, newPvs); &#125; pvs = newPvs; &#125; //Ê£ÄÊü•ÂÆπÂô®ÊòØÂê¶ÊåÅÊúâÁî®‰∫éÂ§ÑÁêÜÂçïÊÄÅÊ®°ÂºèBeanÂÖ≥Èó≠Êó∂ÁöÑÂêéÁΩÆÂ§ÑÁêÜÂô® boolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors(); //BeanÂÆû‰æãÂØπË±°Ê≤°Êúâ‰æùËµñÔºåÂç≥Ê≤°ÊúâÁªßÊâøÂü∫Á±ª boolean needsDepCheck = (mbd.getDependencyCheck() != RootBeanDefinition.DEPENDENCY_CHECK_NONE); if (hasInstAwareBpps || needsDepCheck) &#123; //‰ªéÂÆû‰æãÂØπË±°‰∏≠ÊèêÂèñÂ±ûÊÄßÊèèËø∞Á¨¶ PropertyDescriptor[] filteredPds = filterPropertyDescriptorsForDependencyCheck(bw); if (hasInstAwareBpps) &#123; for (BeanPostProcessor bp : getBeanPostProcessors()) &#123; if (bp instanceof InstantiationAwareBeanPostProcessor) &#123; InstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp; //‰ΩøÁî®BeanPostProcessorÂ§ÑÁêÜÂô®Â§ÑÁêÜÂ±ûÊÄßÂÄº pvs = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName); if (pvs == null) &#123; return; &#125; &#125; &#125; &#125; if (needsDepCheck) &#123; //‰∏∫Ë¶ÅËÆæÁΩÆÁöÑÂ±ûÊÄßËøõË°å‰æùËµñÊ£ÄÊü• checkDependencies(beanName, mbd, filteredPds, pvs); &#125; &#125; //ÂØπÂ±ûÊÄßËøõË°åÊ≥®ÂÖ• applyPropertyValues(beanName, mbd, bw, pvs); &#125; //Ëß£ÊûêÂπ∂Ê≥®ÂÖ•‰æùËµñÂ±ûÊÄßÁöÑËøáÁ®ã protected void applyPropertyValues(String beanName, BeanDefinition mbd, BeanWrapper bw, PropertyValues pvs) &#123; if (pvs == null || pvs.isEmpty()) &#123; return; &#125; //Â∞ÅË£ÖÂ±ûÊÄßÂÄº MutablePropertyValues mpvs = null; List&lt;PropertyValue&gt; original; if (System.getSecurityManager()!= null) &#123; if (bw instanceof BeanWrapperImpl) &#123; //ËÆæÁΩÆÂÆâÂÖ®‰∏ä‰∏ãÊñáÔºåJDKÂÆâÂÖ®Êú∫Âà∂ ((BeanWrapperImpl) bw).setSecurityContext(getAccessControlContext()); &#125; &#125; if (pvs instanceof MutablePropertyValues) &#123; mpvs = (MutablePropertyValues) pvs; //Â±ûÊÄßÂÄºÂ∑≤ÁªèËΩ¨Êç¢ if (mpvs.isConverted()) &#123; try &#123; //‰∏∫ÂÆû‰æãÂåñÂØπË±°ËÆæÁΩÆÂ±ûÊÄßÂÄº bw.setPropertyValues(mpvs); return; &#125; catch (BeansException ex) &#123; throw new BeanCreationException( mbd.getResourceDescription(), beanName, "Error setting property values", ex); &#125; &#125; //Ëé∑ÂèñÂ±ûÊÄßÂÄºÂØπË±°ÁöÑÂéüÂßãÁ±ªÂûãÂÄº original = mpvs.getPropertyValueList(); &#125; else &#123; original = Arrays.asList(pvs.getPropertyValues()); &#125; //Ëé∑ÂèñÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÁ±ªÂûãËΩ¨Êç¢ TypeConverter converter = getCustomTypeConverter(); if (converter == null) &#123; converter = bw; &#125; //ÂàõÂª∫‰∏Ä‰∏™BeanÂÆö‰πâÂ±ûÊÄßÂÄºËß£ÊûêÂô®ÔºåÂ∞ÜBeanÂÆö‰πâ‰∏≠ÁöÑÂ±ûÊÄßÂÄºËß£Êûê‰∏∫BeanÂÆû‰æãÂØπË±° //ÁöÑÂÆûÈôÖÂÄº BeanDefinitionValueResolver valueResolver = new BeanDefinitionValueResolver(this, beanName, mbd, converter); //‰∏∫Â±ûÊÄßÁöÑËß£ÊûêÂÄºÂàõÂª∫‰∏Ä‰∏™Êã∑Ë¥ùÔºåÂ∞ÜÊã∑Ë¥ùÁöÑÊï∞ÊçÆÊ≥®ÂÖ•Âà∞ÂÆû‰æãÂØπË±°‰∏≠ List&lt;PropertyValue&gt; deepCopy = new ArrayList&lt;PropertyValue&gt;(original.size()); boolean resolveNecessary = false; for (PropertyValue pv : original) &#123; //Â±ûÊÄßÂÄº‰∏çÈúÄË¶ÅËΩ¨Êç¢ if (pv.isConverted()) &#123; deepCopy.add(pv); &#125; //Â±ûÊÄßÂÄºÈúÄË¶ÅËΩ¨Êç¢ else &#123; String propertyName = pv.getName(); //ÂéüÂßãÁöÑÂ±ûÊÄßÂÄºÔºåÂç≥ËΩ¨Êç¢‰πãÂâçÁöÑÂ±ûÊÄßÂÄº Object originalValue = pv.getValue(); //ËΩ¨Êç¢Â±ûÊÄßÂÄºÔºå‰æãÂ¶ÇÂ∞ÜÂºïÁî®ËΩ¨Êç¢‰∏∫IoCÂÆπÂô®‰∏≠ÂÆû‰æãÂåñÂØπË±°ÂºïÁî® Object resolvedValue = valueResolver.resolveValueIfNecessary(pv, originalValue); //ËΩ¨Êç¢‰πãÂêéÁöÑÂ±ûÊÄßÂÄº Object convertedValue = resolvedValue; //Â±ûÊÄßÂÄºÊòØÂê¶ÂèØ‰ª•ËΩ¨Êç¢ boolean convertible = bw.isWritableProperty(propertyName) &amp;&amp; !PropertyAccessorUtils.isNestedOrIndexedProperty(propertyName); if (convertible) &#123; //‰ΩøÁî®Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÁ±ªÂûãËΩ¨Êç¢Âô®ËΩ¨Êç¢Â±ûÊÄßÂÄº convertedValue = convertForProperty(resolvedValue, propertyName, bw, converter); &#125; //Â≠òÂÇ®ËΩ¨Êç¢ÂêéÁöÑÂ±ûÊÄßÂÄºÔºåÈÅøÂÖçÊØèÊ¨°Â±ûÊÄßÊ≥®ÂÖ•Êó∂ÁöÑËΩ¨Êç¢Â∑•‰Ωú if (resolvedValue == originalValue) &#123; if (convertible) &#123; //ËÆæÁΩÆÂ±ûÊÄßËΩ¨Êç¢‰πãÂêéÁöÑÂÄº pv.setConvertedValue(convertedValue); &#125; deepCopy.add(pv); &#125; //Â±ûÊÄßÊòØÂèØËΩ¨Êç¢ÁöÑÔºå‰∏îÂ±ûÊÄßÂéüÂßãÂÄºÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºå‰∏îÂ±ûÊÄßÁöÑÂéüÂßãÁ±ªÂûãÂÄº‰∏çÊòØ //Âä®ÊÄÅÁîüÊàêÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰∏îÂ±ûÊÄßÁöÑÂéüÂßãÂÄº‰∏çÊòØÈõÜÂêàÊàñËÄÖÊï∞ÁªÑÁ±ªÂûã else if (convertible &amp;&amp; originalValue instanceof TypedStringValue &amp;&amp; !((TypedStringValue) originalValue).isDynamic() &amp;&amp; !(convertedValue instanceof Collection || ObjectUtils.isArray(convertedValue))) &#123; pv.setConvertedValue(convertedValue); deepCopy.add(pv); &#125; else &#123; resolveNecessary = true; //ÈáçÊñ∞Â∞ÅË£ÖÂ±ûÊÄßÁöÑÂÄº deepCopy.add(new PropertyValue(pv, convertedValue)); &#125; &#125; &#125; if (mpvs != null &amp;&amp; !resolveNecessary) &#123; //Ê†áËÆ∞Â±ûÊÄßÂÄºÂ∑≤ÁªèËΩ¨Êç¢Ëøá mpvs.setConverted(); &#125; //ËøõË°åÂ±ûÊÄß‰æùËµñÊ≥®ÂÖ• try &#123; bw.setPropertyValues(new MutablePropertyValues(deepCopy)); &#125; catch (BeansException ex) &#123; throw new BeanCreationException( mbd.getResourceDescription(), beanName, "Error setting property values", ex); &#125; &#125; ÂàÜÊûê‰∏äËø∞‰ª£Á†ÅÔºåÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÂØπÂ±ûÊÄßÁöÑÊ≥®ÂÖ•ËøáÁ®ãÂàÜ‰ª•‰∏ã‰∏§ÁßçÊÉÖÂÜµÔºö Â±ûÊÄßÂÄºÁ±ªÂûã‰∏çÈúÄË¶ÅËΩ¨Êç¢Êó∂Ôºå‰∏çÈúÄË¶ÅËß£ÊûêÂ±ûÊÄßÂÄºÔºåÁõ¥Êé•ÂáÜÂ§áËøõË°å‰æùËµñÊ≥®ÂÖ•„ÄÇ Â±ûÊÄßÂÄºÈúÄË¶ÅËøõË°åÁ±ªÂûãËΩ¨Êç¢Êó∂ÔºåÂ¶ÇÂØπÂÖ∂‰ªñÂØπË±°ÁöÑÂºïÁî®Á≠âÔºåÈ¶ñÂÖàÈúÄË¶ÅËß£ÊûêÂ±ûÊÄßÂÄºÔºåÁÑ∂ÂêéÂØπËß£ÊûêÂêéÁöÑÂ±ûÊÄßÂÄºËøõË°å‰æùËµñÊ≥®ÂÖ•„ÄÇ ÂØπÂ±ûÊÄßÂÄºÁöÑËß£ÊûêÊòØÂú®BeanDefinitionValueResolverÁ±ª‰∏≠ÁöÑresolveValueIfNecessaryÊñπÊ≥ï‰∏≠ËøõË°åÁöÑÔºåÂØπÂ±ûÊÄßÂÄºÁöÑ‰æùËµñÊ≥®ÂÖ•ÊòØÈÄöËøábw.setPropertyValuesÊñπÊ≥ïÂÆûÁé∞ÁöÑÔºåÂú®ÂàÜÊûêÂ±ûÊÄßÂÄºÁöÑ‰æùËµñÊ≥®ÂÖ•‰πãÂâçÔºåÊàë‰ª¨ÂÖàÂàÜÊûê‰∏Ä‰∏ãÂØπÂ±ûÊÄßÂÄºÁöÑËß£ÊûêËøáÁ®ã„ÄÇ BeanDefinitionValueResolverËß£ÊûêÂ±ûÊÄßÂÄºÂΩìÂÆπÂô®Âú®ÂØπÂ±ûÊÄßËøõË°å‰æùËµñÊ≥®ÂÖ•Êó∂ÔºåÂ¶ÇÊûúÂèëÁé∞Â±ûÊÄßÂÄºÈúÄË¶ÅËøõË°åÁ±ªÂûãËΩ¨Êç¢ÔºåÂ¶ÇÂ±ûÊÄßÂÄºÊòØÂÆπÂô®‰∏≠Âè¶‰∏Ä‰∏™BeanÂÆû‰æãÂØπË±°ÁöÑÂºïÁî®ÔºåÂàôÂÆπÂô®È¶ñÂÖàÈúÄË¶ÅÊ†πÊçÆÂ±ûÊÄßÂÄºËß£ÊûêÂá∫ÊâÄÂºïÁî®ÁöÑÂØπË±°ÔºåÁÑ∂ÂêéÊâçËÉΩÂ∞ÜËØ•ÂºïÁî®ÂØπË±°Ê≥®ÂÖ•Âà∞ÁõÆÊ†áÂÆû‰æãÂØπË±°ÁöÑÂ±ûÊÄß‰∏äÂéªÔºåÂØπÂ±ûÊÄßËøõË°åËß£ÊûêÁöÑÁî±resolveValueIfNecessaryÊñπÊ≥ïÂÆûÁé∞ÔºåÂÖ∂Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188//Ëß£ÊûêÂ±ûÊÄßÂÄºÔºåÂØπÊ≥®ÂÖ•Á±ªÂûãËøõË°åËΩ¨Êç¢ public Object resolveValueIfNecessary(Object argName, Object value) &#123; //ÂØπÂºïÁî®Á±ªÂûãÁöÑÂ±ûÊÄßËøõË°åËß£Êûê if (value instanceof RuntimeBeanReference) &#123; RuntimeBeanReference ref = (RuntimeBeanReference) value; //Ë∞ÉÁî®ÂºïÁî®Á±ªÂûãÂ±ûÊÄßÁöÑËß£ÊûêÊñπÊ≥ï return resolveReference(argName, ref); &#125; //ÂØπÂ±ûÊÄßÂÄºÊòØÂºïÁî®ÂÆπÂô®‰∏≠Âè¶‰∏Ä‰∏™BeanÂêçÁß∞ÁöÑËß£Êûê else if (value instanceof RuntimeBeanNameReference) &#123; String refName = ((RuntimeBeanNameReference) value).getBeanName(); refName = String.valueOf(evaluate(refName)); //‰ªéÂÆπÂô®‰∏≠Ëé∑ÂèñÊåáÂÆöÂêçÁß∞ÁöÑBean if (!this.beanFactory.containsBean(refName)) &#123; throw new BeanDefinitionStoreException( "Invalid bean name '" + refName + "' in bean reference for " + argName); &#125; return refName; &#125; //ÂØπBeanÁ±ªÂûãÂ±ûÊÄßÁöÑËß£ÊûêÔºå‰∏ªË¶ÅÊòØBean‰∏≠ÁöÑÂÜÖÈÉ®Á±ª else if (value instanceof BeanDefinitionHolder) &#123; BeanDefinitionHolder bdHolder = (BeanDefinitionHolder) value; return resolveInnerBean(argName, bdHolder.getBeanName(), bdHolder.getBeanDefinition()); &#125; else if (value instanceof BeanDefinition) &#123; BeanDefinition bd = (BeanDefinition) value; return resolveInnerBean(argName, "(inner bean)", bd); &#125; //ÂØπÈõÜÂêàÊï∞ÁªÑÁ±ªÂûãÁöÑÂ±ûÊÄßËß£Êûê else if (value instanceof ManagedArray) &#123; ManagedArray array = (ManagedArray) value; //Ëé∑ÂèñÊï∞ÁªÑÁöÑÁ±ªÂûã Class elementType = array.resolvedElementType; if (elementType == null) &#123; //Ëé∑ÂèñÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÁ±ªÂûã String elementTypeName = array.getElementTypeName(); if (StringUtils.hasText(elementTypeName)) &#123; try &#123; //‰ΩøÁî®ÂèçÂ∞ÑÊú∫Âà∂ÂàõÂª∫ÊåáÂÆöÁ±ªÂûãÁöÑÂØπË±° elementType = ClassUtils.forName(elementTypeName, this.beanFactory.getBeanClassLoader()); array.resolvedElementType = elementType; &#125; catch (Throwable ex) &#123; throw new BeanCreationException( this.beanDefinition.getResourceDescription(), this.beanName, "Error resolving array type for " + argName, ex); &#125; &#125; //Ê≤°ÊúâËé∑ÂèñÂà∞Êï∞ÁªÑÁöÑÁ±ªÂûãÔºå‰πüÊ≤°ÊúâËé∑ÂèñÂà∞Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÁ±ªÂûãÔºåÂàôÁõ¥Êé•ËÆæÁΩÆÊï∞ //ÁªÑÁöÑÁ±ªÂûã‰∏∫Object else &#123; elementType = Object.class; &#125; &#125; //ÂàõÂª∫ÊåáÂÆöÁ±ªÂûãÁöÑÊï∞ÁªÑ return resolveManagedArray(argName, (List&lt;?&gt;) value, elementType); &#125; //Ëß£ÊûêlistÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄº else if (value instanceof ManagedList) &#123; return resolveManagedList(argName, (List&lt;?&gt;) value); &#125; //Ëß£ÊûêsetÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄº else if (value instanceof ManagedSet) &#123; return resolveManagedSet(argName, (Set&lt;?&gt;) value); &#125; //Ëß£ÊûêmapÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄº else if (value instanceof ManagedMap) &#123; return resolveManagedMap(argName, (Map&lt;?, ?&gt;) value); &#125; //Ëß£ÊûêpropsÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄºÔºåpropsÂÖ∂ÂÆûÂ∞±ÊòØkeyÂíåvalueÂùá‰∏∫Â≠óÁ¨¶‰∏≤ÁöÑmap else if (value instanceof ManagedProperties) &#123; Properties original = (Properties) value; //ÂàõÂª∫‰∏Ä‰∏™Êã∑Ë¥ùÔºåÁî®‰∫é‰Ωú‰∏∫Ëß£ÊûêÂêéÁöÑËøîÂõûÂÄº Properties copy = new Properties(); for (Map.Entry propEntry : original.entrySet()) &#123; Object propKey = propEntry.getKey(); Object propValue = propEntry.getValue(); if (propKey instanceof TypedStringValue) &#123; propKey = evaluate((TypedStringValue) propKey); &#125; if (propValue instanceof TypedStringValue) &#123; propValue = evaluate((TypedStringValue) propValue); &#125; copy.put(propKey, propValue); &#125; return copy; &#125; //Ëß£ÊûêÂ≠óÁ¨¶‰∏≤Á±ªÂûãÁöÑÂ±ûÊÄßÂÄº else if (value instanceof TypedStringValue) &#123; TypedStringValue typedStringValue = (TypedStringValue) value; Object valueObject = evaluate(typedStringValue); try &#123; //Ëé∑ÂèñÂ±ûÊÄßÁöÑÁõÆÊ†áÁ±ªÂûã Class&lt;?&gt; resolvedTargetType = resolveTargetType(typedStringValue); if (resolvedTargetType != null) &#123; //ÂØπÁõÆÊ†áÁ±ªÂûãÁöÑÂ±ûÊÄßËøõË°åËß£ÊûêÔºåÈÄíÂΩíË∞ÉÁî® return this.typeConverter.convertIfNecessary(valueObject, resolvedTargetType); &#125; //Ê≤°ÊúâËé∑ÂèñÂà∞Â±ûÊÄßÁöÑÁõÆÊ†áÂØπË±°ÔºåÂàôÊåâObjectÁ±ªÂûãËøîÂõû else &#123; return valueObject; &#125; &#125; catch (Throwable ex) &#123; throw new BeanCreationException( this.beanDefinition.getResourceDescription(), this.beanName, "Error converting typed String value for " + argName, ex); &#125; &#125; else &#123; return evaluate(value); &#125; &#125; //Ëß£ÊûêÂºïÁî®Á±ªÂûãÁöÑÂ±ûÊÄßÂÄº private Object resolveReference(Object argName, RuntimeBeanReference ref) &#123; try &#123; //Ëé∑ÂèñÂºïÁî®ÁöÑBeanÂêçÁß∞ String refName = ref.getBeanName(); refName = String.valueOf(evaluate(refName)); //Â¶ÇÊûúÂºïÁî®ÁöÑÂØπË±°Âú®Áà∂Á±ªÂÆπÂô®‰∏≠ÔºåÂàô‰ªéÁà∂Á±ªÂÆπÂô®‰∏≠Ëé∑ÂèñÊåáÂÆöÁöÑÂºïÁî®ÂØπË±° if (ref.isToParent()) &#123; if (this.beanFactory.getParentBeanFactory() == null) &#123; throw new BeanCreationException( this.beanDefinition.getResourceDescription(), this.beanName, "Can't resolve reference to bean '" + refName + "' in parent factory: no parent factory available"); &#125; return this.beanFactory.getParentBeanFactory().getBean(refName); &#125; //‰ªéÂΩìÂâçÁöÑÂÆπÂô®‰∏≠Ëé∑ÂèñÊåáÂÆöÁöÑÂºïÁî®BeanÂØπË±°ÔºåÂ¶ÇÊûúÊåáÂÆöÁöÑBeanÊ≤°ÊúâË¢´ÂÆû‰æãÂåñ //Âàô‰ºöÈÄíÂΩíËß¶ÂèëÂºïÁî®BeanÁöÑÂàùÂßãÂåñÂíå‰æùËµñÊ≥®ÂÖ• else &#123; Object bean = this.beanFactory.getBean(refName); //Â∞ÜÂΩìÂâçÂÆû‰æãÂåñÂØπË±°ÁöÑ‰æùËµñÂºïÁî®ÂØπË±° this.beanFactory.registerDependentBean(refName, this.beanName); return bean; &#125; &#125; catch (BeansException ex) &#123; throw new BeanCreationException( this.beanDefinition.getResourceDescription(), this.beanName, "Cannot resolve reference to bean '" + ref.getBeanName() + "' while setting " + argName, ex); &#125; &#125; //Ëß£ÊûêarrayÁ±ªÂûãÁöÑÂ±ûÊÄß private Object resolveManagedArray(Object argName, List&lt;?&gt; ml, Class elementType) &#123; //ÂàõÂª∫‰∏Ä‰∏™ÊåáÂÆöÁ±ªÂûãÁöÑÊï∞ÁªÑÔºåÁî®‰∫éÂ≠òÊîæÂíåËøîÂõûËß£ÊûêÂêéÁöÑÊï∞ÁªÑ Object resolved = Array.newInstance(elementType, ml.size()); for (int i = 0; i &lt; ml.size(); i++) &#123; //ÈÄíÂΩíËß£ÊûêarrayÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂπ∂Â∞ÜËß£ÊûêÂêéÁöÑÂÄºËÆæÁΩÆÂà∞resolvedÊï∞ÁªÑ‰∏≠ÔºåÁ¥¢Âºï‰∏∫i Array.set(resolved, i, resolveValueIfNecessary(new KeyedArgName(argName, i), ml.get(i))); &#125; return resolved; &#125; //Ëß£ÊûêlistÁ±ªÂûãÁöÑÂ±ûÊÄß private List resolveManagedList(Object argName, List&lt;?&gt; ml) &#123; List&lt;Object&gt; resolved = new ArrayList&lt;Object&gt;(ml.size()); for (int i = 0; i &lt; ml.size(); i++) &#123; //ÈÄíÂΩíËß£ÊûêlistÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥† resolved.add( resolveValueIfNecessary(new KeyedArgName(argName, i), ml.get(i))); &#125; return resolved; &#125; //Ëß£ÊûêsetÁ±ªÂûãÁöÑÂ±ûÊÄß private Set resolveManagedSet(Object argName, Set&lt;?&gt; ms) &#123; Set&lt;Object&gt; resolved = new LinkedHashSet&lt;Object&gt;(ms.size()); int i = 0; //ÈÄíÂΩíËß£ÊûêsetÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥† for (Object m : ms) &#123; resolved.add(resolveValueIfNecessary(new KeyedArgName(argName, i), m)); i++; &#125; return resolved; &#125; //Ëß£ÊûêmapÁ±ªÂûãÁöÑÂ±ûÊÄß private Map resolveManagedMap(Object argName, Map&lt;?, ?&gt; mm) &#123; Map&lt;Object, Object&gt; resolved = new LinkedHashMap&lt;Object, Object&gt;(mm.size()); //ÈÄíÂΩíËß£Êûêmap‰∏≠ÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑkeyÂíåvalue for (Map.Entry entry : mm.entrySet()) &#123; Object resolvedKey = resolveValueIfNecessary(argName, entry.getKey()); Object resolvedValue = resolveValueIfNecessary( new KeyedArgName(argName, entry.getKey()), entry.getValue()); resolved.put(resolvedKey, resolvedValue); &#125; return resolved; &#125; ÈÄöËøá‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂàÜÊûêÔºåÊàë‰ª¨ÊòéÁôΩ‰∫ÜSpringÊòØÂ¶Ç‰ΩïÂ∞ÜÂºïÁî®Á±ªÂûãÔºåÂÜÖÈÉ®Á±ª‰ª•ÂèäÈõÜÂêàÁ±ªÂûãÁ≠âÂ±ûÊÄßËøõË°åËß£ÊûêÁöÑÔºåÂ±ûÊÄßÂÄºËß£ÊûêÂÆåÊàêÂêéÂ∞±ÂèØ‰ª•ËøõË°å‰æùËµñÊ≥®ÂÖ•‰∫ÜÔºå‰æùËµñÊ≥®ÂÖ•ÁöÑËøáÁ®ãÂ∞±ÊòØBeanÂØπË±°ÂÆû‰æãËÆæÁΩÆÂà∞ÂÆÉÊâÄ‰æùËµñÁöÑBeanÂØπË±°Â±ûÊÄß‰∏äÂéªÔºåÂú®Á¨¨7Ê≠•‰∏≠Êàë‰ª¨Â∑≤ÁªèËØ¥ËøáÔºå‰æùËµñÊ≥®ÂÖ•ÊòØÈÄöËøábw.setPropertyValuesÊñπÊ≥ïÂÆûÁé∞ÁöÑÔºåËØ•ÊñπÊ≥ï‰πü‰ΩøÁî®‰∫ÜÂßîÊâòÊ®°ÂºèÔºåÂú®BeanWrapperÊé•Âè£‰∏≠Ëá≥Â∞ëÂÆö‰πâ‰∫ÜÊñπÊ≥ïÂ£∞ÊòéÔºå‰æùËµñÊ≥®ÂÖ•ÁöÑÂÖ∑‰ΩìÂÆûÁé∞‰∫§Áî±ÂÖ∂ÂÆûÁé∞Á±ªBeanWrapperImplÊù•ÂÆåÊàêÔºå‰∏ãÈù¢Êàë‰ª¨Â∞±ÂàÜÊûê‰æùBeanWrapperImpl‰∏≠ËµñÊ≥®ÂÖ•Áõ∏ÂÖ≥ÁöÑÊ∫êÁ†Å„ÄÇ BeanWrapperImplÂØπBeanÂ±ûÊÄßÁöÑ‰æùËµñÊ≥®ÂÖ•BeanWrapperImplÁ±ª‰∏ªË¶ÅÊòØÂØπÂÆπÂô®‰∏≠ÂÆåÊàêÂàùÂßãÂåñÁöÑBeanÂÆû‰æãÂØπË±°ËøõË°åÂ±ûÊÄßÁöÑ‰æùËµñÊ≥®ÂÖ•ÔºåÂç≥ÊääBeanÂØπË±°ËÆæÁΩÆÂà∞ÂÆÉÊâÄ‰æùËµñÁöÑÂè¶‰∏Ä‰∏™BeanÁöÑÂ±ûÊÄß‰∏≠ÂéªÔºå‰æùËµñÊ≥®ÂÖ•ÁöÑÁõ∏ÂÖ≥Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259//ÂÆûÁé∞Â±ûÊÄß‰æùËµñÊ≥®ÂÖ•ÂäüËÉΩ private void setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv) throws BeansException &#123; //PropertyTokenHolder‰∏ªË¶Å‰øùÂ≠òÂ±ûÊÄßÁöÑÂêçÁß∞„ÄÅË∑ØÂæÑÔºå‰ª•ÂèäÈõÜÂêàÁöÑsizeÁ≠â‰ø°ÊÅØ String propertyName = tokens.canonicalName; String actualName = tokens.actualName; //keysÊòØÁî®Êù•‰øùÂ≠òÈõÜÂêàÁ±ªÂûãÂ±ûÊÄßÁöÑsize if (tokens.keys != null) &#123; //Â∞ÜÂ±ûÊÄß‰ø°ÊÅØÊã∑Ë¥ù PropertyTokenHolder getterTokens = new PropertyTokenHolder(); getterTokens.canonicalName = tokens.canonicalName; getterTokens.actualName = tokens.actualName; getterTokens.keys = new String[tokens.keys.length - 1]; System.arraycopy(tokens.keys, 0, getterTokens.keys, 0, tokens.keys.length - 1); Object propValue; try &#123; //Ëé∑ÂèñÂ±ûÊÄßÂÄºÔºåËØ•ÊñπÊ≥ïÂÜÖÈÉ®‰ΩøÁî®JDKÁöÑÂÜÖÁúÅ( Introspector)Êú∫Âà∂ÔºåË∞ÉÁî®Â±ûÊÄß//ÁöÑgetter(readerMethod)ÊñπÊ≥ïÔºåËé∑ÂèñÂ±ûÊÄßÁöÑÂÄº propValue = getPropertyValue(getterTokens); &#125; catch (NotReadablePropertyException ex) &#123; throw new NotWritablePropertyException(getRootClass(), this.nestedPath + propertyName, "Cannot access indexed value in property referenced " + "in indexed property path '" + propertyName + "'", ex); &#125; //Ëé∑ÂèñÈõÜÂêàÁ±ªÂûãÂ±ûÊÄßÁöÑÈïøÂ∫¶ String key = tokens.keys[tokens.keys.length - 1]; if (propValue == null) &#123; throw new NullValueInNestedPathException(getRootClass(), this.nestedPath + propertyName, "Cannot access indexed value in property referenced " + "in indexed property path '" + propertyName + "': returned null"); &#125; //Ê≥®ÂÖ•arrayÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄº else if (propValue.getClass().isArray()) &#123; //Ëé∑ÂèñÂ±ûÊÄßÁöÑÊèèËø∞Á¨¶ PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName); //Ëé∑ÂèñÊï∞ÁªÑÁöÑÁ±ªÂûã Class requiredType = propValue.getClass().getComponentType(); //Ëé∑ÂèñÊï∞ÁªÑÁöÑÈïøÂ∫¶ int arrayIndex = Integer.parseInt(key); Object oldValue = null; try &#123; //Ëé∑ÂèñÊï∞ÁªÑ‰ª•ÂâçÂàùÂßãÂåñÁöÑÂÄº if (isExtractOldValueForEditor()) &#123; oldValue = Array.get(propValue, arrayIndex); &#125; //Â∞ÜÂ±ûÊÄßÁöÑÂÄºËµãÂÄºÁªôÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥† Object convertedValue = convertIfNecessary(propertyName, oldValue, pv.getValue(), requiredType, new PropertyTypeDescriptor(pd, new MethodParameter(pd.getReadMethod(), -1), requiredType)); Array.set(propValue, arrayIndex, convertedValue); &#125; catch (IndexOutOfBoundsException ex) &#123; throw new InvalidPropertyException(getRootClass(), this.nestedPath + propertyName, "Invalid array index in property path '" + propertyName + "'", ex); &#125; &#125; //Ê≥®ÂÖ•listÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄº else if (propValue instanceof List) &#123; PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName); //Ëé∑ÂèñlistÈõÜÂêàÁöÑÁ±ªÂûã Class requiredType = GenericCollectionTypeResolver.getCollectionReturnType( pd.getReadMethod(), tokens.keys.length); List list = (List) propValue; //Ëé∑ÂèñlistÈõÜÂêàÁöÑsize int index = Integer.parseInt(key); Object oldValue = null; if (isExtractOldValueForEditor() &amp;&amp; index &lt; list.size()) &#123; oldValue = list.get(index); &#125; //Ëé∑ÂèñlistËß£ÊûêÂêéÁöÑÂ±ûÊÄßÂÄº Object convertedValue = convertIfNecessary(propertyName, oldValue, pv.getValue(), requiredType, new PropertyTypeDescriptor(pd, new MethodParameter(pd.getReadMethod(), -1), requiredType)); if (index &lt; list.size()) &#123; //‰∏∫listÂ±ûÊÄßËµãÂÄº list.set(index, convertedValue); &#125; //Â¶ÇÊûúlistÁöÑÈïøÂ∫¶Â§ß‰∫éÂ±ûÊÄßÂÄºÁöÑÈïøÂ∫¶ÔºåÂàôÂ§ö‰ΩôÁöÑÂÖÉÁ¥†ËµãÂÄº‰∏∫null else if (index &gt;= list.size()) &#123; for (int i = list.size(); i &lt; index; i++) &#123; try &#123; list.add(null); &#125; catch (NullPointerException ex) &#123; throw new InvalidPropertyException(getRootClass(), this.nestedPath + propertyName, "Cannot set element with index " + index + " in List of size " + list.size() + ", accessed using property path '" + propertyName + "': List does not support filling up gaps with null elements"); &#125; &#125; list.add(convertedValue); &#125; &#125; //Ê≥®ÂÖ•mapÁ±ªÂûãÁöÑÂ±ûÊÄßÂÄº else if (propValue instanceof Map) &#123; PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName); //Ëé∑ÂèñmapÈõÜÂêàkeyÁöÑÁ±ªÂûã Class mapKeyType = GenericCollectionTypeResolver.getMapKeyReturnType( pd.getReadMethod(), tokens.keys.length); //Ëé∑ÂèñmapÈõÜÂêàvalueÁöÑÁ±ªÂûã Class mapValueType = GenericCollectionTypeResolver.getMapValueReturnType( pd.getReadMethod(), tokens.keys.length); Map map = (Map) propValue; //Ëß£ÊûêmapÁ±ªÂûãÂ±ûÊÄßkeyÂÄº Object convertedMapKey = convertIfNecessary(null, null, key, mapKeyType, new PropertyTypeDescriptor(pd, new MethodParameter(pd.getReadMethod(), -1), mapKeyType)); Object oldValue = null; if (isExtractOldValueForEditor()) &#123; oldValue = map.get(convertedMapKey); &#125; //Ëß£ÊûêmapÁ±ªÂûãÂ±ûÊÄßvalueÂÄº Object convertedMapValue = convertIfNecessary( propertyName, oldValue, pv.getValue(), mapValueType, new TypeDescriptor(new MethodParameter(pd.getReadMethod(), -1, tokens.keys.length + 1))); //Â∞ÜËß£ÊûêÂêéÁöÑkeyÂíåvalueÂÄºËµãÂÄºÁªômapÈõÜÂêàÂ±ûÊÄß map.put(convertedMapKey, convertedMapValue); &#125; else &#123; throw new InvalidPropertyException(getRootClass(), this.nestedPath + propertyName, "Property referenced in indexed property path '" + propertyName + "' is neither an array nor a List nor a Map; returned value was [" + pv.getValue() + "]"); &#125; &#125; //ÂØπÈùûÈõÜÂêàÁ±ªÂûãÁöÑÂ±ûÊÄßÊ≥®ÂÖ• else &#123; PropertyDescriptor pd = pv.resolvedDescriptor; if (pd == null || !pd.getWriteMethod().getDeclaringClass().isInstance(this.object)) &#123; pd = getCachedIntrospectionResults().getPropertyDescriptor(actualName); //Êó†Ê≥ïËé∑ÂèñÂà∞Â±ûÊÄßÂêçÊàñËÄÖÂ±ûÊÄßÊ≤°ÊúâÊèê‰æõsetter(ÂÜôÊñπÊ≥ï)ÊñπÊ≥ï if (pd == null || pd.getWriteMethod() == null) &#123; //Â¶ÇÊûúÂ±ûÊÄßÂÄºÊòØÂèØÈÄâÁöÑÔºåÂç≥‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÂàôÂøΩÁï•ËØ•Â±ûÊÄßÂÄº if (pv.isOptional()) &#123; logger.debug("Ignoring optional value for property '" + actualName + "' - property not found on bean class [" + getRootClass().getName() + "]"); return; &#125; //Â¶ÇÊûúÂ±ûÊÄßÂÄºÊòØÂøÖÈ°ªÁöÑÔºåÂàôÊäõÂá∫Êó†Ê≥ïÁªôÂ±ûÊÄßËµãÂÄºÔºåÂõ†‰∏∫ÊØèÂ§©Êèê‰æõsetterÊñπÊ≥ïÂºÇÂ∏∏ else &#123; PropertyMatches matches = PropertyMatches.forProperty(propertyName, getRootClass()); throw new NotWritablePropertyException( getRootClass(), this.nestedPath + propertyName, matches.buildErrorMessage(), matches.getPossibleMatches()); &#125; &#125; pv.getOriginalPropertyValue().resolvedDescriptor = pd; &#125; Object oldValue = null; try &#123; Object originalValue = pv.getValue(); Object valueToApply = originalValue; if (!Boolean.FALSE.equals(pv.conversionNecessary)) &#123; if (pv.isConverted()) &#123; valueToApply = pv.getConvertedValue(); &#125; else &#123; if (isExtractOldValueForEditor() &amp;&amp; pd.getReadMethod() != null) &#123; //Ëé∑ÂèñÂ±ûÊÄßÁöÑgetterÊñπÊ≥ï(ËØªÊñπÊ≥ï)ÔºåJDKÂÜÖÁúÅÊú∫Âà∂ final Method readMethod = pd.getReadMethod(); //Â¶ÇÊûúÂ±ûÊÄßÁöÑgetterÊñπÊ≥ï‰∏çÊòØpublicËÆøÈóÆÊéßÂà∂ÊùÉÈôêÁöÑÔºåÂç≥ËÆøÈóÆÊéßÂà∂ÊùÉÈôêÊØîËæÉ‰∏•Ê†ºÔºå //Âàô‰ΩøÁî®JDKÁöÑÂèçÂ∞ÑÊú∫Âà∂Âº∫Ë°åËÆøÈóÆÈùûpublicÁöÑÊñπÊ≥ï(Êö¥ÂäõËØªÂèñÂ±ûÊÄßÂÄº) if (!Modifier.isPublic(readMethod.getDeclaringClass().getModifiers()) &amp;&amp; !readMethod.isAccessible()) &#123; if (System.getSecurityManager()!= null) &#123; //ÂåøÂêçÂÜÖÈÉ®Á±ªÔºåÊ†πÊçÆÊùÉÈôê‰øÆÊîπÂ±ûÊÄßÁöÑËØªÂèñÊéßÂà∂ÈôêÂà∂ AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123; public Object run() &#123; readMethod.setAccessible(true); return null; &#125; &#125;); &#125; else &#123; readMethod.setAccessible(true); &#125; &#125; try &#123; //Â±ûÊÄßÊ≤°ÊúâÊèê‰æõgetterÊñπÊ≥ïÊó∂ÔºåË∞ÉÁî®ÊΩúÂú®ÁöÑËØªÂèñÂ±ûÊÄßÂÄº//ÁöÑÊñπÊ≥ïÔºåËé∑ÂèñÂ±ûÊÄßÂÄº if (System.getSecurityManager() != null) &#123; oldValue = AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Object&gt;() &#123; public Object run() throws Exception &#123; return readMethod.invoke(object); &#125; &#125;, acc); &#125; else &#123; oldValue = readMethod.invoke(object); &#125; &#125; catch (Exception ex) &#123; if (ex instanceof PrivilegedActionException) &#123; ex = ((PrivilegedActionException) ex).getException(); &#125; if (logger.isDebugEnabled()) &#123; logger.debug("Could not read previous value of property '" + this.nestedPath + propertyName + "'", ex); &#125; &#125; &#125; //ËÆæÁΩÆÂ±ûÊÄßÁöÑÊ≥®ÂÖ•ÂÄº valueToApply = convertForProperty(propertyName, oldValue, originalValue, pd); &#125; pv.getOriginalPropertyValue().conversionNecessary = (valueToApply != originalValue); &#125; //Ê†πÊçÆJDKÁöÑÂÜÖÁúÅÊú∫Âà∂ÔºåËé∑ÂèñÂ±ûÊÄßÁöÑsetter(ÂÜôÊñπÊ≥ï)ÊñπÊ≥ï final Method writeMethod = (pd instanceof GenericTypeAwarePropertyDescriptor ? ((GenericTypeAwarePropertyDescriptor) pd).getWriteMethodForActualAccess() : pd.getWriteMethod()); //Â¶ÇÊûúÂ±ûÊÄßÁöÑsetterÊñπÊ≥ïÊòØÈùûpublicÔºåÂç≥ËÆøÈóÆÊéßÂà∂ÊùÉÈôêÊØîËæÉ‰∏•Ê†ºÔºåÂàô‰ΩøÁî®JDKÁöÑÂèçÂ∞ÑÊú∫Âà∂Ôºå //Âº∫Ë°åËÆæÁΩÆsetterÊñπÊ≥ïÂèØËÆøÈóÆ(Êö¥Âäõ‰∏∫Â±ûÊÄßËµãÂÄº) if (!Modifier.isPublic(writeMethod.getDeclaringClass().getModifiers()) &amp;&amp; !writeMethod.isAccessible()) &#123; //Â¶ÇÊûú‰ΩøÁî®‰∫ÜJDKÁöÑÂÆâÂÖ®Êú∫Âà∂ÔºåÂàôÈúÄË¶ÅÊùÉÈôêÈ™åËØÅ if (System.getSecurityManager()!= null) &#123; AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() &#123; public Object run() &#123; writeMethod.setAccessible(true); return null; &#125; &#125;); &#125; else &#123; writeMethod.setAccessible(true); &#125; &#125; final Object value = valueToApply; if (System.getSecurityManager() != null) &#123; try &#123; //Â∞ÜÂ±ûÊÄßÂÄºËÆæÁΩÆÂà∞Â±ûÊÄß‰∏äÂéª AccessController.doPrivileged(new PrivilegedExceptionAction&lt;Object&gt;() &#123; public Object run() throws Exception &#123; writeMethod.invoke(object, value); return null; &#125; &#125;, acc); &#125; catch (PrivilegedActionException ex) &#123; throw ex.getException(); &#125; &#125; else &#123; writeMethod.invoke(this.object, value); &#125; &#125; catch (TypeMismatchException ex) &#123; throw ex; &#125; catch (InvocationTargetException ex) &#123; PropertyChangeEvent propertyChangeEvent = new PropertyChangeEvent(this.rootObject, this.nestedPath + propertyName, oldValue, pv.getValue()); if (ex.getTargetException() instanceof ClassCastException) &#123; throw new TypeMismatchException(propertyChangeEvent, pd.getPropertyType(), ex.getTargetException()); &#125; else &#123; throw new MethodInvocationException(propertyChangeEvent, ex.getTargetException()); &#125; &#125; catch (Exception ex) &#123; PropertyChangeEvent pce = new PropertyChangeEvent(this.rootObject, this.nestedPath + propertyName, oldValue, pv.getValue()); throw new MethodInvocationException(pce, ex); &#125; &#125; &#125; ÈÄöËøáÂØπ‰∏äÈù¢Ê≥®ÂÖ•‰æùËµñ‰ª£Á†ÅÁöÑÂàÜÊûêÔºåÊàë‰ª¨Â∑≤ÁªèÊòéÁôΩ‰∫ÜSpring IoCÂÆπÂô®ÊòØÂ¶Ç‰ΩïÂ∞ÜÂ±ûÊÄßÁöÑÂÄºÊ≥®ÂÖ•Âà∞BeanÂÆû‰æãÂØπË±°‰∏≠ÂéªÁöÑÔºö ÂØπ‰∫éÈõÜÂêàÁ±ªÂûãÁöÑÂ±ûÊÄßÔºåÂ∞ÜÂÖ∂Â±ûÊÄßÂÄºËß£Êûê‰∏∫ÁõÆÊ†áÁ±ªÂûãÁöÑÈõÜÂêàÂêéÁõ¥Êé•ËµãÂÄºÁªôÂ±ûÊÄß„ÄÇ ÂØπ‰∫éÈùûÈõÜÂêàÁ±ªÂûãÁöÑÂ±ûÊÄßÔºåÂ§ßÈáè‰ΩøÁî®‰∫ÜJDKÁöÑÂèçÂ∞ÑÂíåÂÜÖÁúÅÊú∫Âà∂ÔºåÈÄöËøáÂ±ûÊÄßÁöÑgetterÊñπÊ≥ï(reader method)Ëé∑ÂèñÊåáÂÆöÂ±ûÊÄßÊ≥®ÂÖ•‰ª•ÂâçÁöÑÂÄºÔºåÂêåÊó∂Ë∞ÉÁî®Â±ûÊÄßÁöÑsetterÊñπÊ≥ï(writer method)‰∏∫Â±ûÊÄßËÆæÁΩÆÊ≥®ÂÖ•ÂêéÁöÑÂÄº„ÄÇÁúãÂà∞ËøôÈáåÁõ∏‰ø°ÂæàÂ§ö‰∫∫ÈÉΩÊòéÁôΩ‰∫ÜSpringÁöÑsetterÊ≥®ÂÖ•ÂéüÁêÜ„ÄÇ Ëá≥Ê≠§Spring IoCÂÆπÂô®ÂØπBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑÂÆö‰ΩçÔºåËΩΩÂÖ•„ÄÅËß£ÊûêÂíå‰æùËµñÊ≥®ÂÖ•Â∑≤ÁªèÂÖ®ÈÉ®ÂàÜÊûêÂÆåÊØïÔºåÁé∞Âú®Spring IoCÂÆπÂô®‰∏≠ÁÆ°ÁêÜ‰∫Ü‰∏ÄÁ≥ªÂàóÈù†‰æùËµñÂÖ≥Á≥ªËÅîÁ≥ªËµ∑Êù•ÁöÑBeanÔºåÁ®ãÂ∫è‰∏çÈúÄË¶ÅÂ∫îÁî®Ëá™Â∑±ÊâãÂä®ÂàõÂª∫ÊâÄÈúÄÁöÑÂØπË±°ÔºåSpring IoCÂÆπÂô®‰ºöÂú®Êàë‰ª¨‰ΩøÁî®ÁöÑÊó∂ÂÄôËá™Âä®‰∏∫Êàë‰ª¨ÂàõÂª∫ÔºåÂπ∂‰∏î‰∏∫Êàë‰ª¨Ê≥®ÂÖ•Â•ΩÁõ∏ÂÖ≥ÁöÑ‰æùËµñÔºåËøôÂ∞±ÊòØSpringÊ†∏ÂøÉÂäüËÉΩÁöÑÊéßÂà∂ÂèçËΩ¨Âíå‰æùËµñÊ≥®ÂÖ•ÁöÑÁõ∏ÂÖ≥ÂäüËÉΩ„ÄÇ]]></content>
      <categories>
        <category>java</category>
        <category>spring</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºà‰∫åÔºâ]]></title>
    <url>%2Fjava%2Fspring%2Fjava%2Fspring%2F2%2F</url>
    <content type="text"><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºà‰∫åÔºâIOCÂÆπÂô®ÁöÑÂàùÂßãÂåñÔºüIoCÂÆπÂô®ÁöÑÂàùÂßãÂåñÂåÖÊã¨BeanDefinitionÁöÑResourceÂÆö‰Ωç„ÄÅËΩΩÂÖ•ÂíåÊ≥®ÂÜåËøô‰∏â‰∏™Âü∫Êú¨ÁöÑËøáÁ®ã„ÄÇÊàë‰ª¨‰ª•ApplicationContext‰∏∫‰æãËÆ≤Ëß£ÔºåApplicationContextÁ≥ªÂàóÂÆπÂô®‰πüËÆ∏ÊòØÊàë‰ª¨ÊúÄÁÜüÊÇâÁöÑÔºåÂõ†‰∏∫webÈ°πÁõÆ‰∏≠‰ΩøÁî®ÁöÑXmlWebApplicationContextÂ∞±Â±û‰∫éËøô‰∏™ÁªßÊâø‰ΩìÁ≥ªÔºåËøòÊúâClasspathXmlApplicationContextÁ≠âÔºåÂÖ∂ÁªßÊâø‰ΩìÁ≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ApplicationContextÂÖÅËÆ∏‰∏ä‰∏ãÊñáÂµåÂ•óÔºåÈÄöËøá‰øùÊåÅÁà∂‰∏ä‰∏ãÊñáÂèØ‰ª•Áª¥ÊåÅ‰∏Ä‰∏™‰∏ä‰∏ãÊñá‰ΩìÁ≥ª„ÄÇÂØπ‰∫ébeanÁöÑÊü•ÊâæÂèØ‰ª•Âú®Ëøô‰∏™‰∏ä‰∏ãÊñá‰ΩìÁ≥ª‰∏≠ÂèëÁîüÔºåÈ¶ñÂÖàÊ£ÄÊü•ÂΩìÂâç‰∏ä‰∏ãÊñáÔºåÂÖ∂Ê¨°ÊòØÁà∂‰∏ä‰∏ãÊñáÔºåÈÄêÁ∫ßÂêë‰∏äÔºåËøôÊ†∑‰∏∫‰∏çÂêåÁöÑSpringÂ∫îÁî®Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÖ±‰∫´ÁöÑbeanÂÆö‰πâÁéØÂ¢É„ÄÇ ‰∏ãÈù¢Êàë‰ª¨ÂàÜÂà´ÁÆÄÂçïÂú∞ÊºîÁ§∫‰∏Ä‰∏ã‰∏§ÁßçiocÂÆπÂô®ÁöÑÂàõÂª∫ËøáÁ®ã XmlBeanFactory(Â±å‰∏ùIOC)ÁöÑÊï¥‰∏™ÊµÅÁ®ãÈÄöËøáXmlBeanFactoryÁöÑÊ∫êÁ†ÅÔºåÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞:1234567891011121314 public class XmlBeanFactory extends DefaultListableBeanFactory&#123; private final XmlBeanDefinitionReader reader; public XmlBeanFactory(Resource resource)throws BeansException&#123; this(resource, null); &#125; public XmlBeanFactory(Resource resource, BeanFactory parentBeanFactory) throws BeansException&#123; super(parentBeanFactory); this.reader = new XmlBeanDefinitionReader(this); this.reader.loadBeanDefinitions(resource); &#125;&#125; 1234567891011//Ê†πÊçÆXmlÈÖçÁΩÆÊñá‰ª∂ÂàõÂª∫ResourceËµÑÊ∫êÂØπË±°ÔºåËØ•ÂØπË±°‰∏≠ÂåÖÂê´‰∫ÜBeanDefinitionÁöÑ‰ø°ÊÅØClassPathResource resource =new ClassPathResource("application-context.xml");//ÂàõÂª∫DefaultListableBeanFactoryDefaultListableBeanFactory factory =new DefaultListableBeanFactory();//ÂàõÂª∫XmlBeanDefinitionReaderËØªÂèñÂô®ÔºåÁî®‰∫éËΩΩÂÖ•BeanDefinition„ÄÇ‰πãÊâÄ‰ª•ÈúÄË¶ÅBeanFactory‰Ωú‰∏∫ÂèÇÊï∞ÔºåÊòØÂõ†‰∏∫‰ºöÂ∞ÜËØªÂèñÁöÑ‰ø°ÊÅØÂõûË∞ÉÈÖçÁΩÆÁªôfactoryXmlBeanDefinitionReader reader =new XmlBeanDefinitionReader(factory);//XmlBeanDefinitionReaderÊâßË°åËΩΩÂÖ•BeanDefinitionÁöÑÊñπÊ≥ïÔºåÊúÄÂêé‰ºöÂÆåÊàêBeanÁöÑËΩΩÂÖ•ÂíåÊ≥®ÂÜå„ÄÇÂÆåÊàêÂêéBeanÂ∞±ÊàêÂäüÁöÑÊîæÁΩÆÂà∞IOCÂÆπÂô®ÂΩì‰∏≠Ôºå‰ª•ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•‰ªé‰∏≠ÂèñÂæóBeanÊù•‰ΩøÁî®reader.loadBeanDefinitions(resource); ÈÄöËøáÂâçÈù¢ÁöÑÊ∫êÁ†ÅÔºåthis.reader = new XmlBeanDefinitionReader(this); ‰∏≠ÂÖ∂‰∏≠this ‰º†ÁöÑÊòØfactoryÂØπË±° FileSystemXmlApplicationContext ÁöÑIOCÂÆπÂô®ÊµÅÁ®ãËß£ÂâñApplicationContext = new FileSystemXmlApplicationContext(xmlPath);ÔºåË∞ÉÁî®ÊûÑÈÄ†ÂáΩÊï∞Ôºö123public FileSystemXmlApplicationContext(String... configLocations) throws BeansException &#123; this(configLocations, true, null);&#125; ÂÆûÈôÖË∞ÉÁî® 1234567public FileSystemXmlApplicationContext(String[] configLocations, boolean refresh, ApplicationContext parent) throws BeansException &#123; super(parent); setConfigLocations(configLocations); if (refresh) &#123; refresh(); &#125; &#125; ËÆæÁΩÆËµÑÊ∫êÂä†ËΩΩÂô®ÂíåËµÑÊ∫êÂÆö‰ΩçÈÄöËøáÂàÜÊûêFileSystemXmlApplicationContextÁöÑÊ∫ê‰ª£Á†ÅÂèØ‰ª•Áü•ÈÅìÔºåÂú®ÂàõÂª∫FileSystemXmlApplicationContextÂÆπÂô®Êó∂ÔºåÊûÑÈÄ†ÊñπÊ≥ïÂÅö‰ª•‰∏ã‰∏§È°πÈáçË¶ÅÂ∑•‰ΩúÔºö Ë∞ÉÁî®Áà∂Á±ªÂÆπÂô®ÁöÑÊûÑÈÄ†ÊñπÊ≥ï(super(parent)ÊñπÊ≥ï)‰∏∫ÂÆπÂô®ËÆæÁΩÆÂ•ΩBeanËµÑÊ∫êÂä†ËΩΩÂô®„ÄÇ ÂÜçË∞ÉÁî®Áà∂Á±ªAbstractRefreshableConfigApplicationContextÁöÑsetConfigLocations(configLocations)ÊñπÊ≥ïËÆæÁΩÆBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑÂÆö‰ΩçË∑ØÂæÑ„ÄÇ ÈÄöËøáËøΩË∏™FileSystemXmlApplicationContextÁöÑÁªßÊâø‰ΩìÁ≥ªÔºåÂèëÁé∞ÂÖ∂Áà∂Á±ªÁöÑÁà∂Á±ªAbstractApplicationContext‰∏≠ÂàùÂßãÂåñIoCÂÆπÂô®ÊâÄÂÅöÁöÑ‰∏ªË¶ÅÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021 public abstract class AbstractApplicationContext extends DefaultResourceLoader implements ConfigurableApplicationContext, DisposableBean &#123; //ÈùôÊÄÅÂàùÂßãÂåñÂùóÔºåÂú®Êï¥‰∏™ÂÆπÂô®ÂàõÂª∫ËøáÁ®ã‰∏≠Âè™ÊâßË°å‰∏ÄÊ¨° static &#123; //‰∏∫‰∫ÜÈÅøÂÖçÂ∫îÁî®Á®ãÂ∫èÂú®Weblogic8.1ÂÖ≥Èó≠Êó∂Âá∫Áé∞Á±ªÂä†ËΩΩÂºÇÂ∏∏Âä†ËΩΩÈóÆÈ¢òÔºåÂä†ËΩΩIoCÂÆπ //Âô®ÂÖ≥Èó≠‰∫ã‰ª∂(ContextClosedEvent)Á±ª ContextClosedEvent.class.getName(); &#125; //FileSystemXmlApplicationContextË∞ÉÁî®Áà∂Á±ªÊûÑÈÄ†ÊñπÊ≥ïË∞ÉÁî®ÁöÑÂ∞±ÊòØËØ•ÊñπÊ≥ï public AbstractApplicationContext(ApplicationContext parent) &#123; this.parent = parent; this.resourcePatternResolver = getResourcePatternResolver(); &#125; //Ëé∑Âèñ‰∏Ä‰∏™Spring SourceÁöÑÂä†ËΩΩÂô®Áî®‰∫éËØªÂÖ•Spring BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ protected ResourcePatternResolver getResourcePatternResolver() &#123; // AbstractApplicationContextÁªßÊâøDefaultResourceLoaderÔºå‰πüÊòØ‰∏Ä‰∏™S //SpringËµÑÊ∫êÂä†ËΩΩÂô®ÔºåÂÖ∂getResource(String location)ÊñπÊ≥ïÁî®‰∫éËΩΩÂÖ•ËµÑÊ∫ê return new PathMatchingResourcePatternResolver(this); &#125; ‚Ä¶‚Ä¶ &#125; AbstractApplicationContextÊûÑÈÄ†ÊñπÊ≥ï‰∏≠Ë∞ÉÁî®PathMatchingResourcePatternResolverÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂàõÂª∫SpringËµÑÊ∫êÂä†ËΩΩÂô®Ôºö 12345public PathMatchingResourcePatternResolver(ResourceLoader resourceLoader) &#123; Assert.notNull(resourceLoader, "ResourceLoader must not be null"); //ËÆæÁΩÆSpringÁöÑËµÑÊ∫êÂä†ËΩΩÂô® this.resourceLoader = resourceLoader; &#125; Âú®ËÆæÁΩÆÂÆπÂô®ÁöÑËµÑÊ∫êÂä†ËΩΩÂô®‰πãÂêéÔºåÊé•‰∏ãÊù•FileSystemXmlApplicationContetÊâßË°åsetConfigLocationsÊñπÊ≥ïÈÄöËøáË∞ÉÁî®ÂÖ∂Áà∂Á±ªAbstractRefreshableConfigApplicationContextÁöÑÊñπÊ≥ïËøõË°åÂØπBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑÂÆö‰ΩçÔºåËØ•ÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021//Â§ÑÁêÜÂçï‰∏™ËµÑÊ∫êÊñá‰ª∂Ë∑ØÂæÑ‰∏∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÊÉÖÂÜµ public void setConfigLocation(String location) &#123; //String CONFIG_LOCATION_DELIMITERS = ",; /t/n"; //Âç≥Â§ö‰∏™ËµÑÊ∫êÊñá‰ª∂Ë∑ØÂæÑ‰πãÈó¥Áî®‚Äù ,; /t/n‚ÄùÂàÜÈöîÔºåËß£ÊûêÊàêÊï∞ÁªÑÂΩ¢Âºè setConfigLocations(StringUtils.tokenizeToStringArray(location, CONFIG_LOCATION_DELIMITERS)); &#125; //Ëß£ÊûêBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑË∑ØÂæÑÔºåÂ§ÑÁêÜÂ§ö‰∏™ËµÑÊ∫êÊñá‰ª∂Â≠óÁ¨¶‰∏≤Êï∞ÁªÑ public void setConfigLocations(String[] locations) &#123; if (locations != null) &#123; Assert.noNullElements(locations, "Config locations must not be null"); this.configLocations = new String[locations.length]; for (int i = 0; i &lt; locations.length; i++) &#123; // resolvePath‰∏∫Âêå‰∏Ä‰∏™Á±ª‰∏≠Â∞ÜÂ≠óÁ¨¶‰∏≤Ëß£Êûê‰∏∫Ë∑ØÂæÑÁöÑÊñπÊ≥ï this.configLocations[i] = resolvePath(locations[i]).trim(); &#125; &#125; else &#123; this.configLocations = null; &#125; &#125; ÈÄöËøáËøô‰∏§‰∏™ÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÊàë‰ª¨ÂèØ‰ª•ÁúãÂá∫ÔºåÊàë‰ª¨Êó¢ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Êù•ÈÖçÁΩÆÂ§ö‰∏™Spring BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂Ôºå‰πüÂèØ‰ª•‰ΩøÁî®Â≠óÁ¨¶‰∏≤Êï∞ÁªÑÔºåÂç≥‰∏ãÈù¢‰∏§ÁßçÊñπÂºèÈÉΩÊòØÂèØ‰ª•ÁöÑÔºö ClasspathResource res = new ClasspathResource(‚Äúa.xml,b.xml,‚Ä¶‚Ä¶‚Äù);Â§ö‰∏™ËµÑÊ∫êÊñá‰ª∂Ë∑ØÂæÑ‰πãÈó¥ÂèØ‰ª•ÊòØÁî®‚Äù ,; /t/n‚ÄùÁ≠âÂàÜÈöî„ÄÇ ClasspathResource res = new ClasspathResource(newString[]{‚Äúa.xml‚Äù,‚Äùb.xml‚Äù,‚Ä¶‚Ä¶});Ëá≥Ê≠§ÔºåSpring IoCÂÆπÂô®Âú®ÂàùÂßãÂåñÊó∂Â∞ÜÈÖçÁΩÆÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÂÆö‰Ωç‰∏∫SpringÂ∞ÅË£ÖÁöÑResource„ÄÇ AbstractApplicationContextÁöÑrefreshÂáΩÊï∞ËΩΩÂÖ•BeanÂÆö‰πâËøáÁ®ãSpring IoCÂÆπÂô®ÂØπBeanÂÆö‰πâËµÑÊ∫êÁöÑËΩΩÂÖ•ÊòØ‰ªérefresh()ÂáΩÊï∞ÂºÄÂßãÁöÑÔºårefresh()ÊòØ‰∏Ä‰∏™Ê®°ÊùøÊñπÊ≥ïÔºårefresh()ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØÔºöÂú®ÂàõÂª∫IoCÂÆπÂô®ÂâçÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊúâÂÆπÂô®Â≠òÂú®ÔºåÂàôÈúÄË¶ÅÊääÂ∑≤ÊúâÁöÑÂÆπÂô®ÈîÄÊØÅÂíåÂÖ≥Èó≠Ôºå‰ª•‰øùËØÅÂú®refresh‰πãÂêé‰ΩøÁî®ÁöÑÊòØÊñ∞Âª∫Á´ãËµ∑Êù•ÁöÑIoCÂÆπÂô®„ÄÇrefreshÁöÑ‰ΩúÁî®Á±ª‰ºº‰∫éÂØπIoCÂÆπÂô®ÁöÑÈáçÂêØÔºåÂú®Êñ∞Âª∫Á´ãÂ•ΩÁöÑÂÆπÂô®‰∏≠ÂØπÂÆπÂô®ËøõË°åÂàùÂßãÂåñÔºåÂØπBeanÂÆö‰πâËµÑÊ∫êËøõË°åËΩΩÂÖ• FileSystemXmlApplicationContextÈÄöËøáË∞ÉÁî®ÂÖ∂Áà∂Á±ªAbstractApplicationContextÁöÑrefresh()ÂáΩÊï∞ÂêØÂä®Êï¥‰∏™IoCÂÆπÂô®ÂØπBeanÂÆö‰πâÁöÑËΩΩÂÖ•ËøáÁ®ãÔºö123456789101112131415161718192021222324252627282930313233343536373839public void refresh() throws BeansException, IllegalStateException &#123; synchronized (this.startupShutdownMonitor) &#123; //Ë∞ÉÁî®ÂÆπÂô®ÂáÜÂ§áÂà∑Êñ∞ÁöÑÊñπÊ≥ïÔºåËé∑ÂèñÂÆπÂô®ÁöÑÂΩìÊó∂Êó∂Èó¥ÔºåÂêåÊó∂ÁªôÂÆπÂô®ËÆæÁΩÆÂêåÊ≠•Ê†áËØÜ prepareRefresh(); //ÂëäËØâÂ≠êÁ±ªÂêØÂä®refreshBeanFactory()ÊñπÊ≥ïÔºåBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑËΩΩÂÖ•‰ªé //Â≠êÁ±ªÁöÑrefreshBeanFactory()ÊñπÊ≥ïÂêØÂä® ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory(); //‰∏∫BeanFactoryÈÖçÁΩÆÂÆπÂô®ÁâπÊÄßÔºå‰æãÂ¶ÇÁ±ªÂä†ËΩΩÂô®„ÄÅ‰∫ã‰ª∂Â§ÑÁêÜÂô®Á≠â prepareBeanFactory(beanFactory); try &#123; //‰∏∫ÂÆπÂô®ÁöÑÊüê‰∫õÂ≠êÁ±ªÊåáÂÆöÁâπÊÆäÁöÑBeanPost‰∫ã‰ª∂Â§ÑÁêÜÂô® postProcessBeanFactory(beanFactory); //Ë∞ÉÁî®ÊâÄÊúâÊ≥®ÂÜåÁöÑBeanFactoryPostProcessorÁöÑBean invokeBeanFactoryPostProcessors(beanFactory); //‰∏∫BeanFactoryÊ≥®ÂÜåBeanPost‰∫ã‰ª∂Â§ÑÁêÜÂô®. //BeanPostProcessorÊòØBeanÂêéÁΩÆÂ§ÑÁêÜÂô®ÔºåÁî®‰∫éÁõëÂê¨ÂÆπÂô®Ëß¶ÂèëÁöÑ‰∫ã‰ª∂ registerBeanPostProcessors(beanFactory); //ÂàùÂßãÂåñ‰ø°ÊÅØÊ∫êÔºåÂíåÂõΩÈôÖÂåñÁõ∏ÂÖ≥. initMessageSource(); //ÂàùÂßãÂåñÂÆπÂô®‰∫ã‰ª∂‰º†Êí≠Âô®. initApplicationEventMulticaster(); //Ë∞ÉÁî®Â≠êÁ±ªÁöÑÊüê‰∫õÁâπÊÆäBeanÂàùÂßãÂåñÊñπÊ≥ï onRefresh(); //‰∏∫‰∫ã‰ª∂‰º†Êí≠Âô®Ê≥®ÂÜå‰∫ã‰ª∂ÁõëÂê¨Âô®. registerListeners(); //ÂàùÂßãÂåñÊâÄÊúâÂâ©‰ΩôÁöÑÂçïÊÄÅBean. finishBeanFactoryInitialization(beanFactory); //ÂàùÂßãÂåñÂÆπÂô®ÁöÑÁîüÂëΩÂë®Êúü‰∫ã‰ª∂Â§ÑÁêÜÂô®ÔºåÂπ∂ÂèëÂ∏ÉÂÆπÂô®ÁöÑÁîüÂëΩÂë®Êúü‰∫ã‰ª∂ finishRefresh(); &#125; catch (BeansException ex) &#123; //ÈîÄÊØÅ‰ª•ÂàõÂª∫ÁöÑÂçïÊÄÅBean destroyBeans(); //ÂèñÊ∂àrefreshÊìç‰ΩúÔºåÈáçÁΩÆÂÆπÂô®ÁöÑÂêåÊ≠•Ê†áËØÜ. cancelRefresh(ex); throw ex; &#125; &#125; &#125; refresh()ÊñπÊ≥ï‰∏ªË¶Å‰∏∫IoCÂÆπÂô®BeanÁöÑÁîüÂëΩÂë®ÊúüÁÆ°ÁêÜÊèê‰æõÊù°‰ª∂ÔºåSpring IoCÂÆπÂô®ËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰ªéÂÖ∂Â≠êÁ±ªÂÆπÂô®ÁöÑrefreshBeanFactory()ÊñπÊ≥ïÂêØÂä®ÔºåÊâÄ‰ª•Êï¥‰∏™refresh()‰∏≠‚ÄúConfigurableListableBeanFactory beanFactory =obtainFreshBeanFactory();‚ÄùËøôÂè•‰ª•Âêé‰ª£Á†ÅÁöÑÈÉΩÊòØÊ≥®ÂÜåÂÆπÂô®ÁöÑ‰ø°ÊÅØÊ∫êÂíåÁîüÂëΩÂë®Êúü‰∫ã‰ª∂ÔºåËΩΩÂÖ•ËøáÁ®ãÂ∞±ÊòØ‰ªéËøôÂè•‰ª£Á†ÅÂêØÂä®„ÄÇ refresh()ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØÔºöÂú®ÂàõÂª∫IoCÂÆπÂô®ÂâçÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊúâÂÆπÂô®Â≠òÂú®ÔºåÂàôÈúÄË¶ÅÊääÂ∑≤ÊúâÁöÑÂÆπÂô®ÈîÄÊØÅÂíåÂÖ≥Èó≠Ôºå‰ª•‰øùËØÅÂú®refresh‰πãÂêé‰ΩøÁî®ÁöÑÊòØÊñ∞Âª∫Á´ãËµ∑Êù•ÁöÑIoCÂÆπÂô®„ÄÇrefreshÁöÑ‰ΩúÁî®Á±ª‰ºº‰∫éÂØπIoCÂÆπÂô®ÁöÑÈáçÂêØÔºåÂú®Êñ∞Âª∫Á´ãÂ•ΩÁöÑÂÆπÂô®‰∏≠ÂØπÂÆπÂô®ËøõË°åÂàùÂßãÂåñÔºåÂØπBeanÂÆö‰πâËµÑÊ∫êËøõË°åËΩΩÂÖ• AbstractApplicationContextÁöÑobtainFreshBeanFactory()ÊñπÊ≥ïË∞ÉÁî®Â≠êÁ±ªÂÆπÂô®ÁöÑrefreshBeanFactory()ÊñπÊ≥ïÔºåÂêØÂä®ÂÆπÂô®ËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑËøáÁ®ãÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789protected ConfigurableListableBeanFactory obtainFreshBeanFactory() &#123; //ËøôÈáå‰ΩøÁî®‰∫ÜÂßîÊ¥æËÆæËÆ°Ê®°ÂºèÔºåÁà∂Á±ªÂÆö‰πâ‰∫ÜÊäΩË±°ÁöÑrefreshBeanFactory()ÊñπÊ≥ïÔºåÂÖ∑‰ΩìÂÆûÁé∞Ë∞ÉÁî®Â≠êÁ±ªÂÆπÂô®ÁöÑrefreshBeanFactory()ÊñπÊ≥ï refreshBeanFactory(); ConfigurableListableBeanFactory beanFactory = getBeanFactory(); if (logger.isDebugEnabled()) &#123; logger.debug("Bean factory for " + getDisplayName() + ": " + beanFactory); &#125; return beanFactory; &#125; AbstractApplicationContextÂ≠êÁ±ªÁöÑrefreshBeanFactory()ÊñπÊ≥ïÔºöAbstractApplicationContextÁ±ª‰∏≠Âè™ÊäΩË±°ÂÆö‰πâ‰∫ÜrefreshBeanFactory()ÊñπÊ≥ïÔºåÂÆπÂô®ÁúüÊ≠£Ë∞ÉÁî®ÁöÑÊòØÂÖ∂Â≠êÁ±ªAbstractRefreshableApplicationContextÂÆûÁé∞ÁöÑ refreshBeanFactory()ÊñπÊ≥ïÔºåÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021protected final void refreshBeanFactory() throws BeansException &#123; if (hasBeanFactory()) &#123;//Â¶ÇÊûúÂ∑≤ÁªèÊúâÂÆπÂô®ÔºåÈîÄÊØÅÂÆπÂô®‰∏≠ÁöÑbeanÔºåÂÖ≥Èó≠ÂÆπÂô® destroyBeans(); closeBeanFactory(); &#125; try &#123; //ÂàõÂª∫IoCÂÆπÂô® DefaultListableBeanFactory beanFactory = createBeanFactory(); beanFactory.setSerializationId(getId()); //ÂØπIoCÂÆπÂô®ËøõË°åÂÆöÂà∂ÂåñÔºåÂ¶ÇËÆæÁΩÆÂêØÂä®ÂèÇÊï∞ÔºåÂºÄÂêØÊ≥®Ëß£ÁöÑËá™Âä®Ë£ÖÈÖçÁ≠â customizeBeanFactory(beanFactory); //Ë∞ÉÁî®ËΩΩÂÖ•BeanÂÆö‰πâÁöÑÊñπÊ≥ïÔºå‰∏ªË¶ÅËøôÈáåÂèà‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂßîÊ¥æÊ®°ÂºèÔºåÂú®ÂΩìÂâçÁ±ª‰∏≠Âè™ÂÆö‰πâ‰∫ÜÊäΩË±°ÁöÑloadBeanDefinitionsÊñπÊ≥ïÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞Ë∞ÉÁî®Â≠êÁ±ªÂÆπÂô® loadBeanDefinitions(beanFactory); synchronized (this.beanFactoryMonitor) &#123; this.beanFactory = beanFactory; &#125; &#125; catch (IOException ex) &#123; throw new ApplicationContextException("I/O error parsing bean definition source for " + getDisplayName(), ex); &#125; &#125; Âú®Ëøô‰∏™ÊñπÊ≥ï‰∏≠ÔºåÂÖàÂà§Êñ≠BeanFactoryÊòØÂê¶Â≠òÂú®ÔºåÂ¶ÇÊûúÂ≠òÂú®ÂàôÂÖàÈîÄÊØÅbeansÂπ∂ÂÖ≥Èó≠beanFactoryÔºåÊé•ÁùÄÂàõÂª∫DefaultListableBeanFactoryÔºåÂπ∂Ë∞ÉÁî®loadBeanDefinitions(beanFactory)Ë£ÖËΩΩbeanÂÆö‰πâ AbstractRefreshableApplicationContextÂ≠êÁ±ªÁöÑloadBeanDefinitionsÊñπÊ≥ïAbstractRefreshableApplicationContext‰∏≠Âè™ÂÆö‰πâ‰∫ÜÊäΩË±°ÁöÑloadBeanDefinitionsÊñπÊ≥ïÔºåÂÆπÂô®ÁúüÊ≠£Ë∞ÉÁî®ÁöÑÊòØÂÖ∂Â≠êÁ±ªAbstractXmlApplicationContextÂØπËØ•ÊñπÊ≥ïÁöÑÂÆûÁé∞ÔºåAbstractXmlApplicationContextÁöÑ‰∏ªË¶ÅÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºöloadBeanDefinitionsÊñπÊ≥ïÂêåÊ†∑ÊòØÊäΩË±°ÊñπÊ≥ïÔºåÊòØÁî±ÂÖ∂Â≠êÁ±ªÂÆûÁé∞ÁöÑÔºå‰πüÂç≥Âú®AbstractXmlApplicationContext‰∏≠„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041public abstract class AbstractXmlApplicationContext extends AbstractRefreshableConfigApplicationContext &#123; ‚Ä¶‚Ä¶ //ÂÆûÁé∞Áà∂Á±ªÊäΩË±°ÁöÑËΩΩÂÖ•BeanÂÆö‰πâÊñπÊ≥ï @Override protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException &#123; //ÂàõÂª∫XmlBeanDefinitionReaderÔºåÂç≥ÂàõÂª∫BeanËØªÂèñÂô®ÔºåÂπ∂ÈÄöËøáÂõûË∞ÉËÆæÁΩÆÂà∞ÂÆπÂô®‰∏≠ÂéªÔºåÂÆπ Âô®‰ΩøÁî®ËØ•ËØªÂèñÂô®ËØªÂèñBeanÂÆö‰πâËµÑÊ∫ê XmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory); //‰∏∫BeanËØªÂèñÂô®ËÆæÁΩÆSpringËµÑÊ∫êÂä†ËΩΩÂô®ÔºåAbstractXmlApplicationContextÁöÑ //Á•ñÂÖàÁà∂Á±ªAbstractApplicationContextÁªßÊâøDefaultResourceLoaderÔºåÂõ†Ê≠§ÔºåÂÆπÂô®Êú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™ËµÑÊ∫êÂä†ËΩΩÂô® beanDefinitionReader.setResourceLoader(this); //‰∏∫BeanËØªÂèñÂô®ËÆæÁΩÆSAX xmlËß£ÊûêÂô® beanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this)); //ÂΩìBeanËØªÂèñÂô®ËØªÂèñBeanÂÆö‰πâÁöÑXmlËµÑÊ∫êÊñá‰ª∂Êó∂ÔºåÂêØÁî®XmlÁöÑÊ†°È™åÊú∫Âà∂ initBeanDefinitionReader(beanDefinitionReader); //BeanËØªÂèñÂô®ÁúüÊ≠£ÂÆûÁé∞Âä†ËΩΩÁöÑÊñπÊ≥ï loadBeanDefinitions(beanDefinitionReader); &#125; //Xml BeanËØªÂèñÂô®Âä†ËΩΩBeanÂÆö‰πâËµÑÊ∫ê protected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws BeansException, IOException &#123; //Ëé∑ÂèñBeanÂÆö‰πâËµÑÊ∫êÁöÑÂÆö‰Ωç Resource[] configResources = getConfigResources(); if (configResources != null) &#123; //Xml BeanËØªÂèñÂô®Ë∞ÉÁî®ÂÖ∂Áà∂Á±ªAbstractBeanDefinitionReaderËØªÂèñÂÆö‰Ωç //ÁöÑBeanÂÆö‰πâËµÑÊ∫ê reader.loadBeanDefinitions(configResources); &#125; //Â¶ÇÊûúÂ≠êÁ±ª‰∏≠Ëé∑ÂèñÁöÑBeanÂÆö‰πâËµÑÊ∫êÂÆö‰Ωç‰∏∫Á©∫ÔºåÂàôËé∑ÂèñFileSystemXmlApplicationContextÊûÑÈÄ†ÊñπÊ≥ï‰∏≠setConfigLocationsÊñπÊ≥ïËÆæÁΩÆÁöÑËµÑÊ∫ê String[] configLocations = getConfigLocations(); if (configLocations != null) &#123; //Xml BeanËØªÂèñÂô®Ë∞ÉÁî®ÂÖ∂Áà∂Á±ªAbstractBeanDefinitionReaderËØªÂèñÂÆö‰Ωç //ÁöÑBeanÂÆö‰πâËµÑÊ∫ê reader.loadBeanDefinitions(configLocations); &#125; &#125; //ËøôÈáåÂèà‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂßîÊâòÊ®°ÂºèÔºåË∞ÉÁî®Â≠êÁ±ªÁöÑËé∑ÂèñBeanÂÆö‰πâËµÑÊ∫êÂÆö‰ΩçÁöÑÊñπÊ≥ï //ËØ•ÊñπÊ≥ïÂú®ClassPathXmlApplicationContext‰∏≠ËøõË°åÂÆûÁé∞ÔºåÂØπ‰∫éÊàë‰ª¨ //‰∏æ‰æãÂàÜÊûêÊ∫êÁ†ÅÁöÑFileSystemXmlApplicationContextÊ≤°Êúâ‰ΩøÁî®ËØ•ÊñπÊ≥ï protected Resource[] getConfigResources() &#123; return null; &#125; ‚Ä¶‚Ä¶ &#125; Xml BeanËØªÂèñÂô®(XmlBeanDefinitionReader)Ë∞ÉÁî®ÂÖ∂Áà∂Á±ªAbstractBeanDefinitionReaderÁöÑ reader.loadBeanDefinitionsÊñπÊ≥ïËØªÂèñBeanÂÆö‰πâËµÑÊ∫ê„ÄÇ Áî±‰∫éÊàë‰ª¨‰ΩøÁî®FileSystemXmlApplicationContext‰Ωú‰∏∫‰æãÂ≠êÂàÜÊûêÔºåÂõ†Ê≠§getConfigResourcesÁöÑËøîÂõûÂÄº‰∏∫nullÔºåÂõ†Ê≠§Á®ãÂ∫èÊâßË°åreader.loadBeanDefinitions(configLocations)ÂàÜÊîØ„ÄÇ AbstractBeanDefinitionReaderËØªÂèñBeanÂÆö‰πâËµÑÊ∫êAbstractBeanDefinitionReaderÁöÑloadBeanDefinitionsÊñπÊ≥ïÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºöÂèØ‰ª•Âà∞org.springframework.beans.factory.supportÁúã‰∏Ä‰∏ãBeanDefinitionReaderÁöÑÁªìÊûÑÂú®ÂÖ∂ÊäΩË±°Áà∂Á±ªAbstractBeanDefinitionReader‰∏≠ÂÆö‰πâ‰∫ÜËΩΩÂÖ•ËøáÁ®ã123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//ÈáçËΩΩÊñπÊ≥ïÔºåË∞ÉÁî®‰∏ãÈù¢ÁöÑloadBeanDefinitions(String, Set&lt;Resource&gt;);ÊñπÊ≥ï public int loadBeanDefinitions(String location) throws BeanDefinitionStoreException &#123; return loadBeanDefinitions(location, null); &#125; public int loadBeanDefinitions(String location, Set&lt;Resource&gt; actualResources) throws BeanDefinitionStoreException &#123; //Ëé∑ÂèñÂú®IoCÂÆπÂô®ÂàùÂßãÂåñËøáÁ®ã‰∏≠ËÆæÁΩÆÁöÑËµÑÊ∫êÂä†ËΩΩÂô® ResourceLoader resourceLoader = getResourceLoader(); if (resourceLoader == null) &#123; throw new BeanDefinitionStoreException( "Cannot import bean definitions from location [" + location + "]: no ResourceLoader available"); &#125; if (resourceLoader instanceof ResourcePatternResolver) &#123; try &#123; //Â∞ÜÊåáÂÆö‰ΩçÁΩÆÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂Ëß£Êûê‰∏∫Spring IoCÂÆπÂô®Â∞ÅË£ÖÁöÑËµÑÊ∫ê //Âä†ËΩΩÂ§ö‰∏™ÊåáÂÆö‰ΩçÁΩÆÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ Resource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location); //ÂßîÊ¥æË∞ÉÁî®ÂÖ∂Â≠êÁ±ªXmlBeanDefinitionReaderÁöÑÊñπÊ≥ïÔºåÂÆûÁé∞Âä†ËΩΩÂäüËÉΩ int loadCount = loadBeanDefinitions(resources); if (actualResources != null) &#123; for (Resource resource : resources) &#123; actualResources.add(resource); &#125; &#125; if (logger.isDebugEnabled()) &#123; logger.debug("Loaded " + loadCount + " bean definitions from location pattern [" + location + "]"); &#125; return loadCount; &#125; catch (IOException ex) &#123; throw new BeanDefinitionStoreException( "Could not resolve bean definition resource pattern [" + location + "]", ex); &#125; &#125; else &#123; //Â∞ÜÊåáÂÆö‰ΩçÁΩÆÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂Ëß£Êûê‰∏∫Spring IoCÂÆπÂô®Â∞ÅË£ÖÁöÑËµÑÊ∫ê //Âä†ËΩΩÂçï‰∏™ÊåáÂÆö‰ΩçÁΩÆÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ Resource resource = resourceLoader.getResource(location); //ÂßîÊ¥æË∞ÉÁî®ÂÖ∂Â≠êÁ±ªXmlBeanDefinitionReaderÁöÑÊñπÊ≥ïÔºåÂÆûÁé∞Âä†ËΩΩÂäüËÉΩ int loadCount = loadBeanDefinitions(resource); if (actualResources != null) &#123; actualResources.add(resource); &#125; if (logger.isDebugEnabled()) &#123; logger.debug("Loaded " + loadCount + " bean definitions from location [" + location + "]"); &#125; return loadCount; &#125; &#125; //ÈáçËΩΩÊñπÊ≥ïÔºåË∞ÉÁî®loadBeanDefinitions(String); public int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException &#123; Assert.notNull(locations, "Location array must not be null"); int counter = 0; for (String location : locations) &#123; counter += loadBeanDefinitions(location); &#125; return counter; &#125; loadBeanDefinitions(Resource‚Ä¶resources)ÊñπÊ≥ïÂíå‰∏äÈù¢ÂàÜÊûêÁöÑ3‰∏™ÊñπÊ≥ïÁ±ª‰ººÔºåÂêåÊ†∑‰πüÊòØË∞ÉÁî®XmlBeanDefinitionReaderÁöÑloadBeanDefinitionsÊñπÊ≥ï„ÄÇ ‰ªéÂØπAbstractBeanDefinitionReaderÁöÑloadBeanDefinitionsÊñπÊ≥ïÊ∫êÁ†ÅÂàÜÊûêÂèØ‰ª•ÁúãÂá∫ËØ•ÊñπÊ≥ïÂÅö‰∫Ü‰ª•‰∏ã‰∏§‰ª∂‰∫ãÔºö Ë∞ÉÁî®ËµÑÊ∫êÂä†ËΩΩÂô®ÁöÑËé∑ÂèñËµÑÊ∫êÊñπÊ≥ïresourceLoader.getResource(location)ÔºåËé∑ÂèñÂà∞Ë¶ÅÂä†ËΩΩÁöÑËµÑÊ∫ê„ÄÇ ÁúüÊ≠£ÊâßË°åÂä†ËΩΩÂäüËÉΩÊòØÂÖ∂Â≠êÁ±ªXmlBeanDefinitionReaderÁöÑloadBeanDefinitionsÊñπÊ≥ï„ÄÇ ËµÑÊ∫êÂä†ËΩΩÂô®Ëé∑ÂèñË¶ÅËØªÂÖ•ÁöÑËµÑÊ∫êXmlBeanDefinitionReaderÈÄöËøáË∞ÉÁî®ÂÖ∂Áà∂Á±ªDefaultResourceLoaderÁöÑgetResourceÊñπÊ≥ïËé∑ÂèñË¶ÅÂä†ËΩΩÁöÑËµÑÊ∫êÔºåÂÖ∂Ê∫êÁ†ÅÂ¶Ç‰∏ã12345678910111213141516171819//Ëé∑ÂèñResourceÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÊñπÊ≥ï public Resource getResource(String location) &#123; Assert.notNull(location, "Location must not be null"); //Â¶ÇÊûúÊòØÁ±ªË∑ØÂæÑÁöÑÊñπÂºèÔºåÈÇ£ÈúÄË¶Å‰ΩøÁî®ClassPathResource Êù•ÂæóÂà∞bean Êñá‰ª∂ÁöÑËµÑÊ∫êÂØπË±° if (location.startsWith(CLASSPATH_URL_PREFIX)) &#123; return new ClassPathResource(location.substring(CLASSPATH_URL_PREFIX.length()), getClassLoader()); &#125; try &#123; // Â¶ÇÊûúÊòØURL ÊñπÂºèÔºå‰ΩøÁî®UrlResource ‰Ωú‰∏∫bean Êñá‰ª∂ÁöÑËµÑÊ∫êÂØπË±° URL url = new URL(location); return new UrlResource(url); &#125; catch (MalformedURLException ex) &#123; &#125; //Â¶ÇÊûúÊó¢‰∏çÊòØclasspathÊ†áËØÜÔºåÂèà‰∏çÊòØURLÊ†áËØÜÁöÑResourceÂÆö‰ΩçÔºåÂàôË∞ÉÁî® //ÂÆπÂô®Êú¨Ë∫´ÁöÑgetResourceByPathÊñπÊ≥ïËé∑ÂèñResource return getResourceByPath(location); &#125; FileSystemXmlApplicationContextÂÆπÂô®Êèê‰æõ‰∫ÜgetResourceByPathÊñπÊ≥ïÁöÑÂÆûÁé∞ÔºåÂ∞±ÊòØ‰∏∫‰∫ÜÂ§ÑÁêÜÊó¢‰∏çÊòØclasspathÊ†áËØÜÔºåÂèà‰∏çÊòØURLÊ†áËØÜÁöÑResourceÂÆö‰ΩçËøôÁßçÊÉÖÂÜµ„ÄÇ1234567protected Resource getResourceByPath(String path) &#123; if (path != null &amp;&amp; path.startsWith("/")) &#123; path = path.substring(1); &#125; //ËøôÈáå‰ΩøÁî®Êñá‰ª∂Á≥ªÁªüËµÑÊ∫êÂØπË±°Êù•ÂÆö‰πâbean Êñá‰ª∂ return new FileSystemResource(path); &#125; ËøôÊ†∑‰ª£Á†ÅÂ∞±ÂõûÂà∞‰∫Ü FileSystemXmlApplicationContext ‰∏≠Êù•Ôºå‰ªñÊèê‰æõ‰∫ÜFileSystemResource Êù•ÂÆåÊàê‰ªéÊñá‰ª∂Á≥ªÁªüÂæóÂà∞ÈÖçÁΩÆÊñá‰ª∂ÁöÑËµÑÊ∫êÂÆö‰πâ„ÄÇ ËøôÊ†∑ÔºåÂ∞±ÂèØ‰ª•‰ªéÊñá‰ª∂Á≥ªÁªüË∑ØÂæÑ‰∏äÂØπIOC ÈÖçÁΩÆÊñá‰ª∂ËøõË°åÂä†ËΩΩ - ÂΩìÁÑ∂Êàë‰ª¨ÂèØ‰ª•ÊåâÁÖßËøô‰∏™ÈÄªËæë‰ªé‰ªª‰ΩïÂú∞ÊñπÂä†ËΩΩÔºåÂú®Spring ‰∏≠Êàë‰ª¨ÁúãÂà∞ÂÆÉÊèê‰æõ ÁöÑÂêÑÁßçËµÑÊ∫êÊäΩË±°ÔºåÊØîÂ¶ÇClassPathResource, URLResource,FileSystemResource Á≠âÊù•‰æõÊàë‰ª¨‰ΩøÁî®„ÄÇ‰∏äÈù¢Êàë‰ª¨ÁúãÂà∞ÁöÑÊòØÂÆö‰ΩçResource ÁöÑ‰∏Ä‰∏™ËøáÁ®ãÔºåËÄåËøôÂè™ÊòØÂä†ËΩΩËøáÁ®ãÁöÑ‰∏ÄÈÉ®ÂàÜ. XmlBeanDefinitionReaderÂä†ËΩΩBeanÂÆö‰πâËµÑÊ∫êBeanÂÆö‰πâÁöÑResourceÂæóÂà∞‰∫ÜÁªßÁª≠ÂõûÂà∞XmlBeanDefinitionReaderÁöÑloadBeanDefinitions(Resource ‚Ä¶)ÊñπÊ≥ïÁúãÂà∞‰ª£Ë°®beanÊñá‰ª∂ÁöÑËµÑÊ∫êÂÆö‰πâ‰ª•ÂêéÁöÑËΩΩÂÖ•ËøáÁ®ã„ÄÇ12345678910111213141516171819202122232425262728293031323334353637383940//XmlBeanDefinitionReaderÂä†ËΩΩËµÑÊ∫êÁöÑÂÖ•Âè£ÊñπÊ≥ï public int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException &#123; //Â∞ÜËØªÂÖ•ÁöÑXMLËµÑÊ∫êËøõË°åÁâπÊÆäÁºñÁ†ÅÂ§ÑÁêÜ return loadBeanDefinitions(new EncodedResource(resource)); &#125; //ËøôÈáåÊòØËΩΩÂÖ•XMLÂΩ¢ÂºèBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÊñπÊ≥ï public int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException &#123; ....... try &#123; //Â∞ÜËµÑÊ∫êÊñá‰ª∂ËΩ¨‰∏∫InputStreamÁöÑIOÊµÅ InputStream inputStream = encodedResource.getResource().getInputStream(); try &#123; //‰ªéInputStream‰∏≠ÂæóÂà∞XMLÁöÑËß£ÊûêÊ∫ê InputSource inputSource = new InputSource(inputStream); if (encodedResource.getEncoding() != null) &#123; inputSource.setEncoding(encodedResource.getEncoding()); &#125; //ËøôÈáåÊòØÂÖ∑‰ΩìÁöÑËØªÂèñËøáÁ®ã return doLoadBeanDefinitions(inputSource, encodedResource.getResource()); &#125; finally &#123; //ÂÖ≥Èó≠‰ªéResource‰∏≠ÂæóÂà∞ÁöÑIOÊµÅ inputStream.close(); &#125; &#125; ......... 26&#125; //‰ªéÁâπÂÆöXMLÊñá‰ª∂‰∏≠ÂÆûÈôÖËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫êÁöÑÊñπÊ≥ï protected int doLoadBeanDefinitions(InputSource inputSource, Resource resource) throws BeanDefinitionStoreException &#123; try &#123; int validationMode = getValidationModeForResource(resource); //Â∞ÜXMLÊñá‰ª∂ËΩ¨Êç¢‰∏∫DOMÂØπË±°ÔºåËß£ÊûêËøáÁ®ãÁî±documentLoaderÂÆûÁé∞ Document doc = this.documentLoader.loadDocument( inputSource, this.entityResolver, this.errorHandler, validationMode, this.namespaceAware); //ËøôÈáåÊòØÂêØÂä®ÂØπBeanÂÆö‰πâËß£ÊûêÁöÑËØ¶ÁªÜËøáÁ®ãÔºåËØ•Ëß£ÊûêËøáÁ®ã‰ºöÁî®Âà∞SpringÁöÑBeanÈÖçÁΩÆËßÑÂàô return registerBeanDefinitions(doc, resource); &#125; ....... &#125; ÈÄöËøáÊ∫êÁ†ÅÂàÜÊûêÔºåËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÁöÑÊúÄÂêé‰∏ÄÊ≠•ÊòØÂ∞ÜBeanÂÆö‰πâËµÑÊ∫êËΩ¨Êç¢‰∏∫DocumentÂØπË±°ÔºåËØ•ËøáÁ®ãÁî±documentLoaderÂÆûÁé∞ DocumentLoaderÂ∞ÜBeanÂÆö‰πâËµÑÊ∫êËΩ¨Êç¢‰∏∫DocumentÂØπË±°DocumentLoaderÂ∞ÜBeanÂÆö‰πâËµÑÊ∫êËΩ¨Êç¢‰∏∫DocumentÂØπË±°ÔºåocumentLoaderÂ∞ÜBeanÂÆö‰πâËµÑÊ∫êËΩ¨Êç¢ÊàêDocumentÂØπË±°ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617181920212223242526272829303132333435363738//‰ΩøÁî®Ê†áÂáÜÁöÑJAXPÂ∞ÜËΩΩÂÖ•ÁöÑBeanÂÆö‰πâËµÑÊ∫êËΩ¨Êç¢ÊàêdocumentÂØπË±° public Document loadDocument(InputSource inputSource, EntityResolver entityResolver, ErrorHandler errorHandler, int validationMode, boolean namespaceAware) throws Exception &#123; //ÂàõÂª∫Êñá‰ª∂Ëß£ÊûêÂô®Â∑•ÂéÇ DocumentBuilderFactory factory = createDocumentBuilderFactory(validationMode, namespaceAware); if (logger.isDebugEnabled()) &#123; logger.debug("Using JAXP provider [" + factory.getClass().getName() + "]"); &#125; //ÂàõÂª∫ÊñáÊ°£Ëß£ÊûêÂô® DocumentBuilder builder = createDocumentBuilder(factory, entityResolver, errorHandler); //Ëß£ÊûêSpringÁöÑBeanÂÆö‰πâËµÑÊ∫ê return builder.parse(inputSource); &#125; protected DocumentBuilderFactory createDocumentBuilderFactory(int validationMode, boolean namespaceAware) throws ParserConfigurationException &#123; //ÂàõÂª∫ÊñáÊ°£Ëß£ÊûêÂ∑•ÂéÇ DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); factory.setNamespaceAware(namespaceAware); //ËÆæÁΩÆËß£ÊûêXMLÁöÑÊ†°È™å if (validationMode != XmlValidationModeDetector.VALIDATION_NONE) &#123; factory.setValidating(true); if (validationMode == XmlValidationModeDetector.VALIDATION_XSD) &#123; factory.setNamespaceAware(true); try &#123; factory.setAttribute(SCHEMA_LANGUAGE_ATTRIBUTE, XSD_SCHEMA_LANGUAGE); &#125; catch (IllegalArgumentException ex) &#123; ParserConfigurationException pcex = new ParserConfigurationException( "Unable to validate using XSD: Your JAXP provider [" + factory + "] does not support XML Schema. Are you running on Java 1.4 with Apache Crimson? " + "Upgrade to Apache Xerces (or Java 1.5) for full XSD support."); pcex.initCause(ex); throw pcex; &#125; &#125; &#125; return factory; &#125; ËØ•Ëß£ÊûêËøáÁ®ãË∞ÉÁî®JavaEEÊ†áÂáÜÁöÑJAXPÊ†áÂáÜËøõË°åÂ§ÑÁêÜ„ÄÇ Ëá≥Ê≠§Spring IoCÂÆπÂô®Ê†πÊçÆÂÆö‰ΩçÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ÔºåÂ∞ÜÂÖ∂Âä†ËΩΩËØªÂÖ•Âπ∂ËΩ¨Êç¢Êàê‰∏∫DocumentÂØπË±°ËøáÁ®ãÂÆåÊàê„ÄÇ Êé•‰∏ãÊù•Êàë‰ª¨Ë¶ÅÁªßÁª≠ÂàÜÊûêSpring IoCÂÆπÂô®Â∞ÜËΩΩÂÖ•ÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ËΩ¨Êç¢‰∏∫DocumentÂØπË±°‰πãÂêéÔºåÊòØÂ¶Ç‰ΩïÂ∞ÜÂÖ∂Ëß£Êûê‰∏∫Spring IoCÁÆ°ÁêÜÁöÑBeanÂØπË±°Âπ∂Â∞ÜÂÖ∂Ê≥®ÂÜåÂà∞ÂÆπÂô®‰∏≠ÁöÑ„ÄÇ XmlBeanDefinitionReaderËß£ÊûêËΩΩÂÖ•ÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂XmlBeanDefinitionReaderÁ±ª‰∏≠ÁöÑdoLoadBeanDefinitionsÊñπÊ≥ïÊòØ‰ªéÁâπÂÆöXMLÊñá‰ª∂‰∏≠ÂÆûÈôÖËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫êÁöÑÊñπÊ≥ïÔºåËØ•ÊñπÊ≥ïÂú®ËΩΩÂÖ•BeanÂÆö‰πâËµÑÊ∫ê‰πãÂêéÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫DocumentÂØπË±°ÔºåÊé•‰∏ãÊù•Ë∞ÉÁî®registerBeanDefinitionsÂêØÂä®Spring IoCÂÆπÂô®ÂØπBeanÂÆö‰πâÁöÑËß£ÊûêËøáÁ®ãÔºåregisterBeanDefinitionsÊñπÊ≥ïÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415//ÊåâÁÖßSpringÁöÑBeanËØ≠‰πâË¶ÅÊ±ÇÂ∞ÜBeanÂÆö‰πâËµÑÊ∫êËß£ÊûêÂπ∂ËΩ¨Êç¢‰∏∫ÂÆπÂô®ÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑ public int registerBeanDefinitions(Document doc, Resource resource) throws BeanDefinitionStoreException &#123; //ÂæóÂà∞BeanDefinitionDocumentReaderÊù•ÂØπxmlÊ†ºÂºèÁöÑBeanDefinitionËß£Êûê BeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader(); //Ëé∑ÂæóÂÆπÂô®‰∏≠Ê≥®ÂÜåÁöÑBeanÊï∞Èáè int countBefore = getRegistry().getBeanDefinitionCount(); //Ëß£ÊûêËøáÁ®ãÂÖ•Âè£ÔºåËøôÈáå‰ΩøÁî®‰∫ÜÂßîÊ¥æÊ®°ÂºèÔºåBeanDefinitionDocumentReaderÂè™ÊòØ‰∏™Êé•Âè£Ôºå//ÂÖ∑‰ΩìÁöÑËß£ÊûêÂÆûÁé∞ËøáÁ®ãÊúâÂÆûÁé∞Á±ªDefaultBeanDefinitionDocumentReaderÂÆåÊàê documentReader.registerBeanDefinitions(doc, createReaderContext(resource)); //ÁªüËÆ°Ëß£ÊûêÁöÑBeanÊï∞Èáè return getRegistry().getBeanDefinitionCount() - countBefore; &#125; //ÂàõÂª∫BeanDefinitionDocumentReaderÂØπË±°ÔºåËß£ÊûêDocumentÂØπË±° protected BeanDefinitionDocumentReader createBeanDefinitionDocumentReader() &#123; return BeanDefinitionDocumentReader.class.cast(BeanUtils.instantiateClass(this.documentReaderClass)); &#125; BeanÂÆö‰πâËµÑÊ∫êÁöÑËΩΩÂÖ•Ëß£ÊûêÂàÜ‰∏∫‰ª•‰∏ã‰∏§‰∏™ËøáÁ®ãÔºö ÈÄöËøáË∞ÉÁî®XMLËß£ÊûêÂô®Â∞ÜBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ËΩ¨Êç¢ÂæóÂà∞DocumentÂØπË±°Ôºå‰ΩÜÊòØËøô‰∫õDocumentÂØπË±°Âπ∂Ê≤°ÊúâÊåâÁÖßSpringÁöÑBeanËßÑÂàôËøõË°åËß£Êûê„ÄÇËøô‰∏ÄÊ≠•ÊòØËΩΩÂÖ•ÁöÑËøáÁ®ã Âú®ÂÆåÊàêÈÄöÁî®ÁöÑXMLËß£Êûê‰πãÂêéÔºåÊåâÁÖßSpringÁöÑBeanËßÑÂàôÂØπDocumentÂØπË±°ËøõË°åËß£Êûê„ÄÇ ÊåâÁÖßSpringÁöÑBeanËßÑÂàôÂØπDocumentÂØπË±°Ëß£ÊûêÁöÑËøáÁ®ãÊòØÂú®Êé•Âè£BeanDefinitionDocumentReaderÁöÑÂÆûÁé∞Á±ªDefaultBeanDefinitionDocumentReader‰∏≠ÂÆûÁé∞ÁöÑ„ÄÇ DefaultBeanDefinitionDocumentReaderÂØπBeanÂÆö‰πâÁöÑDocumentÂØπË±°Ëß£ÊûêBeanDefinitionDocumentReaderÊé•Âè£ÈÄöËøáregisterBeanDefinitionsÊñπÊ≥ïË∞ÉÁî®ÂÖ∂ÂÆûÁé∞Á±ªDefaultBeanDefinitionDocumentReaderÂØπDocumentÂØπË±°ËøõË°åËß£ÊûêÔºåËß£ÊûêÁöÑ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188//Ê†πÊçÆSpring DTDÂØπBeanÁöÑÂÆö‰πâËßÑÂàôËß£ÊûêBeanÂÆö‰πâDocumentÂØπË±° public void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) &#123; //Ëé∑ÂæóXMLÊèèËø∞Á¨¶ this.readerContext = readerContext; logger.debug("Loading bean definitions"); //Ëé∑ÂæóDocumentÁöÑÊ†πÂÖÉÁ¥† Element root = doc.getDocumentElement(); //ÂÖ∑‰ΩìÁöÑËß£ÊûêËøáÁ®ãÁî±BeanDefinitionParserDelegateÂÆûÁé∞Ôºå //BeanDefinitionParserDelegate‰∏≠ÂÆö‰πâ‰∫ÜSpring BeanÂÆö‰πâXMLÊñá‰ª∂ÁöÑÂêÑÁßçÂÖÉÁ¥† BeanDefinitionParserDelegate delegate = createHelper(readerContext, root); //Âú®Ëß£ÊûêBeanÂÆö‰πâ‰πãÂâçÔºåËøõË°åËá™ÂÆö‰πâÁöÑËß£ÊûêÔºåÂ¢ûÂº∫Ëß£ÊûêËøáÁ®ãÁöÑÂèØÊâ©Â±ïÊÄß preProcessXml(root); //‰ªéDocumentÁöÑÊ†πÂÖÉÁ¥†ÂºÄÂßãËøõË°åBeanÂÆö‰πâÁöÑDocumentÂØπË±° parseBeanDefinitions(root, delegate); //Âú®Ëß£ÊûêBeanÂÆö‰πâ‰πãÂêéÔºåËøõË°åËá™ÂÆö‰πâÁöÑËß£ÊûêÔºåÂ¢ûÂä†Ëß£ÊûêËøáÁ®ãÁöÑÂèØÊâ©Â±ïÊÄß postProcessXml(root); &#125; //ÂàõÂª∫BeanDefinitionParserDelegateÔºåÁî®‰∫éÂÆåÊàêÁúüÊ≠£ÁöÑËß£ÊûêËøáÁ®ã protected BeanDefinitionParserDelegate createHelper(XmlReaderContext readerContext, Element root) &#123; BeanDefinitionParserDelegate delegate = new BeanDefinitionParserDelegate(readerContext); //BeanDefinitionParserDelegateÂàùÂßãÂåñDocumentÊ†πÂÖÉÁ¥† delegate.initDefaults(root); return delegate; &#125; //‰ΩøÁî®SpringÁöÑBeanËßÑÂàô‰ªéDocumentÁöÑÊ†πÂÖÉÁ¥†ÂºÄÂßãËøõË°åBeanÂÆö‰πâÁöÑDocumentÂØπË±° protected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) &#123; //BeanÂÆö‰πâÁöÑDocumentÂØπË±°‰ΩøÁî®‰∫ÜSpringÈªòËÆ§ÁöÑXMLÂëΩÂêçÁ©∫Èó¥ if (delegate.isDefaultNamespace(root)) &#123; //Ëé∑ÂèñBeanÂÆö‰πâÁöÑDocumentÂØπË±°Ê†πÂÖÉÁ¥†ÁöÑÊâÄÊúâÂ≠êËäÇÁÇπ NodeList nl = root.getChildNodes(); for (int i = 0; i &lt; nl.getLength(); i++) &#123; Node node = nl.item(i); //Ëé∑ÂæóDocumentËäÇÁÇπÊòØXMLÂÖÉÁ¥†ËäÇÁÇπ if (node instanceof Element) &#123; Element ele = (Element) node; //BeanÂÆö‰πâÁöÑDocumentÁöÑÂÖÉÁ¥†ËäÇÁÇπ‰ΩøÁî®ÁöÑÊòØSpringÈªòËÆ§ÁöÑXMLÂëΩÂêçÁ©∫Èó¥ if (delegate.isDefaultNamespace(ele)) &#123; //‰ΩøÁî®SpringÁöÑBeanËßÑÂàôËß£ÊûêÂÖÉÁ¥†ËäÇÁÇπ parseDefaultElement(ele, delegate); &#125; else &#123; //Ê≤°Êúâ‰ΩøÁî®SpringÈªòËÆ§ÁöÑXMLÂëΩÂêçÁ©∫Èó¥ÔºåÂàô‰ΩøÁî®Áî®Êà∑Ëá™ÂÆö‰πâÁöÑËß£//ÊûêËßÑÂàôËß£ÊûêÂÖÉÁ¥†ËäÇÁÇπ delegate.parseCustomElement(ele); &#125; &#125; &#125; &#125; else &#123; //DocumentÁöÑÊ†πËäÇÁÇπÊ≤°Êúâ‰ΩøÁî®SpringÈªòËÆ§ÁöÑÂëΩÂêçÁ©∫Èó¥ÔºåÂàô‰ΩøÁî®Áî®Êà∑Ëá™ÂÆö‰πâÁöÑ //Ëß£ÊûêËßÑÂàôËß£ÊûêDocumentÊ†πËäÇÁÇπ delegate.parseCustomElement(root); &#125; &#125; //‰ΩøÁî®SpringÁöÑBeanËßÑÂàôËß£ÊûêDocumentÂÖÉÁ¥†ËäÇÁÇπ private void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) &#123; //Â¶ÇÊûúÂÖÉÁ¥†ËäÇÁÇπÊòØ&lt;Import&gt;ÂØºÂÖ•ÂÖÉÁ¥†ÔºåËøõË°åÂØºÂÖ•Ëß£Êûê if (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) &#123; importBeanDefinitionResource(ele); &#125; //Â¶ÇÊûúÂÖÉÁ¥†ËäÇÁÇπÊòØ&lt;Alias&gt;Âà´ÂêçÂÖÉÁ¥†ÔºåËøõË°åÂà´ÂêçËß£Êûê else if (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) &#123; processAliasRegistration(ele); &#125; //ÂÖÉÁ¥†ËäÇÁÇπÊó¢‰∏çÊòØÂØºÂÖ•ÂÖÉÁ¥†Ôºå‰πü‰∏çÊòØÂà´ÂêçÂÖÉÁ¥†ÔºåÂç≥ÊôÆÈÄöÁöÑ&lt;Bean&gt;ÂÖÉÁ¥†Ôºå //ÊåâÁÖßSpringÁöÑBeanËßÑÂàôËß£ÊûêÂÖÉÁ¥† else if (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) &#123; processBeanDefinition(ele, delegate); &#125; &#125; //Ëß£Êûê&lt;Import&gt;ÂØºÂÖ•ÂÖÉÁ¥†Ôºå‰ªéÁªôÂÆöÁöÑÂØºÂÖ•Ë∑ØÂæÑÂä†ËΩΩBeanÂÆö‰πâËµÑÊ∫êÂà∞Spring IoCÂÆπÂô®‰∏≠ protected void importBeanDefinitionResource(Element ele) &#123; //Ëé∑ÂèñÁªôÂÆöÁöÑÂØºÂÖ•ÂÖÉÁ¥†ÁöÑlocationÂ±ûÊÄß String location = ele.getAttribute(RESOURCE_ATTRIBUTE); //Â¶ÇÊûúÂØºÂÖ•ÂÖÉÁ¥†ÁöÑlocationÂ±ûÊÄßÂÄº‰∏∫Á©∫ÔºåÂàôÊ≤°ÊúâÂØºÂÖ•‰ªª‰ΩïËµÑÊ∫êÔºåÁõ¥Êé•ËøîÂõû if (!StringUtils.hasText(location)) &#123; getReaderContext().error("Resource location must not be empty", ele); return; &#125; //‰ΩøÁî®Á≥ªÁªüÂèòÈáèÂÄºËß£ÊûêlocationÂ±ûÊÄßÂÄº location = SystemPropertyUtils.resolvePlaceholders(location); Set&lt;Resource&gt; actualResources = new LinkedHashSet&lt;Resource&gt;(4); //Ê†áËØÜÁªôÂÆöÁöÑÂØºÂÖ•ÂÖÉÁ¥†ÁöÑlocationÊòØÂê¶ÊòØÁªùÂØπË∑ØÂæÑ boolean absoluteLocation = false; try &#123; absoluteLocation = ResourcePatternUtils.isUrl(location) || ResourceUtils.toURI(location).isAbsolute(); &#125; catch (URISyntaxException ex) &#123; //ÁªôÂÆöÁöÑÂØºÂÖ•ÂÖÉÁ¥†ÁöÑlocation‰∏çÊòØÁªùÂØπË∑ØÂæÑ &#125; //ÁªôÂÆöÁöÑÂØºÂÖ•ÂÖÉÁ¥†ÁöÑlocationÊòØÁªùÂØπË∑ØÂæÑ if (absoluteLocation) &#123; try &#123; //‰ΩøÁî®ËµÑÊ∫êËØªÂÖ•Âô®Âä†ËΩΩÁªôÂÆöË∑ØÂæÑÁöÑBeanÂÆö‰πâËµÑÊ∫ê int importCount = getReaderContext().getReader().loadBeanDefinitions(location, actualResources); if (logger.isDebugEnabled()) &#123; logger.debug("Imported " + importCount + " bean definitions from URL location [" + location + "]"); &#125; &#125; catch (BeanDefinitionStoreException ex) &#123; getReaderContext().error( "Failed to import bean definitions from URL location [" + location + "]", ele, ex); &#125; &#125; else &#123; //ÁªôÂÆöÁöÑÂØºÂÖ•ÂÖÉÁ¥†ÁöÑlocationÊòØÁõ∏ÂØπË∑ØÂæÑ try &#123; int importCount; //Â∞ÜÁªôÂÆöÂØºÂÖ•ÂÖÉÁ¥†ÁöÑlocationÂ∞ÅË£Ö‰∏∫Áõ∏ÂØπË∑ØÂæÑËµÑÊ∫ê Resource relativeResource = getReaderContext().getResource().createRelative(location); //Â∞ÅË£ÖÁöÑÁõ∏ÂØπË∑ØÂæÑËµÑÊ∫êÂ≠òÂú® if (relativeResource.exists()) &#123; //‰ΩøÁî®ËµÑÊ∫êËØªÂÖ•Âô®Âä†ËΩΩBeanÂÆö‰πâËµÑÊ∫ê importCount = getReaderContext().getReader().loadBeanDefinitions(relativeResource); actualResources.add(relativeResource); &#125; //Â∞ÅË£ÖÁöÑÁõ∏ÂØπË∑ØÂæÑËµÑÊ∫ê‰∏çÂ≠òÂú® else &#123; //Ëé∑ÂèñSpring IoCÂÆπÂô®ËµÑÊ∫êËØªÂÖ•Âô®ÁöÑÂü∫Êú¨Ë∑ØÂæÑ String baseLocation = getReaderContext().getResource().getURL().toString(); //Ê†πÊçÆSpring IoCÂÆπÂô®ËµÑÊ∫êËØªÂÖ•Âô®ÁöÑÂü∫Êú¨Ë∑ØÂæÑÂä†ËΩΩÁªôÂÆöÂØºÂÖ• //Ë∑ØÂæÑÁöÑËµÑÊ∫ê importCount = getReaderContext().getReader().loadBeanDefinitions( StringUtils.applyRelativePath(baseLocation, location), actualResources); &#125; if (logger.isDebugEnabled()) &#123; logger.debug("Imported " + importCount + " bean definitions from relative location [" + location + "]"); &#125; &#125; catch (IOException ex) &#123; getReaderContext().error("Failed to resolve current resource location", ele, ex); &#125; catch (BeanDefinitionStoreException ex) &#123; getReaderContext().error("Failed to import bean definitions from relative location [" + location + "]", ele, ex); &#125; &#125; Resource[] actResArray = actualResources.toArray(new Resource[actualResources.size()]); //Âú®Ëß£ÊûêÂÆå&lt;Import&gt;ÂÖÉÁ¥†‰πãÂêéÔºåÂèëÈÄÅÂÆπÂô®ÂØºÂÖ•ÂÖ∂‰ªñËµÑÊ∫êÂ§ÑÁêÜÂÆåÊàê‰∫ã‰ª∂ getReaderContext().fireImportProcessed(location, actResArray, extractSource(ele)); &#125; //Ëß£Êûê&lt;Alias&gt;Âà´ÂêçÂÖÉÁ¥†Ôºå‰∏∫BeanÂêëSpring IoCÂÆπÂô®Ê≥®ÂÜåÂà´Âêç protected void processAliasRegistration(Element ele) &#123; //Ëé∑Âèñ&lt;Alias&gt;Âà´ÂêçÂÖÉÁ¥†‰∏≠nameÁöÑÂ±ûÊÄßÂÄº String name = ele.getAttribute(NAME_ATTRIBUTE); //Ëé∑Âèñ&lt;Alias&gt;Âà´ÂêçÂÖÉÁ¥†‰∏≠aliasÁöÑÂ±ûÊÄßÂÄº String alias = ele.getAttribute(ALIAS_ATTRIBUTE); boolean valid = true; //&lt;alias&gt;Âà´ÂêçÂÖÉÁ¥†ÁöÑnameÂ±ûÊÄßÂÄº‰∏∫Á©∫ if (!StringUtils.hasText(name)) &#123; getReaderContext().error("Name must not be empty", ele); valid = false; &#125; //&lt;alias&gt;Âà´ÂêçÂÖÉÁ¥†ÁöÑaliasÂ±ûÊÄßÂÄº‰∏∫Á©∫ if (!StringUtils.hasText(alias)) &#123; getReaderContext().error("Alias must not be empty", ele); valid = false; &#125; if (valid) &#123; try &#123; //ÂêëÂÆπÂô®ÁöÑËµÑÊ∫êËØªÂÖ•Âô®Ê≥®ÂÜåÂà´Âêç getReaderContext().getRegistry().registerAlias(name, alias); &#125; catch (Exception ex) &#123; getReaderContext().error("Failed to register alias '" + alias + "' for bean with name '" + name + "'", ele, ex); &#125; //Âú®Ëß£ÊûêÂÆå&lt;Alias&gt;ÂÖÉÁ¥†‰πãÂêéÔºåÂèëÈÄÅÂÆπÂô®Âà´ÂêçÂ§ÑÁêÜÂÆåÊàê‰∫ã‰ª∂ getReaderContext().fireAliasRegistered(name, alias, extractSource(ele)); &#125; &#125; //Ëß£ÊûêBeanÂÆö‰πâËµÑÊ∫êDocumentÂØπË±°ÁöÑÊôÆÈÄöÂÖÉÁ¥† protected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) &#123; // BeanDefinitionHolderÊòØÂØπBeanDefinitionÁöÑÂ∞ÅË£ÖÔºåÂç≥BeanÂÆö‰πâÁöÑÂ∞ÅË£ÖÁ±ª //ÂØπDocumentÂØπË±°‰∏≠&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑËß£ÊûêÁî±BeanDefinitionParserDelegateÂÆûÁé∞ BeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele); if (bdHolder != null) &#123; bdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder); try &#123; //ÂêëSpring IoCÂÆπÂô®Ê≥®ÂÜåËß£ÊûêÂæóÂà∞ÁöÑBeanÂÆö‰πâÔºåËøôÊòØBeanÂÆö‰πâÂêëIoCÂÆπÂô®Ê≥®ÂÜåÁöÑÂÖ•Âè£ BeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry()); &#125; catch (BeanDefinitionStoreException ex) &#123; getReaderContext().error("Failed to register bean definition with name '" + bdHolder.getBeanName() + "'", ele, ex); &#125; //Âú®ÂÆåÊàêÂêëSpring IoCÂÆπÂô®Ê≥®ÂÜåËß£ÊûêÂæóÂà∞ÁöÑBeanÂÆö‰πâ‰πãÂêéÔºåÂèëÈÄÅÊ≥®ÂÜå‰∫ã‰ª∂ getReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder)); &#125; &#125; ÈÄöËøá‰∏äËø∞Spring IoCÂÆπÂô®ÂØπËΩΩÂÖ•ÁöÑBeanÂÆö‰πâDocumentËß£ÊûêÂèØ‰ª•ÁúãÂá∫ÔºåÊàë‰ª¨‰ΩøÁî®SpringÊó∂ÔºåÂú®SpringÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂèØ‰ª•‰ΩøÁî®ÂÖÉÁ¥†Êù•ÂØºÂÖ•IoCÂÆπÂô®ÊâÄÈúÄË¶ÅÁöÑÂÖ∂‰ªñËµÑÊ∫êÔºåSpring IoCÂÆπÂô®Âú®Ëß£ÊûêÊó∂‰ºöÈ¶ñÂÖàÂ∞ÜÊåáÂÆöÂØºÂÖ•ÁöÑËµÑÊ∫êÂä†ËΩΩËøõÂÆπÂô®‰∏≠„ÄÇ‰ΩøÁî®Âà´ÂêçÊó∂ÔºåSpring IoCÂÆπÂô®È¶ñÂÖàÂ∞ÜÂà´ÂêçÂÖÉÁ¥†ÊâÄÂÆö‰πâÁöÑÂà´ÂêçÊ≥®ÂÜåÂà∞ÂÆπÂô®‰∏≠„ÄÇ ÂØπ‰∫éÊó¢‰∏çÊòØÂÖÉÁ¥†ÔºåÂèà‰∏çÊòØÂÖÉÁ¥†ÁöÑÂÖÉÁ¥†ÔºåÂç≥SpringÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊôÆÈÄöÁöÑÂÖÉÁ¥†ÁöÑËß£ÊûêÁî±BeanDefinitionParserDelegateÁ±ªÁöÑparseBeanDefinitionElementÊñπÊ≥ïÊù•ÂÆûÁé∞„ÄÇ BeanDefinitionParserDelegateËß£ÊûêBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰∏≠ÁöÑÂÖÉÁ¥†BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰∏≠ÁöÑÂíåÂÖÉÁ¥†Ëß£ÊûêÂú®DefaultBeanDefinitionDocumentReader‰∏≠Â∑≤ÁªèÂÆåÊàêÔºåÂØπBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰∏≠‰ΩøÁî®ÊúÄÂ§öÁöÑÂÖÉÁ¥†‰∫§Áî±BeanDefinitionParserDelegateÊù•Ëß£ÊûêÔºåÂÖ∂Ëß£ÊûêÂÆûÁé∞ÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125//Ëß£Êûê&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑÂÖ•Âè£ public BeanDefinitionHolder parseBeanDefinitionElement(Element ele) &#123; return parseBeanDefinitionElement(ele, null); &#125; //Ëß£ÊûêBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰∏≠ÁöÑ&lt;Bean&gt;ÂÖÉÁ¥†ÔºåËøô‰∏™ÊñπÊ≥ï‰∏≠‰∏ªË¶ÅÂ§ÑÁêÜ&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑidÔºåname //ÂíåÂà´ÂêçÂ±ûÊÄß public BeanDefinitionHolder parseBeanDefinitionElement(Element ele, BeanDefinition containingBean) &#123; //Ëé∑Âèñ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÁöÑidÂ±ûÊÄßÂÄº String id = ele.getAttribute(ID_ATTRIBUTE); //Ëé∑Âèñ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÁöÑnameÂ±ûÊÄßÂÄº String nameAttr = ele.getAttribute(NAME_ATTRIBUTE); ////Ëé∑Âèñ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÁöÑaliasÂ±ûÊÄßÂÄº List&lt;String&gt; aliases = new ArrayList&lt;String&gt;(); //Â∞Ü&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÁöÑÊâÄÊúânameÂ±ûÊÄßÂÄºÂ≠òÊîæÂà∞Âà´Âêç‰∏≠ if (StringUtils.hasLength(nameAttr)) &#123; String[] nameArr = StringUtils.tokenizeToStringArray(nameAttr, BEAN_NAME_DELIMITERS); aliases.addAll(Arrays.asList(nameArr)); &#125; String beanName = id; //Â¶ÇÊûú&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠Ê≤°ÊúâÈÖçÁΩÆidÂ±ûÊÄßÊó∂ÔºåÂ∞ÜÂà´Âêç‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÄºËµãÂÄºÁªôbeanName if (!StringUtils.hasText(beanName) &amp;&amp; !aliases.isEmpty()) &#123; beanName = aliases.remove(0); if (logger.isDebugEnabled()) &#123; logger.debug("No XML 'id' specified - using '" + beanName + "' as bean name and " + aliases + " as aliases"); &#125; &#125; //Ê£ÄÊü•&lt;Bean&gt;ÂÖÉÁ¥†ÊâÄÈÖçÁΩÆÁöÑidÊàñËÄÖnameÁöÑÂîØ‰∏ÄÊÄßÔºåcontainingBeanÊ†áËØÜ&lt;Bean&gt; //ÂÖÉÁ¥†‰∏≠ÊòØÂê¶ÂåÖÂê´Â≠ê&lt;Bean&gt;ÂÖÉÁ¥† if (containingBean == null) &#123; //Ê£ÄÊü•&lt;Bean&gt;ÂÖÉÁ¥†ÊâÄÈÖçÁΩÆÁöÑid„ÄÅnameÊàñËÄÖÂà´ÂêçÊòØÂê¶ÈáçÂ§ç checkNameUniqueness(beanName, aliases, ele); &#125; //ËØ¶ÁªÜÂØπ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÈÖçÁΩÆÁöÑBeanÂÆö‰πâËøõË°åËß£ÊûêÁöÑÂú∞Êñπ AbstractBeanDefinition beanDefinition = parseBeanDefinitionElement(ele, beanName, containingBean); if (beanDefinition != null) &#123; if (!StringUtils.hasText(beanName)) &#123; try &#123; if (containingBean != null) &#123; //Â¶ÇÊûú&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠Ê≤°ÊúâÈÖçÁΩÆid„ÄÅÂà´ÂêçÊàñËÄÖnameÔºå‰∏îÊ≤°ÊúâÂåÖÂê´Â≠ê//&lt;Bean&gt;ÂÖÉÁ¥†Ôºå‰∏∫Ëß£ÊûêÁöÑBeanÁîüÊàê‰∏Ä‰∏™ÂîØ‰∏ÄbeanNameÂπ∂Ê≥®ÂÜå beanName = BeanDefinitionReaderUtils.generateBeanName( beanDefinition, this.readerContext.getRegistry(), true); &#125; else &#123; //Â¶ÇÊûú&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠Ê≤°ÊúâÈÖçÁΩÆid„ÄÅÂà´ÂêçÊàñËÄÖnameÔºå‰∏îÂåÖÂê´‰∫ÜÂ≠ê//&lt;Bean&gt;ÂÖÉÁ¥†Ôºå‰∏∫Ëß£ÊûêÁöÑBean‰ΩøÁî®Âà´ÂêçÂêëIoCÂÆπÂô®Ê≥®ÂÜå beanName = this.readerContext.generateBeanName(beanDefinition); //‰∏∫Ëß£ÊûêÁöÑBean‰ΩøÁî®Âà´ÂêçÊ≥®ÂÜåÊó∂Ôºå‰∏∫‰∫ÜÂêëÂêéÂÖºÂÆπ //Spring1.2/2.0ÔºåÁªôÂà´ÂêçÊ∑ªÂä†Á±ªÂêçÂêéÁºÄ String beanClassName = beanDefinition.getBeanClassName(); if (beanClassName != null &amp;&amp; beanName.startsWith(beanClassName) &amp;&amp; beanName.length() &gt; beanClassName.length() &amp;&amp; !this.readerContext.getRegistry().isBeanNameInUse(beanClassName)) &#123; aliases.add(beanClassName); &#125; &#125; if (logger.isDebugEnabled()) &#123; logger.debug("Neither XML 'id' nor 'name' specified - " + "using generated bean name [" + beanName + "]"); &#125; &#125; catch (Exception ex) &#123; error(ex.getMessage(), ele); return null; &#125; &#125; String[] aliasesArray = StringUtils.toStringArray(aliases); return new BeanDefinitionHolder(beanDefinition, beanName, aliasesArray); &#125; //ÂΩìËß£ÊûêÂá∫ÈîôÊó∂ÔºåËøîÂõûnull return null; &#125; //ËØ¶ÁªÜÂØπ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÈÖçÁΩÆÁöÑBeanÂÆö‰πâÂÖ∂‰ªñÂ±ûÊÄßËøõË°åËß£ÊûêÔºåÁî±‰∫é‰∏äÈù¢ÁöÑÊñπÊ≥ï‰∏≠Â∑≤ÁªèÂØπ//BeanÁöÑid„ÄÅnameÂíåÂà´ÂêçÁ≠âÂ±ûÊÄßËøõË°å‰∫ÜÂ§ÑÁêÜÔºåËØ•ÊñπÊ≥ï‰∏≠‰∏ªË¶ÅÂ§ÑÁêÜÈô§Ëøô‰∏â‰∏™‰ª•Â§ñÁöÑÂÖ∂‰ªñÂ±ûÊÄßÊï∞ÊçÆ public AbstractBeanDefinition parseBeanDefinitionElement( Element ele, String beanName, BeanDefinition containingBean) &#123; //ËÆ∞ÂΩïËß£ÊûêÁöÑ&lt;Bean&gt; this.parseState.push(new BeanEntry(beanName)); //ËøôÈáåÂè™ËØªÂèñ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÈÖçÁΩÆÁöÑclassÂêçÂ≠óÔºåÁÑ∂ÂêéËΩΩÂÖ•Âà∞BeanDefinition‰∏≠Âéª //Âè™ÊòØËÆ∞ÂΩïÈÖçÁΩÆÁöÑclassÂêçÂ≠óÔºå‰∏çÂÅöÂÆû‰æãÂåñÔºåÂØπË±°ÁöÑÂÆû‰æãÂåñÂú®‰æùËµñÊ≥®ÂÖ•Êó∂ÂÆåÊàê String className = null; if (ele.hasAttribute(CLASS_ATTRIBUTE)) &#123; className = ele.getAttribute(CLASS_ATTRIBUTE).trim(); &#125; try &#123; String parent = null; //Â¶ÇÊûú&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÈÖçÁΩÆ‰∫ÜparentÂ±ûÊÄßÔºåÂàôËé∑ÂèñparentÂ±ûÊÄßÁöÑÂÄº if (ele.hasAttribute(PARENT_ATTRIBUTE)) &#123; parent = ele.getAttribute(PARENT_ATTRIBUTE); &#125; //Ê†πÊçÆ&lt;Bean&gt;ÂÖÉÁ¥†ÈÖçÁΩÆÁöÑclassÂêçÁß∞ÂíåparentÂ±ûÊÄßÂÄºÂàõÂª∫BeanDefinition //‰∏∫ËΩΩÂÖ•BeanÂÆö‰πâ‰ø°ÊÅØÂÅöÂáÜÂ§á AbstractBeanDefinition bd = createBeanDefinition(className, parent); //ÂØπÂΩìÂâçÁöÑ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÈÖçÁΩÆÁöÑ‰∏Ä‰∫õÂ±ûÊÄßËøõË°åËß£ÊûêÂíåËÆæÁΩÆÔºåÂ¶ÇÈÖçÁΩÆÁöÑÂçïÊÄÅ(singleton)Â±ûÊÄßÁ≠â parseBeanDefinitionAttributes(ele, beanName, containingBean, bd); //‰∏∫&lt;Bean&gt;ÂÖÉÁ¥†Ëß£ÊûêÁöÑBeanËÆæÁΩÆdescription‰ø°ÊÅØ bd.setDescription(DomUtils.getChildElementValueByTagName(ele, DESCRIPTION_ELEMENT)); //ÂØπ&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑmeta(ÂÖÉ‰ø°ÊÅØ)Â±ûÊÄßËß£Êûê parseMetaElements(ele, bd); //ÂØπ&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑlookup-methodÂ±ûÊÄßËß£Êûê parseLookupOverrideSubElements(ele, bd.getMethodOverrides()); //ÂØπ&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑreplaced-methodÂ±ûÊÄßËß£Êûê parseReplacedMethodSubElements(ele, bd.getMethodOverrides()); //Ëß£Êûê&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑÊûÑÈÄ†ÊñπÊ≥ïËÆæÁΩÆ parseConstructorArgElements(ele, bd); //Ëß£Êûê&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑ&lt;property&gt;ËÆæÁΩÆ parsePropertyElements(ele, bd); //Ëß£Êûê&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑqualifierÂ±ûÊÄß parseQualifierElements(ele, bd); //‰∏∫ÂΩìÂâçËß£ÊûêÁöÑBeanËÆæÁΩÆÊâÄÈúÄÁöÑËµÑÊ∫êÂíå‰æùËµñÂØπË±° bd.setResource(this.readerContext.getResource()); bd.setSource(extractSource(ele)); return bd; &#125; catch (ClassNotFoundException ex) &#123; error("Bean class [" + className + "] not found", ele, ex); &#125; catch (NoClassDefFoundError err) &#123; error("Class that bean class [" + className + "] depends on not found", ele, err); &#125; catch (Throwable ex) &#123; error("Unexpected failure during bean definition parsing", ele, ex); &#125; finally &#123; this.parseState.pop(); &#125; //Ëß£Êûê&lt;Bean&gt;ÂÖÉÁ¥†Âá∫ÈîôÊó∂ÔºåËøîÂõûnull return null; &#125; Âè™Ë¶Å‰ΩøÁî®ËøáSpringÔºåÂØπSpringÈÖçÁΩÆÊñá‰ª∂ÊØîËæÉÁÜüÊÇâÁöÑ‰∫∫ÔºåÈÄöËøáÂØπ‰∏äËø∞Ê∫êÁ†ÅÁöÑÂàÜÊûêÔºåÂ∞±‰ºöÊòéÁôΩÊàë‰ª¨Âú®SpringÈÖçÁΩÆÊñá‰ª∂‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏≠ÈÖçÁΩÆÁöÑÂ±ûÊÄßÂ∞±ÊòØÈÄöËøáËØ•ÊñπÊ≥ïËß£ÊûêÂíåËÆæÁΩÆÂà∞Bean‰∏≠ÂéªÁöÑ„ÄÇ Ê≥®ÊÑèÔºöÂú®Ëß£ÊûêÂÖÉÁ¥†ËøáÁ®ã‰∏≠Ê≤°ÊúâÂàõÂª∫ÂíåÂÆû‰æãÂåñBeanÂØπË±°ÔºåÂè™ÊòØÂàõÂª∫‰∫ÜBeanÂØπË±°ÁöÑÂÆö‰πâÁ±ªBeanDefinitionÔºåÂ∞ÜÂÖÉÁ¥†‰∏≠ÁöÑÈÖçÁΩÆ‰ø°ÊÅØËÆæÁΩÆÂà∞BeanDefinition‰∏≠‰Ωú‰∏∫ËÆ∞ÂΩïÔºåÂΩì‰æùËµñÊ≥®ÂÖ•Êó∂Êâç‰ΩøÁî®Ëøô‰∫õËÆ∞ÂΩï‰ø°ÊÅØÂàõÂª∫ÂíåÂÆû‰æãÂåñÂÖ∑‰ΩìÁöÑBeanÂØπË±°„ÄÇ ‰∏äÈù¢ÊñπÊ≥ï‰∏≠‰∏Ä‰∫õÂØπ‰∏Ä‰∫õÈÖçÁΩÆÂ¶ÇÂÖÉ‰ø°ÊÅØ(meta)„ÄÅqualifierÁ≠âÁöÑËß£ÊûêÔºåÊàë‰ª¨Âú®Spring‰∏≠ÈÖçÁΩÆÊó∂‰ΩøÁî®ÁöÑ‰πü‰∏çÂ§öÔºåÊàë‰ª¨Âú®‰ΩøÁî®SpringÁöÑÂÖÉÁ¥†Êó∂ÔºåÈÖçÁΩÆÊúÄÂ§öÁöÑÊòØÂ±ûÊÄßÔºåÂõ†Ê≠§Êàë‰ª¨‰∏ãÈù¢ÁªßÁª≠ÂàÜÊûêÊ∫êÁ†ÅÔºå‰∫ÜËß£BeanÁöÑÂ±ûÊÄßÂú®Ëß£ÊûêÊó∂ÊòØÂ¶Ç‰ΩïËÆæÁΩÆÁöÑ„ÄÇ BeanDefinitionParserDelegateËß£ÊûêÂÖÉÁ¥†BeanDefinitionParserDelegateÂú®Ëß£ÊûêË∞ÉÁî®parsePropertyElementsÊñπÊ≥ïËß£ÊûêÂÖÉÁ¥†‰∏≠ÁöÑÂ±ûÊÄßÂ≠êÂÖÉÁ¥†ÔºåËß£ÊûêÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102//Ëß£Êûê&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÁöÑ&lt;property&gt;Â≠êÂÖÉÁ¥† public void parsePropertyElements(Element beanEle, BeanDefinition bd) &#123; //Ëé∑Âèñ&lt;Bean&gt;ÂÖÉÁ¥†‰∏≠ÊâÄÊúâÁöÑÂ≠êÂÖÉÁ¥† NodeList nl = beanEle.getChildNodes(); for (int i = 0; i &lt; nl.getLength(); i++) &#123; Node node = nl.item(i); //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;property&gt;Â≠êÂÖÉÁ¥†ÔºåÂàôË∞ÉÁî®Ëß£Êûê&lt;property&gt;Â≠êÂÖÉÁ¥†ÊñπÊ≥ïËß£Êûê if (isCandidateElement(node) &amp;&amp; nodeNameEquals(node, PROPERTY_ELEMENT)) &#123; parsePropertyElement((Element) node, bd); &#125; &#125; &#125; //Ëß£Êûê&lt;property&gt;ÂÖÉÁ¥† public void parsePropertyElement(Element ele, BeanDefinition bd) &#123; //Ëé∑Âèñ&lt;property&gt;ÂÖÉÁ¥†ÁöÑÂêçÂ≠ó String propertyName = ele.getAttribute(NAME_ATTRIBUTE); if (!StringUtils.hasLength(propertyName)) &#123; error("Tag 'property' must have a 'name' attribute", ele); return; &#125; this.parseState.push(new PropertyEntry(propertyName)); try &#123; //Â¶ÇÊûú‰∏Ä‰∏™Bean‰∏≠Â∑≤ÁªèÊúâÂêåÂêçÁöÑpropertyÂ≠òÂú®ÔºåÂàô‰∏çËøõË°åËß£ÊûêÔºåÁõ¥Êé•ËøîÂõû„ÄÇ //Âç≥Â¶ÇÊûúÂú®Âêå‰∏Ä‰∏™Bean‰∏≠ÈÖçÁΩÆÂêåÂêçÁöÑpropertyÔºåÂàôÂè™ÊúâÁ¨¨‰∏Ä‰∏™Ëµ∑‰ΩúÁî® if (bd.getPropertyValues().contains(propertyName)) &#123; error("Multiple 'property' definitions for property '" + propertyName + "'", ele); return; &#125; //Ëß£ÊûêËé∑ÂèñpropertyÁöÑÂÄº Object val = parsePropertyValue(ele, bd, propertyName); //Ê†πÊçÆpropertyÁöÑÂêçÂ≠óÂíåÂÄºÂàõÂª∫propertyÂÆû‰æã PropertyValue pv = new PropertyValue(propertyName, val); //Ëß£Êûê&lt;property&gt;ÂÖÉÁ¥†‰∏≠ÁöÑÂ±ûÊÄß parseMetaElements(ele, pv); pv.setSource(extractSource(ele)); bd.getPropertyValues().addPropertyValue(pv); &#125; finally &#123; this.parseState.pop(); &#125; &#125; //Ëß£ÊûêËé∑ÂèñpropertyÂÄº public Object parsePropertyValue(Element ele, BeanDefinition bd, String propertyName) &#123; String elementName = (propertyName != null) ? "&lt;property&gt; element for property '" + propertyName + "'" : "&lt;constructor-arg&gt; element"; //Ëé∑Âèñ&lt;property&gt;ÁöÑÊâÄÊúâÂ≠êÂÖÉÁ¥†ÔºåÂè™ËÉΩÊòØÂÖ∂‰∏≠‰∏ÄÁßçÁ±ªÂûã:ref,value,listÁ≠â NodeList nl = ele.getChildNodes(); Element subElement = null; for (int i = 0; i &lt; nl.getLength(); i++) &#123; Node node = nl.item(i); //Â≠êÂÖÉÁ¥†‰∏çÊòØdescriptionÂíåmetaÂ±ûÊÄß if (node instanceof Element &amp;&amp; !nodeNameEquals(node, DESCRIPTION_ELEMENT) &amp;&amp; !nodeNameEquals(node, META_ELEMENT)) &#123; if (subElement != null) &#123; error(elementName + " must not contain more than one sub-element", ele); &#125; else &#123;//ÂΩìÂâç&lt;property&gt;ÂÖÉÁ¥†ÂåÖÂê´ÊúâÂ≠êÂÖÉÁ¥† subElement = (Element) node; &#125; &#125; &#125; //Âà§Êñ≠propertyÁöÑÂ±ûÊÄßÂÄºÊòØrefËøòÊòØvalueÔºå‰∏çÂÖÅËÆ∏Êó¢ÊòØrefÂèàÊòØvalue boolean hasRefAttribute = ele.hasAttribute(REF_ATTRIBUTE); boolean hasValueAttribute = ele.hasAttribute(VALUE_ATTRIBUTE); if ((hasRefAttribute &amp;&amp; hasValueAttribute) || ((hasRefAttribute || hasValueAttribute) &amp;&amp; subElement != null)) &#123; error(elementName + " is only allowed to contain either 'ref' attribute OR 'value' attribute OR sub-element", ele); &#125; //Â¶ÇÊûúÂ±ûÊÄßÊòØrefÔºåÂàõÂª∫‰∏Ä‰∏™refÁöÑÊï∞ÊçÆÂØπË±°RuntimeBeanReferenceÔºåËøô‰∏™ÂØπË±° //Â∞ÅË£Ö‰∫Üref‰ø°ÊÅØ if (hasRefAttribute) &#123; String refName = ele.getAttribute(REF_ATTRIBUTE); if (!StringUtils.hasText(refName)) &#123; error(elementName + " contains empty 'ref' attribute", ele); &#125; //‰∏Ä‰∏™ÊåáÂêëËøêË°åÊó∂ÊâÄ‰æùËµñÂØπË±°ÁöÑÂºïÁî® RuntimeBeanReference ref = new RuntimeBeanReference(refName); //ËÆæÁΩÆËøô‰∏™refÁöÑÊï∞ÊçÆÂØπË±°ÊòØË¢´ÂΩìÂâçÁöÑpropertyÂØπË±°ÊâÄÂºïÁî® ref.setSource(extractSource(ele)); return ref; &#125; //Â¶ÇÊûúÂ±ûÊÄßÊòØvalueÔºåÂàõÂª∫‰∏Ä‰∏™valueÁöÑÊï∞ÊçÆÂØπË±°TypedStringValueÔºåËøô‰∏™ÂØπË±° //Â∞ÅË£Ö‰∫Üvalue‰ø°ÊÅØ else if (hasValueAttribute) &#123; //‰∏Ä‰∏™ÊåÅÊúâStringÁ±ªÂûãÂÄºÁöÑÂØπË±° TypedStringValue valueHolder = new TypedStringValue(ele.getAttribute(VALUE_ATTRIBUTE)); //ËÆæÁΩÆËøô‰∏™valueÊï∞ÊçÆÂØπË±°ÊòØË¢´ÂΩìÂâçÁöÑpropertyÂØπË±°ÊâÄÂºïÁî® valueHolder.setSource(extractSource(ele)); return valueHolder; &#125; //Â¶ÇÊûúÂΩìÂâç&lt;property&gt;ÂÖÉÁ¥†ËøòÊúâÂ≠êÂÖÉÁ¥† else if (subElement != null) &#123; //Ëß£Êûê&lt;property&gt;ÁöÑÂ≠êÂÖÉÁ¥† return parsePropertySubElement(subElement, bd); &#125; else &#123; //properyÂ±ûÊÄß‰∏≠Êó¢‰∏çÊòØrefÔºå‰πü‰∏çÊòØvalueÂ±ûÊÄßÔºåËß£ÊûêÂá∫ÈîôËøîÂõûnull error(elementName + " must specify a ref or value", ele); return null; &#125; &#125; ÈÄöËøáÂØπ‰∏äËø∞Ê∫êÁ†ÅÁöÑÂàÜÊûêÔºåÊàë‰ª¨ÂèØ‰ª•‰∫ÜËß£Âú®SpringÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÂÖÉÁ¥†‰∏≠ÂÖÉÁ¥†ÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÁöÑÔºö refË¢´Â∞ÅË£Ö‰∏∫ÊåáÂêë‰æùËµñÂØπË±°‰∏Ä‰∏™ÂºïÁî® valueÈÖçÁΩÆÈÉΩ‰ºöÂ∞ÅË£ÖÊàê‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Á±ªÂûãÁöÑÂØπË±° refÂíåvalueÈÉΩÈÄöËøá‚ÄúËß£ÊûêÁöÑÊï∞ÊçÆÁ±ªÂûãÂ±ûÊÄßÂÄº.setSource(extractSource(ele));‚ÄùÊñπÊ≥ïÂ∞ÜÂ±ûÊÄßÂÄº/ÂºïÁî®‰∏éÊâÄÂºïÁî®ÁöÑÂ±ûÊÄßÂÖ≥ËÅîËµ∑Êù• Âú®ÊñπÊ≥ïÁöÑÊúÄÂêéÂØπ‰∫éÂÖÉÁ¥†ÁöÑÂ≠êÂÖÉÁ¥†ÈÄöËøáparsePropertySubElement ÊñπÊ≥ïËß£ÊûêÔºåÊàë‰ª¨ÁªßÁª≠ÂàÜÊûêËØ•ÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÔºå‰∫ÜËß£ÂÖ∂Ëß£ÊûêËøáÁ®ã„ÄÇ Ëß£ÊûêÂÖÉÁ¥†ÁöÑÂ≠êÂÖÉÁ¥†Âú®BeanDefinitionParserDelegateÁ±ª‰∏≠ÁöÑparsePropertySubElementÊñπÊ≥ïÂØπ‰∏≠ÁöÑÂ≠êÂÖÉÁ¥†Ëß£ÊûêÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485//Ëß£Êûê&lt;property&gt;ÂÖÉÁ¥†‰∏≠ref,valueÊàñËÄÖÈõÜÂêàÁ≠âÂ≠êÂÖÉÁ¥† public Object parsePropertySubElement(Element ele, BeanDefinition bd, String defaultValueType) &#123; //Â¶ÇÊûú&lt;property&gt;Ê≤°Êúâ‰ΩøÁî®SpringÈªòËÆ§ÁöÑÂëΩÂêçÁ©∫Èó¥ÔºåÂàô‰ΩøÁî®Áî®Êà∑Ëá™ÂÆö‰πâÁöÑËßÑÂàôËß£Êûê//ÂÜÖÂµåÂÖÉÁ¥† if (!isDefaultNamespace(ele)) &#123; return parseNestedCustomElement(ele, bd); &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØbeanÔºåÂàô‰ΩøÁî®Ëß£Êûê&lt;Bean&gt;ÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, BEAN_ELEMENT)) &#123; BeanDefinitionHolder nestedBd = parseBeanDefinitionElement(ele, bd); if (nestedBd != null) &#123; nestedBd = decorateBeanDefinitionIfRequired(ele, nestedBd, bd); &#125; return nestedBd; &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØrefÔºåref‰∏≠Âè™ËÉΩÊúâ‰ª•‰∏ã3‰∏™Â±ûÊÄßÔºöbean„ÄÅlocal„ÄÅparent else if (nodeNameEquals(ele, REF_ELEMENT)) &#123; //Ëé∑Âèñ&lt;property&gt;ÂÖÉÁ¥†‰∏≠ÁöÑbeanÂ±ûÊÄßÂÄºÔºåÂºïÁî®ÂÖ∂‰ªñËß£ÊûêÁöÑBeanÁöÑÂêçÁß∞ //ÂèØ‰ª•‰∏çÂÜçÂêå‰∏Ä‰∏™SpringÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÂÖ∑‰ΩìËØ∑ÂèÇËÄÉSpringÂØπrefÁöÑÈÖçÁΩÆËßÑÂàô String refName = ele.getAttribute(BEAN_REF_ATTRIBUTE); boolean toParent = false; if (!StringUtils.hasLength(refName)) &#123; //Ëé∑Âèñ&lt;property&gt;ÂÖÉÁ¥†‰∏≠ÁöÑlocalÂ±ûÊÄßÂÄºÔºåÂºïÁî®Âêå‰∏Ä‰∏™XmlÊñá‰ª∂‰∏≠ÈÖçÁΩÆ //ÁöÑBeanÁöÑidÔºålocalÂíåref‰∏çÂêåÔºålocalÂè™ËÉΩÂºïÁî®Âêå‰∏Ä‰∏™ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑBean refName = ele.getAttribute(LOCAL_REF_ATTRIBUTE); if (!StringUtils.hasLength(refName)) &#123; //Ëé∑Âèñ&lt;property&gt;ÂÖÉÁ¥†‰∏≠parentÂ±ûÊÄßÂÄºÔºåÂºïÁî®Áà∂Á∫ßÂÆπÂô®‰∏≠ÁöÑBean refName = ele.getAttribute(PARENT_REF_ATTRIBUTE); toParent = true; if (!StringUtils.hasLength(refName)) &#123; error("'bean', 'local' or 'parent' is required for &lt;ref&gt; element", ele); return null; &#125; &#125; &#125; //Ê≤°ÊúâÈÖçÁΩÆrefÁöÑÁõÆÊ†áÂ±ûÊÄßÂÄº if (!StringUtils.hasText(refName)) &#123; error("&lt;ref&gt; element contains empty target attribute", ele); return null; &#125; //ÂàõÂª∫refÁ±ªÂûãÊï∞ÊçÆÔºåÊåáÂêëË¢´ÂºïÁî®ÁöÑÂØπË±° RuntimeBeanReference ref = new RuntimeBeanReference(refName, toParent); //ËÆæÁΩÆÂºïÁî®Á±ªÂûãÂÄºÊòØË¢´ÂΩìÂâçÂ≠êÂÖÉÁ¥†ÊâÄÂºïÁî® ref.setSource(extractSource(ele)); return ref; &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;idref&gt;Ôºå‰ΩøÁî®Ëß£ÊûêrefÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, IDREF_ELEMENT)) &#123; return parseIdRefElement(ele); &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;value&gt;Ôºå‰ΩøÁî®Ëß£ÊûêvalueÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, VALUE_ELEMENT)) &#123; return parseValueElement(ele, defaultValueType); &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØnullÔºå‰∏∫&lt;property&gt;ËÆæÁΩÆ‰∏Ä‰∏™Â∞ÅË£ÖnullÂÄºÁöÑÂ≠óÁ¨¶‰∏≤Êï∞ÊçÆ else if (nodeNameEquals(ele, NULL_ELEMENT)) &#123; TypedStringValue nullHolder = new TypedStringValue(null); nullHolder.setSource(extractSource(ele)); return nullHolder; &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;array&gt;Ôºå‰ΩøÁî®Ëß£ÊûêarrayÈõÜÂêàÂ≠êÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, ARRAY_ELEMENT)) &#123; return parseArrayElement(ele, bd); &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;list&gt;Ôºå‰ΩøÁî®Ëß£ÊûêlistÈõÜÂêàÂ≠êÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, LIST_ELEMENT)) &#123; return parseListElement(ele, bd); &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;set&gt;Ôºå‰ΩøÁî®Ëß£ÊûêsetÈõÜÂêàÂ≠êÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, SET_ELEMENT)) &#123; return parseSetElement(ele, bd); &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;map&gt;Ôºå‰ΩøÁî®Ëß£ÊûêmapÈõÜÂêàÂ≠êÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, MAP_ELEMENT)) &#123; return parseMapElement(ele, bd); &#125; //Â¶ÇÊûúÂ≠êÂÖÉÁ¥†ÊòØ&lt;props&gt;Ôºå‰ΩøÁî®Ëß£ÊûêpropsÈõÜÂêàÂ≠êÂÖÉÁ¥†ÁöÑÊñπÊ≥ïËß£Êûê else if (nodeNameEquals(ele, PROPS_ELEMENT)) &#123; return parsePropsElement(ele); &#125; //Êó¢‰∏çÊòØrefÔºåÂèà‰∏çÊòØvalueÔºå‰πü‰∏çÊòØÈõÜÂêàÔºåÂàôÂ≠êÂÖÉÁ¥†ÈÖçÁΩÆÈîôËØØÔºåËøîÂõûnull else &#123; error("Unknown property sub-element: [" + ele.getNodeName() + "]", ele); return null; &#125; &#125; ÈÄöËøá‰∏äËø∞Ê∫êÁ†ÅÂàÜÊûêÔºåÊàë‰ª¨ÊòéÁôΩ‰∫ÜÂú®SpringÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÂØπÂÖÉÁ¥†‰∏≠ÈÖçÁΩÆÁöÑArray„ÄÅList„ÄÅSet„ÄÅMap„ÄÅPropÁ≠âÂêÑÁßçÈõÜÂêàÂ≠êÂÖÉÁ¥†ÁöÑÈÉΩÈÄöËøá‰∏äËø∞ÊñπÊ≥ïËß£ÊûêÔºåÁîüÊàêÂØπÂ∫îÁöÑÊï∞ÊçÆÂØπË±°ÔºåÊØîÂ¶ÇManagedList„ÄÅManagedArray„ÄÅManagedSetÁ≠âÔºåËøô‰∫õManagedÁ±ªÊòØSpringÂØπË±°BeanDefinitonÁöÑÊï∞ÊçÆÂ∞ÅË£ÖÔºåÂØπÈõÜÂêàÊï∞ÊçÆÁ±ªÂûãÁöÑÂÖ∑‰ΩìËß£ÊûêÊúâÂêÑËá™ÁöÑËß£ÊûêÊñπÊ≥ïÂÆûÁé∞ÔºåËß£ÊûêÊñπÊ≥ïÁöÑÂëΩÂêçÈùûÂ∏∏ËßÑËåÉÔºå‰∏ÄÁõÆ‰∫ÜÁÑ∂ÔºåÊàë‰ª¨ÂØπÈõÜÂêàÂÖÉÁ¥†ÁöÑËß£ÊûêÊñπÊ≥ïËøõË°åÊ∫êÁ†ÅÂàÜÊûêÔºå‰∫ÜËß£ÂÖ∂ÂÆûÁé∞ËøáÁ®ã„ÄÇ Ëß£ÊûêÂ≠êÂÖÉÁ¥†Âú®BeanDefinitionParserDelegateÁ±ª‰∏≠ÁöÑparseListElementÊñπÊ≥ïÂ∞±ÊòØÂÖ∑‰ΩìÂÆûÁé∞Ëß£ÊûêÂÖÉÁ¥†‰∏≠ÁöÑÈõÜÂêàÂ≠êÂÖÉÁ¥†ÔºåÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö1234567891011121314151617181920212223242526272829//Ëß£Êûê&lt;list&gt;ÈõÜÂêàÂ≠êÂÖÉÁ¥† public List parseListElement(Element collectionEle, BeanDefinition bd) &#123; //Ëé∑Âèñ&lt;list&gt;ÂÖÉÁ¥†‰∏≠ÁöÑvalue-typeÂ±ûÊÄßÔºåÂç≥Ëé∑ÂèñÈõÜÂêàÂÖÉÁ¥†ÁöÑÊï∞ÊçÆÁ±ªÂûã String defaultElementType = collectionEle.getAttribute(VALUE_TYPE_ATTRIBUTE); //Ëé∑Âèñ&lt;list&gt;ÈõÜÂêàÂÖÉÁ¥†‰∏≠ÁöÑÊâÄÊúâÂ≠êËäÇÁÇπ NodeList nl = collectionEle.getChildNodes(); //Spring‰∏≠Â∞ÜListÂ∞ÅË£Ö‰∏∫ManagedList ManagedList&lt;Object&gt; target = new ManagedList&lt;Object&gt;(nl.getLength()); target.setSource(extractSource(collectionEle)); //ËÆæÁΩÆÈõÜÂêàÁõÆÊ†áÊï∞ÊçÆÁ±ªÂûã target.setElementTypeName(defaultElementType); target.setMergeEnabled(parseMergeAttribute(collectionEle)); //ÂÖ∑‰ΩìÁöÑ&lt;list&gt;ÂÖÉÁ¥†Ëß£Êûê parseCollectionElements(nl, target, bd, defaultElementType); return target; &#125; //ÂÖ∑‰ΩìËß£Êûê&lt;list&gt;ÈõÜÂêàÂÖÉÁ¥†Ôºå&lt;array&gt;„ÄÅ&lt;list&gt;Âíå&lt;set&gt;ÈÉΩ‰ΩøÁî®ËØ•ÊñπÊ≥ïËß£Êûê protected void parseCollectionElements( NodeList elementNodes, Collection&lt;Object&gt; target, BeanDefinition bd, String defaultElementType) &#123; //ÈÅçÂéÜÈõÜÂêàÊâÄÊúâËäÇÁÇπ for (int i = 0; i &lt; elementNodes.getLength(); i++) &#123; Node node = elementNodes.item(i); //ËäÇÁÇπ‰∏çÊòØdescriptionËäÇÁÇπ if (node instanceof Element &amp;&amp; !nodeNameEquals(node, DESCRIPTION_ELEMENT)) &#123; //Â∞ÜËß£ÊûêÁöÑÂÖÉÁ¥†Âä†ÂÖ•ÈõÜÂêà‰∏≠ÔºåÈÄíÂΩíË∞ÉÁî®‰∏ã‰∏Ä‰∏™Â≠êÂÖÉÁ¥† target.add(parsePropertySubElement((Element) node, bd, defaultElementType)); &#125; &#125; &#125; ÁªèËøáÂØπSpring BeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ËΩ¨Êç¢ÁöÑDocumentÂØπË±°‰∏≠ÁöÑÂÖÉÁ¥†Â±ÇÂ±ÇËß£ÊûêÔºåSpring IoCÁé∞Âú®Â∑≤ÁªèÂ∞ÜXMLÂΩ¢ÂºèÂÆö‰πâÁöÑBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂ËΩ¨Êç¢‰∏∫Spring IoCÊâÄËØÜÂà´ÁöÑÊï∞ÊçÆÁªìÊûÑ‚Äî‚ÄîBeanDefinitionÔºåÂÆÉÊòØBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰∏≠ÈÖçÁΩÆÁöÑPOJOÂØπË±°Âú®Spring IoCÂÆπÂô®‰∏≠ÁöÑÊò†Â∞ÑÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáAbstractBeanDefinition‰∏∫ÂÖ•Âè£ÔºåËç£IoCÂÆπÂô®ËøõË°åÁ¥¢Âºï„ÄÅÊü•ËØ¢ÂíåÊìç‰Ωú„ÄÇ ÈÄöËøáSpring IoCÂÆπÂô®ÂØπBeanÂÆö‰πâËµÑÊ∫êÁöÑËß£ÊûêÂêéÔºåIoCÂÆπÂô®Â§ßËá¥ÂÆåÊàê‰∫ÜÁÆ°ÁêÜBeanÂØπË±°ÁöÑÂáÜÂ§áÂ∑•‰ΩúÔºåÂç≥ÂàùÂßãÂåñËøáÁ®ãÔºå‰ΩÜÊòØÊúÄ‰∏∫ÈáçË¶ÅÁöÑ‰æùËµñÊ≥®ÂÖ•ËøòÊ≤°ÊúâÂèëÁîüÔºåÁé∞Âú®Âú®IoCÂÆπÂô®‰∏≠BeanDefinitionÂ≠òÂÇ®ÁöÑÂè™ÊòØ‰∏Ä‰∫õÈùôÊÄÅ‰ø°ÊÅØÔºåÊé•‰∏ãÊù•ÈúÄË¶ÅÂêëÂÆπÂô®Ê≥®ÂÜåBeanÂÆö‰πâ‰ø°ÊÅØÊâçËÉΩÂÖ®ÈÉ®ÂÆåÊàêIoCÂÆπÂô®ÁöÑÂàùÂßãÂåñËøáÁ®ã Ëß£ÊûêËøáÂêéÁöÑBeanDefinitionÂú®IoCÂÆπÂô®‰∏≠ÁöÑÊ≥®ÂÜåËÆ©Êàë‰ª¨ÁªßÁª≠Ë∑üË∏™Á®ãÂ∫èÁöÑÊâßË°åÈ°∫Â∫èÔºåÊé•‰∏ãÊù•‰ºöÂà∞Êàë‰ª¨Á¨¨3Ê≠•‰∏≠ÂàÜÊûêDefaultBeanDefinitionDocumentReaderÂØπBeanÂÆö‰πâËΩ¨Êç¢ÁöÑDocumentÂØπË±°Ëß£ÊûêÁöÑÊµÅÁ®ã‰∏≠ÔºåÂú®ÂÖ∂parseDefaultElementÊñπÊ≥ï‰∏≠ÂÆåÊàêÂØπDocumentÂØπË±°ÁöÑËß£ÊûêÂêéÂæóÂà∞Â∞ÅË£ÖBeanDefinitionÁöÑBeanDefinitionHoldÂØπË±°ÔºåÁÑ∂ÂêéË∞ÉÁî®BeanDefinitionReaderUtilsÁöÑregisterBeanDefinitionÊñπÊ≥ïÂêëIoCÂÆπÂô®Ê≥®ÂÜåËß£ÊûêÁöÑBeanÔºåBeanDefinitionReaderUtilsÁöÑÊ≥®ÂÜåÁöÑÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415//Â∞ÜËß£ÊûêÁöÑBeanDefinitionHoldÊ≥®ÂÜåÂà∞ÂÆπÂô®‰∏≠ public static void registerBeanDefinition(BeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry) throws BeanDefinitionStoreException &#123; //Ëé∑ÂèñËß£ÊûêÁöÑBeanDefinitionÁöÑÂêçÁß∞ String beanName = definitionHolder.getBeanName(); //ÂêëIoCÂÆπÂô®Ê≥®ÂÜåBeanDefinition registry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition()); //Â¶ÇÊûúËß£ÊûêÁöÑBeanDefinitionÊúâÂà´ÂêçÔºåÂêëÂÆπÂô®‰∏∫ÂÖ∂Ê≥®ÂÜåÂà´Âêç String[] aliases = definitionHolder.getAliases(); if (aliases != null) &#123; for (String aliase : aliases) &#123; registry.registerAlias(beanName, aliase); &#125; &#125; &#125; ÂΩìË∞ÉÁî®BeanDefinitionReaderUtilsÂêëIoCÂÆπÂô®Ê≥®ÂÜåËß£ÊûêÁöÑBeanDefinitionÊó∂ÔºåÁúüÊ≠£ÂÆåÊàêÊ≥®ÂÜåÂäüËÉΩÁöÑÊòØDefaultListableBeanFactory„ÄÇ DefaultListableBeanFactoryÂêëIoCÂÆπÂô®Ê≥®ÂÜåËß£ÊûêÂêéÁöÑBeanDefinitionDefaultListableBeanFactory‰∏≠‰ΩøÁî®‰∏Ä‰∏™HashMapÁöÑÈõÜÂêàÂØπË±°Â≠òÊîæIoCÂÆπÂô®‰∏≠Ê≥®ÂÜåËß£ÊûêÁöÑBeanDefinitionÔºåÂêëIoCÂÆπÂô®Ê≥®ÂÜåÁöÑ‰∏ªË¶ÅÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445//Â≠òÂÇ®Ê≥®ÂÜåÁöÑ‰øÑBeanDefinition private final Map&lt;String, BeanDefinition&gt; beanDefinitionMap = new ConcurrentHashMap&lt;String, BeanDefinition&gt;(); //ÂêëIoCÂÆπÂô®Ê≥®ÂÜåËß£ÊûêÁöÑBeanDefiniton public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) throws BeanDefinitionStoreException &#123; Assert.hasText(beanName, "Bean name must not be empty"); Assert.notNull(beanDefinition, "BeanDefinition must not be null"); //Ê†°È™åËß£ÊûêÁöÑBeanDefiniton if (beanDefinition instanceof AbstractBeanDefinition) &#123; try &#123; ((AbstractBeanDefinition) beanDefinition).validate(); &#125; catch (BeanDefinitionValidationException ex) &#123; throw new BeanDefinitionStoreException(beanDefinition.getResourceDescription(), beanName, "Validation of bean definition failed", ex); &#125; &#125; //Ê≥®ÂÜåÁöÑËøáÁ®ã‰∏≠ÈúÄË¶ÅÁ∫øÁ®ãÂêåÊ≠•Ôºå‰ª•‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß synchronized (this.beanDefinitionMap) &#123; Object oldBeanDefinition = this.beanDefinitionMap.get(beanName); //Ê£ÄÊü•ÊòØÂê¶ÊúâÂêåÂêçÁöÑBeanDefinitionÂ∑≤ÁªèÂú®IoCÂÆπÂô®‰∏≠Ê≥®ÂÜåÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊ≥®ÂÜåÔºå //Âπ∂‰∏î‰∏çÂÖÅËÆ∏Ë¶ÜÁõñÂ∑≤Ê≥®ÂÜåÁöÑBeanÔºåÂàôÊäõÂá∫Ê≥®ÂÜåÂ§±Ë¥•ÂºÇÂ∏∏ if (oldBeanDefinition != null) &#123; if (!this.allowBeanDefinitionOverriding) &#123; throw new BeanDefinitionStoreException(beanDefinition.getResourceDescription(), beanName, "Cannot register bean definition [" + beanDefinition + "] for bean '" + beanName + "': There is already [" + oldBeanDefinition + "] bound."); &#125; else &#123;//Â¶ÇÊûúÂÖÅËÆ∏Ë¶ÜÁõñÔºåÂàôÂêåÂêçÁöÑBeanÔºåÂêéÊ≥®ÂÜåÁöÑË¶ÜÁõñÂÖàÊ≥®ÂÜåÁöÑ if (this.logger.isInfoEnabled()) &#123; this.logger.info("Overriding bean definition for bean '" + beanName + "': replacing [" + oldBeanDefinition + "] with [" + beanDefinition + "]"); &#125; &#125; &#125; //IoCÂÆπÂô®‰∏≠Ê≤°ÊúâÂ∑≤ÁªèÊ≥®ÂÜåÂêåÂêçÁöÑBeanÔºåÊåâÊ≠£Â∏∏Ê≥®ÂÜåÊµÅÁ®ãÊ≥®ÂÜå else &#123; this.beanDefinitionNames.add(beanName); this.frozenBeanDefinitionNames = null; &#125; this.beanDefinitionMap.put(beanName, beanDefinition); //ÈáçÁΩÆÊâÄÊúâÂ∑≤ÁªèÊ≥®ÂÜåËøáÁöÑBeanDefinitionÁöÑÁºìÂ≠ò resetBeanDefinition(beanName); &#125; &#125; Ëá≥Ê≠§ÔºåBeanÂÆö‰πâËµÑÊ∫êÊñá‰ª∂‰∏≠ÈÖçÁΩÆÁöÑBeanË¢´Ëß£ÊûêËøáÂêéÔºåÂ∑≤ÁªèÊ≥®ÂÜåÂà∞IoCÂÆπÂô®‰∏≠ÔºåË¢´ÂÆπÂô®ÁÆ°ÁêÜËµ∑Êù•ÔºåÁúüÊ≠£ÂÆåÊàê‰∫ÜIoCÂÆπÂô®ÂàùÂßãÂåñÊâÄÂÅöÁöÑÂÖ®ÈÉ®Â∑•‰Ωú„ÄÇÁé∞ Âú®IoCÂÆπÂô®‰∏≠Â∑≤ÁªèÂª∫Á´ã‰∫ÜÊï¥‰∏™BeanÁöÑÈÖçÁΩÆ‰ø°ÊÅØÔºåËøô‰∫õBeanDefinition‰ø°ÊÅØÂ∑≤ÁªèÂèØ‰ª•‰ΩøÁî®ÔºåÂπ∂‰∏îÂèØ‰ª•Ë¢´Ê£ÄÁ¥¢ÔºåIoCÂÆπÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÂØπËøô‰∫õÊ≥®ÂÜåÁöÑBeanÂÆö‰πâ‰ø°ÊÅØËøõË°åÂ§ÑÁêÜÂíåÁª¥Êä§„ÄÇËøô‰∫õÁöÑÊ≥®ÂÜåÁöÑBeanÂÆö‰πâ‰ø°ÊÅØÊòØIoCÂÆπÂô®ÊéßÂà∂ÂèçËΩ¨ÁöÑÂü∫Á°ÄÔºåÊ≠£ÊòØÊúâ‰∫ÜËøô‰∫õÊ≥®ÂÜåÁöÑÊï∞ÊçÆÔºåÂÆπÂô®ÊâçÂèØ‰ª•ËøõË°å‰æùËµñÊ≥®ÂÖ•„ÄÇ ÊÄªÁªìÁé∞Âú®ÈÄöËøá‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåÊÄªÁªì‰∏Ä‰∏ãIOCÂÆπÂô®ÂàùÂßãÂåñÁöÑÂü∫Êú¨Ê≠•È™§Ôºö ÂàùÂßãÂåñÁöÑÂÖ•Âè£Âú®ÂÆπÂô®ÂÆûÁé∞‰∏≠ÁöÑ refresh()Ë∞ÉÁî®Êù•ÂÆåÊàê ÂØπ bean ÂÆö‰πâËΩΩÂÖ• IOC ÂÆπÂô®‰ΩøÁî®ÁöÑÊñπÊ≥ïÊòØ loadBeanDefinition,ÂÖ∂‰∏≠ÁöÑÂ§ßËá¥ËøáÁ®ãÂ¶Ç‰∏ãÔºöÈÄöËøá ResourceLoader Êù•ÂÆåÊàêËµÑÊ∫êÊñá‰ª∂‰ΩçÁΩÆÁöÑÂÆö‰ΩçÔºåDefaultResourceLoader ÊòØÈªòËÆ§ÁöÑÂÆûÁé∞ÔºåÂêåÊó∂‰∏ä‰∏ãÊñáÊú¨Ë∫´Â∞±ÁªôÂá∫‰∫Ü ResourceLoader ÁöÑÂÆûÁé∞ÔºåÂèØ‰ª•‰ªéÁ±ªË∑ØÂæÑÔºåÊñá‰ª∂Á≥ªÁªü, URL Á≠âÊñπÂºèÊù•ÂÆö‰∏∫ËµÑÊ∫ê‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûúÊòØ XmlBeanFactory‰Ωú‰∏∫ IOC ÂÆπÂô®ÔºåÈÇ£‰πàÈúÄË¶Å‰∏∫ÂÆÉÊåáÂÆö bean ÂÆö‰πâÁöÑËµÑÊ∫êÔºå‰πüÂ∞±ÊòØËØ¥ bean ÂÆö‰πâÊñá‰ª∂Êó∂ÈÄöËøáÊäΩË±°Êàê Resource Êù•Ë¢´ IOC ÂÆπÂô®Â§ÑÁêÜÁöÑÔºåÂÆπÂô®ÈÄöËøá BeanDefinitionReaderÊù•ÂÆåÊàêÂÆö‰πâ‰ø°ÊÅØÁöÑËß£ÊûêÂíå Bean ‰ø°ÊÅØÁöÑÊ≥®ÂÜå,ÂæÄÂæÄ‰ΩøÁî®ÁöÑÊòØXmlBeanDefinitionReader Êù•Ëß£Êûê bean ÁöÑ xml ÂÆö‰πâÊñá‰ª∂ - ÂÆûÈôÖÁöÑÂ§ÑÁêÜËøáÁ®ãÊòØÂßîÊâòÁªô BeanDefinitionParserDelegate Êù•ÂÆåÊàêÁöÑÔºå‰ªéËÄåÂæóÂà∞ bean ÁöÑÂÆö‰πâ‰ø°ÊÅØÔºåËøô‰∫õ‰ø°ÊÅØÂú® Spring ‰∏≠‰ΩøÁî® BeanDefinition ÂØπË±°Êù•Ë°®Á§∫ - Ëøô‰∏™ÂêçÂ≠óÂèØ‰ª•ËÆ©Êàë‰ª¨ÊÉ≥Âà∞loadBeanDefinition,RegisterBeanDefinition Ëøô‰∫õÁõ∏ÂÖ≥ÁöÑÊñπÊ≥ï - ‰ªñ‰ª¨ÈÉΩÊòØ‰∏∫Â§ÑÁêÜ BeanDefinitin ÊúçÂä°ÁöÑÔºå ÂÆπÂô®Ëß£ÊûêÂæóÂà∞ BeanDefinitionIoC ‰ª•ÂêéÔºåÈúÄË¶ÅÊääÂÆÉÂú® IOC ÂÆπÂô®‰∏≠Ê≥®ÂÜåÔºåËøôÁî± IOC ÂÆûÁé∞ BeanDefinitionRegistry Êé•Âè£Êù•ÂÆûÁé∞„ÄÇÊ≥®ÂÜåËøáÁ®ãÂ∞±ÊòØÂú® IOC ÂÆπÂô®ÂÜÖÈÉ®Áª¥Êä§ÁöÑ‰∏Ä‰∏™HashMap Êù•‰øùÂ≠òÂæóÂà∞ÁöÑ BeanDefinition ÁöÑËøáÁ®ã„ÄÇËøô‰∏™ HashMap ÊòØ IoC ÂÆπÂô®ÊåÅÊúâ bean ‰ø°ÊÅØÁöÑÂú∫ÊâÄÔºå‰ª•ÂêéÂØπ bean ÁöÑÊìç‰ΩúÈÉΩÊòØÂõ¥ÁªïËøô‰∏™HashMap Êù•ÂÆûÁé∞ÁöÑ. ÁÑ∂ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøá BeanFactory Âíå ApplicationContext Êù•‰∫´ÂèóÂà∞ Spring IOC ÁöÑÊúçÂä°‰∫Ü,Âú®‰ΩøÁî® IOC ÂÆπÂô®ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Ê≥®ÊÑèÂà∞Èô§‰∫ÜÂ∞ëÈáèÁ≤òÂêà‰ª£Á†ÅÔºåÁªùÂ§ßÂ§öÊï∞‰ª•Ê≠£Á°Æ IoC È£éÊ†ºÁºñÂÜôÁöÑÂ∫îÁî®Á®ãÂ∫è‰ª£Á†ÅÂÆåÂÖ®‰∏çÁî®ÂÖ≥ÂøÉÂ¶Ç‰ΩïÂà∞ËææÂ∑•ÂéÇÔºåÂõ†‰∏∫ÂÆπÂô®Â∞ÜÊääËøô‰∫õÂØπË±°‰∏éÂÆπÂô®ÁÆ°ÁêÜÁöÑÂÖ∂‰ªñÂØπË±°Èí©Âú®‰∏ÄËµ∑„ÄÇÂü∫Êú¨ÁöÑÁ≠ñÁï•ÊòØÊääÂ∑•ÂéÇÊîæÂà∞Â∑≤Áü•ÁöÑÂú∞ÊñπÔºåÊúÄÂ•ΩÊòØÊîæÂú®ÂØπÈ¢ÑÊúü‰ΩøÁî®ÁöÑ‰∏ä‰∏ãÊñáÊúâÊÑè‰πâÁöÑÂú∞ÊñπÔºå‰ª•Âèä‰ª£Á†ÅÂ∞ÜÂÆûÈôÖÈúÄË¶ÅËÆøÈóÆÂ∑•ÂéÇÁöÑÂú∞Êñπ„ÄÇ Spring Êú¨Ë∫´Êèê‰æõ‰∫ÜÂØπÂ£∞ÊòéÂºèËΩΩÂÖ• web Â∫îÁî®Á®ãÂ∫èÁî®Ê≥ïÁöÑÂ∫îÁî®Á®ãÂ∫è‰∏ä‰∏ãÊñá,Âπ∂Â∞ÜÂÖ∂Â≠òÂÇ®Âú®ServletContext ‰∏≠ÁöÑÊ°ÜÊû∂ÂÆûÁé∞„ÄÇ Âú®‰ΩøÁî® Spring IOC ÂÆπÂô®ÁöÑÊó∂ÂÄôÊàë‰ª¨ËøòÈúÄË¶ÅÂå∫Âà´‰∏§‰∏™Ê¶ÇÂøµ: Beanfactory Âíå Factory beanÔºåÂÖ∂‰∏≠ BeanFactory ÊåáÁöÑÊòØ IOC ÂÆπÂô®ÁöÑÁºñÁ®ãÊäΩË±°ÔºåÊØîÂ¶Ç ApplicationContextÔºå XmlBeanFactory Á≠âÔºåËøô‰∫õÈÉΩÊòØ IOC ÂÆπÂô®ÁöÑÂÖ∑‰ΩìË°®Áé∞ÔºåÈúÄË¶Å‰ΩøÁî®‰ªÄ‰πàÊ†∑ÁöÑÂÆπÂô®Áî±ÂÆ¢Êà∑ÂÜ≥ÂÆö,‰ΩÜ Spring ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫Ü‰∏∞ÂØåÁöÑÈÄâÊã©„ÄÇ FactoryBean Âè™ÊòØ‰∏Ä‰∏™ÂèØ‰ª•Âú® IOCËÄåÂÆπÂô®‰∏≠Ë¢´ÁÆ°ÁêÜÁöÑ‰∏Ä‰∏™ bean,ÊòØÂØπÂêÑÁßçÂ§ÑÁêÜËøáÁ®ãÂíåËµÑÊ∫ê‰ΩøÁî®ÁöÑÊäΩË±°,Factory bean Âú®ÈúÄË¶ÅÊó∂‰∫ßÁîüÂè¶‰∏Ä‰∏™ÂØπË±°ÔºåËÄå‰∏çËøîÂõû FactoryBeanÊú¨Ë∫´,Êàë‰ª¨ÂèØ‰ª•ÊääÂÆÉÁúãÊàêÊòØ‰∏Ä‰∏™ÊäΩË±°Â∑•ÂéÇÔºåÂØπÂÆÉÁöÑË∞ÉÁî®ËøîÂõûÁöÑÊòØÂ∑•ÂéÇÁîü‰∫ßÁöÑ‰∫ßÂìÅ„ÄÇÊâÄÊúâÁöÑ Factory bean ÈÉΩÂÆûÁé∞ÁâπÊÆäÁöÑorg.springframework.beans.factory.FactoryBean Êé•Âè£ÔºåÂΩì‰ΩøÁî®ÂÆπÂô®‰∏≠ factory bean ÁöÑÊó∂ÂÄôÔºåËØ•ÂÆπÂô®‰∏ç‰ºöËøîÂõû factory bean Êú¨Ë∫´,ËÄåÊòØËøîÂõûÂÖ∂ÁîüÊàêÁöÑÂØπË±°„ÄÇSpring ÂåÖÊã¨‰∫ÜÂ§ßÈÉ®ÂàÜÁöÑÈÄöÁî®ËµÑÊ∫êÂíåÊúçÂä°ËÆøÈóÆÊäΩË±°ÁöÑ Factory bean ÁöÑÂÆûÁé∞ÔºåÂÖ∂‰∏≠ÂåÖÊã¨:ÂØπ JNDI Êü•ËØ¢ÁöÑÂ§ÑÁêÜÔºåÂØπ‰ª£ÁêÜÂØπË±°ÁöÑÂ§ÑÁêÜÔºåÂØπ‰∫ãÂä°ÊÄß‰ª£ÁêÜÁöÑÂ§ÑÁêÜÔºåÂØπ RMI ‰ª£ÁêÜÁöÑÂ§ÑÁêÜÁ≠âÔºåËøô‰∫õÊàë‰ª¨ÈÉΩÂèØ‰ª•ÁúãÊàêÊòØÂÖ∑‰ΩìÁöÑÂ∑•ÂéÇ,ÁúãÊàêÊòØSPRING ‰∏∫Êàë‰ª¨Âª∫Á´ãÂ•ΩÁöÑÂ∑•ÂéÇ„ÄÇ‰πüÂ∞±ÊòØËØ¥ Spring ÈÄöËøá‰ΩøÁî®ÊäΩË±°Â∑•ÂéÇÊ®°Âºè‰∏∫Êàë‰ª¨ÂáÜÂ§á‰∫Ü‰∏ÄÁ≥ªÂàóÂ∑•ÂéÇÊù•Áîü‰∫ß‰∏Ä‰∫õÁâπÂÆöÁöÑÂØπË±°,ÂÖçÈô§Êàë‰ª¨ÊâãÂ∑•ÈáçÂ§çÁöÑÂ∑•‰ΩúÔºåÊàë‰ª¨Ë¶Å‰ΩøÁî®Êó∂Âè™ÈúÄË¶ÅÂú® IOC ÂÆπÂô®ÈáåÈÖçÁΩÆÂ•ΩÂ∞±ËÉΩÂæàÊñπ‰æøÁöÑ‰ΩøÁî®‰∫Ü]]></content>
      <categories>
        <category>java</category>
        <category>spring</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºà‰∏ÄÔºâ]]></title>
    <url>%2Fjava%2Fspring%2Fjava%2Fspring%2F1%2F</url>
    <content type="text"><![CDATA[Ê∫êÁ†ÅËß£ËØªSpring IOCÂéüÁêÜÔºà‰∏ÄÔºâ‰ªÄ‰πàÊòØIOC/DIÔºüIoC ÂÆπÂô®ÔºöÊúÄ‰∏ªË¶ÅÊòØÂÆåÊàê‰∫ÜÂÆåÊàêÂØπË±°ÁöÑÂàõÂª∫Âíå‰æùËµñÁöÑÁÆ°ÁêÜÊ≥®ÂÖ•Á≠âÁ≠â„ÄÇ ÂÖà‰ªéÊàë‰ª¨Ëá™Â∑±ËÆæËÆ°ËøôÊ†∑‰∏Ä‰∏™ËßÜËßíÊù•ËÄÉËôëÔºö ÊâÄË∞ìÊéßÂà∂ÂèçËΩ¨ÔºåÂ∞±ÊòØÊääÂéüÂÖàÊàë‰ª¨‰ª£Á†ÅÈáåÈù¢ÈúÄË¶ÅÂÆûÁé∞ÁöÑÂØπË±°ÂàõÂª∫„ÄÅ‰æùËµñÁöÑ‰ª£Á†ÅÔºåÂèçËΩ¨ÁªôÂÆπÂô®Êù•Â∏ÆÂøôÂÆûÁé∞„ÄÇÈÇ£‰πàÂøÖÁÑ∂ÁöÑÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™ÂÆπÂô®ÔºåÂêåÊó∂ÈúÄË¶Å‰∏ÄÁßçÊèèËø∞Êù•ËÆ©ÂÆπÂô®Áü•ÈÅìÈúÄË¶ÅÂàõÂª∫ÁöÑÂØπË±°‰∏éÂØπË±°ÁöÑÂÖ≥Á≥ª„ÄÇËøô‰∏™ÊèèËø∞ÊúÄÂÖ∑‰ΩìË°®Áé∞Â∞±ÊòØÊàë‰ª¨ÂèØÈÖçÁΩÆÁöÑÊñá‰ª∂„ÄÇXmlXmlXmlÂØπË±°ÂíåÂØπË±°ÂÖ≥Á≥ªÊÄé‰πàË°®Á§∫Ôºü ÂèØ‰ª•Áî® xml Ôºå properties Êñá‰ª∂Á≠âËØ≠‰πâÂåñÈÖçÁΩÆÊñá‰ª∂Ë°®Á§∫„ÄÇ ÊèèËø∞ÂØπË±°ÂÖ≥Á≥ªÁöÑÊñá‰ª∂Â≠òÊîæÂú®Âì™ÈáåÔºü ÂèØËÉΩÊòØ classpath Ôºå filesystem ÔºåÊàñËÄÖÊòØ URL ÁΩëÁªúËµÑÊ∫êÔºå servletContext Á≠â„ÄÇ ÂõûÂà∞Ê≠£È¢òÔºåÊúâ‰∫ÜÈÖçÁΩÆÊñá‰ª∂ÔºåËøòÈúÄË¶ÅÂØπÈÖçÁΩÆÊñá‰ª∂Ëß£Êûê„ÄÇ ‰∏çÂêåÁöÑÈÖçÁΩÆÊñá‰ª∂ÂØπÂØπË±°ÁöÑÊèèËø∞‰∏ç‰∏ÄÊ†∑ÔºåÂ¶ÇÊ†áÂáÜÁöÑÔºåËá™ÂÆö‰πâÂ£∞ÊòéÂºèÁöÑÔºåÂ¶Ç‰ΩïÁªü‰∏ÄÔºü Âú®ÂÜÖÈÉ®ÈúÄË¶ÅÊúâ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂÖ≥‰∫éÂØπË±°ÁöÑÂÆö‰πâÔºåÊâÄÊúâÂ§ñÈÉ®ÁöÑÊèèËø∞ÈÉΩÂøÖÈ°ªËΩ¨ÂåñÊàêÁªü‰∏ÄÁöÑÊèèËø∞ÂÆö‰πâ„ÄÇ Â¶Ç‰ΩïÂØπ‰∏çÂêåÁöÑÈÖçÁΩÆÊñá‰ª∂ËøõË°åËß£ÊûêÔºüÈúÄË¶ÅÂØπ‰∏çÂêåÁöÑÈÖçÁΩÆÊñá‰ª∂ËØ≠Ê≥ïÔºåÈááÁî®‰∏çÂêåÁöÑËß£ÊûêÂô® Spring IOC‰ΩìÁ≥ªÁªìÊûÑÔºüBeanFactorySpring BeanÁöÑÂàõÂª∫ÊòØÂÖ∏ÂûãÁöÑÂ∑•ÂéÇÊ®°ÂºèÔºåËøô‰∏ÄÁ≥ªÂàóÁöÑBeanÂ∑•ÂéÇÔºå‰πüÂç≥IOCÂÆπÂô®‰∏∫ÂºÄÂèëËÄÖÁÆ°ÁêÜÂØπË±°Èó¥ÁöÑ‰æùËµñÂÖ≥Á≥ªÊèê‰æõ‰∫ÜÂæàÂ§ö‰æøÂà©ÂíåÂü∫Á°ÄÊúçÂä°ÔºåÂú®Spring‰∏≠ÊúâËÆ∏Â§öÁöÑIOCÂÆπÂô®ÁöÑÂÆûÁé∞‰æõÁî®Êà∑ÈÄâÊã©Âíå‰ΩøÁî®ÔºåÂÖ∂Áõ∏‰∫íÂÖ≥Á≥ªÂÖ∂‰∏≠BeanFactory‰Ωú‰∏∫ÊúÄÈ°∂Â±ÇÁöÑ‰∏Ä‰∏™Êé•Âè£Á±ªÔºåÂÆÉÂÆö‰πâ‰∫ÜIOCÂÆπÂô®ÁöÑÂü∫Êú¨ÂäüËÉΩËßÑËåÉÔºåBeanFactory Êúâ‰∏â‰∏™Â≠êÁ±ªÔºöListableBeanFactory„ÄÅHierarchicalBeanFactory ÂíåAutowireCapableBeanFactory„ÄÇ‰ΩÜÊòØ‰ªé‰∏äÂõæ‰∏≠Êàë‰ª¨ÂèØ‰ª•ÂèëÁé∞ÊúÄÁªàÁöÑÈªòËÆ§ÂÆûÁé∞Á±ªÊòØ DefaultListableBeanFactoryÔºå‰ªñÂÆûÁé∞‰∫ÜÊâÄÊúâÁöÑÊé•Âè£„ÄÇÈÇ£‰∏∫‰ΩïË¶ÅÂÆö‰πâËøô‰πàÂ§öÂ±ÇÊ¨°ÁöÑÊé•Âè£Âë¢ÔºüÊü•ÈòÖËøô‰∫õÊé•Âè£ÁöÑÊ∫êÁ†ÅÂíåËØ¥ÊòéÂèëÁé∞ÔºåÊØè‰∏™Êé•Âè£ÈÉΩÊúâ‰ªñ‰ΩøÁî®ÁöÑÂú∫ÂêàÔºåÂÆÉ‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂå∫ÂàÜÂú® Spring ÂÜÖÈÉ®Âú®Êìç‰ΩúËøáÁ®ã‰∏≠ÂØπË±°ÁöÑ‰º†ÈÄíÂíåËΩ¨ÂåñËøáÁ®ã‰∏≠ÔºåÂØπÂØπË±°ÁöÑÊï∞ÊçÆËÆøÈóÆÊâÄÂÅöÁöÑÈôêÂà∂„ÄÇ‰æãÂ¶Ç ListableBeanFactory Êé•Âè£Ë°®Á§∫Ëøô‰∫õ Bean ÊòØÂèØÂàóË°®ÁöÑÔºåËÄå HierarchicalBeanFactory Ë°®Á§∫ÁöÑÊòØËøô‰∫õ Bean ÊòØÊúâÁªßÊâøÂÖ≥Á≥ªÁöÑÔºå‰πüÂ∞±ÊòØÊØè‰∏™Bean ÊúâÂèØËÉΩÊúâÁà∂ Bean„ÄÇAutowireCapableBeanFactory Êé•Âè£ÂÆö‰πâ Bean ÁöÑËá™Âä®Ë£ÖÈÖçËßÑÂàô„ÄÇËøôÂõõ‰∏™Êé•Âè£ÂÖ±ÂêåÂÆö‰πâ‰∫Ü Bean ÁöÑÈõÜÂêà„ÄÅBean ‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÅ‰ª•Âèä Bean Ë°å‰∏∫. ÊúÄÂü∫Êú¨ÁöÑIOCÂÆπÂô®Êé•Âè£BeanFactory 12345678910111213141516171819202122232425public interface BeanFactory &#123; //ÂØπFactoryBeanÁöÑËΩ¨‰πâÂÆö‰πâÔºåÂõ†‰∏∫Â¶ÇÊûú‰ΩøÁî®beanÁöÑÂêçÂ≠óÊ£ÄÁ¥¢FactoryBeanÂæóÂà∞ÁöÑÂØπË±°ÊòØÂ∑•ÂéÇÁîüÊàêÁöÑÂØπË±°Ôºå //Â¶ÇÊûúÈúÄË¶ÅÂæóÂà∞Â∑•ÂéÇÊú¨Ë∫´ÔºåÈúÄË¶ÅËΩ¨‰πâ String FACTORY_BEAN_PREFIX = "&amp;"; //Ê†πÊçÆbeanÁöÑÂêçÂ≠óÔºåËé∑ÂèñÂú®IOCÂÆπÂô®‰∏≠ÂæóÂà∞beanÂÆû‰æã Object getBean(String name) throws BeansException; //Ê†πÊçÆbeanÁöÑÂêçÂ≠óÂíåClassÁ±ªÂûãÊù•ÂæóÂà∞beanÂÆû‰æãÔºåÂ¢ûÂä†‰∫ÜÁ±ªÂûãÂÆâÂÖ®È™åËØÅÊú∫Âà∂„ÄÇ Object getBean(String name, Class requiredType) throws BeansException; //Êèê‰æõÂØπbeanÁöÑÊ£ÄÁ¥¢ÔºåÁúãÁúãÊòØÂê¶Âú®IOCÂÆπÂô®ÊúâËøô‰∏™ÂêçÂ≠óÁöÑbean boolean containsBean(String name); //Ê†πÊçÆbeanÂêçÂ≠óÂæóÂà∞beanÂÆû‰æãÔºåÂπ∂ÂêåÊó∂Âà§Êñ≠Ëøô‰∏™beanÊòØ‰∏çÊòØÂçï‰æã boolean isSingleton(String name) throws NoSuchBeanDefinitionException; //ÂæóÂà∞beanÂÆû‰æãÁöÑClassÁ±ªÂûã Class getType(String name) throws NoSuchBeanDefinitionException; //ÂæóÂà∞beanÁöÑÂà´ÂêçÔºåÂ¶ÇÊûúÊ†πÊçÆÂà´ÂêçÊ£ÄÁ¥¢ÔºåÈÇ£‰πàÂÖ∂ÂéüÂêç‰πü‰ºöË¢´Ê£ÄÁ¥¢Âá∫Êù• String[] getAliases(String name); &#125; Âú®BeanFactoryÈáåÂè™ÂØπIOCÂÆπÂô®ÁöÑÂü∫Êú¨Ë°å‰∏∫‰Ωú‰∫ÜÂÆö‰πâÔºåÊ†πÊú¨‰∏çÂÖ≥ÂøÉ‰Ω†ÁöÑbeanÊòØÂ¶Ç‰ΩïÂÆö‰πâÊÄéÊ†∑Âä†ËΩΩÁöÑ„ÄÇÊ≠£Â¶ÇÊàë‰ª¨Âè™ÂÖ≥ÂøÉÂ∑•ÂéÇÈáåÂæóÂà∞‰ªÄ‰πàÁöÑ‰∫ßÂìÅÂØπË±°ÔºåËá≥‰∫éÂ∑•ÂéÇÊòØÊÄé‰πàÁîü‰∫ßËøô‰∫õÂØπË±°ÁöÑÔºåËøô‰∏™Âü∫Êú¨ÁöÑÊé•Âè£‰∏çÂÖ≥ÂøÉ„ÄÇ ËÄåË¶ÅÁü•ÈÅìÂ∑•ÂéÇÊòØÂ¶Ç‰Ωï‰∫ßÁîüÂØπË±°ÁöÑÔºåÊàë‰ª¨ÈúÄË¶ÅÁúãÂÖ∑‰ΩìÁöÑIOCÂÆπÂô®ÂÆûÁé∞ÔºåspringÊèê‰æõ‰∫ÜËÆ∏Â§öIOCÂÆπÂô®ÁöÑÂÆûÁé∞„ÄÇÊØîÂ¶ÇXmlBeanFactoryÔºåClasspathXmlApplicationContextÁ≠â„ÄÇÂÖ∂‰∏≠XmlBeanFactoryÂ∞±ÊòØÈíàÂØπÊúÄÂü∫Êú¨ÁöÑiocÂÆπÂô®ÁöÑÂÆûÁé∞ÔºåËøô‰∏™IOCÂÆπÂô®ÂèØ‰ª•ËØªÂèñXMLÊñá‰ª∂ÂÆö‰πâÁöÑBeanDefinitionÔºàXMLÊñá‰ª∂‰∏≠ÂØπbeanÁöÑÊèèËø∞Ôºâ,Â¶ÇÊûúËØ¥XmlBeanFactoryÊòØÂÆπÂô®‰∏≠ÁöÑÂ±å‰∏ùÔºåApplicationContextÂ∫îËØ•ÁÆóÂÆπÂô®‰∏≠ÁöÑÈ´òÂ∏ÖÂØå.ApplicationContextÊòØSpringÊèê‰æõÁöÑ‰∏Ä‰∏™È´òÁ∫ßÁöÑIoCÂÆπÂô®ÔºåÂÆÉÈô§‰∫ÜËÉΩÂ§üÊèê‰æõIoCÂÆπÂô®ÁöÑÂü∫Êú¨ÂäüËÉΩÂ§ñÔºåËøò‰∏∫Áî®Êà∑Êèê‰æõ‰∫Ü‰ª•‰∏ãÁöÑÈôÑÂä†ÊúçÂä°„ÄÇ ‰ªéApplicationContextÊé•Âè£ÁöÑÂÆûÁé∞ÔºåÊàë‰ª¨ÁúãÂá∫ÂÖ∂ÁâπÁÇπÔºö ÊîØÊåÅ‰ø°ÊÅØÊ∫êÔºåÂèØ‰ª•ÂÆûÁé∞ÂõΩÈôÖÂåñ„ÄÇÔºàÂÆûÁé∞MessageSourceÊé•Âè£Ôºâ ËÆøÈóÆËµÑÊ∫ê„ÄÇ(ÂÆûÁé∞ResourcePatternResolverÊé•Âè£ÔºåËøô‰∏™ÂêéÈù¢Ë¶ÅËÆ≤) ÊîØÊåÅÂ∫îÁî®‰∫ã‰ª∂„ÄÇ(ÂÆûÁé∞ApplicationEventPublisherÊé•Âè£) BeanDefinitionSpringIOCÂÆπÂô®ÁÆ°ÁêÜ‰∫ÜÊàë‰ª¨ÂÆö‰πâÁöÑÂêÑÁßçBeanÂØπË±°ÂèäÂÖ∂Áõ∏‰∫íÁöÑÂÖ≥Á≥ªÔºåBeanÂØπË±°Âú®SpringÂÆûÁé∞‰∏≠ÊòØ‰ª•BeanDefinitionÊù•ÊèèËø∞ÁöÑÔºåÂÖ∂ÁªßÊâø‰ΩìÁ≥ªÂ¶Ç‰∏ã Bean ÁöÑËß£ÊûêËøáÁ®ãÈùûÂ∏∏Â§çÊùÇÔºåÂäüËÉΩË¢´ÂàÜÁöÑÂæàÁªÜÔºåÂõ†‰∏∫ËøôÈáåÈúÄË¶ÅË¢´Êâ©Â±ïÁöÑÂú∞ÊñπÂæàÂ§öÔºåÂøÖÈ°ª‰øùËØÅÊúâË∂≥Â§üÁöÑÁÅµÊ¥ªÊÄßÔºå‰ª•Â∫îÂØπÂèØËÉΩÁöÑÂèòÂåñ„ÄÇBean ÁöÑËß£Êûê‰∏ªË¶ÅÂ∞±ÊòØÂØπSpring ÈÖçÁΩÆÊñá‰ª∂ÁöÑËß£Êûê„ÄÇËøô‰∏™Ëß£ÊûêËøáÁ®ã‰∏ªË¶ÅÈÄöËøá‰∏ãÂõæ‰∏≠ÁöÑÁ±ªÂÆåÊàêÔºö]]></content>
      <categories>
        <category>java</category>
        <category>spring</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVAÂä®ÊÄÅ‰ª£ÁêÜÊú∫Âà∂]]></title>
    <url>%2Fjava%2Fjava%2Fproxy-1%2F</url>
    <content type="text"><![CDATA[JAVAÂä®ÊÄÅ‰ª£ÁêÜÊú∫Âà∂‰ª•Âèä‰ΩøÁî®Âú∫ÊôØ‰ªÄ‰πàÊòØ‰ª£ÁêÜÔºüÂ§ßÈÅìÁêÜ‰∏äËÆ≤‰ª£ÁêÜÊòØ‰∏ÄÁßçËΩØ‰ª∂ËÆæËÆ°Ê®°ÂºèÔºåÁõÆÁöÑÂú∞Â∏åÊúõËÉΩÂÅöÂà∞‰ª£Á†ÅÈáçÁî®„ÄÇÂÖ∑‰Ωì‰∏äËÆ≤Ôºå‰ª£ÁêÜËøôÁßçËÆæËÆ°Ê®°ÂºèÊòØÈÄöËøá‰∏çÁõ¥Êé•ËÆøÈóÆË¢´‰ª£ÁêÜÂØπË±°ÁöÑÊñπÂºèÔºåËÄåËÆøÈóÆË¢´‰ª£ÁêÜÂØπË±°ÁöÑÊñπÊ≥ï„ÄÇËøô‰∏™Â∞±Â•ΩÊØî ÂïÜÊà∑‚Äî-&gt;ÊòéÊòüÁªèÁ∫™‰∫∫(‰ª£ÁêÜ)‚Äî-&gt;ÊòéÊòüËøôÁßçÊ®°Âºè„ÄÇÊàë‰ª¨ÂèØ‰ª•‰∏çÈÄöËøáÁõ¥Êé•‰∏éÊòéÊòüÂØπËØùÁöÑÊÉÖÂÜµ‰∏ãÔºåËÄåÈÄöËøáÊòéÊòüÁªèÁ∫™‰∫∫(‰ª£ÁêÜ)‰∏éÂÖ∂‰∫ßÁîüÈó¥Êé•ÂØπËØù„ÄÇ ‰ªÄ‰πàÊÉÖÂÜµ‰∏ã‰ΩøÁî®‰ª£ÁêÜÔºü ËÆæËÆ°Ê®°Âºè‰∏≠Êúâ‰∏Ä‰∏™ËÆæËÆ°ÂéüÂàôÊòØÂºÄÈó≠ÂéüÂàôÔºåÊòØËØ¥ÂØπ‰øÆÊîπÂÖ≥Èó≠ÂØπÊâ©Â±ïÂºÄÊîæÔºåÊàë‰ª¨Âú®Â∑•‰Ωú‰∏≠ÊúâÊó∂‰ºöÊé•ÊâãÂæàÂ§öÂâç‰∫∫ÁöÑ‰ª£Á†ÅÔºåÈáåÈù¢‰ª£Á†ÅÈÄªËæëËÆ©‰∫∫Êë∏‰∏çÁùÄÂ§¥ËÑë(sometimes the code is really like shit)ÔºåËøôÊó∂Â∞±ÂæàÈöæÂéª‰∏ãÊâã‰øÆÊîπ‰ª£Á†ÅÔºåÈÇ£‰πàËøôÊó∂Êàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøá‰ª£ÁêÜÂØπÁ±ªËøõË°åÂ¢ûÂº∫„ÄÇ Êàë‰ª¨Âú®‰ΩøÁî®RPCÊ°ÜÊû∂ÁöÑÊó∂ÂÄôÔºåÊ°ÜÊû∂Êú¨Ë∫´Âπ∂‰∏çËÉΩÊèêÂâçÁü•ÈÅìÂêÑ‰∏™‰∏öÂä°ÊñπË¶ÅË∞ÉÁî®Âì™‰∫õÊé•Âè£ÁöÑÂì™‰∫õÊñπÊ≥ï „ÄÇÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÔºåÂ∞±ÂèØÁî®ÈÄöËøáÂä®ÊÄÅ‰ª£ÁêÜÁöÑÊñπÂºèÊù•Âª∫Á´ã‰∏Ä‰∏™‰∏≠Èó¥‰∫∫ÁªôÂÆ¢Êà∑Á´Ø‰ΩøÁî®Ôºå‰πüÊñπ‰æøÊ°ÜÊû∂ËøõË°åÊê≠Âª∫ÈÄªËæëÔºåÊüêÁßçÁ®ãÂ∫¶‰∏ä‰πüÊòØÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÂíåÊ°ÜÊû∂ÊùæËÄ¶ÂêàÁöÑ‰∏ÄÁßçË°®Áé∞„ÄÇ SpringÁöÑAOPÊú∫Âà∂Â∞±ÊòØÈááÁî®Âä®ÊÄÅ‰ª£ÁêÜÁöÑÊú∫Âà∂Êù•ÂÆûÁé∞ÂàáÈù¢ÁºñÁ®ã„ÄÇ ÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜÊàë‰ª¨Ê†πÊçÆÂä†ËΩΩË¢´‰ª£ÁêÜÁ±ªÁöÑÊó∂Êú∫‰∏çÂêåÔºåÂ∞Ü‰ª£ÁêÜÂàÜ‰∏∫ÈùôÊÄÅ‰ª£ÁêÜÂíåÂä®ÊÄÅ‰ª£ÁêÜ„ÄÇÂ¶ÇÊûúÊàë‰ª¨Âú®‰ª£Á†ÅÁºñËØëÊó∂Â∞±Á°ÆÂÆö‰∫ÜË¢´‰ª£ÁêÜÁöÑÁ±ªÊòØÂì™‰∏Ä‰∏™ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÈùôÊÄÅ‰ª£ÁêÜÔºõÂ¶ÇÊûú‰∏çËÉΩÁ°ÆÂÆöÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî®Á±ªÁöÑÂä®ÊÄÅÂä†ËΩΩÊú∫Âà∂ÔºåÂú®‰ª£Á†ÅËøêË°åÊúüÈó¥Âä†ËΩΩË¢´‰ª£ÁêÜÁöÑÁ±ªËøôÂ∞±ÊòØÂä®ÊÄÅ‰ª£ÁêÜÔºåÊØîÂ¶ÇRPCÊ°ÜÊû∂ÂíåSpring AOPÊú∫Âà∂„ÄÇ ÈùôÊÄÅ‰ª£ÁêÜÊàë‰ª¨ÂÖàÂàõÂª∫‰∏Ä‰∏™Êé•Âè£ÔºåÈÅóÊÜæÁöÑÊòØjava api‰ª£ÁêÜÊú∫Âà∂Ê±ÇË¢´‰ª£ÁêÜÁ±ªÂøÖÈ°ªË¶ÅÂÆûÁé∞Êüê‰∏™Êé•Âè£ÔºåÂØπ‰∫éÈùôÊÄÅ‰ª£ÁêÜÊñπÂºè‰ª£ÁêÜÁ±ª‰πüË¶ÅÂÆûÁé∞ÂíåË¢´‰ª£ÁêÜÁ±ªÁõ∏ÂêåÁöÑÊé•Âè£ÔºõÂØπ‰∫éÂä®ÊÄÅ‰ª£ÁêÜ‰ª£ÁêÜÁ±ªÂàô‰∏çÈúÄË¶ÅÊòæÁ§∫ÁöÑÂÆûÁé∞Ë¢´‰ª£ÁêÜÁ±ªÊâÄÂÆûÁé∞ÁöÑÊé•Âè£„ÄÇ Êé•Âè£Êñá‰ª∂ÔºöIUser.java123public interface IUser &#123; public String getUserName();&#125; ÊòéÊòüÔºöUser.java1234567public class User implements IUser&#123; @Override public void getUserName() &#123; return "ÊàëÂè´Fighting"; &#125;&#125; ÁªèÁ∫™‰∫∫ÔºöUserProxyFactory.java1234567891011121314151617public class UserProxyFactory implements IUser &#123; private IUser user; public UserProxyFactory(IUser user)&#123; this.user = user; &#125; @Override public void getUserName() &#123; // TODO Auto-generated method stub System.out.println("‰ª£ÁêÜÂºÄÂßã"); this.user.sayHello(); System.out.println("‰ª£ÁêÜÁªìÊùü"); &#125;&#125; ÂïÜÊà∑Ôºöapp.java 1234567891011public class app &#123; public static void main(String[] args) &#123; // TODO Auto-generated method stub //user‰∏∫Ë¢´‰ª£ÁêÜÁöÑÂØπË±°ÔºåÊüê‰∫õÊÉÖÂÜµ‰∏ã Êàë‰ª¨‰∏çÂ∏åÊúõ‰øÆÊîπÂ∑≤ÊúâÁöÑ‰ª£Á†ÅÔºåÊàë‰ª¨ÈááÁî®‰ª£ÁêÜÊù•Èó¥Êé•ËÆøÈóÆ User user = new User(); //ÂàõÂª∫‰ª£ÁêÜÁ±ªÂØπË±° UserProxyFactory proxy = new UserProxyFactory(user); //Ë∞ÉÁî®‰ª£ÁêÜÁ±ªÂØπË±°ÁöÑÊñπÊ≥ï System.out.println(proxy.getUserName()); &#125;&#125; ÈùôÊÄÅ‰ª£ÁêÜÁúãËµ∑Êù•ÊòØÊØîËæÉÁÆÄÂçïÁöÑÔºåÊ≤°Êúâ‰ªÄ‰πàÈóÆÈ¢òÂè™‰∏çËøáÊòØÂú®‰ª£ÁêÜÁ±ª‰∏≠ÂºïÂÖ•‰∫ÜË¢´‰ª£ÁêÜÁ±ªÁöÑÂØπË±°ËÄåÂ∑≤„ÄÇÈÇ£‰πàÊé•‰∏ãÊù•Êàë‰ª¨ÁúãÁúãÂä®ÊÄÅ‰ª£ÁêÜ„ÄÇ Âä®ÊÄÅ‰ª£ÁêÜIUser.java‰∏çÂèòÔºåUser.java‰∏çÂèòÔºåUserProxyFactory.javaÂèëÁîüÊîπÂèò 123456789101112131415161718192021222324public class UserProxyFactory &#123; private Object target; public UserProxyFactory(Object target) &#123; this.target = target; &#125; public Object getProxyInstance()&#123; return Proxy.newProxyInstance( target.getClass().getClassLoader(), target.getClass().getInterfaces(), new InvocationHandler() &#123; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println("‰ª£ÁêÜÂºÄÂßã"); Object retVal = method.invoke(target, args); System.out.println("‰ª£ÁêÜÁªìÊùü"); return retVal; &#125; &#125; ); &#125;&#125; ÂÖ∂‰∏≠ÊúÄÈáçË¶ÅÁöÑ‰∏ÄÁÇπÔºåÁ±ª‰ºº‰∫éSpring AOPÂàáÈù¢ÔºåÂú®‰ª£ÁêÜÂºÄÂßã,‰ª£ÁêÜÁªìÊùüÂú∞ÊñπÂä†‰∏äÈÄªËæëÔºåÂ∞±Êàê‰∫ÜÂàáÈù¢ÊñπÂºè‰∫ÜÔºÅËøô‰πüÊòØ‰∏∫‰ªÄ‰πàË¶ÅÁî®‰ª£ÁêÜÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂéüÂõ†‰πã‰∏ÄÔºÅ‰Ω†‰∏çÁî®‰øÆÊîπ‰ªª‰ΩïÂ∑≤ÁªèÁºñÂÜôÂ•ΩÁöÑ‰ª£Á†ÅÔºåÂè™Ë¶Å‰ΩøÁî®‰ª£ÁêÜÂ∞±ÂèØ‰ª•ÁÅµÊ¥ªÁöÑÂä†ÂÖ•‰ªª‰Ωï‰∏úË•øÔºåÂ∞ÜÊù•‰∏çÂñúÊ¨¢‰∫ÜÔºå‰∏çÁî®‰πü‰∏ç‰ºöÂΩ±ÂìçÂéüÊù•ÁöÑ‰ª£Á†Å„ÄÇ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>proxy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OracleÂÆâË£ÖÔºàÂõõÔºâ]]></title>
    <url>%2Foracle%2Foracle%2F4%2F</url>
    <content type="text"><![CDATA[Linux‰∏ãOracleÂÆâË£ÖÔºàÂõõÔºâÂêØÂä®ÁõëÂê¨ÂíåÊï∞ÊçÆÂ∫ì123# /oracle/app/oracle/product/11.2.0/dbhome_1/bin/lsnrctl start# /oracle/app/oracle/product/11.2.0/dbhome_1/bin/sqlplus / as sysdbaSQL&gt; startup ËÆæÁΩÆdbaÂØÜÁ†Å1SQL&gt; alter user sys identified by 123456; ‰ΩøÁî®OracleÂÆ¢Êà∑Á´ØÔºåÂàõÂª∫Ë°®Á©∫Èó¥1234567create tablespace ccmp_app -Ë°®Á©∫Èó¥ÂêçÁß∞logging datafile '/oracle/ccmp-databases/ccmp_app' -Ë°®Á©∫Èó¥Â≠òÂÇ®‰ΩçÁΩÆsize 10m autoextend on next 10m maxsize 20480m extent management local; ‰ΩøÁî®OracleÂÆ¢Êà∑Á´ØÔºåÂàõÂª∫‰∏¥Êó∂Ë°®Á©∫Èó¥123456create temporary tablespace ccmp_app_temp -Ë°®Á©∫Èó¥ÂêçÁß∞tempfile '/oracle/ccmp-databases/ccmp_app_temp' -Ë°®Á©∫Èó¥Â≠òÂÇ®‰ΩçÁΩÆsize 10m autoextend on next 10m maxsize 20480m extent management local; ÂàõÂª∫Áî®Êà∑ÂíåÊåáÂÆöË°®Á©∫Èó¥123SQL&gt; create user ccmp_app identified by 123456;SQL&gt; default tablespace ccmp_app;SQL&gt; temporary tablespace ccmp_app_temp; Ëµã‰∫àÁî®Êà∑ÊùÉÈôê1SQL&gt; grant connect,resource,dba to ccmp_app;]]></content>
      <categories>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OracleÂÆâË£ÖÔºà‰∏âÔºâ]]></title>
    <url>%2Foracle%2Foracle%2F3%2F</url>
    <content type="text"><![CDATA[Linux‰∏ãOracleÂÆâË£ÖÔºà‰∏âÔºâÈÖçÁΩÆÁõëÂê¨Êñá‰ª∂ÂíåÊú¨Âú∞ÊúçÂä°1# /oracle/app/oracle/product/11.2.0/dbhome_1/bin/netca ÂàõÂª∫ÁõëÂê¨ÊúçÂä°Ôºå‰Ωú‰∏∫OracleÁöÑÊúçÂä°Á´Ø ‰ΩøÁî®tcpÂçèËÆÆ OracleÁöÑÈªòËÆ§ÁöÑÁ´ØÂè£ÊòØ1521 ÊòØÂê¶Ë¶ÅÂàõÂª∫Âè¶Â§ñ‰∏Ä‰∏™ÁõëÂê¨Êñá‰ª∂ÔºåËøôÈáåÂ∞±ÈÄâNO ÈÖçÁΩÆÊú¨Âú∞ÁΩëÁªúÊúçÂä°ÂêçÔºå‰Ωú‰∏∫OracleÁöÑÂÆ¢Êà∑Á´Ø ËøôÈáåÂ°´ÊúçÂä°Âô®ÁöÑip ËøôÈáåÈÄâyesÊµãËØï‰∏Ä‰∏ãÔºå‰πãÂêéÂ∞±Âíå‰πãÂâç‰∏ÄÊ†∑ÁªìÊùüÂç≥ÂèØÔºåÂà∞Ê≠§OracleÁöÑÂÆâË£ÖÈÉ®ÁΩ≤Â∞±Â∑≤ÁªèÂÆåÊàê‰∫Ü]]></content>
      <categories>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OracleÂÆâË£ÖÔºà‰∫åÔºâ]]></title>
    <url>%2Foracle%2Foracle%2F2%2F</url>
    <content type="text"><![CDATA[Linux‰∏ãOracleÂÆâË£ÖÔºà‰∫åÔºâËøêË°åOracleÂÆâË£ÖÊñá‰ª∂ 123# su oracle# source ~/.bash_profile# /opt/oracle/database/runInstaller -jreLoc /opt/jdk1.7.0_80/ ËøêË°åOracleËá™Â∏¶ËÑöÊú¨12# /oracle/app/oraInventory/orainstRoot.sh# /oracle/app/oracle/product/11.2.0/dbhome_1/root.sh ÂÆâË£ÖÊï∞ÊçÆÂ∫ì1# /oracle/app/oracle/product/11.2.0/dbhome_1/bin/dbca ËøôÈáåÊúâ3‰∏™Ê®°ÊùøÔºåÂú®ËøôÈáåÂ∞±‰ΩøÁî®Á¨¨‰∏Ä‰∏™Ôºå‰∏ÄËà¨Áî®ÈÄîÊàñ‰∫ãÂä°Â§ÑÁêÜ Âú®ËøôÈáåÈúÄË¶ÅÂ°´‰∏ä‰πãÂâçÂú®ÁéØÂ¢ÉÂèòÈáèÊñá‰ª∂‰∏≠ÂÜôÁöÑsid OracleÁöÑEMËµÑÊñôÊ°£Ê°àÂ∫ìÔºåÂèØ‰ª•ÂÅöÂà∞ÂæàÂ§öÁöÑÂäüËÉΩÂÆûÁé∞ÔºåÂèØ‰ª•ÂÅöÂà∞ÂæàÂ§öÁöÑÂäüËÉΩÔºå‰ΩÜÊòØÂ¶ÇÊûúÊòØ‰∏çÈúÄË¶ÅÁöÑËØùÂ∞±ÊääÈí©ÂéªÊéâ Âú®ËøôÈáåËÆæÁΩÆÁî®Êà∑ÂØÜÁ†ÅÔºåÂèØ‰ª•ËÆ©Áî®Êà∑ÁöÑÂØÜÁ†ÅÂçïÁã¨‰∏ç‰∏ÄÊ†∑ÔºåÂú®ËøôÈáåÂ∞±ËÆæÁΩÆÊàê‰∏ÄÊ†∑ÁöÑ ËøôÈáå‰ΩøÁî®Êñá‰ª∂Á≥ªÁªü Âú®ËøôÈáåËÆæÁΩÆÈó™ÂõûÂå∫Â§ßÂ∞èÔºåÂª∫ËÆÆ20~30GBÔºåËøô‰∏™Ë¶ÅÊ†πÊçÆÁ£ÅÁõòÁöÑÊó∂Èó¥ÊÉÖÂÜµËÆæÁΩÆÔºåÈó™ÂõûÂå∫Â¶ÇÊûúÊª°‰∫ÜOracleÊï∞ÊçÆÂ∫ì‰ºöÂÅúÊ≠¢ÔºåÊâÄ‰ª•Ëøô‰∏™ÈúÄË¶ÅÊ≥®ÊÑè ËØ¥ÊòéÁ§∫‰æãÔºåËøôÈáå‰∏çÈúÄË¶Å ÈÖçÁΩÆOracleÁöÑÈªòËÆ§ÁöÑ‰∏Ä‰∫õÁ≥ªÁªüÈÖçÁΩÆÔºåËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÂ≠óÁ¨¶ÈõÜÔºåËøô‰∏™ÈúÄË¶ÅÊ†πÊçÆÈúÄÊ±Ç‰øÆÊîπ ËøôÊ†∑Êï∞ÊçÆÂ∫ìÁöÑÂàõÂª∫dbcaÁöÑÈÉ®ÂàÜÂ∞±ÂÆâË£ÖÂÆåÊàê‰∫Ü]]></content>
      <categories>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OracleÂÆâË£ÖÔºà‰∏ÄÔºâ]]></title>
    <url>%2Foracle%2Foracle%2F1%2F</url>
    <content type="text"><![CDATA[Linux‰∏ãOracleÂÆâË£ÖÔºà‰∏ÄÔºâÂú®Linux‰∏≠ÂÆâË£ÖOracle‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†Ê≠• ÂÆâË£ÖOracle‰æùËµñÂåÖ 1# yum -y install binutils compat-libstdc++-33 elfutils-libelf elfutils-libelf-devel glibc glibc-common glibc-devel gcc gcc-c++ libaio-devel libaio libgcc libstdc++ libstdc++-devel make sysstat unixODBC unixODBC-devel pdksh ksh libaio.i686 glibc.i686 compat-libstdc++-33.i686 libaio-devel.i686 libgcc.i686 libstdc++.i686 unixODBC.i686 unixODBC-devel.i686 ÂàõÂª∫OracleÂØπÂ∫îÁõÆÂΩïÂπ∂ËÆæÁΩÆÊùÉÈôê 12# mkdir -p /oracle/app/oracle &amp;&amp; chown -R oracle:oinstall /oracle/app/oracle# mkdir -p /oracle/app/oraInventory &amp;&amp; chown -R oracle:oinstall /oracle/app/oraInventory ÂÆâË£ÖÂõæÂΩ¢ÁïåÈù¢ 123456# yum install xhost# yum grouplist# yum groupinstall "X Window System"# yum groupinstall Desktop# yum install xterm# yum install xclock ËÆæÁΩÆÂõæÂΩ¢ÁïåÈù¢ÊòæÁ§∫‰ΩçÁΩÆ export DISPLAY=ÂÆ¢Êà∑Á´ØIP:0.0 ÂàõÂª∫OracleÁ≥ªÁªüÁî®Êà∑ 1234# groupadd oinstall # groupadd dba # useradd -g oinstall -G dba oracle # passwd oracle ‰øÆÊîπÁ≥ªÁªüÂÜÖÊ†∏ÔºàÂèØÈÄâÔºâ vi /etc/sysctl.conf Êñ∞Â¢ûÂÜÖÂÆπÂ¶Ç‰∏ãÔºö kernel.shmall = 2097152 kernel.shmmax = 536870912 kernel.shmmni = 4096 kernel.sem = 250 32000 100 128 fs.aio-max-nr = 1048576 fs.file-max = 6815744 net.ipv4.ip_local_port_range = 9000 65500 net.core.rmem_default = 262144 net.core.rmem_max = 4194304 net.core.wmem_default = 262144 net.core.wmem_max = 1048586 ÈÖçÁΩÆÊñá‰ª∂ÈôêÂà∂ÔºàÂèØÈÄâÔºâ vi /etc/security/limits.conf ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö oracle soft nproc 2047 oracle hard nproc 16384 oracle soft nofile 1024 oracle hard nofile 65536 ÈÖçÁΩÆOracleÁéØÂ¢ÉÂèòÈáè 12# su oracle# vi .bash_profile bash_profileÂÜÖÂÆπ‰øÆÊîπÂ¶Ç‰∏ãÔºö export ORACLE_BASE=/oracle/app/oracle #ORACLEÂü∫Á°ÄÁõÆÂΩï export ORACLE_HOME=/oracle/app/oracle/product/11.2.0/dbhome_1 #ORACLEÂÆâË£ÖÁõÆÂΩï export ORACLE_SID=CCMP #SID export PATH=$ORACLE_HOME/bin:$PATH export ORACLE_TERM=xterm export TNS_ADMIN=$ORACLE_HOME/network/admin export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME/oracm/lib:$ORACLE_HOME/lib export CLASSPATH=$CLASSPATH:$ORACLE_HOME/rdbms/jlib:$ORACLE_HOME/jlib:$ORACLE_HOME/network/lib export LANG=en_US.gbk export NLS_LANG=american_america.ZHS16GBK export EDITOR=vi PATH=$PATH:$HOME/.local/bin:$HOME/bin export PATH ‰ΩøÁî®Xshell/MobaXtermÊù•ÊòæÁ§∫ÁïåÈù¢]]></content>
      <categories>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êê≠Âª∫Ë∑≥ÊùøÊú∫]]></title>
    <url>%2Flinux%2Flinux%2Fssh-drawboard-1%2F</url>
    <content type="text"><![CDATA[ÂâçË®ÄËøëÈÅáÂà∞ËøôÊ†∑‰∏Ä‰∏™ÈóÆÈ¢òÔºåÊàëÂú®ÈòøÈáå‰∫ëÂÆ§Êû∂ËÆæ‰∫Ü‰∏ÄÂè∞ÊúçÂä°Âô®ÔºåÂèëÁé∞Â§ñÈÉ®ÁΩëÂÖÉÂØπÊúçÂä°Âô®ÊîªÂáªÈùûÂ∏∏Âπ≥Âá°ÔºåÈÉΩÁü•ÈÅìÊúçÂä°Âô®ÂºÄÊîæÂá∫Êù•ÁöÑÁ´ØÂè£Ë∂äÂ§öÔºåÂØπÊúçÂä°Âô®ÁöÑÈ£éÈô©Ë∂äÂ§ß„ÄÇÂ¶Ç‰ΩïÊù•ËßÑÈÅøËøô‰∫õÈ£éÈô©Âë¢Ôºå‰∏ãÈù¢ÂÖ∑‰ΩìËØ¥ÊòéÂú®ÈòøÈáå‰∫ë‰∏äÊê≠Âª∫‰∏Ä‰∏™Ë∑≥ÊùøÊú∫Êù•ËÆøÈóÆÂÜÖÁΩëÊúçÂä°Âô®ÔºåÊèêÂçáÊúçÂä°Âô®ÁöÑÂÆâÂÖ®„ÄÇ ÊèèËø∞‰∏Ä‰∏ãÁõÆÂâçÁöÑÊú∫Âô®Áä∂ÂÜµÔºåÊ¢≥ÁêÜÊ¢≥ÁêÜÔºö Êú∫Âô® IP Áî®Êà∑Âêç Â§áÊ≥® A 123.78.150.91 root Â§ñÁΩëÊúçÂä°Âô®ÔºåÁõ∏ÂΩì‰∫éÊ°•Ê¢ÅÁöÑ‰ΩúÁî®ÔºåË∑≥ÊùøÊú∫ B 172.18.62.123 root ÁõÆÊ†áÊúçÂä°Âô®ÔºåÂ§Ñ‰∫éÂÜÖÁΩë C 123.123.123.123 win Ëá™Â∑±ÁöÑÁîµËÑë Ëß£ÂÜ≥ÊñπÊ≥ïÈÄö‰øóÂú∞ËØ¥ÔºöÂ∞±ÊòØÂú®Êú∫Âô®C‰∏ä‰ΩøÁî®xshell/mobaXtermËΩØ‰ª∂ËøûÊé•AÊú∫Âô®ÔºåËá™Âä®ËΩ¨ÂêëÂà∞BÊú∫Âô®‰∏ä„ÄÇ ÂÆûÁé∞ÂâçÁöÑÂáÜÂ§áÊØèÂè∞ÈÉΩË¶ÅÂÆâË£ÖsshÁöÑÂÆ¢Êà∑Á´ØÔºåÂú®ËøôÈáåÊàë‰ΩøÁî®ÁöÑÊòØcentos7ÔºåÈÉΩËá™Â∏¶ssh„ÄÇÂ¶ÇÊûúÊòØ‰ΩøÁî®ÂÖ∂‰ªñÁâàÊú¨LinuxÔºåËØ∑ÊâãÂä®Google‰∏Ä‰∏ãÂíØ„ÄÇ ‰ªãÁªç‰∏Ä‰∏ã‰ΩøÁî®Âà∞ÁöÑsshÂèÇÊï∞ÂèçÂêë‰ª£ÁêÜssh -fCNR Ê≠£Âêë‰ª£ÁêÜssh -fCNL -f ÂêéÂè∞ÊâßË°åsshÊåá‰ª§-C ÂÖÅËÆ∏ÂéãÁº©Êï∞ÊçÆ-N ‰∏çÊâßË°åËøúÁ®ãÊåá‰ª§-R Â∞ÜËøúÁ®ã‰∏ªÊú∫(ÊúçÂä°Âô®)ÁöÑÊüê‰∏™Á´ØÂè£ËΩ¨ÂèëÂà∞Êú¨Âú∞Á´ØÊåáÂÆöÊú∫Âô®ÁöÑÊåáÂÆöÁ´ØÂè£-L Â∞ÜÊú¨Âú∞Êú∫(ÂÆ¢Êà∑Êú∫)ÁöÑÊüê‰∏™Á´ØÂè£ËΩ¨ÂèëÂà∞ËøúÁ´ØÊåáÂÆöÊú∫Âô®ÁöÑÊåáÂÆöÁ´ØÂè£-p ÊåáÂÆöËøúÁ®ã‰∏ªÊú∫ÁöÑÁ´ØÂè£ È¶ñÂÖàÂú®A‰∏äÈù¢Êìç‰ΩúÂª∫Á´ãAÊú∫Âô®Âà∞BÊú∫Âô®ÁöÑÂèçÂêë‰ª£ÁêÜÔºåÂÖ∑‰ΩìÊåá‰ª§‰∏∫ssh -fCNR [BÊú∫Âô®IPÊàñÁúÅÁï•]:[BÊú∫Âô®Á´ØÂè£]:[AÊú∫Âô®ÁöÑIP]:[AÊú∫Âô®Á´ØÂè£] [ÁôªÈôÜBÊú∫Âô®ÁöÑÁî®Êà∑Âêç@ÊúçÂä°Âô®IP] Âú®ËøôÈáåÊàë‰ΩøÁî®‰∫ÜBÊú∫Âô®ÁöÑ2222Á´ØÂè£Ôºå‰ª•ÂèäAÊú∫Âô®ÁöÑ22Á´ØÂè£ÔºåÊåâÁÖß‰∏äÈù¢ÁöÑÊåá‰ª§Â∞±ÊòØËøôÊ†∑Â≠êÁöÑÊìç‰Ωú 1ssh -ngfNTR 2222:172.18.62.123:22 root@123.78.150.91 -o ServerAliveInterval=300 Ê£ÄÈ™åÊòØÂê¶Â∑≤ÁªèÂêØÂä®‰∫ÜÂèØ‰ª•‰ΩøÁî®ps aux | grep sshÊåá‰ª§Êù•Êü•Áúã ÈòøÈáå‰∫ëÊâìÂºÄÁ´ØÂè£AÊúçÂä°Âô®Ë¶ÅÊâìÂºÄ2222BÊúçÂä°Âô®Ë¶ÅÊâìÂºÄ22Ôºå‰ªÖÈôêAÊúçÂä°Âô®ËÆøÈóÆ Êé•ÁùÄÂú®B‰∏äÈù¢Êìç‰ΩúÂª∫Á´ãBÊú∫Âô®ÁöÑssh-key 1ssh-keygen ÁÑ∂Âêé‰∏ÄÁõ¥ÊåâÂõûËΩ¶Â∞±ÂèØ‰ª•‰∫ÜÔºåÂ∞Ü~/ssh/id_rsa.pubÊã∑Ë¥ùÁªôAÊúçÂä°Âô®~/ssh/authorized_keys Âú®B‰∏äÁî®autosshÂª∫Á´ãÁ®≥ÂÆöÈößÈÅìcentos7‰∏äÊ≤°ÊúâÈªòËÆ§ÂÆâË£ÖautosshÁöÑÔºåÊâÄ‰ª•‰ΩøÁî®‰∏Ä‰∏ãÂëΩ‰ª§ÂÆâË£Ö 1yum install autossh Âú®BÊúçÂä°Âô®‰∏ä‰ΩøÁî®autosshÂª∫Á´ãÁ®≥ÂÆöÈößÈÅì 1autossh -p 22 -M 6777 -fNR 2222:127.0.0.1:22 root@123.78.150.91 ÂëΩ‰ª§ËØ¥Êòé-M 6777 Ëøô‰∏™Ë°®Á§∫ÊòØÁõëÊéßÁ´ØÂè£ÔºåÊ£ÄÊµãÂà∞Ëøô‰∏™Á´ØÂè£‰∏çÈÄö‰ºöÈáçÊñ∞ËøûÊé•2222:127.0.0.1:22 2222Ë°®Á§∫ÈúÄË¶ÅÂú®ËøúÁ®ã‰∏ªÊú∫‰∏äÂºÄÂêØÁöÑÁ´ØÂè£Ôºå22Ë°®Á§∫Êú¨Âú∞ÁöÑsshÁ´ØÂè£root@123.78.150.91 -p 22 root‰∏∫vps‰∏äÈù¢ÁöÑÁî®Êà∑Ôºå22‰∏∫vps sshÁ´ØÂè£ Áé∞Âú®Â∞±ÂèØ‰ª•Âú®AÊúçÂä°Âô®‰ΩøÁî®SSHÁ´ØÂè£‰∏∫2222ËÆøÈóÆBÊúçÂä°Âô®‰∫Ü]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ssh</tag>
        <tag>drawboard</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RocketMQÂÆûÊàòÔºà‰∏âÔºâ]]></title>
    <url>%2Fmq%2Fmq%2Frocketmq%2F3%2F</url>
    <content type="text"><![CDATA[ÂÖ≥‰∫éÂ§öMasterÂ§öSlaveÁöÑËØ¥Êòé Áî±‰∫éÂú®‰πãÂâçÁöÑÂçöÂÆ¢‰∏≠Â∑≤ÁªèÊê≠Âª∫‰∫ÜÂèåMasterÔºåÂÖ∂ÂÆûÂ§öMasterÂ§öSlaveÂ§ßÂêåÂ∞èÂºÇÔºåÂõ†Ê≠§ËøôÈáåÂπ∂‰∏ç‰ºö‰∏ÄÊ≠•Ê≠•ÁöÑÊºîÁ§∫Êê≠Âª∫Â§öMasterÂ§öSlaveÔºåËÄåÊòØ‰ªéÊÄùË∑Ø‰∏äÔºåÂàÜÊûê‰∏ãÈáçÁÇπÂ∫îËØ•Ê≥®ÊÑèÁöÑÈÖçÁΩÆÈ°π„ÄÇ ËøôÂõõÂè∞Êú∫Âô®ÔºåÂØπÂ§ñÊòØ‰∏Ä‰∏™Áªü‰∏ÄÁöÑÊï¥‰ΩìÔºåÊòØ‰∏Ä‰∏™rocketmq clusterÔºåÂõ†Ê≠§ÈúÄË¶ÅbrokerClusterName‰øùÊåÅÁªü‰∏Ä 123Êú∫Âô®ÊòØ121ÁöÑ‰ªéÔºå124Êú∫Âô®ÊòØ122ÁöÑ‰ªéÔºåÂ¶Ç‰ΩïÂú®ÈÖçÁΩÆ‰∏≠‰ΩìÁé∞Ôºü ‰∏ªÂíå‰ªéÁöÑbrokerNameÈúÄË¶Å‰øùÊåÅ‰∏ÄËá¥ÔºåÂè¶Â§ñbrokerIdÊ†áÁ§∫‰∫ÜË∞ÅÊòØ‰∏ªÔºåË∞ÅÊòØ‰ªéÔºàbrokerId=0ÁöÑÂ∞±ÊòØ‰∏ªÔºåÂ§ß‰∫é0ÁöÑÂ∞±ÊòØ‰ªéÔºâ Ê≥®ÊÑènamesrvAddrÁöÑÂú∞ÂùÄÊòØ4Âè∞NameServer ÈÖçÁΩÆÈ°π‰∏≠brokerRoleÈúÄË¶ÅÊåáÊòé ASYNC_MASTERÔºàÂºÇÊ≠•Â§çÂà∂MasterÔºâ or SYNC_MASTERÔºàÂêåÊ≠•ÂèåÂÜôMasterÔºâ or SLAVEÔºà‰ªéÔºâ Âíå‰ª•ÂâçÁöÑÂ§öMasterÂêØÂä®ÊñπÂºè‰∏ÄËá¥ÔºåÂÖàÂêØÂä®4Âè∞NamesrvÔºåÁÑ∂ÂêéÁî®ÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñπÂºèÂêØÂä®Master/SlaveÂç≥ÂèØ Â§öMasterÂ§öSlaveÁöÑÂ•ΩÂ§ÑÂú®‰∫éÔºåÂç≥‰æøÈõÜÁæ§‰∏≠Êüê‰∏™brokerÊåÇ‰∫ÜÔºå‰πüÂèØ‰ª•ÁªßÁª≠Ê∂àË¥πÔºå‰øùËØÅ‰∫ÜÂÆûÊó∂ÊÄßÁöÑÈ´òÂèØÁî®Ôºå‰ΩÜÊòØÂπ∂‰∏çÊòØËØ¥Êüê‰∏™masterÊåÇ‰∫ÜÔºåslaveÂ∞±ÂèØ‰ª•ÂçáÁ∫ßmasterÔºåÂºÄÊ∫êÁâàÊú¨ÁöÑrocketmqÊòØ‰∏çÂèØ‰ª•ÁöÑ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåslaveÂè™ËÉΩÊèê‰æõËØªÁöÑÂäüËÉΩÔºåÂ∞ÜÂ§±ÂéªÊ∂àÊÅØË¥üËΩΩÁöÑËÉΩÂäõ„ÄÇ Queue in TopicÂØπ‰∫éRocketMQËÄåË®ÄÔºåTopicÂè™ÊòØ‰∏Ä‰∏™ÈÄªËæë‰∏äÁöÑÊ¶ÇÂøµÔºåÁúüÊ≠£ÁöÑÊ∂àÊÅØÂ≠òÂÇ®ÂÖ∂ÂÆûÊòØÂú®Topic‰∏≠ÁöÑQueue‰∏≠„ÄÇÊÉ≥‰∏ÄÊÉ≥Ôºå‰∏∫‰ªÄ‰πàRocketMQË¶ÅËøôË¶ÅËÆæËÆ°Âë¢ÔºüÂÖ∂ÂÆûÊòØ‰∏∫‰∫ÜÊ∂àÊÅØÁöÑÈ°∫Â∫èÊ∂àË¥πÔºåÂêéÊñá‰∏≠Â∞Ü‰∏∫Â§ßÂÆ∂‰ªãÁªç„ÄÇ ÂàùÊ≠•ËÆ§ËØÜRocketMQÁöÑÊ†∏ÂøÉÊ®°Âùó rocketmq-brokerÔºöÊé•ÂèóÁîü‰∫ßËÄÖÂèëÊù•ÁöÑÊ∂àÊÅØÂπ∂Â≠òÂÇ®ÔºàÈÄöËøáË∞ÉÁî®rocketmq-storeÔºâÔºåÊ∂àË¥πËÄÖ‰ªéËøôÈáåÂèñÂæóÊ∂àÊÅØ„ÄÇ rocketmq-clientÔºöÊèê‰æõÂèëÈÄÅ„ÄÅÊé•ÂèóÊ∂àÊÅØÁöÑÂÆ¢Êà∑Á´ØAPI„ÄÇ rocketmq-namesrvÔºöNameServerÔºåÁ±ª‰ºº‰∫éZookeeperÔºåËøôÈáå‰øùÂ≠òÁùÄÊ∂àÊÅØÁöÑTopicNameÔºåÈòüÂàóÁ≠âËøêË°åÊó∂ÁöÑÂÖÉ‰ø°ÊÅØ„ÄÇÔºàÊúâÁÇπNameNodeÁöÑÂë≥ÈÅìÔºâ rocketmq-commonÔºöÈÄöÁî®ÁöÑ‰∏Ä‰∫õÁ±ªÔºåÊñπÊ≥ïÔºåÊï∞ÊçÆÁªìÊûÑÁ≠â rocketmq-remotingÔºöÂü∫‰∫éNetty4ÁöÑclient/server + fastjsonÂ∫èÂàóÂåñ + Ëá™ÂÆö‰πâ‰∫åËøõÂà∂ÂçèËÆÆ rocketmq-storeÔºöÊ∂àÊÅØ„ÄÅÁ¥¢ÂºïÂ≠òÂÇ®Á≠â rocketmq-filtersrvÔºöÊ∂àÊÅØËøáÊª§Âô®ServerÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåË¶ÅÂÆûÁé∞ËøôÁßçËøáÊª§ÔºåÈúÄË¶Å‰∏ä‰º†‰ª£Á†ÅÂà∞MQÔºÅ„Äê‰∏ÄËà¨ËÄåË®ÄÔºåÊàë‰ª¨Âà©Áî®TagË∂≥‰ª•Êª°Ë∂≥Â§ßÈÉ®ÂàÜÁöÑËøáÊª§ÈúÄÊ±ÇÔºåÂ¶ÇÊûúÊõ¥ÁÅµÊ¥ªÊõ¥Â§çÊùÇÁöÑËøáÊª§ÈúÄÊ±ÇÔºåÂèØ‰ª•ËÄÉËôëfiltersrvÁªÑ‰ª∂„Äë rocketmq-toolsÔºöÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑ Order MessageRocketMQÊèê‰æõ‰∫Ü3ÁßçÊ®°ÂºèÁöÑProducerÔºö NormalProducerÔºàÊôÆÈÄöÔºâ OrderProducerÔºàÈ°∫Â∫èÔºâ TransactionProducerÔºà‰∫ãÂä°Ôºâ Âú®ÂâçÈù¢ÁöÑÂçöÂÆ¢ÂΩì‰∏≠ÔºåÊ∂âÂèäÁöÑÈÉΩÊòØNormalProducerÔºåË∞ÉÁî®‰º†ÁªüÁöÑsendÊñπÊ≥ïÔºåÊ∂àÊÅØÊòØÊó†Â∫èÁöÑ„ÄÇÊé•‰∏ãÊù•ÔºåÊàë‰ª¨Êù•ÁúãÁúãÈ°∫Â∫èÊ∂àË¥π„ÄÇÊ®°ÊãüËøôÊ†∑‰∏Ä‰∏™Âú∫ÊôØÔºåÂ¶ÇÊûú‰∏Ä‰∏™Áî®Êà∑ÂÆåÊàê‰∏Ä‰∏™ËÆ¢ÂçïÈúÄË¶Å3Êù°Ê∂àÊÅØÔºåÊØîÂ¶ÇËÆ¢ÂçïÁöÑÂàõÂª∫„ÄÅËÆ¢ÂçïÁöÑÊîØ‰ªò„ÄÅËÆ¢ÂçïÁöÑÂèëË¥ßÔºåÂæàÊòæÁÑ∂ÔºåÂêå‰∏Ä‰∏™Áî®Êà∑ÁöÑËÆ¢ÂçïÊ∂àÊÅØÂøÖÈ°ªË¶ÅÈ°∫Â∫èÊ∂àË¥πÔºå‰ΩÜÊòØ‰∏çÂêåÁî®Êà∑‰πãÈó¥ÁöÑËÆ¢ÂçïÂèØ‰ª•Âπ∂Ë°åÊ∂àË¥π„ÄÇ Áîü‰∫ßËÄÖÁ´Ø‰ª£Á†ÅÁ§∫‰æãÔºö Ê≥®ÊÑèÔºå‰∏Ä‰∏™MessageÈô§‰∫ÜTopic/TagÂ§ñÔºåËøòÊúâKeyÁöÑÊ¶ÇÂøµ„ÄÇ‰∏äÂõæÁöÑsendÊñπÊ≥ï‰∏çÂêå‰∫é‰ª•ÂæÄÔºåÊúâ‰∏Ä‰∏™MessageQueueSelectorÔºåÂ∞ÜÁî®‰∫éÊåáÂÆöÁâπÂÆöÁöÑÊ∂àÊÅØÂèëÂæÄÁâπÂÆöÁöÑÈòüÂàóÂΩì‰∏≠ÔºÅ Ê≥®ÊÑèÔºåÂú®‰ª•ÂâçÊôÆÈÄöÊ∂àË¥πÊ∂àÊÅØÊó∂ËÆæÁΩÆÁöÑÂõûË∞ÉÊòØMessageListenerConcurrentlyÔºåËÄåÈ°∫Â∫èÊ∂àË¥πÁöÑÂõûË∞ÉËÆæÁΩÆÊòØMessageListenerOrderly„ÄÇ ÂΩìÊàë‰ª¨ÂêØÂä®2‰∏™ConsumerËøõË°åÊ∂àË¥πÊó∂ÔºåÂèØ‰ª•ËßÇÂØüÂà∞Ôºö ÂèØ‰ª•ËßÇÂØüÂæóÂà∞ÔºåËôΩÁÑ∂‰ªéÂÖ®Â±Ä‰∏äÊù•ÁúãÔºåÊ∂àÊÅØÁöÑÊ∂àË¥π‰∏çÊòØÊúâÂ∫èÁöÑÔºå‰ΩÜÊòØÊØè‰∏Ä‰∏™ËÆ¢Âçï‰∏ãÁöÑ3Êù°Ê∂àÊÅØÊòØÈ°∫Â∫èÊ∂àË¥πÁöÑÔºÅ ÂÖ∂ÂÆûÔºåÂ¶ÇÊûúÈúÄË¶Å‰øùËØÅÊ∂àÊÅØÁöÑÈ°∫Â∫èÊ∂àË¥πÔºåÈÇ£‰πàÂæàÁÆÄÂçïÔºåÈ¶ñÂÖàÈúÄË¶ÅÂÅöÂà∞‰∏ÄÁªÑÈúÄË¶ÅÊúâÂ∫èÊ∂àË¥πÁöÑÊ∂àÊÅØÂèëÂæÄÂêå‰∏Ä‰∏™brokerÁöÑÂêå‰∏Ä‰∏™ÈòüÂàó‰∏äÔºÅÂÖ∂Ê¨°Ê∂àË¥πËÄÖÁ´ØÈááÁî®ÊúâÂ∫èListenerÂç≥ÂèØ„ÄÇ ËøôÈáåÔºåRocketMQÂ∫ïÂ±ÇÊòØÂ¶Ç‰ΩïÂÅöÂà∞Ê∂àÊÅØÈ°∫Â∫èÊ∂àË¥πÁöÑÔºåÁúã‰∏ÄÁúãÊ∫êÁ†Å‰Ω†Â∞±ËÉΩÂ§ßÊ¶Ç‰∫ÜËß£Âà∞ÔºåËá≥Â∞ëÊù•ËØ¥ÔºåÂú®Â§öÁ∫øÁ®ãÊ∂àË¥πÂú∫ÊôØ‰∏ãÔºå‰∏Ä‰∏™Á∫øÁ®ãÂè™ÂéªÊ∂àË¥π‰∏Ä‰∏™ÈòüÂàó‰∏äÁöÑÊ∂àÊÅØÔºåÈÇ£‰πàËá™ÁÑ∂Â∞±‰øùËØÅ‰∫ÜÊ∂àÊÅØÊ∂àË¥πÁöÑÈ°∫Â∫èÊÄßÔºåÂêåÊó∂‰πü‰øùËØÅ‰∫ÜÂ§ö‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÂπ∂ÂèëÊÄß„ÄÇ‰πüÂ∞±ÊòØËØ¥ÂÖ∂ÂÆûbrokerÂπ∂‰∏çËÉΩÂÆåÂÖ®‰øùËØÅÊ∂àÊÅØÁöÑÈ°∫Â∫èÊ∂àË¥πÔºåÂÆÉ‰ªÖ‰ªÖËÉΩ‰øùËØÅÁöÑÊ∂àÊÅØÁöÑÈ°∫Â∫èÂèëÈÄÅËÄåÂ∑≤ÔºÅ ÂÖ≥‰∫éÂ§öÁ∫øÁ®ãÊ∂àË¥πËøôÂùóÔºåRocketMQÊó©Â∞±ÊõøÊàë‰ª¨ÊÉ≥Â•Ω‰∫ÜÔºåËøôÊ†∑ËÆæÁΩÆÂç≥ÂèØÔºö ÊÉ≥‰∏ÄÊÉ≥ÔºåÂú®ActiveMQ‰∏≠ÔºåÊàë‰ª¨Â¶ÇÊûúÊÉ≥ÂÆûÁé∞Âπ∂ÂèëÊ∂àË¥πÁöÑËØùÔºåÊÅêÊÄïËøòÂæóÊêû‰∏™Á∫øÁ®ãÊ±†Êèê‰∫§‰ªªÂä°ÂêßÔºåRocketMQËÆ©Êàë‰ª¨ÁöÑÂ∑•‰ΩúÂèòÂæóÁÆÄÂçïÔºÅ Transaction MessageÂú®ËØ¥‰∫ãÂä°Ê∂àÊÅØ‰πãÂâçÔºåÊàë‰ª¨ÂÖàÊù•ËØ¥ËØ¥ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑÈÇ£‰∫õ‰∫ãÔºÅ ‰ªÄ‰πàÊòØÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºåÊàëÁöÑÁêÜËß£ÊòØ‰∏ÄÂçä‰∫ãÂä°„ÄÇÊÄé‰πàËØ¥ÔºåÊØîÂ¶ÇÊúâ2‰∏™ÂºÇÊûÑÁ≥ªÁªüÔºåAÂºÇÊûÑÁ≥ªÁªüË¶ÅÂÅöT1ÔºåBÂºÇÊûÑÁ≥ªÁªüË¶ÅÂÅöT2ÔºåË¶Å‰πàÈÉΩÊàêÂäüÔºåË¶Å‰πàÈÉΩÂ§±Ë¥•„ÄÇË¶ÅÁü•ÈÅìÂºÇÊûÑÁ≥ªÁªüÔºåÂæàÊòæÁÑ∂Ôºå‰∏çÂú®‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æã‰∏äÔºåÂÆÉ‰ª¨ÂæÄÂæÄÂàÜÂ∏ÉÂú®‰∏çÂêåÁâ©ÁêÜËäÇÁÇπ‰∏äÔºåÊú¨Âú∞‰∫ãÂä°Â∑≤ÁªèÂ§±Êïà„ÄÇ 2Èò∂ÊÆµÊèê‰∫§ÂçèËÆÆÔºåTwo-Phase CommitÔºåÊòØÂ§ÑÁêÜÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑ‰∏ÄÁßçÂ∏∏ËßÅÊâãÊÆµ„ÄÇ2PCÔºåÂ≠òÂú®2‰∏™ÈáçË¶ÅËßíËâ≤Ôºö‰∫ãÂä°ÂçèË∞ÉÂô®ÔºàTCÔºâÔºå‰∫ãÂä°ÊâßË°åËÄÖ„ÄÇ 2PCÔºåÂèØ‰ª•ÁúãÂà∞ËäÇÁÇπ‰πãÈó¥ÁöÑÈÄö‰ø°Ê¨°Êï∞Â§™Â§ö‰∫ÜÔºåÊó∂Èó¥ÂæàÈïøÔºÅÊó∂Èó¥ÂèòÈïø‰∫ÜÔºå‰ªéËÄåÂØºËá¥Ôºå‰∫ãÂä°ÈîÅÂÆöÁöÑËµÑÊ∫êÊó∂Èó¥‰πüÂèòÈïø‰∫ÜÔºåÈÄ†ÊàêËµÑÊ∫êÁ≠âÂæÖÊó∂Èó¥ÂèòÈïøÔºÅÂú®È´òÂπ∂ÂèëÂú∫ÊôØ‰∏ãÔºåÂ≠òÂú®‰∏•ÈáçÁöÑÊÄßËÉΩÈóÆÈ¢ò ‰∏ãÈù¢ÔºåÊàë‰ª¨Êù•ÁúãÁúãMQÂú®È´òÂπ∂ÂèëÂú∫ÊôØ‰∏ãÔºåÊòØÂ¶Ç‰ΩïËß£ÂÜ≥ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑ„ÄÇ ËÄÉËôëÁîüÊ¥ª‰∏≠ÁöÑÂú∫ÊôØÔºö Êàë‰ª¨ÂéªÂåó‰∫¨Â∫Ü‰∏∞ÂåÖÂ≠êÈì∫ÂêÉÁÇíËÇùÔºåÂÖàÂéªËê•‰∏öÂëòÈÇ£Èáå‰ªòÊ¨æÔºàAction1ÔºâÔºåÊãøÂà∞Â∞èÁ•®ÔºàTicketÔºâÔºåÁÑ∂ÂêéÂéªÂèñÈ§êÁ™óÂè£ÊéíÈòüÊãøÁÇíËÇùÔºàAction2Ôºâ„ÄÇÊÄùËÄÉ2‰∏™ÈóÆÈ¢òÔºöÁ¨¨‰∏ÄÔºå‰∏∫‰ªÄ‰πà‰∏çÂú®‰ªòÊ¨æÁöÑÂêåÊó∂ÔºåÁªôÈ°æÂÆ¢ÁÇíËÇùÔºüÂ¶ÇÊûúËøôÊ†∑ÁöÑËØùÔºå‰ºöÂ¢ûÂä†Â§ÑÁêÜÊó∂Èó¥Ôºå‰ΩøÂæóÂêéÈù¢ÁöÑÈ°æÂÆ¢Á≠âÂæÖÊó∂Èó¥ÂèòÈïøÔºåÁõ∏ÂΩì‰∫éÈôç‰Ωé‰∫ÜÊé•ÂæÖÈ°æÂÆ¢ÁöÑËÉΩÂäõÔºàÈôç‰Ωé‰∫ÜÁ≥ªÁªüÁöÑQPSÔºâ„ÄÇÁ¨¨‰∫åÔºå‰ªò‰∫ÜÊ¨æÔºåÊãøÂà∞ÁöÑÊòØTicketÔºåÈ°æÂÆ¢‰∏∫‰ªÄ‰πà‰ºöÊé•ÂèóÔºü‰ªéÂøÉÁêÜ‰∏äËØ¥ÔºåÈ°æÂÆ¢Áõ∏‰ø°Ticket‰ºöÂÖëÁé∞ÁÇíËÇù„ÄÇ‰∫ãÂÆû‰∏ä‰πüÊòØÂ¶ÇÊ≠§ÔºåÂ∞±ÁÆóÂú®ÊúÄÂêéÁÇíËÇùÊ≤°‰∫ÜÔºåÊàñËÄÖÊñ≠ÁîµÊñ≠Ê∞¥ÔºàÁ≥ªÁªüÂá∫Áé∞ÂºÇÂ∏∏ÔºâÔºåÈ°æÂÆ¢‰æùÁÑ∂ÂèØ‰ª•ÈÄöËøáTicketËøõË°åÈÄÄÊ¨æÊìç‰ΩúÔºåËøôÊ†∑ÈÉΩ‰∏ç‰ºöÊúâ‰ªÄ‰πàÊçüÂ§±ÔºÅÔºàËôΩÁÑ∂Ëøô‰πàËØ¥Ôºå‰ΩÜÊòØÂÆûÈôÖ‰∏äÂåÖÂ≠êÈì∫ÊúÄÂ§ßÂåñ‰∫ÜÂÆÉÁöÑÂà©ÁõäÔºåÂ¶ÇÊûúÁÇíËÇùÁúüÁöÑÊ≤°‰∫ÜÔºåÊµ™Ë¥π‰∫ÜÈ°æÂÆ¢ÁöÑÊó∂Èó¥Ôºå‰∏çËøáÈ°æÂÆ¢È°∂Â§öÂèëÂèëÁâ¢È™öÔºåÊúÄÂêéÊé•ÂèóÔºâ ÁîüÊ¥ªÂ∑≤ÁªèÂëäËØâÊàë‰ª¨Â§ÑÁêÜÂàÜÂ∏ÉÂºè‰∫ãÂä°Ôºå‰øùËØÅÊï∞ÊçÆÊúÄÁªà‰∏ÄËá¥ÊÄßÁöÑÊÄùË∑ØÔºÅËøô‰∏™TicketÔºàÂá≠ËØÅÔºâÂÖ∂ÂÆûÂ∞±ÊòØÊ∂àÊÅØÔºÅ ‰∏öÂä°Êìç‰ΩúÂíåÊ∂àÊÅØÁöÑÁîüÊàêËÄ¶ÂêàÂú®‰∏ÄËµ∑Ôºå‰øùËØÅ‰∫ÜÂè™Ë¶ÅAÈì∂Ë°åÁöÑË¥¶Êà∑ÂèëÁîüÊâ£Ê¨æÔºåÈÇ£‰πà‰∏ÄÂÆö‰ºöÁîüÊàê‰∏ÄÊù°ËΩ¨Ë¥¶Ê∂àÊÅØ„ÄÇÂè™Ë¶ÅAÈì∂Ë°åÁ≥ªÁªüÁöÑ‰∫ãÂä°ÊàêÂäüÊèê‰∫§ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂÆûÊó∂Ê∂àÊÅØÊúçÂä°ÔºåÂ∞ÜËΩ¨Ë¥¶Ê∂àÊÅØÈÄöÁü•BÈì∂Ë°åÁ≥ªÁªüÔºåÂ¶ÇÊûúBÈì∂Ë°åÁ≥ªÁªüÂõûÂ§çÊàêÂäüÔºåÈÇ£‰πàAÈì∂Ë°åÁ≥ªÁªüÂèØ‰ª•Âú®table‰∏≠ËÆæÁΩÆËøôÊù°ËΩ¨Ë¥¶Ê∂àÊÅØÁöÑÁä∂ÊÄÅ„ÄÇ ËøôÊ†∑ËÄ¶ÂêàÁöÑÊñπÂºèÔºå‰ªéÊû∂ÊûÑ‰∏äÊù•ÁúãÔºåÂ∞±ÊúâÁÇπ‰∏çÂ§™‰ºòÈõÖÔºåËÄå‰∏îÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇËØ¥ÔºåÊ∂àÊÅØÁöÑÂ≠òÂÇ®ÂÆûË¥®‰∏äÊòØÂú®AÈì∂Ë°åÁ≥ªÁªü‰∏≠ÁöÑÔºåÂ¶ÇÊûúAÈì∂Ë°åÁ≥ªÁªüÂá∫‰∫ÜÈóÆÈ¢òÔºåÂ∞ÜÂØºËá¥Êó†Ê≥ïËΩ¨Ë¥¶„ÄÇÂ¶ÇÊûúËß£ËÄ¶ÔºåÂ∞ÜÊ∂àÊÅØÁã¨Á´ãÂá∫Êù•Âë¢Ôºü Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÊ∂àÊÅØÊï∞ÊçÆÁã¨Á´ãÂ≠òÂÇ®Ôºå‰∏öÂä°ÂíåÊ∂àÊÅØËß£ËÄ¶ÔºåÂÆûË¥®‰∏äÊ∂àÊÅØÁöÑÂèëÈÄÅÊúâ2Ê¨°Ôºå‰∏ÄÊù°ÊòØËΩ¨Ë¥¶Ê∂àÊÅØÔºåÂè¶‰∏ÄÊù°ÊòØÁ°ÆËÆ§Ê∂àÊÅØ„ÄÇ Âà∞ËøôÈáåÔºåÊàë‰ª¨ÂÖàÊù•ÁúãÁúãÂü∫‰∫éRocketMQÁöÑ‰ª£Á†ÅÔºö Áîü‰∫ßËÄÖËøôÈáåÁî®Âà∞ÊòØÔºöTransactionMQProducer„ÄÇ ËøôÈáåÊ∂âÂèäÂà∞2‰∏™ËßíËâ≤ÔºöÊú¨Âú∞‰∫ãÂä°ÊâßË°åÂô®Ôºà‰ª£Á†Å‰∏≠ÁöÑTransactionExecuterImplÔºâ„ÄÅÊúçÂä°Âô®ÂõûÊü•ÂÆ¢Êà∑Á´ØListenerÔºà‰ª£Á†Å‰∏≠ÁöÑTransactionCheckListenerÔºâ„ÄÇ Â¶ÇÊûú‰∫ãÂä°Ê∂àÊÅØÂèëÈÄÅÂà∞MQ‰∏äÂêéÔºå‰ºöÂõûË∞É Êú¨Âú∞‰∫ãÂä°ÊâßË°åÂô®Ôºõ‰ΩÜÊòØÊ≠§Êó∂‰∫ãÂä°Ê∂àÊÅØÊòØprepareÁä∂ÊÄÅÔºåÂØπÊ∂àË¥πËÄÖËøò‰∏çÂèØËßÅÔºåÈúÄË¶Å Êú¨Âú∞‰∫ãÂä°ÊâßË°åÂô® ËøîÂõûRMQ‰∏Ä‰∏™Á°ÆËÆ§Ê∂àÊÅØ„ÄÇ ‰∫ãÂä°Ê∂àÊÅØÊòØÂê¶ÂØπÊ∂àË¥πËÄÖÂèØËßÅÔºåÂÆåÂÖ®Áî±‰∫ãÂä°ËøîÂõûÁªôRMQÁöÑÁä∂ÊÄÅÁ†ÅÂÜ≥ÂÆöÔºàÁä∂ÊÄÅÁ†ÅÁöÑÊú¨Ë¥®‰πüÊòØ‰∏ÄÊù°Ê∂àÊÅØÔºâ„ÄÇ Áîü‰∫ßËÄÖÂèëÈÄÅ‰∫Ü2Êù°Ê∂àÊÅØÁªôRMQÔºåÊúâ‰∏ÄÊù°Êú¨Âú∞‰∫ãÂä°ÊâßË°åÊàêÂäüÔºåÊúâ‰∏ÄÊù°Êú¨Âú∞‰∫ãÂä°ÊâßË°åÂ§±Ë¥•„ÄÇ 2Êù°‰∏öÂä°Ê∂àÊÅØ + 2Êù°Á°ÆËÆ§Ê∂àÊÅØ Âõ†Ê≠§ÊòØ4Êù°Ôºõ Ê≥®ÊÑèÔºåÂà∞Ê∂àË¥πËÄÖÂè™Ê∂àË¥π‰∫Ü‰∏ÄÊù°Êï∞ÊçÆÔºåÂ∞±ÊòØÂè™ÊúâÂëäËØâRMQÊú¨Âú∞‰∫ãÂä°ÊâßË°åÊàêÂäüÁöÑÈÇ£Êù°Ê∂àÊÅØÊâç‰ºöË¢´Ê∂àË¥πÔºÅÂõ†Ê≠§ÊòØ1Êù°ÔºÅ ‰ΩÜÊòØÔºåÊ≥®ÊÑèÂà∞Êú¨Âú∞‰∫ãÂä°ÊâßË°åÂ§±Ë¥•ÁöÑÊ∂àÊÅØÔºåRMQÂπ∂Ê≤°Êúâcheck listenerÔºüËøôÊòØ‰∏∫‰ªÄ‰πàÂë¢ÔºüÂõ†‰∏∫RMQÂú®3.0.8ÁöÑÊó∂ÂÄôËøòÊòØÊîØÊåÅcheck listenerÂõûÊü•Êú∫Âà∂ÁöÑÔºå‰ΩÜÊòØÂà∞‰∫Ü3.2.6ÁöÑÊó∂ÂÄôÂ∞Ü‰∫ãÂä°ÂõûÊü•Êú∫Âà∂‚ÄúÈòâÂâ≤‚Äù‰∫ÜÔºÅ ÈÇ£‰πà3.0.8ÁöÑÊó∂ÂÄôÔºåRMQÊòØÊÄé‰πàÂÅö‰∫ãÂä°ÂõûÊü•ÁöÑÂë¢ÔºüÁúã‰∏ÄÁúãÊ∫êÁ†ÅÔºå‰Ω†‰ºöÁü•ÈÅìÔºåÂÖ∂ÂÆû‰∫ãÂä°Ê∂àÊÅØÂºÄÂßãÊòØprepareÁä∂ÊÄÅÔºåÁÑ∂ÂêéRMQ‰ºöÂ∞ÜÂÖ∂ÊåÅ‰πÖÂåñÂà∞MySQLÂΩì‰∏≠ÔºåÁÑ∂ÂêéÂ¶ÇÊûúÊî∂Âà∞Á°ÆËÆ§Ê∂àÊÅØÔºåÂ∞±Âà†Èô§ÊéâËøôÊù°prepareÊ∂àÊÅØÔºåÂ¶ÇÊûúËøüËøüÊî∂‰∏çÂà∞Á°ÆËÆ§Ê∂àÊÅØÔºåÈÇ£‰πàRMQ‰ºöÂÆöÊó∂ÁöÑÊâ´ÊèèprepareÊ∂àÊÅØÔºåÂèëÈÄÅÁªôproduce groupËøõË°åÂõûÊü•Á°ÆËÆ§ÔºÅ Âà∞ËøôÈáåÔºåÈóÆÈ¢òÊù•‰∫ÜÔºåË¶ÅÁü•ÈÅì3.2.6ÁâàÊú¨ÔºåÊ≤°ÊúâÂõûÊü•Êú∫Âà∂‰∫ÜÔºå‰ºöÂ≠òÂú®ÈóÆÈ¢ò‰πàÔºü ÂΩìÁÑ∂‰ºöÂ≠òÂú®ÈóÆÈ¢òÔºÅÂÅáËÆæÔºåÊàë‰ª¨ÂèëÈÄÅ‰∏ÄÊù°ËΩ¨Ë¥¶‰∫ãÂä°Ê∂àÊÅØÁªôRMQÔºåÊàêÂäüÂêéÂõûË∞ÉÊú¨Âú∞‰∫ãÂä°ÔºåDBÂáèÊìç‰ΩúÊàêÂäüÔºåÂàöÂáÜÂ§áÁªôRMQ‰∏Ä‰∏™Á°ÆËÆ§Ê∂àÊÅØÔºåÊ≠§Êó∂Á™ÅÁÑ∂Êñ≠ÁîµÔºåÊàñËÄÖÁΩëÁªúÊäñÂä®Ôºå‰ΩøÂæóËøôÊù°Á°ÆËÆ§Ê∂àÊÅØÊ≤°ÊúâÂèëÈÄÅÂá∫Âéª„ÄÇÊ≠§Êó∂RMQ‰∏≠ÁöÑÈÇ£Êù°ËΩ¨Ë¥¶‰∫ãÂä°Ê∂àÊÅØÔºåÂßãÁªàÂ§Ñ‰∫éprepareÁä∂ÊÄÅÔºåÊ∂àË¥πËÄÖËØªÂèñ‰∏çÂà∞Ôºå‰ΩÜÊòØÂç¥Â∑≤ÁªèÂÆåÊàê‰∏ÄÊñπÁöÑË¥¶Êà∑ËµÑÈáëÂèòÂä®ÔºÅÔºÅÔºÅ Êó¢ÁÑ∂ÔºåRMQ3.2.6ÁâàÊú¨‰∏ç‰∏∫Êàë‰ª¨ËøõË°åÂõûÊü•ÔºåÈÇ£‰πàÂè™ËÉΩÁî±Êàë‰ª¨Ëá™Â∑±ÂÆåÊàê‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>mq</category>
      </categories>
      <tags>
        <tag>mq</tag>
        <tag>rocketmq</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RocketMQÂÆûÊàòÔºà‰∫åÔºâ]]></title>
    <url>%2Fmq%2Fmq%2Frocketmq%2F2%2F</url>
    <content type="text"><![CDATA[Quick StartÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁîü‰∫ßËÄÖ„ÄÅÊ∂àË¥πËÄÖÔºåÂ∏¶Â§ßÂÆ∂Âø´ÈÄü‰ΩìÈ™åRocketMQ~ MavenÈÖçÁΩÆÔºö Áîü‰∫ßËÄÖÔºö Ê∂àË¥πËÄÖÔºö Êó†ËÆ∫Áîü‰∫ßËÄÖ„ÄÅÊ∂àË¥πËÄÖÈÉΩÂøÖÈ°ªÁªôÂá∫GroupNameÔºåËÄå‰∏îÂÖ∑ÊúâÂîØ‰∏ÄÊÄßÔºÅÁîü‰∫ßÂà∞Âì™‰∏™TopicÁöÑÂì™‰∏™Tag‰∏ãÔºåÊ∂àË¥πËÄÖ‰πüÊòØ‰ªéTopicÁöÑÂì™‰∏™TagËøõË°åÊ∂àË¥πÔºåÂèØËßÅËøô‰∏™TagÊúâÁÇπÁ±ª‰ºº‰∫éJMS SelectorÊú∫Âà∂ÔºåÂç≥ÂÆûÁé∞Ê∂àÊÅØÁöÑËøáÊª§„ÄÇÁîü‰∫ßËÄÖ„ÄÅÊ∂àË¥πËÄÖÈúÄË¶ÅËÆæÁΩÆNameServerÂú∞ÂùÄ„ÄÇËøôÈáåÔºåÈááÁî®ÁöÑÊòØConsumer PushÁöÑÊñπÂºèÔºåÂç≥ËÆæÁΩÆListenerÊú∫Âà∂ÂõûË∞ÉÔºåÁõ∏ÂΩì‰∫éÂºÄÂêØ‰∫Ü‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ‰ª•Âêé‰∏∫Â§ßÂÆ∂‰ªãÁªçConsumer PullÁöÑÊñπÂºè„ÄÇ Êàë‰ª¨Áúã‰∏Ä‰∏ãËøêË°åÁªìÊûúÔºö ‰ªîÁªÜÁúãÁúãÁîü‰∫ßËÄÖÁªìÊûúËæìÂá∫Ôºå‰Ω†‰ºöÂèëÁé∞ÔºåÊúâÁöÑÊ∂àÊÅØÂèëÂæÄbroker-aÔºåÊúâÁöÑÂú®broker-b‰∏äÔºåËá™Âä®ÂÆûÁé∞‰∫ÜÊ∂àÊÅØÁöÑË¥üËΩΩÂùáË°°ÔºÅ ËøôÈáåÊ∂àË¥πÊ∂àÊÅØÊòØÊ≤°Êúâ‰ªÄ‰πàÈ°∫Â∫èÁöÑÔºå‰ª•ÂêéÊàë‰ª¨Âú®Êù•Ë∞àÊ∂àÊÅØÁöÑÈ°∫Â∫èÊÄß„ÄÇ Âú®Â§öMasterÊ®°Âºè‰∏≠ÔºåÂ¶ÇÊûúÊüê‰∏™MasterËøõÁ®ãÊåÇ‰∫ÜÔºåÊòæÁÑ∂ËøôÂè∞brokerÂ∞Ü‰∏çÂèØÁî®Ôºå‰∏äÈù¢ÁöÑÊ∂àÊÅØ‰πüÂ∞ÜÊó†Ê≥ïÊ∂àË¥πÔºåË¶ÅÁü•ÈÅìÂºÄÊ∫êÁâàÊú¨ÁöÑRocketMQÊòØÊ≤°ÊúâÊèê‰æõÂàáÊç¢Á®ãÂ∫èÔºåÊù•Ëá™Âä®ÊÅ¢Â§çÊïÖÈöúÁöÑÔºåÂõ†Ê≠§Âú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÔºåÊàë‰ª¨‰∏ÄËà¨Êèê‰æõ‰∏Ä‰∏™ÁõëÂê¨Á®ãÂ∫èÔºåÁî®‰∫éÁõëÊéßMasterÁöÑÁä∂ÊÄÅ„ÄÇ Âú®ActiveMQ‰∏≠ÔºåÁîü‰∫ßÊ∂àÊÅØÁöÑÊó∂ÂÄô‰ºöÊèê‰æõÊòØÂê¶ÊåÅ‰πÖÂåñÁöÑÈÄâÊã©Ôºå‰ΩÜÊòØÂØπ‰∫éRocketMQËÄåË®ÄÔºåÊ∂àÊÅØÊòØ‰∏ÄÂÆö‰ºöË¢´ÊåÅ‰πÖÂåñÁöÑÔºÅ ‰∏äÈù¢ÁöÑÊ∂àË¥πËÄÖÈááÁî®ÁöÑÊòØPush ConsumerÁöÑÊñπÂºèÔºåÈÇ£‰πàÁõëÂê¨ÁöÑListener‰∏≠ÁöÑÊ∂àÊÅØListÂà∞Â∫ïÊòØÂ§öÂ∞ëÊù°Âë¢ÔºüËôΩÁÑ∂Êèê‰æõ‰∫ÜAPIÔºåÂ¶Çconsumer.setConsumeMessageBatchMaxSize(10)ÔºåÂÆûÈôÖ‰∏äÂç≥‰ΩøËÆæÁΩÆ‰∫ÜÊâπÈáèÁöÑÊù°Êï∞Ôºå‰ΩÜÊòØÊ≥®ÊÑè‰∫ÜÔºåÊòØÊúÄÂ§ßÊòØ10ÔºåÂπ∂‰∏çÊÑèÂë≥ÁùÄÊØèÊ¨°batchÁöÑÈÉΩÊòØ10ÔºåÂè™ÊúâÂú®Ê∂àÊÅØÊúâÊå§ÂéãÁöÑÊÉÖÂÜµ‰∏ãÊâçÊúâÂèØËÉΩ„ÄÇËÄå‰∏îPush ConsumerÁöÑÊúÄ‰Ω≥ÂÆûË∑µÊñπÂºèÂ∞±ÊòØ‰∏ÄÊù°Êù°ÁöÑÊ∂àË¥πÔºåÂ¶ÇÊûúÈúÄË¶ÅbatchÔºåÂèØ‰ª•‰ΩøÁî®Pull Consumer„ÄÇ Âä°ÂøÖ‰øùËØÅÂÖàÂêØÂä®Ê∂àË¥πËÄÖËøõË°åTopicËÆ¢ÈòÖÔºåÁÑ∂ÂêéÂú®ÂêØÂä®Áîü‰∫ßËÄÖËøõË°åÁîü‰∫ßÔºàÂê¶ÂàôÊûÅÊúâÂèØËÉΩÂØºËá¥Ê∂àÊÅØÁöÑÈáçÂ§çÊ∂àË¥πÔºåÈáçÂ§çÊ∂àË¥πÔºåÈáçÂ§çÊ∂àË¥πÔºÅÈáçË¶ÅÁöÑ‰∫ãÊÉÖËØ¥‰∏âÈÅçÔºÅÂÖ≥‰∫éÊ∂àÊÅØÁöÑÈáçÂ§çÈóÆÈ¢òÂêéÁª≠ÁªôÂ§ßÂÆ∂‰ªãÁªç~Ôºâ„ÄÇËÄå‰∏îÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÔºåÊúâÊó∂ÂÄô‰∏ç‰ºöÊâπÈáèÁöÑÂ§ÑÁêÜÊ∂àÊÅØÔºåËÄåÊòØÂéüÂ≠êÊÄßÁöÑÔºåÂçïÁ∫øÁ®ãÁöÑÂéª‰∏ÄÊù°‰∏ÄÊù°ÁöÑÂ§ÑÁêÜÊ∂àÊÅØÔºåËøôÊ†∑Â∞±ÊòØÂÆûÊó∂ÁöÑÂú®Â§ÑÁêÜÊ∂àÊÅØ„ÄÇÔºàÊâπÈáèÁöÑÂ§ÑÁêÜÊµ∑ÈáèÁöÑÊ∂àÊÅØÔºåÂèØ‰ª•ËÄÉËôëKafkaÔºâ ÂàùÊ≠•‰∫ÜËß£Ê∂àÊÅØÂ§±Ë¥•ÈáçËØïÊú∫Âà∂Ê∂àÊÅØÂ§±Ë¥•ÔºåÊó†ÈùûÊ∂âÂèäÂà∞2Á´ØÔºö‰ªéÁîü‰∫ßËÄÖÁ´ØÂèëÂæÄMQÁöÑÂ§±Ë¥•ÔºõÊ∂àË¥πËÄÖÁ´Ø‰ªéMQÊ∂àË¥πÊ∂àÊÅØÁöÑÂ§±Ë¥•Ôºõ Áîü‰∫ßËÄÖÁ´ØÁöÑÂ§±Ë¥•ÈáçËØï Áîü‰∫ßËÄÖÁ´ØÁöÑÊ∂àÊÅØÂ§±Ë¥•ÔºöÊØîÂ¶ÇÁΩëÁªúÊäñÂä®ÂØºËá¥Áîü‰∫ßËÄÖÂèëÈÄÅÊ∂àÊÅØÂà∞MQÂ§±Ë¥•„ÄÇ ‰∏äÂõæ‰ª£Á†ÅÁ§∫‰æãÁöÑÂ§ÑÁêÜÊâãÊÆµÊòØÔºöÂ¶ÇÊûúËØ•Êù°Ê∂àÊÅØÂú®1SÂÜÖÊ≤°ÊúâÂèëÈÄÅÊàêÂäüÔºåÈÇ£‰πàÈáçËØï3Ê¨°„ÄÇ Ê∂àË¥πËÄÖÁ´ØÁöÑÂ§±Ë¥•ÈáçËØï Ê∂àË¥πËÄÖÁ´ØÁöÑÂ§±Ë¥•ÔºåÂàÜ‰∏∫2ÁßçÊÉÖÂÜµÔºå‰∏Ä‰∏™ÊòØtimeoutÔºå‰∏Ä‰∏™ÊòØexceptiontimeoutÔºåÊØîÂ¶ÇÁî±‰∫éÁΩëÁªúÂéüÂõ†ÂØºËá¥Ê∂àÊÅØÂéãÊ†πÂ∞±Ê≤°Êúâ‰ªéMQÂà∞Ê∂àË¥πËÄÖ‰∏äÔºåÂú®RocketMQÂÜÖÈÉ®‰ºö‰∏çÊñ≠ÁöÑÂ∞ùËØïÂèëÈÄÅËøôÊù°Ê∂àÊÅØÔºåÁõ¥Ëá≥ÂèëÈÄÅÊàêÂäü‰∏∫Ê≠¢ÔºÅÔºàÊØîÂ¶ÇÈõÜÁæ§‰∏≠‰∏Ä‰∏™brokerÂ§±Ë¥•ÔºåÂ∞±Â∞ùËØïÂè¶‰∏Ä‰∏™brokerÔºâexceptionÔºåÊ∂àÊÅØÊ≠£Â∏∏ÁöÑÂà∞‰∫ÜÊ∂àË¥πËÄÖÔºåÁªìÊûúÊ∂àË¥πËÄÖÂèëÁîüÂºÇÂ∏∏ÔºåÂ§ÑÁêÜÂ§±Ë¥•‰∫Ü„ÄÇËøôÈáåÊ∂âÂèäÂà∞‰∏Ä‰∫õÈóÆÈ¢òÔºåÈúÄË¶ÅÊàë‰ª¨ÊÄùËÄÉ‰∏ãÔºåÊØîÂ¶ÇÔºåÊ∂àË¥πËÄÖÊ∂àË¥πÊ∂àÊÅØÁöÑÁä∂ÊÄÅÊúâÂì™‰∫õÂÆö‰πâÔºüÂ¶ÇÊûúÂ§±Ë¥•ÔºåMQÂ∞ÜÈááÂèñ‰ªÄ‰πàÁ≠ñÁï•ËøõË°åÈáçËØïÔºüÂÅáËÆæ‰∏ÄÊ¨°ÊÄßÊâπÈáèPUSH‰∫Ü10Êù°ÔºåÂÖ∂‰∏≠ÊüêÊù°Êï∞ÊçÆÊ∂àË¥πÂºÇÂ∏∏ÔºåÈÇ£‰πàÊ∂àÊÅØÈáçËØïÊòØ10Êù°Âë¢ÔºåËøòÊòØ1Êù°Âë¢ÔºüËÄå‰∏îÂú®ÈáçËØïÁöÑËøáÁ®ã‰∏≠ÔºåÈúÄË¶Å‰øùËØÅ‰∏çÈáçÂ§çÊ∂àË¥πÂêóÔºü Ê∂àÊÅØÊ∂àË¥πÁöÑÁä∂ÊÄÅÔºåÊúâ2ÁßçÔºå‰∏Ä‰∏™ÊòØÊàêÂäüÔºàCONSUME_SUCCESSÔºâÔºå‰∏Ä‰∏™ÊòØÂ§±Ë¥•&amp;Á®çÂêéÈáçËØïÔºàRECONSUME_LATERÔºâ Âú®ÂêØÂä®brokerÁöÑËøáÁ®ã‰∏≠ÔºåÂèØ‰ª•ËßÇÂØü‰∏ãÊó•ÂøóÔºå‰Ω†‰ºöÂèëÁé∞RECONSUME_LATERÁöÑÁ≠ñÁï•„ÄÇ Â¶ÇÊûúÊ∂àË¥πÂ§±Ë¥•ÔºåÈÇ£‰πà1SÂêéÂÜçÊ¨°Ê∂àË¥πÔºåÂ¶ÇÊûúÂ§±Ë¥•ÔºåÈÇ£‰πà5SÂêéÔºåÂÜçÊ¨°Ê∂àË¥πÔºå‚Ä¶‚Ä¶Áõ¥Ëá≥2HÂêéÂ¶ÇÊûúÊ∂àË¥πËøòÂ§±Ë¥•ÔºåÈÇ£‰πàËØ•Êù°Ê∂àÊÅØÂ∞±‰ºöÁªàÊ≠¢ÂèëÈÄÅÁªôÊ∂àË¥πËÄÖ‰∫ÜÔºÅ RocketMQ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜËøô‰πàÂ§öÊ¨°Êï∞ÁöÑÂ§±Ë¥•ÈáçËØïÔºå‰ΩÜÊòØÂú®ÂÆûÈôÖ‰∏≠‰πüËÆ∏Êàë‰ª¨Âπ∂‰∏çÈúÄË¶ÅËøô‰πàÂ§öÈáçËØïÔºåÊØîÂ¶ÇÈáçËØï3Ê¨°ÔºåËøòÊ≤°ÊúâÊàêÂäüÔºåÊàë‰ª¨Â∏åÊúõÊääËøôÊù°Ê∂àÊÅØÂ≠òÂÇ®Ëµ∑Êù•Âπ∂ÈááÁî®Âè¶‰∏ÄÁßçÊñπÂºèÂ§ÑÁêÜÔºåËÄå‰∏îÂ∏åÊúõRocketMQ‰∏çË¶ÅÂú®ÈáçËØïÂë¢ÔºåÂõ†‰∏∫ÈáçËØïËß£ÂÜ≥‰∏ç‰∫ÜÈóÆÈ¢ò‰∫ÜÔºÅËøôËØ•Â¶Ç‰ΩïÂÅöÂë¢Ôºü Êàë‰ª¨ÂÖàÊù•Áúã‰∏Ä‰∏ã‰∏ÄÊù°Ê∂àÊÅØMessageExtÂØπË±°ÁöÑËæìÂá∫Ôºö MessageExt [queueId=0, storeSize=137, queueOffset=0, sysFlag=0, bornTimestamp=1492213846916, bornHost=/192.168.99.219:50478, storeTimestamp=1492213846981, storeHost=/192.168.99.121:10911, msgId=C0A8637900002A9F0000000000000000, commitLogOffset=0, bodyCRC=613185359, reconsumeTimes=0, preparedTransactionOffset=0, toString()=Message [topic=TopicTest2, flag=0, properties={TAGS=TagA, WAIT=true, MAX_OFFSET=3, MIN_OFFSET=0}, body=16]] Ê≥®ÊÑèÂà∞reconsumeTimesÂ±ûÊÄßÔºåËøô‰∏™Â±ûÊÄßÂ∞±‰ª£Ë°®Ê∂àÊÅØÈáçËØïÁöÑÊ¨°Êï∞ÔºÅÊù•Áúã‰∏ÄÊÆµ‰ª£Á†ÅÔºö Ê≥®ÊÑè‰∫ÜÔºåÂØπ‰∫éÊ∂àË¥πÊ∂àÊÅØËÄåË®ÄÔºåÂ≠òÂú®2ÁßçÊåáÂÆöÁöÑÁä∂ÊÄÅÔºàÊàêÂäü OR Â§±Ë¥•ÈáçËØïÔºâÔºåÂ¶ÇÊûú‰∏ÄÊù°Ê∂àÊÅØÂú®Ê∂àË¥πÁ´ØÂ§ÑÁêÜÊ≤°ÊúâËøîÂõûËøô2‰∏™Áä∂ÊÄÅÔºåÈÇ£‰πàÁõ∏ÂΩì‰∫éËøôÊù°Ê∂àÊÅØÊ≤°ÊúâËææÂà∞Ê∂àË¥πËÄÖÔºåÂäøÂøÖ‰ºöÂÜçÊ¨°ÂèëÈÄÅÁªôÊ∂àË¥πËÄÖÔºÅ‰πüÂç≥ÊòØÊ∂àÊÅØÁöÑÂ§ÑÁêÜÂøÖÈ°ªÊúâËøîÂõûÂÄºÔºåÂê¶ÂàôÂ∞±ËøõË°åÈáçÂèë„ÄÇ Â§©ÁÑ∂ÁöÑÊ∂àÊÅØË¥üËΩΩÂùáË°°ÂèäÈ´òÊïàÁöÑÊ∞¥Âπ≥Êâ©Â±ïÊú∫Âà∂ ÂØπ‰∫éRocketMQËÄåË®ÄÔºåÈÄöËøáConsumeGroupÁöÑÊú∫Âà∂ÔºåÂÆûÁé∞‰∫ÜÂ§©ÁÑ∂ÁöÑÊ∂àÊÅØË¥üËΩΩÂùáË°°ÔºÅÈÄö‰øóÁÇπÊù•ËØ¥ÔºåRocketMQ‰∏≠ÁöÑÊ∂àÊÅØÈÄöËøáConsumeGroupÂÆûÁé∞‰∫ÜÂ∞ÜÊ∂àÊÅØÂàÜÂèëÂà∞C1/C2/C3/‚Ä¶‚Ä¶ÁöÑÊú∫Âà∂ÔºåËøôÊÑèÂë≥ÁùÄÊàë‰ª¨Â∞ÜÈùûÂ∏∏Êñπ‰æøÁöÑÈÄöËøáÂä†Êú∫Âô®Êù•ÂÆûÁé∞Ê∞¥Âπ≥Êâ©Â±ïÔºÅ Êàë‰ª¨ËÄÉËôë‰∏Ä‰∏ãËøôÁßçÊÉÖÂÜµÔºöÊØîÂ¶ÇC2ÂèëÁîü‰∫ÜÈáçÂêØÔºå‰∏ÄÊù°Ê∂àÊÅØÂèëÂæÄC3ËøõË°åÊ∂àË¥πÔºå‰ΩÜÊòØËøôÊù°Ê∂àÊÅØÁöÑÂ§ÑÁêÜÈúÄË¶Å0.1SÔºåËÄåÊ≠§Êó∂C2ÂàöÂ•ΩÂÆåÊàêÈáçÂêØÔºåÈÇ£‰πàC2ÊòØÂê¶ÂèØËÉΩ‰ºöÊî∂Âà∞ËøôÊù°Ê∂àÊÅØÂë¢ÔºüÁ≠îÊ°àÊòØËÇØÂÆöÁöÑÔºå‰πüÂ∞±ÊòØconsume brokerÁöÑÈáçÂêØÔºåÊàñËÄÖÊ∞¥Âπ≥Êâ©ÂÆπÔºåÊàñËÄÖ‰∏çÈÅµÂÆàÂÖàËÆ¢ÈòÖÂêéÁîü‰∫ßÊ∂àÊÅØÔºåÈÉΩÂèØËÉΩÂØºËá¥Ê∂àÊÅØÁöÑÈáçÂ§çÊ∂àË¥πÔºÅÂÖ≥‰∫éÂéªÈáçÁöÑËØùÈ¢ò‰ºöÂú®ÂêéÁª≠‰∏≠‰∫à‰ª•‰ªãÁªçÔºÅ Ëá≥‰∫éÊ∂àÊÅØÂàÜÂèëÂà∞C1/C2/C3ÔºåÂÖ∂ÂÆû‰πüÊòØÂèØ‰ª•ËÆæÁΩÆÁ≠ñÁï•ÁöÑ„ÄÇ ÈõÜÁæ§Ê∂àË¥π AND ÂπøÊí≠Ê∂àË¥π RocketMQÁöÑÊ∂àË¥πÊñπÂºèÊúâ2ÁßçÔºåÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂ∞±ÊòØÈõÜÁæ§Ê∂àË¥πÔºå‰πüÂ∞±ÊòØ‰∏äÈù¢ÊèêÂèäÁöÑÊ∂àÊÅØÁöÑË¥üËΩΩÂùáË°°Ê∂àË¥π„ÄÇÂè¶‰∏ÄÁßçÊ∂àË¥πÊ®°ÂºèÔºåÊòØÂπøÊí≠Ê∂àË¥π„ÄÇÂπøÊí≠Ê∂àË¥πÔºåÁ±ª‰ºº‰∫éActiveMQ‰∏≠ÁöÑÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÔºåÊ∂àÊÅØ‰ºöÂèëÁªôConsume Group‰∏≠ÁöÑÊØè‰∏Ä‰∏™Ê∂àË¥πËÄÖËøõË°åÊ∂àË¥π„ÄÇ]]></content>
      <categories>
        <category>mq</category>
      </categories>
      <tags>
        <tag>mq</tag>
        <tag>rocketmq</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RocketMQÂÆûÊàòÔºà‰∏ÄÔºâ]]></title>
    <url>%2Fmq%2Fmq%2Frocketmq%2F1%2F</url>
    <content type="text"><![CDATA[ÈòøÈáåÂ∑¥Â∑¥Êúâ2Â§ßÊ†∏ÂøÉÁöÑÂàÜÂ∏ÉÂºèÊäÄÊúØÔºå‰∏Ä‰∏™ÊòØOceanBaseÔºåÂè¶‰∏Ä‰∏™Â∞±ÊòØRocketMQ„ÄÇÂú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠Â∑≤ÁªèÈ¢ÜÊïôËøáRocketMQÁöÑÂº∫Â§ßÔºåÊú¨‰∫∫ËÆ°ÂàíÂÜô‰∏Ä‰∏™RocketMQÂÆûÊàòÁ≥ªÂàóÔºåÂ∞ÜÊ∂µÁõñRocketMQÁöÑÁÆÄ‰ªãÔºåÁéØÂ¢ÉÊê≠Âª∫ÔºåÂàùÊ≠•‰ΩøÁî®„ÄÅAPIËØ¶Ëß£„ÄÅÊû∂ÊûÑÂàÜÊûê„ÄÅÁÆ°ÁêÜÂëòÈõÜÁæ§Êìç‰ΩúÁ≠âÁü•ËØÜ„ÄÇ What is RocketMQ?RocketMQ‰Ωú‰∏∫‰∏ÄÊ¨æÂàÜÂ∏ÉÂºèÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºàÈòøÈáåÁöÑËØ¥Ê≥ïÊòØ‰∏çÈÅµÂæ™‰ªª‰ΩïËßÑËåÉÁöÑÔºåÊâÄ‰ª•‰∏çËÉΩÂÆåÂÖ®Áî®JMSÁöÑÈÇ£‰∏ÄÂ•ó‰∏úË•øÊù•ÁúãÂÆÉÔºâÔºåÁªèÂéÜ‰∫ÜMetaq1.x„ÄÅMetaq2.xÁöÑÂèëÂ±ïÂíåÊ∑òÂÆùÂèåÂçÅ‰∏ÄÁöÑÊ¥óÁ§ºÔºåÂú®ÂäüËÉΩÂíåÊÄßËÉΩ‰∏äËøúË∂ÖActiveMQ„ÄÇ Ë¶ÅÁü•ÈÅìRocketMQÂéüÁîüÂ∞±ÊòØÊîØÊåÅÂàÜÂ∏ÉÂºèÁöÑÔºåËÄåActiveMQÂéüÁîüÂ≠òÂú®ÂçïÁÇπÊÄß„ÄÇ RocketMQÂèØ‰ª•‰øùËØÅ‰∏•Ê†ºÁöÑÊ∂àÊÅØÈ°∫Â∫èÔºåËÄåActiveMQÊó†Ê≥ï‰øùËØÅÔºÅ RocketMQÊèê‰æõ‰∫øÁ∫ßÊ∂àÊÅØÁöÑÂ†ÜÁßØËÉΩÂäõÔºåËøô‰∏çÊòØÈáçÁÇπÔºåÈáçÁÇπÊòØÂ†ÜÁßØ‰∫Ü‰∫øÁ∫ßÁöÑÊ∂àÊÅØÂêéÔºå‰æùÁÑ∂‰øùÊåÅÂÜôÂÖ•‰ΩéÂª∂ËøüÔºÅ ‰∏∞ÂØåÁöÑÊ∂àÊÅØÊãâÂèñÊ®°ÂºèÔºàPush or PullÔºâPushÂ•ΩÁêÜËß£ÔºåÊØîÂ¶ÇÂú®Ê∂àË¥πËÄÖÁ´ØËÆæÁΩÆListenerÂõûË∞ÉÔºõËÄåPullÔºåÊéßÂà∂ÊùÉÂú®‰∫éÂ∫îÁî®ÔºåÂç≥Â∫îÁî®ÈúÄË¶Å‰∏ªÂä®ÁöÑË∞ÉÁî®ÊãâÊ∂àÊÅØÊñπÊ≥ï‰ªéBrokerËé∑ÂèñÊ∂àÊÅØÔºåËøôÈáåÈù¢Â≠òÂú®‰∏Ä‰∏™Ê∂àË¥π‰ΩçÁΩÆËÆ∞ÂΩïÁöÑÈóÆÈ¢òÔºàÂ¶ÇÊûú‰∏çËÆ∞ÂΩïÔºå‰ºöÂØºËá¥Ê∂àÊÅØÈáçÂ§çÊ∂àË¥πÔºâ„ÄÇ Âú®Metaq1.x/2.xÁöÑÁâàÊú¨‰∏≠ÔºåÂàÜÂ∏ÉÂºèÂçèË∞ÉÈááÁî®ÁöÑÊòØZookeeperÔºåËÄåRocketMQËá™Â∑±ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™NameServerÔºåÊõ¥Âä†ËΩªÈáèÁ∫ßÔºåÊÄßËÉΩÊõ¥Â•ΩÔºÅ Ê∂àÊÅØÂ§±Ë¥•ÈáçËØïÊú∫Âà∂„ÄÅÈ´òÊïàÁöÑËÆ¢ÈòÖËÄÖÊ∞¥Âπ≥Êâ©Â±ïËÉΩÂäõ„ÄÅÂº∫Â§ßÁöÑAPI„ÄÅ‰∫ãÂä°Êú∫Âà∂Á≠âÁ≠âÔºàÂêéÁª≠ËØ¶ÁªÜ‰ªãÁªçÔºâ ÂàùÊ≠•ÁêÜËß£Producer/Consumer GroupActiveMQ‰∏≠Âπ∂Ê≤°ÊúâGroupËøô‰∏™Ê¶ÇÂøµÔºåËÄåÂú®RocketMQ‰∏≠ÁêÜËß£GroupÁöÑÊú∫Âà∂ÂæàÈáçË¶Å„ÄÇ ÊÉ≥ËøáÊ≤°ÊúâÔºåÈÄöËøáGroupÊú∫Âà∂ÔºåËÆ©RocketMQÂ§©ÁÑ∂ÁöÑÊîØÊåÅÊ∂àÊÅØË¥üËΩΩÂùáË°°ÔºÅ ÊØîÂ¶ÇÊüê‰∏™TopicÊúâ9Êù°Ê∂àÊÅØÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Consumer GroupÊúâ3‰∏™ÂÆû‰æãÔºà3‰∏™ËøõÁ®ã OR 3Âè∞Êú∫Âô®ÔºâÔºåÈÇ£‰πàÊØè‰∏™ÂÆû‰æãÂ∞ÜÂùáÊëä3Êù°Ê∂àÊÅØÔºÅÔºàÊ≥®ÊÑèRocketMQÂè™Êúâ‰∏ÄÁßçÊ®°ÂºèÔºåÂç≥ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè„ÄÇÔºâ RocketMQÁöÑBrokerÈõÜÁæ§ÈÉ®ÁΩ≤Ê®°ÂºèËøòÊå∫Â§öÁöÑÔºåÊØîÂ¶ÇÂçïMasterÊ®°Âºè„ÄÅÂ§öMasterÊ®°Âºè„ÄÅÂ§öMasterÂ§öSlaveÊ®°ÂºèÔºàÂºÇÊ≠•Â§çÂà∂Ôºâ„ÄÅÂ§öMasterÂ§öSlaveÊ®°ÂºèÔºàÂêåÊ≠•ÂèåÂÜôÔºâÁ≠â„ÄÇÊòéÁ°Æ‰∏™Ê¶ÇÂøµÔºåRocketMQ Slave‰∏çÂèØ‰ª•ÂÜôÔºåÂèØ‰ª•ËØªÔºåÁ±ª‰ºº‰∫éMySQLÁöÑ‰∏ª‰ªéÊú∫Âà∂„ÄÇ ÂçïMasterÊ®°ÂºèÔºöÊó†ÈúÄÂ§öË®ÄÔºå‰∏ÄÊó¶Âçï‰∏™brokerÈáçÂêØÊàñÂÆïÊú∫Ôºå‰∏ÄÂàáÈÉΩÁªìÊùü‰∫ÜÔºÅÂæàÊòæÁÑ∂ÔºåÁ∫ø‰∏ä‰∏çÂèØ‰ª•‰ΩøÁî®„ÄÇ Â§öMasterÊ®°ÂºèÔºöÂÖ®ÊòØMasterÔºåÊ≤°ÊúâSlave„ÄÇÂΩìÁÑ∂Ôºå‰∏Ä‰∏™brokerÂÆïÊú∫‰∫ÜÔºåÂ∫îÁî®ÊòØÊó†ÂΩ±ÂìçÁöÑÔºåÁº∫ÁÇπÂú®‰∫éÂÆïÊú∫ÁöÑMaster‰∏äÊú™Ë¢´Ê∂àË¥πÁöÑÊ∂àÊÅØÂú®MasterÊ≤°ÊúâÊÅ¢Â§ç‰πãÂâç‰∏çÂèØ‰ª•ËÆ¢ÈòÖ„ÄÇ Â§öMasterÂ§öSlaveÊ®°ÂºèÔºàÂºÇÊ≠•Â§çÂà∂ÔºâÔºöÂ§öÂØπMaster-SlaveÔºåÈ´òÂèØÁî®ÔºÅÈááÁî®ÂºÇÊ≠•Â§çÂà∂ÁöÑÊñπÂºèÔºå‰∏ªÂ§á‰πãÈó¥Áü≠ÊöÇÂª∂ËøüÔºåMSÁ∫ßÂà´„ÄÇMasterÂÆïÊú∫ÔºåÊ∂àË¥πËÄÖÂèØ‰ª•‰ªéSlave‰∏äËøõË°åÊ∂àË¥πÔºå‰∏çÂèóÂΩ±ÂìçÔºå‰ΩÜÊòØMasterÁöÑÂÆïÊú∫Ôºå‰ºöÂØºËá¥‰∏¢Â§±ÊéâÊûÅÂ∞ëÈáèÁöÑÊ∂àÊÅØ„ÄÇ Â§öMasterÂ§öSlaveÊ®°ÂºèÔºàÂêåÊ≠•ÂèåÂÜôÔºâÔºöÂíå‰∏äÈù¢ÁöÑÂå∫Âà´ÁÇπÂú®‰∫éÈááÁî®ÁöÑÊòØÂêåÊ≠•ÊñπÂºèÔºå‰πüÂ∞±ÊòØÂú®Master/SlaveÈÉΩÂÜôÊàêÂäüÁöÑÂâçÊèê‰∏ãÔºåÂêëÂ∫îÁî®ËøîÂõûÊàêÂäüÔºåÂèØËßÅ‰∏çËÆ∫ÊòØÊï∞ÊçÆÔºåËøòÊòØÊúçÂä°ÈÉΩÊ≤°ÊúâÂçïÁÇπÔºåÈÉΩÈùûÂ∏∏ÂèØÈù†ÔºÅÁº∫ÁÇπÂú®‰∫éÂêåÊ≠•ÁöÑÊÄßËÉΩÊØîÂºÇÊ≠•Á®ç‰Ωé„ÄÇ ËøôÈáåÊàëÂ∞ÜÈááÁî®2‰∏™MasterÁöÑÊñπÂºèËøõË°åÊê≠Âª∫ÊºîÁ§∫Ôºå‰ºö‰∫ÜÂèåMasterÔºåÂÖ∂‰ªñÁöÑÂ∞ÜÂæàÁÆÄÂçï„ÄÇÔºàÂ§öMasterÂú®ÂÆûÈôÖ‰∏≠‰πüÊòØÈùûÂ∏∏Â∏∏Áî®ÁöÑÔºåÂ¶ÇÊûúÂπ∂ÂèëÈùûÂ∏∏Â§ßÔºåËÄÉËôëÂ§öMasterÂ§öSlaveÊ®°ÂºèÔºâ Âú®192.168.99.121/122Êú∫Âô®‰∏äÂêÑ‰∏Ä‰∏™NameServer„ÄÅMasterËøõÁ®ã„ÄÇ ÂÆû‰æã‰ª•192.168.99.121‰∏∫‰æãÔºö ‰øÆÊîπ/etc/hostsÊñá‰ª∂ Á°Æ‰øùÁõ∏‰∫í‰πãÈó¥ÂèØ‰ª•pingÈÄö Ëß£ÂéãÂπ∂ÂàõÂª∫Â≠òÂÇ®Ë∑ØÂæÑ123tar -xvf alibaba-rocketmq-3.2.6.tar.gzmkdir -p alibaba-rocketmq/store/&#123;commitlog,consumequeue,index&#125; ÈÖçÁΩÆÊñá‰ª∂ ‰∏äÈù¢Â∑≤ÁªèÂ∞ÜÂÆûÈôÖ‰∏≠Â∏∏Áî®ÁöÑÈÖçÁΩÆÈ°πÁªôÂá∫Êù•‰∫ÜÔºÅ ‰øÆÊîπÊó•ÂøóÈÖçÁΩÆÊñá‰ª∂ Ê≥®ÊÑèÂà∞logback.*.xmlÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºö ÂèØ‰ª•‰ΩøÁî®sedËøõË°åÊõøÊç¢Ôºö 1sed -i 's#$&#123;user.home&#125;#/software/alibaba-rocketmq#g' *.xml ‰øÆÊîπÂêØÂä®ËÑöÊú¨‰∏≠ÁöÑJVMÂèÇÊï∞ Ê≥®ÊÑèÔºåÂú®ËøôÈáåÊàëÂ∞ÜJVMÁöÑÂ†ÜÁöÑÂàùÂßãÂåñÂíåÊúÄÂ§ßÂ§ßÂ∞èÁªü‰∏ÄËÆæÁΩÆ‰∏∫1GÔºåÂπ∂Â∞ÜÊñ∞Áîü‰ª£Â§ßÂ∞èËÆæÁΩÆ‰∏∫512M„ÄÇ‰∏ªË¶ÅÊòØËÄÉËôëÂà∞ÊàëÁöÑËôöÊãüÊú∫ÂÜÖÂ≠òÔºåÂÆûÈôÖ‰∏äÂú®Á∫ø‰∏äÊòØÂèØ‰ª•Ëµ∞ÈªòËÆ§ÁöÑ4GÂ†ÜÂÜÖÂ≠òÁöÑ„ÄÇ Á¨¨ÂÖ≠Ê≠•ÔºåÂêØÂä®NameServer1nohup sh mqnamesrv &amp; ÂêØÂä®broker-X Ê≥®ÊÑèËßÇÂØüÊó•ÂøóÔºö RocketMQ ConsoleÊäärocketmq-console.warÈÉ®ÁΩ≤Âà∞Tomcat‰∏ãÂç≥ÂèØ„ÄÇ Âú®Ëß£ÂéãWARÂåÖÂêéÁöÑCLASS‰∏ãÊõ¥Êîπconfig.properties Ëøô‰∏™ÁÆ°ÊéßÂè∞ÂÆûÈôÖ‰∏äËøòÊòØÊØîËæÉÁÆÄÈôãÁöÑÔºåÊàë‰ª¨‰ΩøÁî®ÊØîËæÉÂ§öÁöÑÊòØmqadminÊìç‰ΩúÂëΩ‰ª§ÔºåÂêéÁª≠‰ºö‰ªãÁªç„ÄÇ]]></content>
      <categories>
        <category>mq</category>
      </categories>
      <tags>
        <tag>mq</tag>
        <tag>rocketmq</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FeignÁúüÊ≠£Ê≠£Á°ÆÁöÑ‰ΩøÁî®ÊñπÊ≥ï]]></title>
    <url>%2Fjava%2Fjava%2Ffeign%2F1%2F</url>
    <content type="text"><![CDATA[FeignÊòØspring cloud‰∏≠ÊúçÂä°Ê∂àË¥πÁ´ØÁöÑË∞ÉÁî®Ê°ÜÊû∂,ÈÄöÂ∏∏‰∏éribbon,hystrixÁ≠âÁªÑÂêà‰ΩøÁî®„ÄÇ ‰ΩÜÊòØÂú®Êüê‰∫õÈ°πÁõÆ‰∏≠ÔºåÁî±‰∫éÈÅóÁïôÂéüÂõ†ÔºåÊï¥‰∏™Á≥ªÁªüÂπ∂‰∏çÊòØspring cloudÈ°πÁõÆÔºåÁîöËá≥‰∏çÊòØspringÈ°πÁõÆÔºåËÄå‰ΩøÁî®ËÄÖÂÖ≥Ê≥®ÁöÑÈáçÁÇπ‰ªÖ‰ªÖÊòØÁÆÄÂåñhttpË∞ÉÁî®‰ª£Á†ÅÁöÑÁºñÂÜô„ÄÇ Â¶ÇÊûúÈááÁî®httpclientÊàñËÄÖokhttpËøôÊ†∑Áõ∏ÂØπËæÉÈáçÁöÑÊ°ÜÊû∂ÔºåÂØπÂàùÂ≠¶ËÄÖÊù•ËØ¥ÁºñÁ†ÅÈáè‰∏éÂ≠¶‰π†Êõ≤Á∫øÈÉΩ‰ºöÊòØ‰∏Ä‰∏™ÊåëÊàòÔºåËÄå‰ΩøÁî®spring‰∏≠RestTemplateÔºåÂèàÊ≤°ÊúâÈÖçÁΩÆÂåñÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÁî±Ê≠§ÊÉ≥Âà∞ÊòØÂê¶ÂèØ‰ª•ËÑ±Á¶ªspring cloudÔºåÁã¨Á´ã‰ΩøÁî®Feign„ÄÇ maven‰æùËµñ12345&lt;dependency&gt; &lt;groupId&gt;com.netflix.feign&lt;/groupId&gt; &lt;artifactId&gt;feign-core&lt;/artifactId&gt; &lt;version&gt;8.18.0&lt;/version&gt;&lt;/dependency&gt; Ëá™ÂÆö‰πâÊé•Âè£12345678import feign.Param;import feign.RequestLine;public interface RemoteService &#123; @RequestLine("GET /users/list?name=&#123;name&#125;") String getOwner(@Param(value = "name") String name);&#125; ÈÄöËøá@RequestLineÊåáÂÆöHTTPÂçèËÆÆÂèäURLÂú∞ÂùÄ ÈÖçÁΩÆÁ±ª1234RemoteService service = Feign.builder() .options(new Options(1000, 3500)) .retryer(new Retryer.Default(5000, 5000, 3)) .target(RemoteService.class, "http://127.0.0.1:8085"); optionsÊñπÊ≥ïÊåáÂÆöËøûÊé•Ë∂ÖÊó∂Êó∂ÈïøÂèäÂìçÂ∫îË∂ÖÊó∂Êó∂ÈïøÔºåretryerÊñπÊ≥ïÊåáÂÆöÈáçËØïÁ≠ñÁï•,targetÊñπÊ≥ïÁªëÂÆöÊé•Âè£‰∏éÊúçÂä°Á´ØÂú∞ÂùÄ„ÄÇËøîÂõûÁ±ªÂûã‰∏∫ÁªëÂÆöÁöÑÊé•Âè£Á±ªÂûã„ÄÇ Ë∞ÉÁî®1String result = service.getOwner("scott"); ‰∏éË∞ÉÁî®Êú¨Âú∞ÊñπÊ≥ïÁõ∏ÂêåÁöÑÊñπÂºèË∞ÉÁî®feignÂåÖË£ÖÁöÑÊé•Âè£ÔºåÁõ¥Êé•Ëé∑ÂèñËøúÁ®ãÊúçÂä°Êèê‰æõÁöÑËøîÂõûÂÄº„ÄÇ ÈôÑÔºöÊúçÂä°Áîü‰∫ßËÄÖ12345678910111213141516import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.ResponseBody;@Controller@RequestMapping(value="users")public class UserController &#123; @RequestMapping(value="/list",method=&#123;RequestMethod.GET,RequestMethod.POST,RequestMethod.PUT&#125;) @ResponseBody public String list(@RequestParam String name) throws InterruptedException&#123; return name.toUpperCase(); &#125;&#125; Êõ¥Ëøõ‰∏ÄÊ≠•Âú®È°πÁõÆ‰∏≠ÔºåÊúçÂä°Ê∂àË¥πÁ´Ø‰∏éÁîü‰∫ßÁ´Ø‰πãÈó¥‰∫§Êç¢ÁöÑÊï∞ÊçÆÂæÄÂæÄÊòØ‰∏ÄÊàñÂ§ö‰∏™ÂØπË±°ÔºåfeignÂêåÊ†∑Êèê‰æõÂü∫‰∫éjsonÁöÑÂØπË±°ËΩ¨Êç¢Â∑•ÂÖ∑ÔºåÊñπ‰æøÊàë‰ª¨Áõ¥Êé•‰ª•ÂØπË±°ÂΩ¢Âºè‰∫§‰∫í„ÄÇ ‰∏öÂä°Êé•Âè£123456public interface RemoteService &#123; @Headers(&#123;"Content-Type: application/json","Accept: application/json"&#125;) @RequestLine("POST /users/list") User getOwner(User user);&#125; Âä†ÂÖ•@HeadersÊ≥®Ëß£ÔºåÊåáÂÆöContent-Type‰∏∫json ÈÖçÁΩÆ123456RemoteService service = Feign.builder() .encoder(new JacksonEncoder()) .decoder(new JacksonDecoder()) .options(new Options(1000, 3500)) .retryer(new Retryer.Default(5000, 5000, 3)) .target(RemoteService.class, "http://127.0.0.1:8085"); encoderÊåáÂÆöÂØπË±°ÁºñÁ†ÅÊñπÂºèÔºådecoderÊåáÂÆöÂØπË±°Ëß£Á†ÅÊñπÂºè„ÄÇËøôÈáåÁî®ÁöÑÊòØÂü∫‰∫éJacksonÁöÑÁºñ„ÄÅËß£Á†ÅÊñπÂºèÔºåÈúÄË¶ÅÂú®pom.xml‰∏≠Ê∑ªÂä†JacksonÁöÑ‰æùËµñ 12345&lt;dependency&gt; &lt;groupId&gt;com.netflix.feign&lt;/groupId&gt; &lt;artifactId&gt;feign-jackson&lt;/artifactId&gt; &lt;version&gt;8.18.0&lt;/version&gt;&lt;/dependency&gt; Ë∞ÉÁî®1User result = service.getOwner(u); ÈôÑÔºöÊúçÂä°Áîü‰∫ßËÄÖ12345678910111213@Controller@RequestMapping(value="users")public class UserController &#123; @RequestMapping(value="/list",method=&#123;RequestMethod.GET,RequestMethod.POST,RequestMethod.PUT&#125;) @ResponseBody public User list(@RequestBody User user) throws InterruptedException&#123; System.out.println(user.getUsername()); user.setId(100L); user.setUsername(user.getUsername().toUpperCase()); return user; &#125;&#125; ÂîØ‰∏ÄÁöÑÂèòÂåñÂ∞±ÊòØ‰ΩøÁî®‰∫Ü@RequestBodyÊù•Êé•Êî∂jsonÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>feign</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÊµÖÂá∫UMLÁ±ªÂõæÔºà‰∫îÔºâ]]></title>
    <url>%2Fuml%2Fuml%2F5%2F</url>
    <content type="text"><![CDATA[ÂÆû‰æãÂàÜÊûê3‚Äî‚ÄîÂîÆÁ•®Êú∫ÊéßÂà∂Á®ãÂ∫èÊüêËøêËæìÂÖ¨Âè∏ÂÜ≥ÂÆö‰∏∫Êñ∞ÁöÑÂîÆÁ•®Êú∫ÂºÄÂèëËΩ¶Á•®ÈîÄÂîÆÁöÑÊéßÂà∂ËΩØ‰ª∂„ÄÇÂõæIÁªôÂá∫‰∫ÜÂîÆÁ•®Êú∫ÁöÑÈù¢ÊùøÁ§∫ÊÑèÂõæ‰ª•ÂèäÁõ∏ÂÖ≥ÁöÑÊéßÂà∂ÈÉ®‰ª∂„ÄÇ ÂîÆÁ•®Êú∫Áõ∏ÂÖ≥ÈÉ®‰ª∂ÁöÑ‰ΩúÁî®Â¶Ç‰∏ãÊâÄËø∞Ôºö ÁõÆÁöÑÂú∞ÈîÆÁõòÁî®Êù•ËæìÂÖ•Ë°åÁ®ãÁõÆÁöÑÂú∞ÁöÑ‰ª£Á†ÅÔºà‰æãÂ¶ÇÔºå200Ë°®Á§∫ÊÄªÁ´ôÔºâ„ÄÇ ‰πòÂÆ¢ÂèØ‰ª•ÈÄöËøáËΩ¶Á•®ÈîÆÁõòÈÄâÊã©ËΩ¶Á•®ÁßçÁ±ªÔºàÂçïÁ®ãÁ•®„ÄÅÂ§öÊ¨°ÂæÄËøîÁ•®ÂíåÂ∫ßÂ∏≠ÁßçÁ±ªÔºâ„ÄÇ ÁªßÁª≠/ÂèñÊ∂àÈîÆÁõò‰∏äÁöÑÂèñÊ∂àÊåâÈíÆÁî®‰∫éÂèñÊ∂àË¥≠Á•®ËøáÁ®ãÔºåÁªßÁª≠ÊåâÈíÆÂÖÅËÆ∏‰πòÂÆ¢ËøûÁª≠Ë¥≠‰π∞Â§öÂº†Á•®„ÄÇ ÊòæÁ§∫Â±èÊòæÁ§∫ÊâÄÊúâÁöÑÁ≥ªÁªüËæìÂá∫ÂíåÁî®Êà∑ÊèêÁ§∫‰ø°ÊÅØ„ÄÇ ÊèíÂç°Âè£Êé•ÂèóMCardÔºàÁé∞ÈáëÂç°ÔºâÔºåÁ°¨Â∏ÅÂè£ÂíåÁ∫∏Â∏ÅÊßΩÊé•ÂèóÁé∞Èáë„ÄÇ ÊâìÂç∞Êú∫Áî®‰∫éËæìÂá∫ËΩ¶Á•®„ÄÇ ÊâÄÊúâÈÉ®‰ª∂ÂùáÂèØÂÆûÁé∞Ëá™Ê£ÄÂπ∂ÊÅ¢Â§çÂà∞ÂàùÂßãÁä∂ÊÄÅ„ÄÇ Áé∞ÈááÁî®Èù¢ÂêëÂØπË±°ÊñπÊ≥ïÂºÄÂèëËØ•Á≥ªÁªüÔºå‰ΩøÁî®UMLËøõË°åÂª∫Ê®°ÔºåÁªòÂà∂ËØ•Á≥ªÁªüÁöÑÂàùÂßãÁ±ªÂõæ„ÄÇ ÂèÇËÄÉËß£ÂÜ≥ÊñπÊ°àÂèÇËÄÉÁ±ªÂõæÂ¶Ç‰∏ãÔºö Á±ªËØ¥ÊòéÔºö Á±ª Âêç ËØ¥ Êòé Component ÊäΩË±°ÈÉ®‰ª∂Á±ªÔºåÊâÄÊúâÈÉ®‰ª∂Á±ªÁöÑÁà∂Á±ª Keyboard ÊäΩË±°ÈîÆÁõòÁ±ª ActionKeyboard ÁªßÁª≠/ÂèñÊ∂àÈîÆÁõòÁ±ª TicketKindKeyboard ËΩ¶Á•®ÁßçÁ±ªÈîÆÁõòÁ±ª DestinationKeyboard ÁõÆÁöÑÂú∞ÈîÆÁõòÁ±ª Screen ÊòæÁ§∫Â±èÁ±ª CardDriver Âç°È©±Âä®Âô®Á±ª CashSlot Áé∞ÈáëÔºàÁ°¨Â∏Å/Á∫∏Â∏ÅÔºâÊßΩÁ±ª Printer ÊâìÂç∞Êú∫Á±ª TicketSoldSystem ÂîÆÁ•®Á≥ªÁªüÁ±ª ÊñπÊ≥ïËØ¥ÊòéÔºö ÊñπÊ≥ïÂêç ËØ¥ Êòé Component ÁöÑinit()ÊñπÊ≥ï ÂàùÂßãÂåñÈÉ®‰ª∂ Component ÁöÑdoSeltTest()ÊñπÊ≥ï Ëá™Ê£Ä KeyboardÁöÑgetSelectedKey()ÊñπÊ≥ï Ëé∑ÂèñÊåâÈîÆÂÄº ActionKeyboardÁöÑgetAction()ÊñπÊ≥ï ÁªßÁª≠/ÂèñÊ∂àÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜ TicketKindKeyboardÁöÑgetTicketKind()ÊñπÊ≥ï ËΩ¶Á•®ÁßçÁ±ªÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜ DestinationKeyboardÁöÑgetDestinationCode()ÊñπÊ≥ï ÁõÆÁöÑÂú∞ÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜ ScreenÁöÑshowText()ÊñπÊ≥ï ÊòæÁ§∫‰ø°ÊÅØ CardDriverÁöÑgetCredit()ÊñπÊ≥ï Ëé∑ÂèñÈáëÈ¢ù CardDriverÁöÑdebitFare()ÊñπÊ≥ï Êõ¥Êñ∞Âç°‰ΩôÈ¢ù CardDriverÁöÑejectMCard()ÊñπÊ≥ï ÈÄÄÂç° CashSlotÁöÑgetCredit()ÊñπÊ≥ï Ëé∑ÂèñÈáëÈ¢ù PrinterÁöÑprintTicket()ÊñπÊ≥ï ÊâìÂç∞ËΩ¶Á•® PrinterÁöÑejectTicket()ÊñπÊ≥ï Âá∫Á•® TicketSoldSystemÁöÑverifyCredit()ÊñπÊ≥ï È™åËØÅÈáëÈ¢ù TicketSoldSystemÁöÑcalculateFare()ÊñπÊ≥ï ËÆ°ÁÆóË¥πÁî®]]></content>
      <categories>
        <category>uml</category>
      </categories>
      <tags>
        <tag>uml</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÊµÖÂá∫UMLÁ±ªÂõæÔºàÂõõÔºâ]]></title>
    <url>%2Fuml%2Fuml%2F4%2F</url>
    <content type="text"><![CDATA[ÂÆû‰æãÂàÜÊûê1‚Äî‚ÄîÁôªÂΩïÊ®°ÂùóÊüêÂü∫‰∫éC/SÁöÑÂç≥Êó∂ËÅäÂ§©Á≥ªÁªüÁôªÂΩïÊ®°ÂùóÂäüËÉΩÊèèËø∞Â¶Ç‰∏ãÔºö Áî®Êà∑ÈÄöËøáÁôªÂΩïÁïåÈù¢(LoginForm)ËæìÂÖ•Ë¥¶Âè∑ÂíåÂØÜÁ†ÅÔºåÁ≥ªÁªüÂ∞ÜËæìÂÖ•ÁöÑË¥¶Âè∑ÂíåÂØÜÁ†Å‰∏éÂ≠òÂÇ®Âú®Êï∞ÊçÆÂ∫ì(User)Ë°®‰∏≠ÁöÑÁî®Êà∑‰ø°ÊÅØËøõË°åÊØîËæÉÔºåÈ™åËØÅÁî®Êà∑ËæìÂÖ•ÊòØÂê¶Ê≠£Á°ÆÔºåÂ¶ÇÊûúËæìÂÖ•Ê≠£Á°ÆÂàôËøõÂÖ•‰∏ªÁïåÈù¢(MainForm)ÔºåÂê¶ÂàôÊèêÁ§∫‚ÄúËæìÂÖ•ÈîôËØØ‚Äù„ÄÇ Ê†πÊçÆ‰ª•‰∏äÊèèËø∞ÁªòÂà∂ÂàùÂßãÁ±ªÂõæ„ÄÇ ÂèÇËÄÉËß£ÂÜ≥ÊñπÊ°àÔºöÂèÇËÄÉÁ±ªÂõæÂ¶Ç‰∏ãÔºö ËÄÉËôëÂà∞Á≥ªÁªüÊâ©Â±ïÊÄßÔºåÂú®Êú¨ÂÆû‰æã‰∏≠ÂºïÂÖ•‰∫ÜÊäΩË±°Êï∞ÊçÆËÆøÈóÆÊé•Âè£IUserDAOÔºåÂÜçÂ∞ÜÂÖ∑‰ΩìÊï∞ÊçÆËÆøÈóÆÂØπË±°Ê≥®ÂÖ•Âà∞‰∏öÂä°ÈÄªËæëÂØπË±°‰∏≠ÔºåÂèØÈÄöËøáÈÖçÁΩÆÊñá‰ª∂ÔºàÂ¶ÇXMLÊñá‰ª∂ÔºâÁ≠âÊñπÂºèÊù•ÂÆûÁé∞ÔºåÂ∞ÜÂÖ∑‰ΩìÁöÑÊï∞ÊçÆËÆøÈóÆÁ±ªÁ±ªÂêçÂ≠òÂÇ®Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÔºåÂ¶ÇÊûúÈúÄË¶ÅÊõ¥Êç¢Êñ∞ÁöÑÂÖ∑‰ΩìÊï∞ÊçÆËÆøÈóÆÂØπË±°ÔºåÂè™ÈúÄ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂Âç≥ÂèØÔºåÂéüÊúâÁ®ãÂ∫è‰ª£Á†ÅÊó†È°ªÂÅö‰ªª‰Ωï‰øÆÊîπ„ÄÇ Á±ªËØ¥Êòé Á±ª Âêç ËØ¥ Êòé LoginForm ÁôªÂΩïÁ™óÂè£ÔºåÁúÅÁï•ÁïåÈù¢ÁªÑ‰ª∂ÂíåÊåâÈíÆ‰∫ã‰ª∂Â§ÑÁêÜÊñπÊ≥ïÔºàËæπÁïåÁ±ªÔºâ LoginBO ÁôªÂΩï‰∏öÂä°ÈÄªËæëÁ±ªÔºåÂ∞ÅË£ÖÂÆûÁé∞ÁôªÂΩïÂäüËÉΩÁöÑ‰∏öÂä°ÈÄªËæëÔºàÊéßÂà∂Á±ªÔºâ IUserDAO ÊäΩË±°Êï∞ÊçÆËÆøÈóÆÁ±ªÊé•Âè£ÔºåÂ£∞ÊòéÂØπUserË°®ÁöÑÊï∞ÊçÆÊìç‰ΩúÊñπÊ≥ïÔºåÁúÅÁï•Èô§Êü•ËØ¢Â§ñÁöÑÂÖ∂‰ªñÊñπÊ≥ïÔºàÂÆû‰ΩìÁ±ªÔºâ UserDAO ÂÖ∑‰ΩìÊï∞ÊçÆËÆøÈóÆÁ±ªÔºåÂÆûÁé∞ÂØπUserË°®ÁöÑÊï∞ÊçÆÊìç‰ΩúÊñπÊ≥ïÔºåÁúÅÁï•Èô§Êü•ËØ¢Â§ñÁöÑÂÖ∂‰ªñÊñπÊ≥ïÔºàÂÆû‰ΩìÁ±ªÔºâ MainForm ‰∏ªÁ™óÂè£ÔºàËæπÁïåÁ±ªÔºâ ÊñπÊ≥ïËØ¥Êòé ÊñπÊ≥ïÂêç ËØ¥ Êòé LoginFormÁ±ªÁöÑLoginForm()ÊñπÊ≥ï LoginFormÊûÑÈÄ†ÂáΩÊï∞ÔºåÂàùÂßãÂåñÂÆû‰æãÊàêÂëò LoginFormÁ±ªÁöÑvalidate()ÊñπÊ≥ï ÁïåÈù¢Á±ªÁöÑÈ™åËØÅÊñπÊ≥ïÔºåÈÄöËøáË∞ÉÁî®‰∏öÂä°ÈÄªËæëÁ±ªLoginBOÁöÑvalidate()ÊñπÊ≥ïÂÆûÁé∞ÂØπÁî®Êà∑ËæìÂÖ•‰ø°ÊÅØÁöÑÈ™åËØÅ LoginBOÁ±ªÁöÑvalidate()ÊñπÊ≥ï ‰∏öÂä°ÈÄªËæëÁ±ªÁöÑÈ™åËØÅÊñπÊ≥ïÔºåÈÄöËøáË∞ÉÁî®Êï∞ÊçÆËÆøÈóÆÁ±ªÁöÑfindUserByAccAndPwd()ÊñπÊ≥ïÈ™åËØÅÁî®Êà∑ËæìÂÖ•‰ø°ÊÅØÁöÑÂêàÊ≥ïÊÄß LoginBOÁ±ªÁöÑsetIUserDAO()ÊñπÊ≥ï SetterÊñπÊ≥ïÔºåÂú®‰∏öÂä°ÈÄªËæëÂØπË±°‰∏≠Ê≥®ÂÖ•Êï∞ÊçÆËÆøÈóÆÂØπË±°ÔºàÊ≥®ÊÑèÔºöÊ≠§Â§ÑÈíàÂØπÊäΩË±°Êï∞ÊçÆËÆøÈóÆÁ±ªÁºñÁ®ãÔºâ IUserDAOÊé•Âè£ÁöÑfindUserByAccAndPwd()ÊñπÊ≥ï ‰∏öÂä°ÊñπÊ≥ïÂ£∞ÊòéÔºåÈÄöËøáÁî®Êà∑Ë¥¶Âè∑ÂíåÂØÜÁ†ÅÂú®Êï∞ÊçÆÂ∫ì‰∏≠Êü•ËØ¢Áî®Êà∑‰ø°ÊÅØÔºåÂà§Êñ≠ËØ•Áî®Êà∑Ë∫´‰ªΩÁöÑÂêàÊ≥ïÊÄß UserDAOÁ±ªÁöÑfindUserByAccAndPwd()ÊñπÊ≥ï ‰∏öÂä°ÊñπÊ≥ïÂÆûÁé∞ÔºåÂÆûÁé∞Âú®IUserDAOÊé•Âè£‰∏≠Â£∞ÊòéÁöÑÊï∞ÊçÆËÆøÈóÆÊñπÊ≥ï ÂÆû‰æãÂàÜÊûê2‚Äî‚ÄîÊ≥®ÂÜåÊ®°ÂùóÊüêÂü∫‰∫éJavaËØ≠Ë®ÄÁöÑC/SËΩØ‰ª∂ÈúÄË¶ÅÊèê‰æõÊ≥®ÂÜåÂäüËÉΩÔºåËØ•ÂäüËÉΩÁÆÄË¶ÅÊèèËø∞Â¶Ç‰∏ãÔºö Áî®Êà∑ÈÄöËøáÊ≥®ÂÜåÁïåÈù¢(RegisterForm)ËæìÂÖ•‰∏™‰∫∫‰ø°ÊÅØÔºåÁî®Êà∑ÁÇπÂáª‚ÄúÊ≥®ÂÜå‚ÄùÊåâÈíÆÂêéÂ∞ÜËæìÂÖ•ÁöÑ‰ø°ÊÅØÈÄöËøá‰∏Ä‰∏™Â∞ÅË£ÖÁî®Êà∑ËæìÂÖ•Êï∞ÊçÆÁöÑÂØπË±°(UserDTO)‰º†ÈÄíÁªôÊìç‰ΩúÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆËÆøÈóÆÁ±ªÔºå‰∏∫‰∫ÜÊèêÈ´òÁ≥ªÁªüÁöÑÊâ©Â±ïÊÄßÔºåÈíàÂØπ‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂèØËÉΩÈúÄË¶ÅÊèê‰æõ‰∏çÂêåÁöÑÊï∞ÊçÆËÆøÈóÆÁ±ªÔºåÂõ†Ê≠§Êèê‰æõ‰∫ÜÊï∞ÊçÆËÆøÈóÆÁ±ªÊé•Âè£ÔºåÂ¶ÇIUserDAOÔºåÊØè‰∏Ä‰∏™ÂÖ∑‰ΩìÊï∞ÊçÆËÆøÈóÆÁ±ªÈÉΩÊòØÊüê‰∏Ä‰∏™Êï∞ÊçÆËÆøÈóÆÁ±ªÊé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºåÂ¶ÇOracleUserDAOÂ∞±ÊòØ‰∏Ä‰∏™‰∏ìÈó®Áî®‰∫éËÆøÈóÆOracleÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆËÆøÈóÆÁ±ª„ÄÇ Ê†πÊçÆ‰ª•‰∏äÊèèËø∞ÁªòÂà∂Á±ªÂõæ„ÄÇ‰∏∫‰∫ÜÁÆÄÂåñÁ±ªÂõæÔºå‰∏™‰∫∫‰ø°ÊÅØ‰ªÖÂåÖÊã¨Ë¥¶Âè∑(userAccount)ÂíåÂØÜÁ†Å(userPassword)Ôºå‰∏îÁïåÈù¢Á±ªÊó†ÈúÄÊ∂âÂèäÁïåÈù¢ÁªÜËäÇÂÖÉÁ¥†„ÄÇ ÂèÇËÄÉËß£ÂÜ≥ÊñπÊ°àÂú®‰ª•‰∏äÂäüËÉΩËØ¥Êòé‰∏≠ÔºåÂèØ‰ª•ÂàÜÊûêÂá∫ËØ•Á≥ªÁªüÂåÖÊã¨‰∏â‰∏™Á±ªÂíå‰∏Ä‰∏™Êé•Âè£ÔºåËøô‰∏â‰∏™Á±ªÂàÜÂà´ÊòØÊ≥®ÂÜåÁïåÈù¢Á±ªRegisterForm„ÄÅÁî®Êà∑Êï∞ÊçÆ‰º†ËæìÁ±ªUserDTO„ÄÅOracleÁî®Êà∑Êï∞ÊçÆËÆøÈóÆÁ±ªOracleUserDAOÔºåÊé•Âè£ÊòØÊäΩË±°Áî®Êà∑Êï∞ÊçÆËÆøÈóÆÊé•Âè£IUserDAO„ÄÇÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÔºö Âú®RegisterForm‰∏≠ÈúÄË¶Å‰ΩøÁî®UserDTOÁ±ª‰º†ËæìÊï∞ÊçÆ‰∏îÈúÄË¶Å‰ΩøÁî®Êï∞ÊçÆËÆøÈóÆÁ±ªÊù•Êìç‰ΩúÊï∞ÊçÆÂ∫ìÔºåÂõ†Ê≠§RegisterForm‰∏éUserDTOÂíåIUserDAO‰πãÈó¥Â≠òÂú®ÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÂú®RegisterForm‰∏≠ÂèØ‰ª•Áõ¥Êé•ÂÆû‰æãÂåñUserDTOÔºåÂõ†Ê≠§ÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•‰ΩøÁî®ÁªÑÂêàÂÖ≥ËÅî„ÄÇ Áî±‰∫éÊï∞ÊçÆÂ∫ìÁ±ªÂûãÈúÄË¶ÅÁÅµÊ¥ªÊõ¥Êç¢ÔºåÂõ†Ê≠§Âú®RegisterForm‰∏≠‰∏çËÉΩÁõ¥Êé•ÂÆû‰æãÂåñIUserDAOÁöÑÂ≠êÁ±ªÔºåÂèØ‰ª•ÈíàÂØπÊé•Âè£IUserDAOÁºñÁ®ãÔºåÂÜçÈÄöËøáÊ≥®ÂÖ•ÁöÑÊñπÂºè‰º†ÂÖ•‰∏Ä‰∏™IUserDAOÊé•Âè£ÁöÑÂ≠êÁ±ªÂØπË±°ÔºàÂú®Êú¨‰π¶ÂêéÁª≠Á´†ËäÇ‰∏≠Â∞ÜÂ≠¶‰π†Â¶Ç‰ΩïÂÖ∑‰ΩìÂÆûÁé∞ÔºâÔºåÂõ†Ê≠§RegisterFormÂíåIUserDAO‰πãÈó¥ÂÖ∑ÊúâËÅöÂêàÂÖ≥ËÅîÂÖ≥Á≥ª„ÄÇ OracleUserDAOÊòØÂÆûÁé∞‰∫ÜIUserDAOÊé•Âè£ÁöÑÂ≠êÁ±ªÔºåÂõ†Ê≠§ÂÆÉ‰ª¨‰πãÈó¥ÂÖ∑ÊúâÁ±ª‰∏éÊé•Âè£ÁöÑÂÆûÁé∞ÂÖ≥Á≥ª„ÄÇ Âú®Â£∞ÊòéIUserDAOÊé•Âè£ÁöÑÂ¢ûÂä†Áî®Êà∑‰ø°ÊÅØÊñπÊ≥ïaddUser()Êó∂ÔºåÈúÄË¶ÅÂ∞ÜÂú®ÁïåÈù¢Á±ª‰∏≠ÂÆû‰æãÂåñÁöÑUserDTOÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞‰º†ÈÄíËøõÊù•ÔºåÁÑ∂ÂêéÂèñÂá∫Â∞ÅË£ÖÂú®UserDTOÂØπË±°‰∏≠ÁöÑÊï∞ÊçÆÊèíÂÖ•Êï∞ÊçÆÂ∫ìÔºåÂõ†Ê≠§addUser()ÊñπÊ≥ïÁöÑÂáΩÊï∞ÂéüÂûãÂèØ‰ª•ÂÆö‰πâ‰∏∫Ôºöpublic boolean addUser(UserDTO user)ÔºåÂú®IUserDAOÁöÑÊñπÊ≥ïaddUser()‰∏≠Â∞ÜUserDTOÁ±ªÂûãÁöÑÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞ÔºåÊïÖIUserDAO‰∏éUserDTOÂ≠òÂú®‰æùËµñÂÖ≥Á≥ª„ÄÇ ÈÄöËøá‰ª•‰∏äÂàÜÊûêÔºåËØ•ÂÆû‰æãÂèÇËÄÉÁ±ªÂõæÂ¶ÇÂõæ1ÊâÄÁ§∫Ôºö Ê≥®ÊÑèÔºöÂú®ÁªòÂà∂Á±ªÂõæÊàñÂÖ∂‰ªñUMLÂõæÂΩ¢Êó∂ÔºåÂèØ‰ª•ÈÄöËøáÊ≥®Èáä(Comment)Êù•ÂØπÂõæ‰∏≠ÁöÑÁ¨¶Âè∑ÊàñÂÖÉÁ¥†ËøõË°å‰∏Ä‰∫õÈôÑÂä†ËØ¥ÊòéÔºåÂ¶ÇÊûúÈúÄË¶ÅËØ¶ÁªÜËØ¥ÊòéÁ±ªÂõæ‰∏≠ÁöÑÊüê‰∏ÄÊñπÊ≥ïÁöÑÂäüËÉΩÊàñËÄÖÂÆûÁé∞ËøáÁ®ãÔºåÂèØ‰ª•‰ΩøÁî®Â¶ÇÂõæ2ÊâÄÁ§∫Ë°®Á§∫ÊñπÂºèÔºö]]></content>
      <categories>
        <category>uml</category>
      </categories>
      <tags>
        <tag>uml</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÊµÖÂá∫UMLÁ±ªÂõæÔºà‰∏âÔºâ]]></title>
    <url>%2Fuml%2Fuml%2F3%2F</url>
    <content type="text"><![CDATA[Á±ª‰∏éÁ±ª‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºà2Ôºâ‰æùËµñÂÖ≥Á≥ª‰æùËµñ(Dependency)ÂÖ≥Á≥ªÊòØ‰∏ÄÁßç‰ΩøÁî®ÂÖ≥Á≥ªÔºåÁâπÂÆö‰∫ãÁâ©ÁöÑÊîπÂèòÊúâÂèØËÉΩ‰ºöÂΩ±ÂìçÂà∞‰ΩøÁî®ËØ•‰∫ãÁâ©ÁöÑÂÖ∂‰ªñ‰∫ãÁâ©ÔºåÂú®ÈúÄË¶ÅË°®Á§∫‰∏Ä‰∏™‰∫ãÁâ©‰ΩøÁî®Âè¶‰∏Ä‰∏™‰∫ãÁâ©Êó∂‰ΩøÁî®‰æùËµñÂÖ≥Á≥ª„ÄÇÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºå‰æùËµñÂÖ≥Á≥ª‰ΩìÁé∞Âú®Êüê‰∏™Á±ªÁöÑÊñπÊ≥ï‰ΩøÁî®Âè¶‰∏Ä‰∏™Á±ªÁöÑÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞„ÄÇÂú®UML‰∏≠Ôºå‰æùËµñÂÖ≥Á≥ªÁî®Â∏¶ÁÆ≠Â§¥ÁöÑËôöÁ∫øË°®Á§∫ÔºåÁî±‰æùËµñÁöÑ‰∏ÄÊñπÊåáÂêëË¢´‰æùËµñÁöÑ‰∏ÄÊñπ„ÄÇ‰æãÂ¶ÇÔºöÈ©æÈ©∂ÂëòÂºÄËΩ¶ÔºåÂú®DriverÁ±ªÁöÑdrive()ÊñπÊ≥ï‰∏≠Â∞ÜCarÁ±ªÂûãÁöÑÂØπË±°car‰Ωú‰∏∫‰∏Ä‰∏™ÂèÇÊï∞‰º†ÈÄíÔºå‰ª•‰æøÂú®drive()ÊñπÊ≥ï‰∏≠ËÉΩÂ§üË∞ÉÁî®carÁöÑmove()ÊñπÊ≥ïÔºå‰∏îÈ©æÈ©∂ÂëòÁöÑdrive()ÊñπÊ≥ï‰æùËµñËΩ¶ÁöÑmove()ÊñπÊ≥ïÔºåÂõ†Ê≠§Á±ªDriver‰æùËµñÁ±ªCarÔºåÂ¶ÇÂõæ1ÊâÄÁ§∫Ôºö Âú®Á≥ªÁªüÂÆûÊñΩÈò∂ÊÆµÔºå‰æùËµñÂÖ≥Á≥ªÈÄöÂ∏∏ÈÄöËøá‰∏âÁßçÊñπÂºèÊù•ÂÆûÁé∞ÔºåÁ¨¨‰∏ÄÁßç‰πüÊòØÊúÄÂ∏∏Áî®ÁöÑ‰∏ÄÁßçÊñπÂºèÊòØÂ¶ÇÂõæ1ÊâÄÁ§∫ÁöÑÂ∞Ü‰∏Ä‰∏™Á±ªÁöÑÂØπË±°‰Ωú‰∏∫Âè¶‰∏Ä‰∏™Á±ª‰∏≠ÊñπÊ≥ïÁöÑÂèÇÊï∞ÔºåÁ¨¨‰∫åÁßçÊñπÂºèÊòØÂú®‰∏Ä‰∏™Á±ªÁöÑÊñπÊ≥ï‰∏≠Â∞ÜÂè¶‰∏Ä‰∏™Á±ªÁöÑÂØπË±°‰Ωú‰∏∫ÂÖ∂Â±ÄÈÉ®ÂèòÈáèÔºåÁ¨¨‰∏âÁßçÊñπÂºèÊòØÂú®‰∏Ä‰∏™Á±ªÁöÑÊñπÊ≥ï‰∏≠Ë∞ÉÁî®Âè¶‰∏Ä‰∏™Á±ªÁöÑÈùôÊÄÅÊñπÊ≥ï„ÄÇÂõæ1ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 12345678910111213public class Driver &#123; public void drive(Car car) &#123; car.move(); &#125; ‚Ä¶‚Ä¶ &#125; public class Car &#123; public void move() &#123; ...... &#125; ‚Ä¶‚Ä¶ &#125; Ê≥õÂåñÂÖ≥Á≥ªÊ≥õÂåñ(Generalization)ÂÖ≥Á≥ª‰πüÂ∞±ÊòØÁªßÊâøÂÖ≥Á≥ªÔºåÁî®‰∫éÊèèËø∞Áà∂Á±ª‰∏éÂ≠êÁ±ª‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåÁà∂Á±ªÂèàÁß∞‰ΩúÂü∫Á±ªÊàñË∂ÖÁ±ªÔºåÂ≠êÁ±ªÂèàÁß∞‰ΩúÊ¥æÁîüÁ±ª„ÄÇÂú®UML‰∏≠ÔºåÊ≥õÂåñÂÖ≥Á≥ªÁî®Â∏¶Á©∫ÂøÉ‰∏âËßíÂΩ¢ÁöÑÁõ¥Á∫øÊù•Ë°®Á§∫„ÄÇÂú®‰ª£Á†ÅÂÆûÁé∞Êó∂ÔºåÊàë‰ª¨‰ΩøÁî®Èù¢ÂêëÂØπË±°ÁöÑÁªßÊâøÊú∫Âà∂Êù•ÂÆûÁé∞Ê≥õÂåñÂÖ≥Á≥ªÔºåÂ¶ÇÂú®JavaËØ≠Ë®Ä‰∏≠‰ΩøÁî®extendsÂÖ≥ÈîÆÂ≠ó„ÄÅÂú®C++/C#‰∏≠‰ΩøÁî®ÂÜíÂè∑‚ÄúÔºö‚ÄùÊù•ÂÆûÁé∞„ÄÇ‰æãÂ¶ÇÔºöStudentÁ±ªÂíåTeacherÁ±ªÈÉΩÊòØPersonÁ±ªÁöÑÂ≠êÁ±ªÔºåStudentÁ±ªÂíåTeacherÁ±ªÁªßÊâø‰∫ÜPersonÁ±ªÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïÔºåPersonÁ±ªÁöÑÂ±ûÊÄßÂåÖÂê´ÂßìÂêç(name)ÂíåÂπ¥ÈæÑ(age)ÔºåÊØè‰∏Ä‰∏™StudentÂíåTeacher‰πüÈÉΩÂÖ∑ÊúâËøô‰∏§‰∏™Â±ûÊÄßÔºåÂè¶Â§ñStudentÁ±ªÂ¢ûÂä†‰∫ÜÂ±ûÊÄßÂ≠¶Âè∑(studentNo)ÔºåTeacherÁ±ªÂ¢ûÂä†‰∫ÜÂ±ûÊÄßÊïôÂ∏àÁºñÂè∑(teacherNo)ÔºåPersonÁ±ªÁöÑÊñπÊ≥ïÂåÖÊã¨Ë°åËµ∞move()ÂíåËØ¥ËØùsay()ÔºåStudentÁ±ªÂíåTeacherÁ±ªÁªßÊâø‰∫ÜËøô‰∏§‰∏™ÊñπÊ≥ïÔºåËÄå‰∏îStudentÁ±ªËøòÊñ∞Â¢ûÊñπÊ≥ïstudy()ÔºåTeacherÁ±ªËøòÊñ∞Â¢ûÊñπÊ≥ïteach()„ÄÇÂ¶ÇÂõæ2ÊâÄÁ§∫Ôºö Âõæ2ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031//Áà∂Á±ª public class Person &#123; protected String name; protected int age; public void move() &#123; ‚Ä¶‚Ä¶ &#125; public void say() &#123; ‚Ä¶‚Ä¶ &#125; &#125; //Â≠êÁ±ª public class Student extends Person &#123; private String studentNo; public void study() &#123; ‚Ä¶‚Ä¶ &#125; &#125; //Â≠êÁ±ª public class Teacher extends Person &#123; private String teacherNo; public void teach() &#123; ‚Ä¶‚Ä¶ &#125; &#125; Êé•Âè£‰∏éÂÆûÁé∞ÂÖ≥Á≥ªÂú®ÂæàÂ§öÈù¢ÂêëÂØπË±°ËØ≠Ë®Ä‰∏≠ÈÉΩÂºïÂÖ•‰∫ÜÊé•Âè£ÁöÑÊ¶ÇÂøµÔºåÂ¶ÇJava„ÄÅC#Á≠âÔºåÂú®Êé•Âè£‰∏≠ÔºåÈÄöÂ∏∏Ê≤°ÊúâÂ±ûÊÄßÔºåËÄå‰∏îÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩÊòØÊäΩË±°ÁöÑÔºåÂè™ÊúâÊìç‰ΩúÁöÑÂ£∞ÊòéÔºåÊ≤°ÊúâÊìç‰ΩúÁöÑÂÆûÁé∞„ÄÇUML‰∏≠Áî®‰∏éÁ±ªÁöÑË°®Á§∫Ê≥ïÁ±ª‰ººÁöÑÊñπÂºèË°®Á§∫Êé•Âè£ÔºåÂ¶ÇÂõæ3ÊâÄÁ§∫Ôºö Êé•Âè£‰πãÈó¥‰πüÂèØ‰ª•Êúâ‰∏éÁ±ª‰πãÈó¥ÂÖ≥Á≥ªÁ±ª‰ººÁöÑÁªßÊâøÂÖ≥Á≥ªÂíå‰æùËµñÂÖ≥Á≥ªÔºå‰ΩÜÊòØÊé•Âè£ÂíåÁ±ª‰πãÈó¥ËøòÂ≠òÂú®‰∏ÄÁßçÂÆûÁé∞(Realization)ÂÖ≥Á≥ªÔºåÂú®ËøôÁßçÂÖ≥Á≥ª‰∏≠ÔºåÁ±ªÂÆûÁé∞‰∫ÜÊé•Âè£ÔºåÁ±ª‰∏≠ÁöÑÊìç‰ΩúÂÆûÁé∞‰∫ÜÊé•Âè£‰∏≠ÊâÄÂ£∞ÊòéÁöÑÊìç‰Ωú„ÄÇÂú®UML‰∏≠ÔºåÁ±ª‰∏éÊé•Âè£‰πãÈó¥ÁöÑÂÆûÁé∞ÂÖ≥Á≥ªÁî®Â∏¶Á©∫ÂøÉ‰∏âËßíÂΩ¢ÁöÑËôöÁ∫øÊù•Ë°®Á§∫„ÄÇ‰æãÂ¶ÇÔºöÂÆö‰πâ‰∫Ü‰∏Ä‰∏™‰∫§ÈÄöÂ∑•ÂÖ∑Êé•Âè£VehicleÔºåÂåÖÂê´‰∏Ä‰∏™ÊäΩË±°Êìç‰Ωúmove()ÔºåÂú®Á±ªShipÂíåÁ±ªCar‰∏≠ÈÉΩÂÆûÁé∞‰∫ÜËØ•move()Êìç‰ΩúÔºå‰∏çËøáÂÖ∑‰ΩìÁöÑÂÆûÁé∞ÁªÜËäÇÂ∞Ü‰ºö‰∏ç‰∏ÄÊ†∑ÔºåÂ¶ÇÂõæ4ÊâÄÁ§∫Ôºö ÂÆûÁé∞ÂÖ≥Á≥ªÂú®ÁºñÁ®ãÂÆûÁé∞Êó∂Ôºå‰∏çÂêåÁöÑÈù¢ÂêëÂØπË±°ËØ≠Ë®Ä‰πüÊèê‰æõ‰∫Ü‰∏çÂêåÁöÑËØ≠Ê≥ïÔºåÂ¶ÇÂú®JavaËØ≠Ë®Ä‰∏≠‰ΩøÁî®implementsÂÖ≥ÈîÆÂ≠óÔºåËÄåÂú®C++/C#‰∏≠‰ΩøÁî®ÂÜíÂè∑‚ÄúÔºö‚ÄùÊù•ÂÆûÁé∞„ÄÇÂõæ4ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 123456789101112131415public interface Vehicle &#123; public void move(); &#125; public class Ship implements Vehicle &#123; public void move() &#123; ‚Ä¶‚Ä¶ &#125; &#125; public class Car implements Vehicle &#123; public void move() &#123; ‚Ä¶‚Ä¶ &#125; &#125;]]></content>
      <categories>
        <category>uml</category>
      </categories>
      <tags>
        <tag>uml</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÊµÖÂá∫UMLÁ±ªÂõæÔºà‰∫åÔºâ]]></title>
    <url>%2Fuml%2Fuml%2F2%2F</url>
    <content type="text"><![CDATA[Á±ª‰∏éÁ±ª‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºà1ÔºâÂú®ËΩØ‰ª∂Á≥ªÁªü‰∏≠ÔºåÁ±ªÂπ∂‰∏çÊòØÂ≠§Á´ãÂ≠òÂú®ÁöÑÔºåÁ±ª‰∏éÁ±ª‰πãÈó¥Â≠òÂú®ÂêÑÁßçÂÖ≥Á≥ªÔºåÂØπ‰∫é‰∏çÂêåÁ±ªÂûãÁöÑÂÖ≥Á≥ªÔºåUMLÊèê‰æõ‰∫Ü‰∏çÂêåÁöÑË°®Á§∫ÊñπÂºè„ÄÇ ÂÖ≥ËÅîÂÖ≥Á≥ªÂÖ≥ËÅî(Association)ÂÖ≥Á≥ªÊòØÁ±ª‰∏éÁ±ª‰πãÈó¥ÊúÄÂ∏∏Áî®ÁöÑ‰∏ÄÁßçÂÖ≥Á≥ªÔºåÂÆÉÊòØ‰∏ÄÁßçÁªìÊûÑÂåñÂÖ≥Á≥ªÔºåÁî®‰∫éË°®Á§∫‰∏ÄÁ±ªÂØπË±°‰∏éÂè¶‰∏ÄÁ±ªÂØπË±°‰πãÈó¥ÊúâËÅîÁ≥ªÔºåÂ¶ÇÊ±ΩËΩ¶ÂíåËΩÆËÉé„ÄÅÂ∏àÂÇÖÂíåÂæíÂºü„ÄÅÁè≠Á∫ßÂíåÂ≠¶ÁîüÁ≠âÁ≠â„ÄÇÂú®UMLÁ±ªÂõæ‰∏≠ÔºåÁî®ÂÆûÁ∫øËøûÊé•ÊúâÂÖ≥ËÅîÂÖ≥Á≥ªÁöÑÂØπË±°ÊâÄÂØπÂ∫îÁöÑÁ±ªÔºåÂú®‰ΩøÁî®Java„ÄÅC#ÂíåC++Á≠âÁºñÁ®ãËØ≠Ë®ÄÂÆûÁé∞ÂÖ≥ËÅîÂÖ≥Á≥ªÊó∂ÔºåÈÄöÂ∏∏Â∞Ü‰∏Ä‰∏™Á±ªÁöÑÂØπË±°‰Ωú‰∏∫Âè¶‰∏Ä‰∏™Á±ªÁöÑÊàêÂëòÂèòÈáè„ÄÇÂú®‰ΩøÁî®Á±ªÂõæË°®Á§∫ÂÖ≥ËÅîÂÖ≥Á≥ªÊó∂ÂèØ‰ª•Âú®ÂÖ≥ËÅîÁ∫ø‰∏äÊ†áÊ≥®ËßíËâ≤ÂêçÔºå‰∏ÄËà¨‰ΩøÁî®‰∏Ä‰∏™Ë°®Á§∫‰∏§ËÄÖ‰πãÈó¥ÂÖ≥Á≥ªÁöÑÂä®ËØçÊàñËÄÖÂêçËØçË°®Á§∫ËßíËâ≤ÂêçÔºàÊúâÊó∂ËØ•ÂêçËØç‰∏∫ÂÆû‰æãÂØπË±°ÂêçÔºâÔºåÂÖ≥Á≥ªÁöÑ‰∏§Á´Ø‰ª£Ë°®‰∏§Áßç‰∏çÂêåÁöÑËßíËâ≤ÔºåÂõ†Ê≠§Âú®‰∏Ä‰∏™ÂÖ≥ËÅîÂÖ≥Á≥ª‰∏≠ÂèØ‰ª•ÂåÖÂê´‰∏§‰∏™ËßíËâ≤ÂêçÔºåËßíËâ≤Âêç‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÂ¢ûÂä†ÔºåÂÖ∂ÁõÆÁöÑÊòØ‰ΩøÁ±ª‰πãÈó¥ÁöÑÂÖ≥Á≥ªÊõ¥Âä†ÊòéÁ°Æ„ÄÇ Â¶ÇÂú®‰∏Ä‰∏™ÁôªÂΩïÁïåÈù¢Á±ªLoginForm‰∏≠ÂåÖÂê´‰∏Ä‰∏™JButtonÁ±ªÂûãÁöÑÊ≥®ÂÜåÊåâÈíÆloginButtonÔºåÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•Ë°®Á§∫‰∏∫ÂÖ≥ËÅîÂÖ≥Á≥ªÔºå‰ª£Á†ÅÂÆûÁé∞Êó∂ÂèØ‰ª•Âú®LoginForm‰∏≠ÂÆö‰πâ‰∏Ä‰∏™Âêç‰∏∫loginButtonÁöÑÂ±ûÊÄßÂØπË±°ÔºåÂÖ∂Á±ªÂûã‰∏∫JButton„ÄÇÂ¶ÇÂõæ1ÊâÄÁ§∫Ôºö Âõæ1ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 12345678public class LoginForm &#123; private JButton loginButton; //ÂÆö‰πâ‰∏∫ÊàêÂëòÂèòÈáè ‚Ä¶‚Ä¶ &#125; public class JButton &#123; ‚Ä¶‚Ä¶ &#125; Âú®UML‰∏≠ÔºåÂÖ≥ËÅîÂÖ≥Á≥ªÈÄöÂ∏∏ÂèàÂåÖÂê´Â¶Ç‰∏ãÂá†ÁßçÂΩ¢ÂºèÔºö ÂèåÂêëÂÖ≥ËÅîÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂÖ≥ËÅîÊòØÂèåÂêëÁöÑ„ÄÇ‰æãÂ¶ÇÔºöÈ°æÂÆ¢(Customer)Ë¥≠‰π∞ÂïÜÂìÅ(Product)Âπ∂Êã•ÊúâÂïÜÂìÅÔºåÂèç‰πãÔºåÂçñÂá∫ÁöÑÂïÜÂìÅÊÄªÊúâÊüê‰∏™È°æÂÆ¢‰∏é‰πãÁõ∏ÂÖ≥ËÅî„ÄÇÂõ†Ê≠§ÔºåCustomerÁ±ªÂíåProductÁ±ª‰πãÈó¥ÂÖ∑ÊúâÂèåÂêëÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÂ¶ÇÂõæ2ÊâÄÁ§∫Ôºö Âõæ2ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 123456789public class Customer &#123; private Product[] products; ‚Ä¶‚Ä¶ &#125; public class Product &#123; private Customer customer; ‚Ä¶‚Ä¶ &#125; ÂçïÂêëÂÖ≥ËÅîÁ±ªÁöÑÂÖ≥ËÅîÂÖ≥Á≥ª‰πüÂèØ‰ª•ÊòØÂçïÂêëÁöÑÔºåÂçïÂêëÂÖ≥ËÅîÁî®Â∏¶ÁÆ≠Â§¥ÁöÑÂÆûÁ∫øË°®Á§∫„ÄÇ‰æãÂ¶ÇÔºöÈ°æÂÆ¢(Customer)Êã•ÊúâÂú∞ÂùÄ(Address)ÔºåÂàôCustomerÁ±ª‰∏éAddressÁ±ªÂÖ∑ÊúâÂçïÂêëÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÂ¶ÇÂõæ3ÊâÄÁ§∫Ôºö Âõæ3ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 12345678public class Customer &#123; private Address address; ‚Ä¶‚Ä¶ &#125; public class Address &#123; ‚Ä¶‚Ä¶ &#125; Ëá™ÂÖ≥ËÅîÂú®Á≥ªÁªü‰∏≠ÂèØËÉΩ‰ºöÂ≠òÂú®‰∏Ä‰∫õÁ±ªÁöÑÂ±ûÊÄßÂØπË±°Á±ªÂûã‰∏∫ËØ•Á±ªÊú¨Ë∫´ÔºåËøôÁßçÁâπÊÆäÁöÑÂÖ≥ËÅîÂÖ≥Á≥ªÁß∞‰∏∫Ëá™ÂÖ≥ËÅî„ÄÇ‰æãÂ¶ÇÔºö‰∏Ä‰∏™ËäÇÁÇπÁ±ª(Node)ÁöÑÊàêÂëòÂèàÊòØËäÇÁÇπNodeÁ±ªÂûãÁöÑÂØπË±°ÔºåÂ¶ÇÂõæ4ÊâÄÁ§∫Ôºö Âõæ4ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 1234public class Node &#123; private Node subNode; ‚Ä¶‚Ä¶ &#125; Â§öÈáçÊÄßÂÖ≥ËÅîÂ§öÈáçÊÄßÂÖ≥ËÅîÂÖ≥Á≥ªÂèàÁß∞‰∏∫ÈáçÊï∞ÊÄß(Multiplicity)ÂÖ≥ËÅîÂÖ≥Á≥ªÔºåË°®Á§∫‰∏§‰∏™ÂÖ≥ËÅîÂØπË±°Âú®Êï∞Èáè‰∏äÁöÑÂØπÂ∫îÂÖ≥Á≥ª„ÄÇÂú®UML‰∏≠ÔºåÂØπË±°‰πãÈó¥ÁöÑÂ§öÈáçÊÄßÂèØ‰ª•Áõ¥Êé•Âú®ÂÖ≥ËÅîÁõ¥Á∫ø‰∏äÁî®‰∏Ä‰∏™Êï∞Â≠óÊàñ‰∏Ä‰∏™Êï∞Â≠óËåÉÂõ¥Ë°®Á§∫„ÄÇ ÂØπË±°‰πãÈó¥ÂèØ‰ª•Â≠òÂú®Â§öÁßçÂ§öÈáçÊÄßÂÖ≥ËÅîÂÖ≥Á≥ªÔºåÂ∏∏ËßÅÁöÑÂ§öÈáçÊÄßË°®Á§∫ÊñπÂºèÂ¶ÇË°®1ÊâÄÁ§∫Ôºö Ë°®Á§∫ÊñπÂºè Â§öÈáçÊÄßËØ¥Êòé 1..1 Ë°®Á§∫Âè¶‰∏Ä‰∏™Á±ªÁöÑ‰∏Ä‰∏™ÂØπË±°Âè™‰∏éËØ•Á±ªÁöÑ‰∏Ä‰∏™ÂØπË±°ÊúâÂÖ≥Á≥ª 0..* Ë°®Á§∫Âè¶‰∏Ä‰∏™Á±ªÁöÑ‰∏Ä‰∏™ÂØπË±°‰∏éËØ•Á±ªÁöÑÈõ∂‰∏™ÊàñÂ§ö‰∏™ÂØπË±°ÊúâÂÖ≥Á≥ª 1..* Ë°®Á§∫Âè¶‰∏Ä‰∏™Á±ªÁöÑ‰∏Ä‰∏™ÂØπË±°‰∏éËØ•Á±ªÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂØπË±°ÊúâÂÖ≥Á≥ª 0..1 Ë°®Á§∫Âè¶‰∏Ä‰∏™Á±ªÁöÑ‰∏Ä‰∏™ÂØπË±°Ê≤°ÊúâÊàñÂè™‰∏éËØ•Á±ªÁöÑ‰∏Ä‰∏™ÂØπË±°ÊúâÂÖ≥Á≥ª m..n Ë°®Á§∫Âè¶‰∏Ä‰∏™Á±ªÁöÑ‰∏Ä‰∏™ÂØπË±°‰∏éËØ•Á±ªÊúÄÂ∞ëmÔºåÊúÄÂ§ön‰∏™ÂØπË±°ÊúâÂÖ≥Á≥ª (m‚â§n) ‰æãÂ¶ÇÔºö‰∏Ä‰∏™ÁïåÈù¢(Form)ÂèØ‰ª•Êã•ÊúâÈõ∂‰∏™ÊàñÂ§ö‰∏™ÊåâÈíÆ(Button)Ôºå‰ΩÜÊòØ‰∏Ä‰∏™ÊåâÈíÆÂè™ËÉΩÂ±û‰∫é‰∏Ä‰∏™ÁïåÈù¢ÔºåÂõ†Ê≠§Ôºå‰∏Ä‰∏™FormÁ±ªÁöÑÂØπË±°ÂèØ‰ª•‰∏éÈõ∂‰∏™ÊàñÂ§ö‰∏™ButtonÁ±ªÁöÑÂØπË±°Áõ∏ÂÖ≥ËÅîÔºå‰ΩÜ‰∏Ä‰∏™ButtonÁ±ªÁöÑÂØπË±°Âè™ËÉΩ‰∏é‰∏Ä‰∏™FormÁ±ªÁöÑÂØπË±°ÂÖ≥ËÅîÔºåÂ¶ÇÂõæ5ÊâÄÁ§∫Ôºö Âõæ5ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 12345678public class Form &#123; private Button[] buttons; //ÂÆö‰πâ‰∏Ä‰∏™ÈõÜÂêàÂØπË±° ‚Ä¶‚Ä¶ &#125; public class Button &#123; ‚Ä¶‚Ä¶ &#125; ËÅöÂêàÂÖ≥Á≥ªËÅöÂêà(Aggregation)ÂÖ≥Á≥ªË°®Á§∫Êï¥‰Ωì‰∏éÈÉ®ÂàÜÁöÑÂÖ≥Á≥ª„ÄÇÂú®ËÅöÂêàÂÖ≥Á≥ª‰∏≠ÔºåÊàêÂëòÂØπË±°ÊòØÊï¥‰ΩìÂØπË±°ÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ΩÜÊòØÊàêÂëòÂØπË±°ÂèØ‰ª•ËÑ±Á¶ªÊï¥‰ΩìÂØπË±°Áã¨Á´ãÂ≠òÂú®„ÄÇÂú®UML‰∏≠ÔºåËÅöÂêàÂÖ≥Á≥ªÁî®Â∏¶Á©∫ÂøÉËè±ÂΩ¢ÁöÑÁõ¥Á∫øË°®Á§∫„ÄÇ‰æãÂ¶ÇÔºöÊ±ΩËΩ¶ÂèëÂä®Êú∫(Engine)ÊòØÊ±ΩËΩ¶(Car)ÁöÑÁªÑÊàêÈÉ®ÂàÜÔºå‰ΩÜÊòØÊ±ΩËΩ¶ÂèëÂä®Êú∫ÂèØ‰ª•Áã¨Á´ãÂ≠òÂú®ÔºåÂõ†Ê≠§ÔºåÊ±ΩËΩ¶ÂíåÂèëÂä®Êú∫ÊòØËÅöÂêàÂÖ≥Á≥ªÔºåÂ¶ÇÂõæ6ÊâÄÁ§∫Ôºö Âú®‰ª£Á†ÅÂÆûÁé∞ËÅöÂêàÂÖ≥Á≥ªÊó∂ÔºåÊàêÂëòÂØπË±°ÈÄöÂ∏∏‰Ωú‰∏∫ÊûÑÈÄ†ÊñπÊ≥ï„ÄÅSetterÊñπÊ≥ïÊàñ‰∏öÂä°ÊñπÊ≥ïÁöÑÂèÇÊï∞Ê≥®ÂÖ•Âà∞Êï¥‰ΩìÂØπË±°‰∏≠ÔºåÂõæ6ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 123456789101112131415161718public class Car &#123; private Engine engine; //ÊûÑÈÄ†Ê≥®ÂÖ• public Car(Engine engine) &#123; this.engine = engine; &#125; //ËÆæÂÄºÊ≥®ÂÖ• public void setEngine(Engine engine) &#123; this.engine = engine; &#125; ‚Ä¶‚Ä¶ &#125; public class Engine &#123; ‚Ä¶‚Ä¶ &#125; ÁªÑÂêàÂÖ≥Á≥ªÁªÑÂêà(Composition)ÂÖ≥Á≥ª‰πüË°®Á§∫Á±ª‰πãÈó¥Êï¥‰ΩìÂíåÈÉ®ÂàÜÁöÑÂÖ≥Á≥ªÔºå‰ΩÜÊòØÂú®ÁªÑÂêàÂÖ≥Á≥ª‰∏≠Êï¥‰ΩìÂØπË±°ÂèØ‰ª•ÊéßÂà∂ÊàêÂëòÂØπË±°ÁöÑÁîüÂëΩÂë®ÊúüÔºå‰∏ÄÊó¶Êï¥‰ΩìÂØπË±°‰∏çÂ≠òÂú®ÔºåÊàêÂëòÂØπË±°‰πüÂ∞Ü‰∏çÂ≠òÂú®ÔºåÊàêÂëòÂØπË±°‰∏éÊï¥‰ΩìÂØπË±°‰πãÈó¥ÂÖ∑ÊúâÂêåÁîüÂÖ±Ê≠ªÁöÑÂÖ≥Á≥ª„ÄÇÂú®UML‰∏≠ÔºåÁªÑÂêàÂÖ≥Á≥ªÁî®Â∏¶ÂÆûÂøÉËè±ÂΩ¢ÁöÑÁõ¥Á∫øË°®Á§∫„ÄÇ‰æãÂ¶ÇÔºö‰∫∫ÁöÑÂ§¥(Head)‰∏éÂò¥Â∑¥(Mouth)ÔºåÂò¥Â∑¥ÊòØÂ§¥ÁöÑÁªÑÊàêÈÉ®ÂàÜ‰πã‰∏ÄÔºåËÄå‰∏îÂ¶ÇÊûúÂ§¥Ê≤°‰∫ÜÔºåÂò¥Â∑¥‰πüÂ∞±Ê≤°‰∫ÜÔºåÂõ†Ê≠§Â§¥ÂíåÂò¥Â∑¥ÊòØÁªÑÂêàÂÖ≥Á≥ªÔºåÂ¶ÇÂõæ7ÊâÄÁ§∫Ôºö Âú®‰ª£Á†ÅÂÆûÁé∞ÁªÑÂêàÂÖ≥Á≥ªÊó∂ÔºåÈÄöÂ∏∏Âú®Êï¥‰ΩìÁ±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ï‰∏≠Áõ¥Êé•ÂÆû‰æãÂåñÊàêÂëòÁ±ªÔºåÂõæ7ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 123456789101112public class Head &#123; private Mouth mouth; public Head() &#123; mouth = new Mouth(); //ÂÆû‰æãÂåñÊàêÂëòÁ±ª &#125; ‚Ä¶‚Ä¶ &#125; public class Mouth &#123; ‚Ä¶‚Ä¶ &#125;]]></content>
      <categories>
        <category>uml</category>
      </categories>
      <tags>
        <tag>uml</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÊµÖÂá∫UMLÁ±ªÂõæÔºà‰∏ÄÔºâ]]></title>
    <url>%2Fuml%2Fuml%2F1%2F</url>
    <content type="text"><![CDATA[Âú®UML 2.0ÁöÑ13ÁßçÂõæÂΩ¢‰∏≠ÔºåÁ±ªÂõæÊòØ‰ΩøÁî®È¢ëÁéáÊúÄÈ´òÁöÑUMLÂõæ‰πã‰∏Ä„ÄÇMartin FowlerÂú®ÂÖ∂Ëëó‰Ωú„ÄäUML Distilled: A Brief Guide to the Standard Object Modeling Language, Third Edition„ÄãÔºà„ÄäUMLÁ≤æÁ≤πÔºöÊ†áÂáÜÂØπË±°Âª∫Ê®°ËØ≠Ë®ÄÁÆÄÊòéÊåáÂçóÔºàÁ¨¨3ÁâàÔºâ„ÄãÔºâ‰∏≠ÊúâËøô‰πà‰∏ÄÊÆµÔºö‚ÄúIf someone were to come up to you in a dark alley and say, ‚ÄòPsst, wanna see a UML diagram?‚Äô that diagram would probably be a class diagram. The majority of UML diagrams I see are class diagrams.‚ÄùÔºà‚ÄúÂ¶ÇÊûúÊúâ‰∫∫Âú®ÈªëÊöóÁöÑÂ∞èÂ∑∑‰∏≠Âêë‰Ω†Ëµ∞Êù•Âπ∂ÂØπ‰Ω†ËØ¥Ôºö‚ÄòÂòøÔºåÊÉ≥‰∏çÊÉ≥Áúã‰∏ÄÂº†UMLÂõæÔºü‚ÄôÈÇ£‰πàËøôÂº†ÂõæÂæàÊúâÂèØËÉΩÂ∞±ÊòØ‰∏ÄÂº†Á±ªÂõæÔºåÊàëÊâÄËßÅËøáÁöÑÂ§ßÈÉ®ÂàÜÁöÑUMLÂõæÈÉΩÊòØÁ±ªÂõæ‚ÄùÔºâÔºåÁî±Ê≠§ÂèØËßÅÁ±ªÂõæÁöÑÈáçË¶ÅÊÄß„ÄÇ Á±ªÂõæÁî®‰∫éÊèèËø∞Á≥ªÁªü‰∏≠ÊâÄÂåÖÂê´ÁöÑÁ±ª‰ª•ÂèäÂÆÉ‰ª¨‰πãÈó¥ÁöÑÁõ∏‰∫íÂÖ≥Á≥ªÔºåÂ∏ÆÂä©‰∫∫‰ª¨ÁÆÄÂåñÂØπÁ≥ªÁªüÁöÑÁêÜËß£ÔºåÂÆÉÊòØÁ≥ªÁªüÂàÜÊûêÂíåËÆæËÆ°Èò∂ÊÆµÁöÑÈáçË¶Å‰∫ßÁâ©Ôºå‰πüÊòØÁ≥ªÁªüÁºñÁ†ÅÂíåÊµãËØïÁöÑÈáçË¶ÅÊ®°Âûã‰æùÊçÆ„ÄÇ Á±ªÁ±ª(Class)Â∞ÅË£Ö‰∫ÜÊï∞ÊçÆÂíåË°å‰∏∫ÔºåÊòØÈù¢ÂêëÂØπË±°ÁöÑÈáçË¶ÅÁªÑÊàêÈÉ®ÂàÜÔºåÂÆÉÊòØÂÖ∑ÊúâÁõ∏ÂêåÂ±ûÊÄß„ÄÅÊìç‰Ωú„ÄÅÂÖ≥Á≥ªÁöÑÂØπË±°ÈõÜÂêàÁöÑÊÄªÁß∞„ÄÇÂú®Á≥ªÁªü‰∏≠ÔºåÊØè‰∏™Á±ªÈÉΩÂÖ∑Êúâ‰∏ÄÂÆöÁöÑËÅåË¥£ÔºåËÅåË¥£ÊåáÁöÑÊòØÁ±ªË¶ÅÂÆåÊàê‰ªÄ‰πàÊ†∑ÁöÑÂäüËÉΩÔºåË¶ÅÊâøÊãÖ‰ªÄ‰πàÊ†∑ÁöÑ‰πâÂä°„ÄÇ‰∏Ä‰∏™Á±ªÂèØ‰ª•ÊúâÂ§öÁßçËÅåË¥£ÔºåËÆæËÆ°ÂæóÂ•ΩÁöÑÁ±ª‰∏ÄËà¨Âè™Êúâ‰∏ÄÁßçËÅåË¥£„ÄÇÂú®ÂÆö‰πâÁ±ªÁöÑÊó∂ÂÄôÔºåÂ∞ÜÁ±ªÁöÑËÅåË¥£ÂàÜËß£Êàê‰∏∫Á±ªÁöÑÂ±ûÊÄßÂíåÊìç‰ΩúÔºàÂç≥ÊñπÊ≥ïÔºâ„ÄÇÁ±ªÁöÑÂ±ûÊÄßÂç≥Á±ªÁöÑÊï∞ÊçÆËÅåË¥£ÔºåÁ±ªÁöÑÊìç‰ΩúÂç≥Á±ªÁöÑË°å‰∏∫ËÅåË¥£„ÄÇËÆæËÆ°Á±ªÊòØÈù¢ÂêëÂØπË±°ËÆæËÆ°‰∏≠ÊúÄÈáçË¶ÅÁöÑÁªÑÊàêÈÉ®ÂàÜÔºå‰πüÊòØÊúÄÂ§çÊùÇÂíåÊúÄËÄóÊó∂ÁöÑÈÉ®ÂàÜ„ÄÇ Âú®ËΩØ‰ª∂Á≥ªÁªüËøêË°åÊó∂ÔºåÁ±ªÂ∞ÜË¢´ÂÆû‰æãÂåñÊàêÂØπË±°(Object)ÔºåÂØπË±°ÂØπÂ∫î‰∫éÊüê‰∏™ÂÖ∑‰ΩìÁöÑ‰∫ãÁâ©ÔºåÊòØÁ±ªÁöÑÂÆû‰æã(Instance)„ÄÇ Á±ªÂõæ(Class Diagram)‰ΩøÁî®Âá∫Áé∞Âú®Á≥ªÁªü‰∏≠ÁöÑ‰∏çÂêåÁ±ªÊù•ÊèèËø∞Á≥ªÁªüÁöÑÈùôÊÄÅÁªìÊûÑÔºåÂÆÉÁî®Êù•ÊèèËø∞‰∏çÂêåÁöÑÁ±ª‰ª•ÂèäÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇ Âú®Á≥ªÁªüÂàÜÊûê‰∏éËÆæËÆ°Èò∂ÊÆµÔºåÁ±ªÈÄöÂ∏∏ÂèØ‰ª•ÂàÜ‰∏∫‰∏âÁßçÔºåÂàÜÂà´ÊòØÂÆû‰ΩìÁ±ª(Entity Class)„ÄÅÊéßÂà∂Á±ª(Control Class)ÂíåËæπÁïåÁ±ª(Boundary Class)Ôºå‰∏ãÈù¢ÂØπËøô‰∏âÁßçÁ±ªÂä†‰ª•ÁÆÄË¶ÅËØ¥ÊòéÔºö ÂÆû‰ΩìÁ±ªÔºöÂÆû‰ΩìÁ±ªÂØπÂ∫îÁ≥ªÁªüÈúÄÊ±Ç‰∏≠ÁöÑÊØè‰∏™ÂÆû‰ΩìÔºåÂÆÉ‰ª¨ÈÄöÂ∏∏ÈúÄË¶Å‰øùÂ≠òÂú®Ê∞∏‰πÖÂ≠òÂÇ®‰Ωì‰∏≠Ôºå‰∏ÄËà¨‰ΩøÁî®Êï∞ÊçÆÂ∫ìË°®ÊàñÊñá‰ª∂Êù•ËÆ∞ÂΩïÔºåÂÆû‰ΩìÁ±ªÊó¢ÂåÖÊã¨Â≠òÂÇ®Âíå‰º†ÈÄíÊï∞ÊçÆÁöÑÁ±ªÔºåËøòÂåÖÊã¨Êìç‰ΩúÊï∞ÊçÆÁöÑÁ±ª„ÄÇÂÆû‰ΩìÁ±ªÊù•Ê∫ê‰∫éÈúÄÊ±ÇËØ¥Êòé‰∏≠ÁöÑÂêçËØçÔºåÂ¶ÇÂ≠¶Áîü„ÄÅÂïÜÂìÅÁ≠â„ÄÇ ÊéßÂà∂Á±ªÔºöÊéßÂà∂Á±ªÁî®‰∫é‰ΩìÁé∞Â∫îÁî®Á®ãÂ∫èÁöÑÊâßË°åÈÄªËæëÔºåÊèê‰æõÁõ∏Â∫îÁöÑ‰∏öÂä°Êìç‰ΩúÔºåÂ∞ÜÊéßÂà∂Á±ªÊäΩË±°Âá∫Êù•ÂèØ‰ª•Èôç‰ΩéÁïåÈù¢ÂíåÊï∞ÊçÆÂ∫ì‰πãÈó¥ÁöÑËÄ¶ÂêàÂ∫¶„ÄÇÊéßÂà∂Á±ª‰∏ÄËà¨ÊòØÁî±Âä®ÂÆæÁªìÊûÑÁöÑÁü≠ËØ≠ÔºàÂä®ËØç+ÂêçËØçÔºâËΩ¨ÂåñÊù•ÁöÑÂêçËØçÔºåÂ¶ÇÂ¢ûÂä†ÂïÜÂìÅÂØπÂ∫îÊúâ‰∏Ä‰∏™ÂïÜÂìÅÂ¢ûÂä†Á±ªÔºåÊ≥®ÂÜåÂØπÂ∫îÊúâ‰∏Ä‰∏™Áî®Êà∑Ê≥®ÂÜåÁ±ªÁ≠â„ÄÇ ËæπÁïåÁ±ªÔºöËæπÁïåÁ±ªÁî®‰∫éÂØπÂ§ñÈÉ®Áî®Êà∑‰∏éÁ≥ªÁªü‰πãÈó¥ÁöÑ‰∫§‰∫íÂØπË±°ËøõË°åÊäΩË±°Ôºå‰∏ªË¶ÅÂåÖÊã¨ÁïåÈù¢Á±ªÔºåÂ¶ÇÂØπËØùÊ°Ü„ÄÅÁ™óÂè£„ÄÅËèúÂçïÁ≠â„ÄÇ Âú®Èù¢ÂêëÂØπË±°ÂàÜÊûêÂíåËÆæËÆ°ÁöÑÂàùÁ∫ßÈò∂ÊÆµÔºåÈÄöÂ∏∏È¶ñÂÖàËØÜÂà´Âá∫ÂÆû‰ΩìÁ±ªÔºåÁªòÂà∂ÂàùÂßãÁ±ªÂõæÔºåÊ≠§Êó∂ÁöÑÁ±ªÂõæ‰πüÂèØÁß∞‰∏∫È¢ÜÂüüÊ®°ÂûãÔºåÂåÖÊã¨ÂÆû‰ΩìÁ±ªÂèäÂÖ∂ÂÆÉ‰ª¨‰πãÈó¥ÁöÑÁõ∏‰∫íÂÖ≥Á≥ª„ÄÇ Á±ªÁöÑUMLÂõæÁ§∫Âú®UML‰∏≠ÔºåÁ±ª‰ΩøÁî®ÂåÖÂê´Á±ªÂêç„ÄÅÂ±ûÊÄßÂíåÊìç‰Ωú‰∏îÂ∏¶ÊúâÂàÜÈöîÁ∫øÁöÑÈïøÊñπÂΩ¢Êù•Ë°®Á§∫ÔºåÂ¶ÇÂÆö‰πâ‰∏Ä‰∏™EmployeeÁ±ªÔºåÂÆÉÂåÖÂê´Â±ûÊÄßname„ÄÅageÂíåemailÔºå‰ª•ÂèäÊìç‰ΩúmodifyInfo()ÔºåÂú®UMLÁ±ªÂõæ‰∏≠ËØ•Á±ªÂ¶ÇÂõæ1ÊâÄÁ§∫Ôºö Âõæ1ÂØπÂ∫îÁöÑJava‰ª£Á†ÅÁâáÊÆµÂ¶Ç‰∏ãÔºö 123456789public class Employee &#123; private String name; private int age; private String email; public void modifyInfo() &#123; ...... &#125; &#125; Âú®UMLÁ±ªÂõæ‰∏≠ÔºåÁ±ª‰∏ÄËà¨Áî±‰∏âÈÉ®ÂàÜÁªÑÊàêÔºö Á¨¨‰∏ÄÈÉ®ÂàÜÊòØÁ±ªÂêçÔºöÊØè‰∏™Á±ªÈÉΩÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂêçÂ≠óÔºåÁ±ªÂêçÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤„ÄÇ Á¨¨‰∫åÈÉ®ÂàÜÊòØÁ±ªÁöÑÂ±ûÊÄß(Attributes)ÔºöÂ±ûÊÄßÊòØÊåáÁ±ªÁöÑÊÄßË¥®ÔºåÂç≥Á±ªÁöÑÊàêÂëòÂèòÈáè„ÄÇ‰∏Ä‰∏™Á±ªÂèØ‰ª•Êúâ‰ªªÊÑèÂ§ö‰∏™Â±ûÊÄßÔºå‰πüÂèØ‰ª•Ê≤°ÊúâÂ±ûÊÄß„ÄÇ UMLËßÑÂÆöÂ±ûÊÄßÁöÑË°®Á§∫ÊñπÂºè‰∏∫Ôºö(ÂèØËßÅÊÄß ÂêçÁß∞:Á±ªÂûã [ = Áº∫ÁúÅÂÄº ])ÂÖ∂‰∏≠Ôºö ÂèØËßÅÊÄß‚ÄùË°®Á§∫ËØ•Â±ûÊÄßÂØπ‰∫éÁ±ªÂ§ñÁöÑÂÖÉÁ¥†ËÄåË®ÄÊòØÂê¶ÂèØËßÅÔºåÂåÖÊã¨ÂÖ¨Êúâ(public)„ÄÅÁßÅÊúâ(private)ÂíåÂèó‰øùÊä§(protected)‰∏âÁßçÔºåÂú®Á±ªÂõæ‰∏≠ÂàÜÂà´Áî®Á¨¶Âè∑+„ÄÅ-Âíå#Ë°®Á§∫„ÄÇ ‚ÄúÂêçÁß∞‚ÄùË°®Á§∫Â±ûÊÄßÂêçÔºåÁî®‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ë°®Á§∫„ÄÇ ‚ÄúÁ±ªÂûã‚ÄùË°®Á§∫Â±ûÊÄßÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂèØ‰ª•ÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºå‰πüÂèØ‰ª•ÊòØÁî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂûã„ÄÇ ‚ÄúÁº∫ÁúÅÂÄº‚ÄùÊòØ‰∏Ä‰∏™ÂèØÈÄâÈ°πÔºåÂç≥Â±ûÊÄßÁöÑÂàùÂßãÂÄº„ÄÇ Á¨¨‰∏âÈÉ®ÂàÜÊòØÁ±ªÁöÑÊìç‰Ωú(Operations)ÔºöÊìç‰ΩúÊòØÁ±ªÁöÑ‰ªªÊÑè‰∏Ä‰∏™ÂÆû‰æãÂØπË±°ÈÉΩÂèØ‰ª•‰ΩøÁî®ÁöÑË°å‰∏∫ÔºåÊòØÁ±ªÁöÑÊàêÂëòÊñπÊ≥ï„ÄÇ UMLËßÑÂÆöÊìç‰ΩúÁöÑË°®Á§∫ÊñπÂºè‰∏∫Ôºö(ÂèØËßÅÊÄß ÂêçÁß∞(ÂèÇÊï∞ÂàóË°®) [ : ËøîÂõûÁ±ªÂûã])ÂÖ∂‰∏≠Ôºö ‚ÄúÂèØËßÅÊÄß‚ÄùÁöÑÂÆö‰πâ‰∏éÂ±ûÊÄßÁöÑÂèØËßÅÊÄßÂÆö‰πâÁõ∏Âêå„ÄÇ ‚ÄúÂêçÁß∞‚ÄùÂç≥ÊñπÊ≥ïÂêçÔºåÁî®‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Ë°®Á§∫„ÄÇ ‚ÄúÂèÇÊï∞ÂàóË°®‚ÄùË°®Á§∫ÊñπÊ≥ïÁöÑÂèÇÊï∞ÔºåÂÖ∂ËØ≠Ê≥ï‰∏éÂ±ûÊÄßÁöÑÂÆö‰πâÁõ∏‰ººÔºåÂèÇÊï∞‰∏™Êï∞ÊòØ‰ªªÊÑèÁöÑÔºåÂ§ö‰∏™ÂèÇÊï∞‰πãÈó¥Áî®ÈÄóÂè∑‚ÄúÔºå‚ÄùÈöîÂºÄ„ÄÇ ‚ÄúËøîÂõûÁ±ªÂûã‚ÄùÊòØ‰∏Ä‰∏™ÂèØÈÄâÈ°πÔºåË°®Á§∫ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÁ±ªÂûãÔºå‰æùËµñ‰∫éÂÖ∑‰ΩìÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåÂèØ‰ª•ÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºå‰πüÂèØ‰ª•ÊòØÁî®Êà∑Ëá™ÂÆö‰πâÁ±ªÂûãÔºåËøòÂèØ‰ª•ÊòØÁ©∫Á±ªÂûã(void)ÔºåÂ¶ÇÊûúÊòØÊûÑÈÄ†ÊñπÊ≥ïÔºåÂàôÊó†ËøîÂõûÁ±ªÂûã„ÄÇ Âú®Á±ªÂõæ2‰∏≠ÔºåÊìç‰Ωúmethod1ÁöÑÂèØËßÅÊÄß‰∏∫public(+)ÔºåÂ∏¶ÂÖ•‰∫Ü‰∏Ä‰∏™ObjectÁ±ªÂûãÁöÑÂèÇÊï∞parÔºåËøîÂõûÂÄº‰∏∫Á©∫(void)ÔºõÊìç‰Ωúmethod2ÁöÑÂèØËßÅÊÄß‰∏∫protected(#)ÔºåÊó†ÂèÇÊï∞ÔºåËøîÂõûÂÄº‰∏∫StringÁ±ªÂûãÔºõÊìç‰Ωúmethod3ÁöÑÂèØËßÅÊÄß‰∏∫private(-)ÔºåÂåÖÂê´‰∏§‰∏™ÂèÇÊï∞ÔºåÂÖ∂‰∏≠‰∏Ä‰∏™ÂèÇÊï∞‰∏∫intÁ±ªÂûãÔºåÂè¶‰∏Ä‰∏™‰∏∫int[]Á±ªÂûãÔºåËøîÂõûÂÄº‰∏∫intÁ±ªÂûã„ÄÇ Áî±‰∫éÂú®JavaËØ≠Ë®Ä‰∏≠ÂÖÅËÆ∏Âá∫Áé∞ÂÜÖÈÉ®Á±ªÔºåÂõ†Ê≠§ÂèØËÉΩ‰ºöÂá∫Áé∞ÂåÖÂê´Âõõ‰∏™ÈÉ®ÂàÜÁöÑÁ±ªÂõæÔºåÂ¶ÇÂõæ3ÊâÄÁ§∫Ôºö]]></content>
      <categories>
        <category>uml</category>
      </categories>
      <tags>
        <tag>uml</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËØ¥ËØ¥ÂàÜÂ∏ÉÂºè‰∫ãÂä°(‰∫î)]]></title>
    <url>%2Fjava%2Fjava%2Ftransaction%2F5%2F</url>
    <content type="text"><![CDATA[‰∏öÂä°ÂõûË°•Âú∫ÊôØ‰∏öÂä°ÂØπËµÑÈáëËøõË°åÊìç‰Ωú ÁÆÄÂåñÊµÅÁ®ãÊï¥‰∏™ËµÑÈáëÂπ≥Âè∞‰ºöÂíåÊîØ‰ªòÂÆùËøõË°å‰∫§‰∫í(ÂÜªÁªìÈáëÈ¢ù,Âá∫Ë¥¶ÈáëÈ¢ù),ÂØπËøô‰∏§‰∏™Âä®‰ΩúÊîØ‰ªòÂÆùÈÉΩ‰ºöËøîÂõûÊàêÂäüÊàñËÄÖÂ§±Ë¥•,ÂΩìÁÑ∂ËøòÊúâÂºÇÂ∏∏ÊµÅÊé•Âè£Ë∂ÖÊó∂(ÂÆûÈôÖÊàêÂäü/ÂÆûÈôÖÂ§±Ë¥•). Ê≠£Â∏∏ÊµÅÁöÑ‰∏öÂä°,Êàë‰ª¨ÈÉΩÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÁöÑËøîÂõûËøõË°åËá™Â∑±‰∏öÂä°ÈÄªËæëÁöÑÂ§ÑÁêÜ,‰ΩÜÊòØÂºÇÂ∏∏ÊµÅÂØπ‰∫éË∞ÉÁî®ÊñπÂÖ∂ÂÆû‰∏çÁü•ÈÅìÂÆûÈôÖÁªìÊûú,Ëøô‰∏™Êó∂ÂÄôÂ∞±ÈúÄË¶ÅËøõË°å‰∏öÂä°Êï∞ÊçÆÂõûË°•,‰∏∞ÂØå‰∏Ä‰∏ãË∞ÉÁî®Êó∂Â∫èÂõæ ÂØπËµÑÈáëËøõË°åÊìç‰Ωú‰ª•Âêé,Â¶ÇÊûúÊúÄÁªàÊòØÊàêÂäüÁöÑËØù,ÈÉΩ‰ºöÂèëÈÄÅÁõ∏Â∫îÁöÑÊàêÂäüÊ∂àÊÅØ,‰∏öÂä°ÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÊé•ÂèóÊ∂àÊÅØËøõË°åÂ§ÑÁêÜ,ÂØπÂ∫îÁöÑÊµÅÁ®ãÂõæ‰∏∫ Ëá™Ë∫´‰∏öÂä°,ÈúÄË¶ÅÁõëÂê¨Ë∞ÉÁî®ÊñπÁöÑ‰∏öÂä°Ê∂àÊÅØ,Âõ†‰∏∫‰ºöÂá∫Áé∞Êé•Âè£ËøîÂõûÂ§±Ë¥•(ÊØîÂ¶ÇËØ¥Êé•Âè£Ë∂ÖÊó∂),‰ΩÜÊòØÂÆûÈôÖÊàêÂäüÁöÑÂú∫ÊôØ,ÈÄöËøáÁõëÂê¨ÊàêÂäüÊ∂àÊÅØËøõË°åÊµÅÁ®ãÂõûÊ∫Ø ÈóÆÈ¢ò Ê∂âÂèäÂºÇÊ≠•Êõ¥Êñ∞ÁöÑÊìç‰Ωú,ÈÉΩ‰ºöÂ≠òÂú®Áü≠ÊöÇÁöÑÁä∂ÊÄÅ‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµ,ÂΩìÊï∞ÊçÆÂ§Ñ‰∫é‰∏≠Èó¥Áä∂ÊÄÅ,ÂèØËÉΩ‰ºöÂá∫Áé∞‰∏öÂä°ÈáçÂ§çÊèê‰∫§ÁöÑÊÉÖÂÜµ,Ëøô‰∏™Â∞±ÈúÄË¶Å‰∏öÂä°‰∏äËßÑÈÅøÁ±ª‰ººÁöÑÈóÆÈ¢ò(ÊØîÂ¶ÇÂØπ‰∫éËµÑÈáë‰ºöÂä†ÂÖ•ÂÆ°Ê†∏ÊµÅÁ®ã)]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>transaction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËØ¥ËØ¥ÂàÜÂ∏ÉÂºè‰∫ãÂä°(Âõõ)]]></title>
    <url>%2Fjava%2Fjava%2Ftransaction%2F4%2F</url>
    <content type="text"><![CDATA[ÊúÄÁªà‰∏ÄËá¥ÊÄß(‰∫å)Âü∫‰∫éMQÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä°Ë°•ÂÅøÊú∫Âà∂Â∫èÂàóÂõæ ÂºÇÂ∏∏Âú∫ÊôØÂ§ÑÁêÜ È¢ÑÂàõÂª∫ËÆ¢ÂçïÂ§±Ë¥•:Â¶ÇÊûúÂÆûÈôÖÈ¢ÑÂàõÂª∫ËÆ¢ÂçïÊàêÂäü,ËÆ¢ÂçïÂÆöÊó∂Ë°•ÂÅøÊú∫Âà∂,ÂÆöÊó∂Âà†Èô§ËøôÈÉ®ÂàÜËÆ¢Âçï,‰∏çÂΩ±ÂìçÊï∞ÊçÆ‰∏ÄËá¥ÊÄß,‰∏ãÂçïÂ§±Ë¥• È¢ÑÊâ£ÂáèÂ∫ìÂ≠òÂ§±Ë¥•:Â¶ÇÊûúÈ¢ÑÊâ£ÂáèÂ∫ìÂ≠òÁúüÂÆûÂ§±Ë¥•,Âàô‰∏ãÂçïÂ§±Ë¥•(ËÆ¢ÂçïÁî±ÂÆöÊó∂Ë°•ÂÅøÊú∫Âà∂ÂÆöÊó∂Âà†Èô§,ÂÖ∂ÂÆÉÂ∫îÁî®ÂèÇÁÖßÂú∫ÊôØ4ÁöÑÂ§ÑÁêÜÊñπÂºè,‰∏ãÂçïÂ§±Ë¥•;Â¶ÇÊûúÂÆûÈôÖÈ¢ÑÊâ£ÂáèÂ∫ìÂ≠òÊàêÂäü,ÂèÇÁÖßÂú∫ÊôØ4ÁöÑÂ§ÑÁêÜÊñπÂºè,‰∏ãÂçïÂ§±Ë¥• ÂÆûÈôÖÂàõÂª∫ËÆ¢ÂçïÂ§±Ë¥•:Â¶ÇÊûúÂàõÂª∫ËÆ¢ÂçïÁúüÂÆûÂ§±Ë¥•(‰∏çÈúÄË¶ÅÂèëÈÄÅ‰∏ãÂçïÂ§±Ë¥•Ê∂àÊÅØ,Èò≤Ê≠¢ÂÆûÈôÖÂàõÂª∫ËÆ¢ÂçïÊàêÂäüÂú∫ÊôØ),ËÆ¢ÂçïÁöÑÈ¢ÑÂ§ÑÁêÜÊï∞ÊçÆÈÄöËøáËÆ¢ÂçïÁöÑÂÆöÊó∂Ë°•ÂÅøÊú∫Âà∂Â∞ùËØïÂà†Èô§(ÈúÄË¶ÅËÄÉËôë‰∫ãÂä°Â§ÑÁêÜÊó∂Èó¥,Â∞ÜË∂ÖËøáÊüê‰∏™Êó∂Èó¥ËåÉÂõ¥ËØ•‰∫ãÂä°ËøòÂ§Ñ‰∫éÈ¢ÑÂ§ÑÁêÜÁä∂ÊÄÅÁöÑËÆ¢ÂçïÂà†Èô§),‰∏ãÂçïÂ§±Ë¥•;Â¶ÇÊûúÂÆûÈôÖÂàõÂª∫ËÆ¢ÂçïÊàêÂäü,ÂÖ∂ÂÆÉÂ∫îÁî®ÂèÇÁÖßÂú∫ÊôØ4ÁöÑÂ§ÑÁêÜÊñπÂºè,‰∏ãÂçïÊàêÂäü(ÊèêÁ§∫Áî®Êà∑‰∏ãÂçïÂ§±Ë¥•) ÂèëÈÄÅËÆ¢ÂçïÂàõÂª∫ÊàêÂäüÊ∂àÊÅØÂ§±Ë¥•/Â∫ìÂ≠òÊúçÂä°Áî±‰∫éÂêÑÁßçÂéüÂõ†Ê≤°ÊúâÊé•Âà∞‰∏ãÂçïÊàêÂäüÊ∂àÊÅØ:Â∫ìÂ≠òÊúçÂä°ÂÆöÊó∂ËΩÆËØ¢Â§ÑÁêÜÊï∞ÊçÆ(ÈúÄË¶ÅËÄÉËôë‰∫ãÂä°Â§ÑÁêÜÊó∂Èó¥,Â∞ÜË∂ÖËøáÊüê‰∏™Êó∂Èó¥ËåÉÂõ¥ËØ•‰∫ãÂä°ËøòÂ§Ñ‰∫éÈ¢ÑÂ§ÑÁêÜÁä∂ÊÄÅÁöÑËÆ¢ÂçïÁ≠õÈÄâÂá∫Êù•),ËØ¢ÈóÆËÆ¢ÂçïÊúçÂä°ÊîπËÆ¢ÂçïIdÂØπÂ∫îÁöÑËÆ¢ÂçïÊòØÂê¶ÂàõÂª∫ÊàêÂäü,Ê†πÊçÆËÆ¢ÂçïÂàõÂª∫ÊàêÂäü‰∏éÂê¶ÈÄâÂèñÁõ∏Â∫îÁöÑ‰∫ãÂä°Ë°•ÂÅøÊú∫Âà∂ ÂíåTCCÁöÑÊØîËæÉ TCCÊòØÊääÊâÄÊúâÁöÑËÆ¢ÂçïÂàõÂª∫Ê≠•È™§Âπ≥Á≠âÁúãÂæÖ,Âè™Ë¶ÅÊúâ‰∏Ä‰∏™Â§±Ë¥•,Êï¥‰∏™‰∏ãÂçïÊµÅÁ®ãÂÖ®ÈÉ®Â§±Ë¥•(ÊØîËæÉTCCÈáåÈù¢ÁöÑconfirmÂ§±Ë¥•ÂíåÂü∫‰∫éMQÂÆûÈôÖÂàõÂª∫ËÆ¢ÂçïÂ§±Ë¥•ÁöÑË°•ÂÅøÈöæÊòìÁ®ãÂ∫¶) TCCÊòØÈÄöËøáÂèëÊ∂àÊÅØÁªôTCCÊúçÂä°Âô®,ÁÑ∂ÂêéÁî±TCCÊúçÂä°Ë∞ÉÁî®Â∫îÁî®ÊúçÂä°;Âü∫‰∫éMQÁöÑÂàÜÂ∏ÉÂºè‰∫ãÂä°Ë°•ÂÅøÊú∫Âà∂,ÊòØÈÄöËøáÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞MQ,ÁÑ∂ÂêéÁî±Â∫îÁî®Ëá™Â∑±ÂéªÁõëÂê¨MQÁöÑ‰∫ã‰ª∂]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>transaction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËØ¥ËØ¥ÂàÜÂ∏ÉÂºè‰∫ãÂä°(‰∏â)]]></title>
    <url>%2Fjava%2Fjava%2Ftransaction%2F3%2F</url>
    <content type="text"><![CDATA[ÊúÄÁªà‰∏ÄËá¥ÊÄß(‰∏Ä)TCCÁÆÄ‰ªãTCCÊòØÁî±ÊîØ‰ªòÂÆùÊû∂ÊûÑÂ∏àÊèê‰æõÁöÑ‰∏ÄÁßçÊüîÊÄßËß£ÂÜ≥ÂàÜÂ∏ÉÂºè‰∫ãÂä°Ëß£ÂÜ≥ÊñπÊ°à,‰∏ªË¶ÅÂåÖÊã¨‰∏â‰∏™Ê≠•È™§: TCCÊµÅÁ®ãTCCÁöÑÂÖ≥ÈîÆÊµÅÁ®ãÂ¶Ç‰∏ãÂõæ(‰ª•‰∏ãÂçïÂíåÊâ£ÂáèÂ∫ìÂ≠ò‰∏∫‰æãÂ≠ê) Q: È¢ÑÁîüÊàêËÆ¢ÂçïÂ§±Ë¥•‰∫Ü,‰∏∫‰ªÄ‰πàË¶ÅÈÄöËøáTCCÊâßË°åÈ¢ÑÂ§ÑÁêÜÊï∞ÊçÆÂõûÊªö?A: ÂèØËÉΩÈ¢ÑÁîüÊàêËÆ¢ÂçïÊàêÂäü,‰ΩÜÊòØÊé•Âè£ËøîÂõûÂ§±Ë¥•(Ë∂ÖÊó∂Â§±Ë¥•),ÊâÄ‰ª•È¢ÑÂ§ÑÁêÜÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÊòØÊúâÈ¢ÑÂ§ÑÁêÜÊï∞ÊçÆ,ÈúÄË¶ÅÊ∏ÖÁêÜ TCCÂºÇÂ∏∏Âú∫ÊôØÂú®Êï¥‰∏™ÊµÅÁ®ã,Êàë‰ª¨‰∏ªË¶ÅÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÊòØcancelÂ§±Ë¥•ÂíåconfirmÂ§±Ë¥•ÂºïËµ∑ÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥Áé∞Ë±° Ê≥®ÊÑè‰∫ãÈ°π TCCÊúçÂä°ÊîØÊåÅÊé•Âè£Â§±Ë¥•ÈáçËØï,ÊâÄ‰ª•ÂØπTCCÊö¥Èú≤ÁöÑÊé•Âè£ÈÉΩÈúÄË¶ÅÊª°Ë∂≥ÂπÇÁ≠âÊÄß(Ê†πÊçÆ‰∫ãÂä°IdÂæàÂ•ΩÊª°Ë∂≥) Âü∫‰∫éTCCÁöÑ‰∏≠ÂøÉÂåñ‰∫ãÂä°‰∏ÄËá¥ÊÄßËß£ÂÜ≥ÊñπÊ≥ï,ÂêÑ‰∏™Â∫îÁî®ÊúçÂä°Âô®Â¶ÇÊûúÈúÄË¶ÅÊÑüÁü•ÊüêÊ¨°‰∫ãÂä°ÊòØÂê¶ÊàêÂäüÁöÑÊàêÊú¨ÂæàÈ´ò,ÊâÄ‰ª•ÂØπ‰∫éËá™Ë∫´ËÄåË®ÄËøõË°å‰∫ãÂä°Ë°•ÂÅøÊàêÊú¨Â∞±‰ºöÂæàÈ´ò.‰∏æ‰∏™‰æãÂ≠ê: ÂêéËÆ∞ ÊòØÂê¶‰∏ÄÂÆöÈúÄË¶ÅTCCÊúçÂä°Âô®? ‰∏ç‰∏ÄÂÆö,ÂèØ‰ª•ËÆ©‰∫§ÊòìÈìæË∑ØÊù•ÂÖÖÂΩìTCCÊúçÂä°Âô®ÁöÑËßíËâ≤,‰ΩÜÊòØÈïøÊúüÊù•Áúã,TCCÁõ∏ÂΩì‰∫éÊòØ‰∏Ä‰∏™ÂÖ¨Áî®ÁöÑÁªÑ‰ª∂,ÊâÄ‰ª•ÂÖ∂ÂÆÉÂú∞Êñπ‰πüÈúÄË¶ÅTCCÂàÜÂ∏ÉÂºè‰∫ãÂä°,ÂèØ‰ª•ÂÖ¨Áî®Ëøô‰∏Ä‰∏™ÁªÑ‰ª∂(‰∫§ÊòìÈìæË∑ØÂèØ‰ª•ÂÆåÊàêTCCÊâÄËÉΩÂÆåÊàêÁöÑ‰∏ÄÂàáÊìç‰Ωú,ÊääTCCÂçïÁã¨ÈÉ®ÁΩ≤‰∏Ä‰∏™ÊúçÂä°,‰ªÖ‰ªÖÊòØËÄÉËôëÊï¥‰∏™Á≥ªÁªüÁöÑÊäΩË±°ÁªìÊûÑÂíåÂäüËÉΩÂ§çÁî®) ËøôÈáåËØ¥ÁöÑÈ¢ÑÂ§ÑÁêÜ,ÊåáÁöÑÊòØ‰ªÄ‰πà? Âú®Êï¥‰∏™ÂàÜÂ∏ÉÂºè‰∫ãÂä°‰∏≠È¢ÑÂ§ÑÁêÜÁöÑÂê´‰πâÂÖ∂ÂÆûÂæàÂπøÊ≥õ,ÊØîÂ¶ÇËÆ¢Âçï,ÊâÄË∞ìÁöÑÈ¢ÑÂ§ÑÁêÜÂ∞±ÊòØÁîüÊàêËÆ¢Âçï,‰ΩÜÊòØÁî®Êà∑ÁúüÂÆûÊòØÁúã‰∏çÂà∞Ëøô‰∫õËÆ¢ÂçïÁöÑ,Ëá≥‰∫éÂÖ∑‰ΩìÂÆûÁé∞ÊòØÂú®‰∏ÄÂº†Êñ∞Ë°®‰∏≠ËÆ∞ÂΩïËøòÊòØÂú®ÂéüÊúâÁöÑËÆ¢ÂçïË°®ÊòØÂä†‰∏äÊ†áËÆ∞‰Ωç,ÂÖ∑‰ΩìÂÆûÁé∞ÊñπÂºèÁî±Ëá™Â∑±ÁªüÁ≠πËÄÉËôë(ÂΩìÁÑ∂ËøòÈúÄË¶ÅËÄÉËôëËÆ∞ÂΩï‰∫ãÂä°Id);ÂÉèÂáèÂ∫ìÂ≠òËøôÁßçÈ¢ÑÂ§ÑÁêÜ,ÂèØ‰ª•Áõ¥Êé•ÂáèÂ∞ëÂéüÂßãÂ∫ìÂ≠ò,ÂÜçÈÄöËøáÂè¶Â§ñ‰∏ÄÂº†Ë°®Êù•ËÆ∞ÂΩïËøôÊ¨°‰∫ãÂä°IdÊìç‰Ωú‰∫ÜÂì™‰∏™SkuÁöÑÂ∫ìÂ≠òÊï∞Èáè,ÂΩìÁÑ∂‰πüÂèØ‰ª•‰∏çÂáèÂ∞ëÂ∫ìÂ≠òÂè™ËÆ∞ÂΩïÊìç‰Ωú,‰ΩÜÊòØËøôÁßçÊñπÂºèÂú®ËÆ°ÁÆóÂÆûÈôÖÂ∫ìÂ≠òÁöÑÊó∂ÂÄôÂ§çÊùÇÂ∫¶‰ºöÊèêÈ´ò(ÈúÄË¶ÅÂáèÊéâÈ¢ÑÂ§ÑÁêÜÁöÑÈÇ£ÈÉ®ÂàÜ)]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>transaction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËØ¥ËØ¥ÂàÜÂ∏ÉÂºè‰∫ãÂä°(‰∫å)]]></title>
    <url>%2Fjava%2Fjava%2Ftransaction%2F2%2F</url>
    <content type="text"><![CDATA[3PC ‰ª•‰∏§Èò∂ÊÆµÊèê‰∫§Êù•ËØ¥Ôºå‰∏ªÊåÅ‰∫∫Êî∂Âà∞‰∏Ä‰∏™ÊèêÊ°àËØ∑Ê±ÇÔºåÊâìÁîµËØùË∑üÊØè‰∏™ÁªÑÂëòËØ¢ÈóÆÊòØÂê¶ÈÄöËøáÂπ∂ÁªüËÆ°ÂõûÂ§çÔºåÁÑ∂ÂêéÂ∞ÜÊúÄÂêéÂÜ≥ÂÆöÊâìÁîµËØùÈÄöÁü•ÂêÑÁªÑÂëò„ÄÇË¶ÅÊòØ‰∏ªÊåÅ‰∫∫Âú®Ë∑üÁ¨¨‰∏Ä‰ΩçÁªÑÂëòÈÄöÂÆåÁîµËØùÂêéÂ§±ÂøÜÔºåËÄåÁ¨¨‰∏Ä‰ΩçÁªÑÂëòÂú®ÂæóÁü•ÁªìÊûúÂπ∂ÊâßË°åÂêéËÄÅ‰∫∫Áó¥ÂëÜÔºåÈÇ£‰πàÂç≥‰ΩøÈáçÊñ∞ÈÄâÂá∫‰∏ªÊåÅ‰∫∫Ôºå‰πüÊ≤°‰∫∫Áü•ÈÅìÊúÄÂêéÁöÑÊèêÊ°àÂÜ≥ÂÆöÊòØ‰ªÄ‰πàÔºå‰πüËÆ∏ÊòØÈÄöËøáÔºå‰πüËÆ∏ÊòØÈ©≥ÂõûÔºå‰∏çÁÆ°Â§ßÂÆ∂ÈÄâÊã©Âì™‰∏ÄÁßçÂÜ≥ÂÆöÔºåÈÉΩÊúâÂèØËÉΩ‰∏éÁ¨¨‰∏Ä‰ΩçÁªÑÂëòÂ∑≤ÊâßË°åËøáÁöÑÁúüÂÆûÂÜ≥ÂÆö‰∏ç‰∏ÄËá¥ÔºåËÄÅÊùøÂ∞±‰ºö‰∏çÂºÄÂøÉËÆ§‰∏∫ÂÜ≥Á≠ñÂ∞èÁªÑÊ≤üÈÄöÊúâÈóÆÈ¢òËÄåËß£Èõá„ÄÇ‰∏âÈò∂ÊÆµÊèê‰∫§Âç≥ÊòØÂºïÂÖ•‰∫ÜÂè¶‰∏Ä‰∏™Ê≠•È™§Ôºå‰∏ªÊåÅ‰∫∫ÊâìÁîµËØùË∑üÁªÑÂëòÈÄöÁü•ËØ∑ÂáÜÂ§áÈÄöËøáÊèêÊ°àÔºå‰ª•ÈÅøÂÖçÊ≤°‰∫∫Áü•ÈÅìÁúüÂÆûÂÜ≥ÂÆöËÄåÈÄ†ÊàêÂÜ≥ÂÆö‰∏ç‰∏ÄËá¥ÁöÑÂ§±‰∏öÂç±Êú∫„ÄÇ‰∏∫‰ªÄ‰πàËÉΩÂ§üËß£ÂÜ≥‰∫åÈò∂ÊÆµÊèê‰∫§ÁöÑÈóÆÈ¢òÂë¢ÔºüÂõûÂà∞ÂàöÂàöÊèêÂà∞ÁöÑÁä∂ÂÜµÔºåÂú®‰∏ªÊåÅ‰∫∫ÈÄöÁü•ÂÆåÁ¨¨‰∏Ä‰ΩçÁªÑÂëòËØ∑ÂáÜÂ§áÈÄöËøáÂêé‰∏§‰∫∫ÊÑèÂ§ñÂ§±ÂøÜÔºåÂç≥‰ΩøÊ≤°‰∫∫Áü•ÈÅìÂÖ®‰ΩìÂú®Á¨¨‰∏ÄÈò∂ÊÆµÁöÑÂÜ≥ÂÆö‰∏∫‰ΩïÔºåÂÖ®‰ΩìÂÜ≥Á≠ñÁªÑÂëò‰ªçÂèØ‰ª•ÈáçÊñ∞ÂçèË∞ÉËøáÁ®ãÊàñÁõ¥Êé•Âê¶ÂÜ≥Ôºå‰∏ç‰ºöÊúâ‰∏ç‰∏ÄËá¥ÂÜ≥ÂÆöËÄåÂ§±‰∏ö„ÄÇÈÇ£‰πàÂΩì‰∏ªÊåÅ‰∫∫ÈÄöÁü•ÂÆåÂÖ®‰ΩìÁªÑÂëòËØ∑ÂáÜÂ§áÈÄöËøáÂπ∂ÂæóÂà∞Â§ßÂÆ∂ÁöÑÂÜçÊ¨°Á°ÆÂÆöÂêéËøõÂÖ•Á¨¨‰∏âÈò∂ÊÆµÔºåÂΩì‰∏ªÊåÅ‰∫∫ÈÄöÁü•Á¨¨‰∏Ä‰ΩçÁªÑÂëòËØ∑ÈÄöËøáÊèêÊ°àÂêé‰∏§‰∫∫ÊÑèÂ§ñÂ§±ÂøÜÔºåËøôÊó∂ÂÄôÂÖ∂‰ªñÁªÑÂëòÂÜçÈáçÊñ∞ÈÄâÂá∫‰∏ªÊåÅ‰∫∫ÂêéÔºå‰ªçÂèØ‰ª•Áü•ÈÅìÁõÆÂâçËá≥Â∞ëÊòØÂ§Ñ‰∫éÂáÜÂ§áÈÄöËøáÊèêÊ°àÈò∂ÊÆµÔºåË°®Á§∫Á¨¨‰∏ÄÈò∂ÊÆµÂ§ßÂÆ∂ÈÉΩÂ∑≤ÁªèÂÜ≥ÂÆöË¶ÅÈÄöËøá‰∫ÜÔºåÊ≠§Êó∂‰æøÂèØ‰ª•Áõ¥Êé•ÈÄöËøá ‰ª•‰∏äËµÑÊñôÊù•Ëá™wikiÁôæÁßë,ËØ¥ÊòéÂú®2PCËøáÁ®ã‰∏≠,Âú®Á¨¨‰∫å‰∏™Èò∂ÊÆµÂΩìÂçèË∞ÉËÄÖÈÄöÁü•Á¨¨‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØA,Âπ∂‰∏îÁ¨¨‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÂàöÂ•ΩÊâßË°åÂÆåÊØï‰ª•Âêé,Ëøô‰∏§Âè∞Êú∫Âô®ÈÉΩDownÊéâ‰∫Ü,ËÄåÊÅ∞Â•ΩËøôN-1Âè∞Êú∫Âô®ÊäïÁöÑÈÉΩÊòØYesÁ•®(ÈÉΩÂ§Ñ‰∫é‰∏çÁ°ÆÂÆöÁöÑÁä∂ÊÄÅ),Ëøô‰∏™Êó∂ÂÄôÊï¥‰∏™‰∫ãÂä°Â∞±‰ºöË¢´Block,ÊöÇÊó∂Áß∞‰πã‰∏∫ËÅãÂìë‰∫ã‰ª∂ ÂÆ¢Êà∑Á´ØAÊäïÁöÑÊòØAbortÁ•®,ÈÇ£‰πàÁî±‰∫éÂçèË∞ÉËÄÖÂíåÂÆ¢Êà∑Á´ØAÈÉΩDownÊéâ,ÈÇ£‰πàÊï¥‰∏™‰∫ãÂä°Â∫îËØ•ÊòØabort ÂÆ¢Êà∑Á´ØAÊäïÁöÑÊòØcommitÁ•®,Âπ∂‰∏îÂçèË∞ÉËÄÖÂÜ≥ÂÆöcommit,ÈÇ£‰πàÊï¥‰∏™‰∫ãÂä°Â∫îËØ•ÊòØcommit ÂÆ¢Êà∑Á´ØAÊäïÁöÑÊòØcommitÁ•®,Âπ∂‰∏îÂçèË∞ÉËÄÖÁî±‰∫éËá™Ë∫´ÁöÑÂéüÂõ†ÂÜ≥ÂÆöabort,ÈÇ£‰πàÊï¥‰∏™‰∫ãÂä°Â∫îËØ•ÊòØabort Âú®3PC‰∏≠ÂºïÂÖ•‰∫Ü‰∏Ä‰∏™È¢ÑÊèê‰∫§ÁöÑÁä∂ÊÄÅ ÂΩìÂú®Á¨¨‰∫åÈò∂ÊÆµÂá∫Áé∞ËÅãÂìë‰∫ã‰ª∂,ÈÇ£‰πàËøôN-1Âè∞Êú∫Âô®ÂèØ‰ª•Ê†πÊçÆË∂ÖÊó∂Êú∫Âà∂Áõ¥Êé•abortÊéâ,Âõ†‰∏∫ÂÆ¢Êà∑Á´ØAÂ¶ÇÊûúÊèê‰∫§‰∫Ü‰∫ãÂä°,Âè™ÊòØÈ¢ÑÊèê‰∫§,ÂΩìËØ•Êú∫Âô®ÈáçÂêØ‰ª•ÂêéÂè™Ë¶ÅËØ¢ÈóÆÂë®ËæπÊú∫Âô®‰∫ãÂä°Áä∂ÊÄÅ,ÁÆÄÂçïÁöÑÂ∞Ü‰∫ãÂä°ÂõûÊªöÊàñËÄÖÊèê‰∫§‰∫ãÂä°,Â∞±ËÉΩ‰øùÊåÅ‰∫ãÂä°ÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄß ÂΩìËøõË°åÂà∞Á¨¨‰∏âÈò∂ÊÆµÁöÑÊó∂ÂÄô,Â¶ÇÊûúÂèëÁîüËÅãÂìë‰∫ã‰ª∂,ÈÇ£‰πàÂÖ∂ÂÆÉÂ§Ñ‰∫é„Äå‰∏çÁ°ÆÂÆöÁä∂ÊÄÅ„ÄçÁöÑÂÆ¢Êà∑Á´Ø‰ºöÁõ¥Êé•ÊâßË°åcommit,ËÄå‰∏ç‰ºöÂÉè2PC‰∏ÄÊ†∑ÂØºËá¥‰∫ãÂä°block,‰ΩÜÊòØËøôÊ†∑‰ºöÊúâ‰∏Ä‰∏™È£éÈô©(ËøõÂÖ•Âà∞Á¨¨‰∏â‰∏™Èò∂ÊÆµËØ¥ÊòéÂÆ¢Êà∑Á´ØÂú®Á¨¨‰∏ÄÈò∂ÊÆµÊäïÁöÑÈÉΩÊòØYes),Âõ†‰∏∫Âú®ËÅãÂìë‰∫ã‰ª∂‰∏≠,ÈÇ£Âè∞DownÊéâÁöÑÊú∫Âô®Âú®Á¨¨‰∫åÈò∂ÊÆµ‰∏≠ÁªôÂçèË∞ÉËÄÖÂèëÈÄÅÁöÑ‰∏çÊòØprepared,Ëøô‰∏™Êó∂ÂÄôÂçèË∞ÉËÄÖÊî∂Âà∞Ê∂àÊÅØÁªôÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊòØabortÂëΩ‰ª§.ÊâÄ‰ª•3PCÂè™ÊòØ‰πêËßÇÁöÑËÆ§‰∏∫Âè™Ë¶Å‰Ω†Á¨¨‰∏ÄÈò∂ÊÆµÂ§ßÂÆ∂ÊäïÁöÑÈÉΩÊòØYes,ÈÇ£‰πàÊúÄÂêéÊàêÂäüÊèê‰∫§ÁöÑÂá†ÁéáÂæàÂ§ß]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>transaction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËØ¥ËØ¥ÂàÜÂ∏ÉÂºè‰∫ãÂä°(‰∏Ä)]]></title>
    <url>%2Fjava%2Fjava%2Ftransaction%2F1%2F</url>
    <content type="text"><![CDATA[2PC(‰∏§Èò∂ÊÆµ‰∫ãÂä°Êèê‰∫§)‰∏§Èò∂ÊÆµ‰∫ãÂä°Êèê‰∫§ÁÆÄÂåñÂõæ ‰∏§Èò∂ÊÆµ‰∫ãÂä°Êèê‰∫§ÂºÇÂ∏∏ÁÇπ ËäÇÁÇπÊú¨Ë∫´ÊïÖÈöú(ÊØîÂ¶ÇDownÊú∫) ËäÇÁÇπ‰πãÈó¥ÈÄö‰ø°ÊïÖÈöú ‰∏§Èò∂ÊÆµ‰∫ãÂä°Êèê‰∫§ÈîôËØØÁÇπÂàÜÊûê ËØ¥Êòé Âõæ‰∏≠ÊúâÈóÆÂè∑ÁöÑÊù°ÁõÆ,ÊòØÊàë‰∏çÁ°ÆÂÆöÁöÑÂú∞Êñπ,‰ΩÜÊòØ‰∏çÂΩ±ÂìçËøô‰∏™ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÁöÑÁªìÊûú Âõæ‰∏≠ÁöÑÊÑüÂèπÂè∑Êù°ÁõÆ,‰∏™‰∫∫ÊÑüËßâÂÖ∂ÂÆû‰πüÊòØÂÖÅËÆ∏ÂÖàÂèëÊ∂àÊÅØÂÜçËÆ∞ÂΩïÊó•ÂøóÁöÑ,‰ΩÜÊòØÂ¶ÇÊûúËøôÊ†∑Â≠êÂÅö‰ª•ÂêéÂèëÁîüDownÊú∫,ÂÆ¢Êà∑Á´ØÊàñËÄÖTMÈÉΩÈúÄË¶ÅÂêëÂÖ∂ÂÆÉÊú∫Âô®ËØ¢ÈóÆÁªìÊûúÊâçËÉΩÂæóÂà∞ÁªìËÆ∫(ËÄåËøôÊ†∑Â≠êÂÅöÁöÑËØù‰ºöÂ§ßÂ§ßÂä†ÈïøÂàÜÂ∏É‰∫ãÂä°ÁöÑÈòªÂ°ûÊó∂Èó¥Âíå‰∫ãÂä°Â§ÑÁêÜÁöÑÂ§çÊùÇÂ∫¶,ÂêåÊó∂ËøôÊ†∑ÂÅö‰ºöÊúâ‰∏Ä‰∏™Ëá¥ÂëΩÁöÑÁº∫Èô∑,ÊäπÈô§‰∫Ü‰∏ÄÈÉ®ÂàÜÂèØ‰ª•Ëá™ÊÅ¢Â§çÂú∫ÊôØ„ÄÇ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>transaction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sonarqubeÂíåmvnÊï¥Âêà]]></title>
    <url>%2Fjava%2Fjava%2Fsonarqube%2F1%2F</url>
    <content type="text"><![CDATA[SonarQube(Sonar)ÊòØ‰∏Ä‰∏™Áî®‰∫éÁÆ°ÁêÜ‰ª£Á†ÅË¥®ÈáèÁöÑÂºÄÊ∫êÂπ≥Âè∞„ÄÇSonarQubeÁõÆÂâçÂ∑≤ÊîØÊåÅË∂ÖËøá20Áßç‰∏ªÊµÅÁºñÁ®ãËØ≠Ë®ÄÔºåÂÆÉÁÆ°ÁêÜÁöÑ‰ª£Á†ÅË¥®Èáè‰∏ªË¶ÅÊ∂âÂèä7‰∏™Áª¥Â∫¶:Êû∂ÊûÑ‰∏éËÆæËÆ°„ÄÅÈáçÂ§ç„ÄÅÂçïÂÖÉÊµãËØï„ÄÅÂ§çÊùÇÂ∫¶„ÄÅÊΩúÂú®ÁöÑbug„ÄÅ‰ª£Á†ÅÊ†áÂáÜ„ÄÅÊ≥®Èáä„ÄÇ Êú¨ÊñáÔºåÁ¨îËÄÖÂ∞ÜÂõ¥ÁªïÊê≠Âª∫SonarQubeËøôÊ†∑ÁöÑ‰ª£Á†ÅË¥®ÈáèÁÆ°ÁêÜÂπ≥Âè∞Ëøô‰∏™‰∏ªÈ¢òÂ±ïÂºÄÔºåÁªìÂêàjava‰ª£Á†ÅÂÆû‰æã‰∏ÄÊ≠•Ê≠•ËÆ≤Ëø∞ÂÖ∑‰ΩìÁöÑËøáÁ®ãÔºåÂÖ∂‰∏≠Ê∂âÂèäSonarÁöÑ‰∏ãËΩΩÂÆâË£Ö„ÄÅÂàõÂª∫ÂØπÂ∫îMysqlÊï∞ÊçÆÂ∫ì‰ª•ÂèäËøêË°åÂíåÁÆ°ÁêÜÔºåÂπ∂ÂØπÂÆûË∑µËøáÁ®ã‰∏≠Âá∫Áé∞ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òËøõË°å‰∫ÜÂàÜÊûêÂíåËß£ÂÜ≥„ÄÇ Ê≥®ÔºöÊú¨Êñá‰∏≠ÊâÄÊúâÁöÑÂÆûË∑µÈÉΩÊòØÂú®DockerËôöÊãüÊú∫‰∏ãËøõË°åÔºå‰ΩÜÁõÆÊµãÂêåÊ†∑ÈÄÇÁî®‰∫éÂêÑ‰∏™Âπ≥Âè∞„ÄÇ ÂÆâË£ÖpostgresÊï∞ÊçÆÂ∫ì 12345678910postgres: image: registry.cn-shenzhen.aliyuncs.com/zhouqi/postgres:1.0 environment: - POSTGRES_USER=root - POSTGRES_PASSWORD=000000 ports: - "5432:5432" container_name: postgres ÂÆâË£Ösonarqube 1234567891011121314sonarqube: image: registry.cn-shenzhen.aliyuncs.com/zhouqi/sonarqube:2.0 depends_on: - postgres environment: - SONARQUBE_JDBC_USERNAME=root - SONARQUBE_JDBC_PASSWORD=000000 - SONARQUBE_JDBC_URL=jdbc:postgresql://192.168.137.60/sonar ports: - "9000:9000" - "9092:9092" container_name: sonarqube ÈÖçÁΩÆmaven 12345678910111213141516171819&lt;settings&gt; &lt;pluginGroups&gt; &lt;pluginGroup&gt;org.sonarsource.scanner.maven&lt;/pluginGroup&gt; &lt;/pluginGroups&gt; &lt;profiles&gt; &lt;profile&gt; &lt;id&gt;sonar&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;/activation&gt; &lt;properties&gt; &lt;!-- Optional URL to server. Default value is http://localhost:9000 --&gt; &lt;sonar.host.url&gt; http://myserver:9000 &lt;/sonar.host.url&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;/profiles&gt;&lt;/settings&gt; ideaËøêË°å 12mvn installmvn sonar:sonar]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>sonar</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7ÂçáÁ∫ßÂêéÊó†Ê≥ïÈáçÂêØÊàñÂÖ≥Êú∫Ëß£ÂÜ≥ÂäûÊ≥ï]]></title>
    <url>%2Flinux%2Flinux%2Fcentos-1%2F</url>
    <content type="text"><![CDATA[Áî±‰∫éCentOS7Êñ∞ÂèëÂ∏ÉÁöÑyumÊ∫êÂçáÁ∫ßÂåÖ‰∏≠systemdÂÖ≥Êú∫ÊµÅÁ®ãÂà§Êñ≠Êù°‰ª∂ÂèëÁîü‰∫ÜÂèòÂåñÔºåÂèØËÉΩ‰ºöÂØºËá¥centos7ÂçáÁ∫ßÂêéÔºåÊúçÂä°Âô®ÈáçÂêØÊó∂Âç°Ê≠ª„ÄÇÊñ∞ÂèëÂ∏ÉÁöÑsystemdËøõÁ®ãÁöÑÂà§Êñ≠Êõ¥Âä†‰∏•Ê†ºÔºåÂ¶ÇÊûúÊüê‰∫õËøõÁ®ã‰∏çÂìçÂ∫îSIGTERM‰ø°Âè∑ÔºåÂèØËÉΩ‰ºöÂØºËá¥ÈáçÂêØÊòØÊåÇÊ≠ª„ÄÇËØ•ÈóÆÈ¢òÂíå‰∏öÂä°ËøõÁ®ãÂØπSIGTERM‰ø°Âè∑ÁöÑÂ§ÑÁêÜÊúâÂÖ≥„ÄÇ ÊâßË°åyum update systemdÔºàÊàñËÄÖyum updateÔºâÂ∞ÜsystemdÁ≥ªÂàóËΩØ‰ª∂ÂåÖÊõ¥Êñ∞Âà∞219-19.el7ÁâàÊú¨‰πãÂêéÔºåreboot‰ºöÂá∫Áé∞Â¶Ç‰∏ãÂç°Êú∫ÁïåÈù¢ÂØºËá¥Á≥ªÁªüÊåÇ‰ΩèÔºåÊó†Ê≥ïÈáçÂêØÔºö Áé∞Ë±°Ôºö Êü•ËØ¢ÁâàÊú¨ÂåÖÔºö Ëß£ÂÜ≥ÂäûÊ≥ïÔºö Êñ∞Âª∫/etc/systemd/system/rc-local.serviceÂπ∂ÂÜôÂÖ•Ôºö 12345678910[Unit]Description=/etc/rc.d/rc.local CompatibilityConditionFileIsExecutable=/etc/rc.d/rc.localAfter=network.target[Service]Type=forkingExecStart=/etc/rc.d/rc.local startTimeoutSec=5RemainAfterExit=yes Â§á‰ªΩ/etc/systemd/system.conf1cp -a /etc/systemd/system.conf /etc/systemd/system.conf_bak ‰øÆÊîπÊñá‰ª∂1sed -i 's/#DefaultTimeoutStopSec=90s/DefaultTimeoutStopSec=30s/g' /etc/systemd/system.conf ÈáçÊñ∞Âä†ËΩΩ1systemctl daemon-reload]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈÄÇÈÖçÂô®Ê®°Âºè‰πãÂØπË±°ÈÄÇÈÖçÂô®]]></title>
    <url>%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2Fdesign%2Fpattern-1%2F</url>
    <content type="text"><![CDATA[ÈóÆÈ¢òÂØºÂÖ•ÔºöÊØîÂ¶ÇÊúâAÂûãËû∫ÊØçÂíåBÂûãËû∫ÊØçÔºåÈÇ£‰πàÁî®Êà∑ÂèØ‰ª•ÂÜçAÂûãËû∫ÊØç‰∏äÁõ¥Êé•‰ΩøÁî®ÊåâÁùÄAÂûãËû∫ÊØçÁîü‰∫ßÁöÑAÂûãËû∫‰∏ùÔºåÂêåÊ†∑‰πüÂèØ‰ª•Âú®BÂûãËû∫ÊØç‰∏äÁõ¥Êé•‰ΩøÁî®ÊåâÁùÄBÂûãËû∫ÊØçÊ†áÂáÜÁîü‰∫ßÁöÑBÂûãËû∫‰∏ù„ÄÇ‰ΩÜÊòØÁî±‰∫éAÂûãËû∫ÊØçÂíåBÂûãËû∫ÊØçÁöÑÊ†áÂáÜ‰∏ç‰∏ÄÊ†∑ÔºåÁî®Êà∑Âú®AÂûãËû∫ÊØç‰∏ä‰∏çËÉΩÁõ¥Êé•‰ΩøÁî®BÂûãÁöÑËû∫‰∏ùÔºåÂèç‰πã‰πü‰∏ÄÊ†∑„ÄÇËØ•Â¶Ç‰ΩïËææÂà∞Ëøô‰∏™ÁõÆÁöÑÂë¢Ôºü ‰ΩøÁî®ÈÄÇÈÖçÂô®Â∞±ÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºöÁîü‰∫ß‰∏ÄÁßç‚ÄúAÂûãËû∫ÊØçÈÄÇÈÖçÂô®‚ÄùÔºåËøôÁßçAÂûãËû∫ÊØçÈÄÇÈÖçÂô®ÁöÑÂâçÁ´ØÁ¨¶ÂêàAÂûãËû∫ÊØçÊ†áÂáÜË¶ÅÊ±ÇÔºåÂèØ‰ª•ÊãßÂú®AÂûãËû∫ÊØç‰∏äÔºåÂêéÁ´ØÂèàÁÑäÊé•‰∫Ü‰∏Ä‰∏™BÂûãËû∫ÊØç„ÄÇËøôÊ†∑Áî®Êà∑Â∞±ÂèØ‰ª•ÂÄüÂä©AÂûãËû∫ÊØçÈÄÇÈÖçÂô®Âú®AÂûãËû∫ÊØç‰∏ä‰ΩøÁî®BÂûãÁöÑËû∫‰∏ù‰∫Ü„ÄÇ ÈÄÇÈÖçÂô®Ê®°ÂºèÂèàÁß∞‰∏∫ÂåÖË£ÖÂô®ÔºåÊòØÁî®Êù•Â∞Ü‰∏Ä‰∏™Á±ªÁöÑÊé•Âè£ËΩ¨Êç¢ÊàêÂÆ¢Êà∑Â∏åÊúõÁöÑÂè¶Â§ñ‰∏Ä‰∏™Êé•Âè£„ÄÇËøôÂèØ‰ª•‰ΩøÂæóÂéüÊú¨Áî±‰∫éÊé•Âè£‰∏çÂÖºÂÆπËÄå‰∏çËÉΩ‰∏ÄËµ∑Â∑•‰ΩúÁöÑÈÇ£‰∫õÁ±ªÂèØ‰ª•‰∏ÄËµ∑Â∑•‰Ωú„ÄÇÈÄÇÈÖçÂô®Ê®°ÂºèÁöÑÂÖ≥ÈîÆÊòØÂª∫Á´ã‰∏Ä‰∏™ÈÄÇÈÖçÂô®ÔºåËøô‰∏™ÈÄÇÈÖçÂô®ÂÆûÁé∞‰∫ÜÁõÆÊ†áÊé•Âè£Âπ∂‰∏îÂåÖÂê´‰∫ÜË¢´ÈÄÇÈÖçËÄÖÁöÑÂºïÁî®„ÄÇ ÈÄÇÈÖçÂô®Ê®°ÂºèÁöÑ‰∏âÁßçËßíËâ≤Ôºö ÁõÆÊ†áÔºöÁõÆÊ†áÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåËØ•Êé•Âè£ÊòØÂÆ¢Êà∑ÊÉ≥Ë¶Å‰ΩøÁî®ÁöÑÊé•Âè£„ÄÇ Ë¢´ÈÄÇÈÖçËÄÖÔºöË¢´ÈÄÇÈÖçËÄÖÊòØ‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÊé•Âè£ÊàñÊäΩË±°Á±ªÔºåËøô‰∏™Êé•Âè£Êé•Âè£ÊàñËÄÖÊäΩË±°Á±ªÈúÄË¶ÅÈÄÇÈÖç„ÄÇ ÈÄÇÈÖçÂô®ÔºöÈÄÇÈÖçÂô®ÊòØ‰∏Ä‰∏™Á±ªÔºåËØ•Á±ªÂÆûÁé∞‰∫ÜÁõÆÊ†áÊé•Âè£Âπ∂‰∏îÂåÖÂê´ÊúâË¢´ÈÄÇÈÖçËÄÖÁöÑÂºïÁî®ÔºåÂç≥ÈÄÇÈÖçÂô®ÁöÑËÅåË¥£ÊòØÂØπÈÄÇÈÖçËÄÖÊé•Âè£ÊàñÊäΩË±°Á±ª‰∏éÁõÆÊ†áÊé•Âè£ËøõË°åÈÄÇÈÖç„ÄÇ ‰ª•‰∏ãÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁöÑÈóÆÈ¢òÊù•ÊèèËø∞ÈÄÇÈÖçÂô®Ê®°Âºè‰∏≠ÊâÄÊ∂âÂèäÁöÑÂêÑ‰∏™ËßíËâ≤„ÄÇ ÂÆû‰æãÁî®Êà∑Â∑≤ÁªèÊúâ‰∏Ä‰∏™‰∏§Âé¢ÁöÑÊèíÂ∫ßÔºå‰ΩÜÊòØÊúÄËøëÁî®Êà∑ÂèàÊúâ‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑ‰∏âÂé¢ÊèíÂ∫ß„ÄÇÁî®Êà∑Áé∞Êúâ‰∏ÄÂè∞Ê¥óË°£Êú∫Âíå‰∏ÄÂè∞ÁîµËßÜÊú∫ÔºåÊ¥óË°£Êú∫ÊòØ‰∏âÂé¢ÊèíÂ§¥ÔºåËÄåÁîµËßÜÊú∫ÊòØ‰∏§Âé¢ÊèíÂ§¥„ÄÇÁé∞Âú®Áî®Êà∑ÊÉ≥Áî®ÂøÉÁöÑ‰∏âÂé¢ÊèíÂ∫ßÊù•‰ΩøÁî®Ê¥óË°£Êú∫ÂíåÁîµËßÜÊú∫ÔºåÂç≥Áî®ÂøÉÁöÑ‰∏âÂé¢ÊèíÂ∫ß‰∏∫Ê¥óË°£Êú∫ÂíåÁîµËßÜÊú∫Êé•ÈÄöÁîµÊµÅ„ÄÇ ÈíàÂØπ‰ª•‰∏äÈóÆÈ¢òÔºå‰ΩøÁî®ÈÄÇÈÖçÂô®Ê®°ÂºèËÆæËÆ°Ëã•Âπ≤‰∏™Á±ª„ÄÇ ÁõÆÊ†á Êú¨ÈóÆÈ¢òÊòØ‰ΩøÁî®‰∏âÂé¢ÊèíÂ∫ßÊù•‰∏∫ÁîµËßÜÊú∫ÂíåÊ¥óË°£Êú∫Êé•ÈÄöÁîµÊµÅÔºåÊâÄ‰ª•ÁõÆÊ†áÊòØ‰∏âÂé¢ÊèíÂ∫ß„ÄÇÊää‰∏âÂé¢ÊèíÂ∫ßËÆæÁΩÆ‰∏∫‰∏Ä‰∏™Êé•Âè£Ôºö 123456package com.adatpe;//ÈÄÇÈÖçÁõÆÊ†áÔºö‰∏âÁõ∏ÊèíÂ∫ßpublic interface ThreeElectricOutlet &#123; void connectElectricCurrent();&#125; Ë¢´ÈÄÇÈÖçËÄÖ ÂØπ‰∫éÊú¨ÈóÆÈ¢òÔºåÁî®Êà∑ÊòØÊÉ≥Ë¶ÅÁî®‰∏âÂé¢ÊèíÂ∫ß‰∏∫‰∏§Âé¢ÊèíÂ§¥ÁöÑÁîµËßÜÊú∫Êé•ÈÄöÁîµÊµÅÔºåÊâÄ‰ª•Ë¢´ÈÄÇÈÖçËÄÖÂ∫îËØ•ÊòØ‰∏§Âé¢ÊèíÂ∫ßÔºå‰πüËÆæÁΩÆ‰∏∫‰∏Ä‰∏™Êé•Âè£Ôºö 123456package com.adatpe;//Ë¢´ÈÄÇÈÖçËÄÖÔºö‰∏§Áõ∏ÊèíÂ∫ßpublic interface TwoElectricOutlet &#123; void connectElectricCurrent();&#125; ÈÄÇÈÖçÂô® ËØ•ÈÄÇÈÖçÂô®ÂÆûÁé∞‰∫ÜÁõÆÊ†áÊé•Âè£‰∏âÂé¢ÊèíÂ∫ßThreeElectricOutletÔºåÂêåÊó∂ÂèàÂåÖÂê´‰∫Ü‰∏§Âé¢ÊèíÂ∫ßTwoElectricOutletÁöÑÂºïÁî®Ôºö 1234567891011121314package com.adatpe;//ÈÄÇÈÖçÂô®ÔºöÂÆûÁé∞ÁõÆÊ†áÊé•Âè£public class ThreeElectricAdapter implements ThreeElectricOutlet &#123; //ÈÄÇÈÖçÂô®ÂåÖÂê´Ë¢´ÈÄÇÈÖçËÄÖÁöÑÂºïÁî® private TwoElectricOutlet outlet; public ThreeElectricAdapter(TwoElectricOutlet outlet) &#123; this.outlet = outlet; &#125; public void connectElectricCurrent() &#123; outlet.connectElectricCurrent(); &#125;&#125; ‰∏ãÂàóÂ∫îÁî®Á®ãÂ∫è‰∏≠ÔºåApplication.java‰ΩøÁî®‰∫ÜÈÄÇÈÖçÂô®Ê®°Âºè‰∏≠ÊâÄÊ∂âÂèäÁöÑÁ±ªÔºåÂ∫îÁî®Á®ãÂ∫èË¥üË¥£Áî®WashÁ±ªÂàõÂª∫‰∏Ä‰∏™ÂØπË±°Êù•Ê®°Êãü‰∏ÄÂè∞Ê¥óË°£Êú∫Ôºå‰ΩøÁî®TVÁ±ªÂàõÂª∫‰∏Ä‰∏™ÂØπË±°Êù•Ê®°Êãü‰∏ÄÂè∞ÁîµËßÜÊú∫ ‰ΩøÁî®ThreeElectricOutletÊé•Âè£ÂèòÈáèË∞ÉÁî®WashÂØπË±°ÁöÑconnectElectricCurrent()ÊñπÊ≥ïÔºåÂπ∂ÂÄüÂä©ÈÄÇÈÖçÂô®Ë∞ÉÁî®TVÂØπË±°ÁöÑconnectElectricCurrent()ÊñπÊ≥ïÔºåÂç≥Áî®‰∏âÂé¢ÊèíÂ∫ßÂàÜÂà´‰∏∫Ê¥óË°£Êú∫ÂíåÁîµËßÜÊú∫Êé•ÈÄöÁîµÊµÅ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.adatpe; public class Application &#123; public static void main(String[] args) &#123; ThreeElectricOutlet outlet; //ÁõÆÊ†áÊé•Âè£Ôºà‰∏âÁõ∏ÊèíÂ∫ßÔºâ Wash wash = new Wash(); //Ê¥óË°£Êú∫ outlet = wash; //Ê¥óË°£Êú∫ÊèíÂú®‰∏âÁõ∏ÊèíÂ∫ß‰∏ä System.out.println("‰ΩøÁî®‰∏âÁõ∏ÊèíÂ∫ßÊé•ÈÄöÁîµÊµÅ"); outlet.connectElectricCurrent(); //Êé•ÈÄöÁîµÊµÅÂºÄÂßãÊ¥óË°£Êúç TV tv = new TV(); //ÁîµËßÜÊú∫ ThreeElectricAdapter adapter = new ThreeElectricAdapter(tv); //ÊääÁîµËßÜÊèíÂú®ÈÄÇÈÖçÂô®‰∏äÈù¢ outlet = adapter; //ÂÜçÊääÈÄÇÈÖçÂô®ÊèíÂú®‰∏âÂé¢ÊèíÂ∫ß‰∏ä System.out.println("‰ΩøÁî®‰∏âÂé¢ÊèíÂ∫ßÊé•ÈÄöÁîµÊµÅ"); outlet.connectElectricCurrent(); //Êé•ÈÄöÁîµÊµÅÔºåÂºÄÂßãÊí≠ÊîæÁîµËßÜËäÇÁõÆ &#125;&#125;//Ê¥óË°£Êú∫‰ΩøÁî®‰∏âÁõ∏ÊèíÂ∫ßclass Wash implements ThreeElectricOutlet&#123; private String name; public Wash() &#123; name = "ÈªÑÊ≤≥Ê¥óË°£Êú∫"; &#125; public Wash(String name)&#123; this.name = name; &#125; public void connectElectricCurrent() &#123; turnOn(); &#125; public void turnOn()&#123; System.out.println(name+"ÂºÄÂßãÊ¥óË°£Êúç‰∫Ü"); &#125;&#125;//ÁîµËßÜÊú∫‰ΩøÁî®‰∏§Âé¢ÊèíÂ∫ßclass TV implements TwoElectricOutlet&#123; private String name; public TV() &#123; name = "ÈïøÊ±üÁîµËßÜÊú∫"; &#125; public TV(String name)&#123; this.name = name; &#125; public void connectElectricCurrent() &#123; turnOn(); &#125; public void turnOn()&#123; System.out.println(name+"ÂºÄÂßãÊí≠ÊîæÁîµËßÜËäÇÁõÆ"); &#125;&#125; ËøêË°åÁªìÊûú‰∏∫Ôºö ‰ΩøÁî®‰∏âÁõ∏ÊèíÂ∫ßÊé•ÈÄöÁîµÊµÅÈªÑÊ≤≥Ê¥óË°£Êú∫ÂºÄÂßãÊ¥óË°£Êúç‰∫Ü‰ΩøÁî®‰∏âÂé¢ÊèíÂ∫ßÊé•ÈÄöÁîµÊµÅÈïøÊ±üÁîµËßÜÊú∫ÂºÄÂßãÊí≠ÊîæÁîµËßÜËäÇÁõÆ ÂèåÂêëÈÄÇÈÖçÂô®Âú®ÈÄÇÈÖçÂô®Ê®°Âºè‰∏≠ÔºåÂ¶ÇÊûúAdapterËßíËâ≤ÂêåÊó∂ÂÆûÁé∞ÁõÆÊ†áÊé•Âè£ÂíåË¢´ÈÄÇÈÖçËÄÖÊé•Âè£ÔºåÂπ∂ÂåÖÂê´ÁõÆÊ†áÊé•Âè£ÂíåË¢´ÈÄÇÈÖçÊé•Âè£ÁöÑÂºïÁî®ÔºåÈÇ£‰πàËØ•ÈÄÇÈÖçÂô®Â∞±ÊòØ‰∏Ä‰∏™ÂèåÂêëÈÄÇÈÖçÂô®„ÄÇ‰ΩøÁî®ÂèåÂêëÈÄÇÈÖçÂô®ÔºåÁî®Êà∑Êó¢ÂèØ‰ª•Áî®Êñ∞ÁöÑÊé•Âè£ÂèàÂèØ‰ª•Áî®Â∑≤ÊúâÁöÑÊé•Âè£„ÄÇÂú®‰ª•‰∏ä‰æãÂ≠ê‰∏≠ÔºåÂ¶ÇÊûúÁî®Êà∑Â∏åÊúõËÉΩÊúâ‰∏âÂé¢ÊèíÂ∫ßÊù•Êé•ÈÄöÊ¥óË°£Êú∫ÂíåÁîµËßÜÊú∫ÁöÑÁîµÊµÅÔºåÊúâÂèØ‰ª•Áî®‰∏§Âé¢ÊèíÂ∫ßÊù•Êé•ÈÄöÊ¥óË°£Êú∫ÂíåÁîµËßÜÊú∫ÁöÑÁîµÊµÅÔºåÈÇ£‰πàÂ∞±ÂøÖÈ°ª‰ΩøÁî®‰∏Ä‰∏™ÂèåÂêëÈÄÇÈÖçÂô®„ÄÇÂÖ∑‰Ωì‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637package com.adatpe;public class ThreeAndTwoElectricAdapter implements ThreeElectricOutlet, TwoElectricOutlet &#123; private ThreeElectricOutlet threeElectricOutlet; private TwoElectricOutlet twoElectricOutlet; public ThreeAndTwoElectricAdapter(ThreeElectricOutlet threeOutlet,TwoElectricOutlet twoOutlet) &#123; threeElectricOutlet = threeOutlet; twoElectricOutlet = twoOutlet; &#125; public ThreeAndTwoElectricAdapter(TwoElectricOutlet twoOutlet,ThreeElectricOutlet threeOutlet)&#123; threeElectricOutlet = threeOutlet; twoElectricOutlet = twoOutlet; &#125; public void connectElectricCurrent() &#123; if(this instanceof ThreeElectricOutlet)&#123; twoElectricOutlet.connectElectricCurrent();//twoElectricOutletÊòØË¢´ÈÄÇÈÖçÁöÑÊé•Âè£ &#125; if(this instanceof TwoElectricOutlet)&#123; threeElectricOutlet.connectElectricCurrent(); //threeElectricOutletÊòØË¢´ÈÄÇÈÖçÁöÑÊé•Âè£ &#125; &#125; public static void main(String[] args) &#123; ThreeElectricOutlet threeOutlet; TwoElectricOutlet twOutlet; Wash wash = new Wash(); TV tv = new TV(); ThreeAndTwoElectricAdapter adapter = new ThreeAndTwoElectricAdapter(wash,tv); threeOutlet = adapter; System.out.println("‰ΩøÁî®‰∏âÂé¢ÊèíÂ∫ßÊé•ÈÄöÁîµÊ∫ê"); threeOutlet.connectElectricCurrent(); twOutlet = adapter; System.out.println("‰ΩøÁî®‰∏§Âé¢ÊèíÂ∫ßÊé•ÈÄöÁîµÊ∫ê"); twOutlet.connectElectricCurrent(); &#125;&#125; ËøêË°åÁªìÊûú‰∏∫Ôºö ‰ΩøÁî®‰∏âÂé¢ÊèíÂ∫ßÊé•ÈÄöÁîµÊ∫êÈïøÊ±üÁîµËßÜÊú∫ÂºÄÂßãÊí≠ÊîæÁîµËßÜËäÇÁõÆÈªÑÊ≤≥Ê¥óË°£Êú∫ÂºÄÂßãÊ¥óË°£Êúç‰∫Ü‰ΩøÁî®‰∏§Âé¢ÊèíÂ∫ßÊé•ÈÄöÁîµÊ∫êÈïøÊ±üÁîµËßÜÊú∫ÂºÄÂßãÊí≠ÊîæÁîµËßÜËäÇÁõÆÈªÑÊ≤≥Ê¥óË°£Êú∫ÂºÄÂßãÊ¥óË°£Êúç‰∫Ü ËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜÂç≥ÂèØ‰ª•Áî®‰∏âÂé¢ÊèíÂ∫ßÂèàÂèØ‰ª•Áî®‰∏§Âé¢ÊèíÂ∫ßÊù•‰∏∫ÁîµËßÜÊú∫ÂíåÊ¥óË°£Êú∫Êé•ÈÄöÁîµÊµÅ‰∫Ü„ÄÇ ‰ºòÁÇπ ÁõÆÊ†áÂíåË¢´ÈÄÇÈÖçËÄÖÊòØÂÆåÂÖ®Ëß£ËÄ¶ÁöÑÂÖ≥Á≥ª„ÄÇ ÈÄÇÈÖçÂô®Ê®°ÂºèÊª°Ë∂≥‚ÄúÂºÄ‚ÄìÈó≠ÂéüÂàô‚ÄùÔºåÂΩìÊ∑ªÂä†‰∏Ä‰∏™ÂÆûÁé∞‰∫ÜAdapterÊé•Âè£ÁöÑÊñ∞Á±ªÊó∂Ôºå‰∏çÂøÖ‰øÆÊîπAdapterÔºåAdapterÂ∞±ËÉΩÂØπËøô‰∏™Êñ∞Á±ªÁöÑÂÆû‰æãËøõË°åÈÄÇÈÖç„ÄÇ]]></content>
      <categories>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
        <tag>ÈÄÇÈÖçÂô®Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÖ≥‰∫éMapStructËΩ¨Êç¢listÁöÑÈóÆÈ¢ò]]></title>
    <url>%2Fjava%2Fjava%2Fmapstruct%2F2%2F</url>
    <content type="text"><![CDATA[mapstructÂú®ËΩ¨Êç¢list‰πãÂâçÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂâçÁΩÆËΩ¨Êç¢ÔºåÂç≥‰ªñ‰ª¨ÁöÑÂÆû‰Ωì‰πãÈó¥ÁöÑËΩ¨Êç¢ ÈîôËØØÁöÑËΩ¨Êç¢ÊñπÂºèÔºö1List&lt;EggVo&gt; listpoTovo(List&lt;Egg&gt; po); Ê≠£Á°ÆÁöÑËΩ¨Êç¢ÊñπÂºèÔºö 1234@Mapping(source = "id", target = "lid")EggVo poTovo(Egg po);List&lt;EggVo&gt; listpoTovo(List&lt;Egg&gt; po); Ê∑ªÂä†‰∫ÜÂÆû‰ΩìËΩ¨Êç¢‰πãÂêéÔºåÂ∞±ÂèØ‰ª•Ê≠£Â∏∏ÁöÑËøõË°ålistËΩ¨Êç¢‰∫ÜÔºåÂêåÁêÜÊääÂ±ûÊÄßÊò†Â∞ÑÁõ¥Êé•Âä†Âú®listËΩ¨Êç¢‰∏ä‰πüÊòØ‰∏çË°åÁöÑÔºåË¶ÅÂä†Âú®ÂÆû‰ΩìËΩ¨Êç¢‰∏äÔºåÁÑ∂ÂêélistÁöÑËΩ¨Êç¢‰πü‰ºöÁªßÊâøËøôÂíåÂ±ûÊÄßÁöÑÊò†Â∞Ñ„ÄÇ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>mapstruct</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lombok‰ªãÁªç]]></title>
    <url>%2Fjava%2Fjava%2Flombok%2F</url>
    <content type="text"><![CDATA[ËÉåÊôØÊàë‰ª¨Âú®ÂºÄÂèëËøáÁ®ã‰∏≠ÔºåÈÄöÂ∏∏ÈÉΩ‰ºöÂÆö‰πâÂ§ßÈáèÁöÑJavaBeanÔºåÁÑ∂ÂêéÈÄöËøáIDEÂéªÁîüÊàêÂÖ∂Â±ûÊÄßÁöÑÊûÑÈÄ†Âô®„ÄÅgetter„ÄÅsetter„ÄÅequals„ÄÅhashcode„ÄÅtoStringÊñπÊ≥ïÔºåÂΩìË¶ÅÂØπÊüê‰∏™Â±ûÊÄßËøõË°åÊîπÂèòÊó∂ÔºåÊØîÂ¶ÇÂëΩÂêç„ÄÅÁ±ªÂûãÁ≠âÔºåÈÉΩÈúÄË¶ÅÈáçÊñ∞ÂéªÁîüÊàê‰∏äÈù¢ÊèêÂà∞ÁöÑËøô‰∫õÊñπÊ≥ïÔºåÈÇ£Java‰∏≠ÊúâÊ≤°Êúâ‰∏ÄÁßçÊñπÂºèËÉΩÂ§üÈÅøÂÖçËøôÁßçÈáçÂ§çÁöÑÂä≥Âä®Âë¢ÔºüÁ≠îÊ°àÊòØÊúâÔºåÊàë‰ª¨Êù•Áúã‰∏Ä‰∏ã‰∏ãÈù¢ËøôÂº†ÂõæÔºåÂè≥Èù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑJavaBeanÔºåÂè™ÂÆö‰πâ‰∫Ü‰∏§‰∏™Â±ûÊÄßÔºåÂú®Á±ª‰∏äÂä†‰∏ä‰∫Ü@DataÔºå‰ªéÂ∑¶Èù¢ÁöÑÁªìÊûÑÂõæ‰∏äÂèØ‰ª•ÁúãÂà∞ÔºåÂ∑≤ÁªèËá™Âä®ÁîüÊàê‰∫Ü‰∏äÈù¢ÊèêÂà∞ÁöÑÊñπÊ≥ï„ÄÇ LombokÁÆÄ‰ªãombokÊòØ‰∏Ä‰∏™ÂèØ‰ª•ÈÄöËøáÁÆÄÂçïÁöÑÊ≥®Ëß£ÂΩ¢ÂºèÊù•Â∏ÆÂä©Êàë‰ª¨ÁÆÄÂåñÊ∂àÈô§‰∏Ä‰∫õÂøÖÈ°ªÊúâ‰ΩÜÊòæÂæóÂæàËáÉËÇøÁöÑJava‰ª£Á†ÅÁöÑÂ∑•ÂÖ∑ÔºåÈÄöËøá‰ΩøÁî®ÂØπÂ∫îÁöÑÊ≥®Ëß£ÔºåÂèØ‰ª•Âú®ÁºñËØëÊ∫êÁ†ÅÁöÑÊó∂ÂÄôÁîüÊàêÂØπÂ∫îÁöÑÊñπÊ≥ï„ÄÇ ÂÆòÊñπÂú∞ÂùÄÔºöhttps://projectlombok.org/ githubÂú∞ÂùÄÔºöhttps://github.com/rzwitserloot/lombok Lombok‰ΩøÁî®Ê≥®Ëß£‰ªãÁªç @Getter / @Setter ÂèØ‰ª•‰ΩúÁî®Âú®Á±ª‰∏äÂíåÂ±ûÊÄß‰∏äÔºåÊîæÂú®Á±ª‰∏äÔºå‰ºöÂØπÊâÄÊúâÁöÑÈùûÈùôÊÄÅ(non-static)Â±ûÊÄßÁîüÊàêGetter/SetterÊñπÊ≥ïÔºåÊîæÂú®Â±ûÊÄß‰∏äÔºå‰ºöÂØπËØ•Â±ûÊÄßÁîüÊàêGetter/SetterÊñπÊ≥ï„ÄÇÂπ∂ÂèØ‰ª•ÊåáÂÆöGetter/SetterÊñπÊ≥ïÁöÑËÆøÈóÆÁ∫ßÂà´„ÄÇ @EqualsAndHashCode ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰ºö‰ΩøÁî®ÊâÄÊúâÈùûÁû¨ÊÄÅ(non-transient)ÂíåÈùûÈùôÊÄÅ(non-static)Â≠óÊÆµÊù•ÁîüÊàêequalsÂíåhascodeÊñπÊ≥ïÔºå‰πüÂèØ‰ª•ÊåáÂÆöÂÖ∑‰Ωì‰ΩøÁî®Âì™‰∫õÂ±ûÊÄß„ÄÇ @ToString ÁîüÊàêtoStringÊñπÊ≥ïÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰ºöËæìÂá∫Á±ªÂêç„ÄÅÊâÄÊúâÂ±ûÊÄßÔºåÂ±ûÊÄß‰ºöÊåâÁÖßÈ°∫Â∫èËæìÂá∫Ôºå‰ª•ÈÄóÂè∑ÂàÜÂâ≤„ÄÇ @NoArgsConstructor, @RequiredArgsConstructor and @AllArgsConstructor Êó†ÂèÇÊûÑÈÄ†Âô®„ÄÅÈÉ®ÂàÜÂèÇÊï∞ÊûÑÈÄ†Âô®„ÄÅÂÖ®ÂèÇÊûÑÈÄ†Âô®ÔºåÂΩìÊàë‰ª¨ÈúÄË¶ÅÈáçËΩΩÂ§ö‰∏™ÊûÑÈÄ†Âô®ÁöÑÊó∂ÂÄôÔºåLombokÂ∞±Êó†ËÉΩ‰∏∫Âäõ‰∫Ü„ÄÇ @Data @ToString, @EqualsAndHashCode, ÊâÄÊúâÂ±ûÊÄßÁöÑ@Getter, ÊâÄÊúânon-finalÂ±ûÊÄßÁöÑ@SetterÂíå@RequiredArgsConstructorÁöÑÁªÑÂêàÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ΩøÁî®Ëøô‰∏™Ê≥®Ëß£Â∞±Ë∂≥Â§ü‰∫Ü„ÄÇ LombokÂéüÁêÜ‰∫ÜËß£‰∫ÜÁÆÄÂçïÁöÑ‰ΩøÁî®‰πãÂêéÔºåÁé∞Âú®Â∫îËØ•ÊØîËæÉÂ•ΩÂ•áÂÆÉÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ„ÄÇÊï¥‰∏™‰ΩøÁî®ÁöÑËøáÁ®ã‰∏≠ÔºåÂè™ÈúÄË¶Å‰ΩøÁî®Ê≥®Ëß£ËÄåÂ∑≤Ôºå‰∏çÈúÄË¶ÅÂÅöÂÖ∂ÂÆÉÈ¢ùÂ§ñÁöÑÂ∑•‰ΩúÔºåÈÇ£ÁéÑÂ¶ô‰πãÂ§ÑÂ∫îËØ•ÊòØÂú®Ê≥®Ëß£ÁöÑËß£Êûê‰∏ä„ÄÇJDK5ÂºïÂÖ•‰∫ÜÊ≥®Ëß£ÁöÑÂêåÊó∂Ôºå‰πüÊèê‰æõ‰∫Ü‰∏§ÁßçËß£ÊûêÊñπÂºè„ÄÇ ËøêË°åÊó∂Ëß£ÊûêËøêË°åÊó∂ËÉΩÂ§üËß£ÊûêÁöÑÊ≥®Ëß£ÔºåÂøÖÈ°ªÂ∞Ü@RetentionËÆæÁΩÆ‰∏∫RUNTIMEÔºåËøôÊ†∑ÂèØ‰ª•ÈÄöËøáÂèçÂ∞ÑÊãøÂà∞ËØ•Ê≥®Ëß£„ÄÇjava.lang.reflectÂèçÂ∞ÑÂåÖ‰∏≠Êèê‰æõ‰∫Ü‰∏Ä‰∏™Êé•Âè£AnnotatedElementÔºåËØ•Êé•Âè£ÂÆö‰πâ‰∫ÜËé∑ÂèñÊ≥®Ëß£‰ø°ÊÅØÁöÑÂá†‰∏™ÊñπÊ≥ïÔºåClass„ÄÅConstructor„ÄÅField„ÄÅMethod„ÄÅPackageÁ≠âÈÉΩÂÆûÁé∞‰∫ÜËØ•Êé•Âè£ÔºåÂ§ßÈÉ®ÂàÜÂºÄÂèëËÄÖÂ∫îËØ•ÈÉΩÂæàÁÜüÊÇâËøôÁßçËß£ÊûêÊñπÂºè„ÄÇ 1234boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass);&lt;T extends Annotation&gt; T getAnnotation(Class&lt;T&gt; annotationClass);Annotation[] getAnnotations();Annotation[] getDeclaredAnnotations(); ÁºñËØëÊó∂Ëß£ÊûêÁºñËØëÊó∂Ëß£ÊûêÊúâ‰∏§ÁßçÊú∫Âà∂ÔºåÁΩë‰∏äÂæàÂ§öÊñáÁ´†ÈÉΩÊääÂÆÉ‰ø©ÊêûÊ∑∑‰∫ÜÔºåÂàÜÂà´ÁÆÄÂçïÊèèËø∞‰∏Ä‰∏ã„ÄÇ Annotation Processing ToolaptËá™JDK5‰∫ßÁîüÔºåJDK7Â∑≤Ê†áËÆ∞‰∏∫ËøáÊúüÔºå‰∏çÊé®Ëçê‰ΩøÁî®ÔºåJDK8‰∏≠Â∑≤ÂΩªÂ∫ïÂà†Èô§ÔºåËá™JDK6ÂºÄÂßãÔºåÂèØ‰ª•‰ΩøÁî®Pluggable Annotation Processing APIÊù•ÊõøÊç¢ÂÆÉÔºåaptË¢´ÊõøÊç¢‰∏ªË¶ÅÊúâ2ÁÇπÂéüÂõ†Ôºö apiÈÉΩÂú®com.sun.mirrorÈùûÊ†áÂáÜÂåÖ‰∏ã Ê≤°ÊúâÈõÜÊàêÂà∞javac‰∏≠ÔºåÈúÄË¶ÅÈ¢ùÂ§ñËøêË°å Pluggable Annotation Processing APIJSR 269ÔºåËá™JDK6Âä†ÂÖ•Ôºå‰Ωú‰∏∫aptÁöÑÊõø‰ª£ÊñπÊ°àÔºåÂÆÉËß£ÂÜ≥‰∫ÜaptÁöÑ‰∏§‰∏™ÈóÆÈ¢òÔºåjavacÂú®ÊâßË°åÁöÑÊó∂ÂÄô‰ºöË∞ÉÁî®ÂÆûÁé∞‰∫ÜËØ•APIÁöÑÁ®ãÂ∫èÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÂØπÁºñËØëÂô®ÂÅö‰∏Ä‰∫õÂ¢ûÂº∫ÔºåËøôÊó∂javacÊâßË°åÁöÑËøáÁ®ãÂ¶Ç‰∏ãÔºö LombokÈóÆÈ¢ò Êó†Ê≥ïÊîØÊåÅÂ§öÁßçÂèÇÊï∞ÊûÑÈÄ†Âô®ÁöÑÈáçËΩΩ Â•áÊ∑´Â∑ßÊäÄÔºå‰ΩøÁî®‰ºöÊúâ‰∫âËÆÆ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>lombok</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MapStruct‰ªãÁªç]]></title>
    <url>%2Fjava%2Fjava%2Fmapstruct%2F1%2F</url>
    <content type="text"><![CDATA[‰ªãÁªçMapStructÂú®‰∏Ä‰∏™ÊàêÁÜüÂèØÁª¥Êä§ÁöÑÂ∑•Á®ã‰∏≠ÔºåÁªÜÂàÜÊ®°ÂùóÂêéÔºådomianÂ∑•Á®ãÊúÄÂ•Ω‰∏çË¶ÅË¢´ÂÖ∂‰ªñÂ∑•Á®ã‰æùËµñÔºå‰ΩÜÊòØÂÆû‰ΩìÁ±ª‰∏ÄËà¨Â≠ò‰∫édomain‰πã‰∏≠ÔºåËøôÊ†∑ÂÖ∂‰ªñÂ∑•Á®ãÊÉ≥Ëé∑ÂèñÂÆû‰ΩìÁ±ªÊï∞ÊçÆÊó∂Â∞±ÈúÄË¶ÅÂú®ÂêÑËá™Â∑•Á®ãÂÜômodelÔºåËá™ÂÆö‰πâmodelÂèØ‰ª•Ê†πÊçÆËá™Ë∫´‰∏öÂä°ÈúÄË¶ÅËÄåÂπ∂‰∏çÈúÄË¶ÅÊò†Â∞ÑÊï¥‰∏™ÂÆû‰ΩìÂ±ûÊÄß„ÄÇmapstructËøô‰∏™Êèí‰ª∂Â∞±ÊòØÁî®Êù•Â§ÑÁêÜdominÂÆû‰ΩìÁ±ª‰∏émodelÁ±ªÁöÑÂ±ûÊÄßÊò†Â∞ÑÔºåÂÆö‰πâmapperÊé•Âè£ÔºåmapstructÂ∞±‰ºöËá™Âä®ÁöÑÂ∏ÆÊàë‰ª¨ÂÆûÁé∞Ëøô‰∏™Êò†Â∞ÑÊé•Âè£ÔºåÈÅøÂÖç‰∫ÜÈ∫ªÁÉ¶Â§çÊùÇÁöÑÊò†Â∞ÑÂÆûÁé∞„ÄÇ GithubÂú∞ÂùÄÔºöhttps://github.com/mapstruct/mapstruct/ ‰ΩøÁî®‰æãÂ≠êÔºöhttps://github.com/mapstruct/mapstruct-examples MapStrcut‰∏éÂÖ∂ÂÆÉÂ∑•ÂÖ∑ÂØπÊØî‰ª•Âèä‰ΩøÁî®ËØ¥ÊòéÔºöhttp://www.tuicool.com/articles/uiIRjai Â¶Ç‰Ωï‰ΩøÁî®MapperÂü∫Êú¨Á±ªÔºöBasicObjectMapperÔºåBasicObjectMapperÂåÖÂê´‰∫Ü4‰∏™Âü∫Êú¨ÊñπÊ≥ïÔºåÂçï‰∏™ÂíåÈõÜÂêà‰ª•ÂèäÂèçËΩ¨ÁöÑÂçï‰∏™ÂíåÈõÜÂêà„ÄÇ ÂºÄÂèë‰∏≠Â¶ÇÈúÄË¶ÅÂØπË±°ËΩ¨Êç¢Êìç‰ΩúÂèØÁõ¥Êé•Êñ∞Âª∫interfaceÂπ∂ÁªßÊâøBasicObjectMapperÔºåÂπ∂Âú®Êñ∞Âª∫ÁöÑÊé•Âè£‰∏äÂä†‰∏ä @Mapper(componentModel = ‚Äúspring‚Äù)Ôºå Â¶ÇÊûúÊòØÂ±ûÊÄß‰∏≠ÂåÖÂê´ÂÖ∂ÂÆÉÁ±ª‰ª•ÂèäËØ•Á±ªÂ∑≤ÁªèÂ≠òÂú®MapperÂàôÊ≥®Ëß£‰∏≠Âä†‰∏ä users = {Á±ªÂêç.class}ÔºåÂÖ∑‰ΩìÂ¶Ç‰Ωï‰ΩøÁî®‰ª•ÂèäÂÖ∂‰ªñÂêÑÁßçÁî®Ê≥ïÂú®Ê≠§‰∏çÂÜçËµòËø∞ÔºàÊú¨ÊñáÁöÑÈáçÁÇπÊòØÁúãÊ†áÈ¢òÔºåÁúãÊ†áÈ¢òÔºåÁúãÊ†áÈ¢òÔºâÔºågoogle‰∏çË°åÂèØ‰ª•ÊâæÂ∫¶Â®òÔºå componentModel = ‚Äúspring‚ÄùËØ•ÈÖçÁΩÆË°®Á§∫ÁîüÊàêÁöÑÂÆûÁé∞Á±ªÈªòËÆ§Âä†‰∏äspring @ComponentÊ≥®Ëß£Ôºå‰ΩøÁî®Êó∂ÂèØÁõ¥Êé•ÈÄöËøá@AutowireËøõË°åÊ≥®ÂÖ•„ÄÇ 123456789101112131415161718192021package com.ampmind.framework.map;import java.util.List;import org.mapstruct.InheritConfiguration;import org.mapstruct.InheritInverseConfiguration;import org.mapstruct.Mappings;public interface BasicObjectMapper&lt;SOURCE, TARGET&gt; &#123; @Mappings(&#123;&#125;) @InheritConfiguration TARGET to(SOURCE var1); @InheritConfiguration List&lt;TARGET&gt; to(List&lt;SOURCE&gt; var1); @InheritInverseConfiguration SOURCE from(TARGET var1); @InheritInverseConfiguration List&lt;SOURCE&gt; from(List&lt;TARGET&gt; var1);&#125; ‰∏ãÈù¢ÊòØ‰∏§‰∏™‰∏çÂêåÁöÑ‰æãÂ≠êÔºöÂÖàË¥¥‰∏Ä‰∏ã‰∏§‰∏™ModelÁ±ª 123456789101112131415161718192021222324252627282930package com.ampmind.service.skumng.domain;public class ProductCategory &#123; /** * Á±ªÂà´ÁºñÁ†Å */ private String categoryCode; /** * Á±ªÂà´ÂêçÁß∞ */ private String categoryName; public String getCategoryCode() &#123; return categoryCode; &#125; public void setCategoryCode(String categoryCode) &#123; this.categoryCode = categoryCode; &#125; public String getCategoryName() &#123; return categoryName; &#125; public void setCategoryName(String categoryName) &#123; this.categoryName = categoryName; &#125;&#125; CategoryVo 12345678910111213141516171819202122232425262728293031package com.ampmind.service.api.protocol.vo;public class ProductCategory &#123; private String code; private String name; public Integer getParentId() &#123; return parentId; &#125; public void setParentId(Integer parentId) &#123; this.parentId = parentId; &#125; public String getCode() &#123; return code; &#125; public void setCode(String code) &#123; this.code = code; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125; 1.Â¶Ç‰Ωï‰∏éSpringÈÖçÂêàCategoryMapper 1234567891011121314151617package com.ampmind.service.skumng.api.mapper;import com.ampmind.framework.api.base.BasicObjectMapper;import com.ampmind.service.api.protocol.vo.CategoryVo;import com.ampmind.service.domain.ProductCategory;import org.mapstruct.Mapper;import org.mapstruct.Mapping;import org.mapstruct.Mappings;@Mapper(componentModel = "spring")public interface CategoryMapper extends BasicObjectMapper&lt;CategoryVo, ProductCategory&gt; &#123; @Mappings(&#123; @Mapping(source = "code", target = "categoryCode"), @Mapping(source = "name", target = "categoryName") &#125;) ProductCategory to(CategoryVo source);&#125; ‰∏äÈù¢ÈáçÂÜô‰∫ÜtoÊñπÊ≥ïÔºåÊ≥®ÊÑèÂ¶ÇÊûúÂ±ûÊÄßÂêç‰∏ÄÊ†∑ÂèØ‰ª•‰∏çÁî®ÈáçÂÜô„ÄÇ‰øùÊåÅÊé•Âè£Á©∫ÁöÑÂ∞±Ë°åÔºåÊúâ‰∏ç‰∏ÄÊ†∑ÁöÑÈúÄË¶ÅÈáçÂÜôtoÊñπÊ≥ïÔºåÂπ∂Âú®ÊñπÊ≥ï‰∏äÂä†‰∏ä @MappingsÊ≥®Ëß£ÂíåÂ≠êÊ≥®Ëß£springÊ≥®ÂÖ•Âπ∂‰ΩøÁî® 12345678910111213141516171819@Componentpublic class Test &#123; @Autowired private CategoryMapper categoryMapper; public void test() &#123; CategoryVo vo = new CategoryVo; vo.setCategoryCode("0000"); vo.setCategoryName("Â±ûÊÄßÂêçÁß∞"); ProductCategory pc = categoryMapper.to(vo);// ÈÄöËøátoÊñπÊ≥ïÂæóÂà∞ ProductCategory CategoryVo vo1 = categoryMapper.form(pc);// ÈÄöËøáfromÊñπÊ≥ïÂæóÂà∞CategoryVoÔºåÊó¢ÂèçËΩ¨toÊñπÊ≥ï„ÄÇ List&lt;ProductCategory&gt; pcList = categoryMapper.to(Arrays.asList(vo, vo1));// ÈÄöËøátoÊñπÊ≥ï‰ªéÈõÜÂêàÂæóÂà∞ËΩ¨Êç¢ÂêéÁöÑÈõÜÂêà List&lt;CategoryVo&gt; voList = categoryMapper.from(pcList); // ÂèçËΩ¨ÈõÜÂêà &#125;&#125; 2.Â¶Ç‰ΩïÁõ¥Êé•‰ΩøÁî®CategoryMapper 1234567891011121314151617181920212223package com.ampmind.service.skumng.api.mapper;import com.ampmind.framework.api.base.BasicObjectMapper;import com.ampmind.service.skumng.api.protocol.vo.CategoryVo;import com.ampmind.service.skumng.domain.ProductCategory;import org.mapstruct.Mapper;import org.mapstruct.Mapping;import org.mapstruct.Mappings;import org.mapstruct.factory.Mappers;/** * */@Mapperpublic interface CategoryMapper extends BasicObjectMapper&lt;CategoryVo, ProductCategory&gt; &#123; CategoryMapper MAPPER = Mappers.getMapper(CategoryMapper.class); @Mappings(&#123; @Mapping(source = "code", target = "categoryCode"), @Mapping(source = "name", target = "categoryName") &#125;) ProductCategory to(CategoryVo source);&#125; Áõ¥Êé•ÂèØ‰ª•ÈÄöËøámainÊñπÊ≥ïËøõË°åÊµãËØï 123456789101112131415public class Test &#123; public static void main(String[] args) &#123; CategoryVo vo = new CategoryVo; vo.setCategoryCode("0000"); vo.setCategoryName("Â±ûÊÄßÂêçÁß∞"); ProductCategory pc = CategoryMapper.MAPPER.to(vo);// ÈÄöËøátoÊñπÊ≥ïÂæóÂà∞ ProductCategory CategoryVo vo1 = CategoryMapper.MAPPER.form(pc);// ÈÄöËøáfromÊñπÊ≥ïÂæóÂà∞CategoryVoÔºåÊó¢ÂèçËΩ¨toÊñπÊ≥ï„ÄÇ List&lt;ProductCategory&gt; pcList = CategoryMapper.MAPPER.to(Arrays.asList(vo, vo1));// ÈÄöËøátoÊñπÊ≥ï‰ªéÈõÜÂêàÂæóÂà∞ËΩ¨Êç¢ÂêéÁöÑÈõÜÂêà List&lt;CategoryVo&gt; voList = CategoryMapper.MAPPER.from(pcList); // ÂèçËΩ¨ÈõÜÂêà &#125;&#125;]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>mapstruct</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaEE PO VO BO DTO POJO DAO Êï¥ÁêÜÊÄªÁªì]]></title>
    <url>%2Fjava%2Fjava%2Fpojo%2F</url>
    <content type="text"><![CDATA[DAO[data access object]Êï∞ÊçÆËÆøÈóÆÂØπË±° DAOÂ±ÇÂØπÂºÄÂèë‰∫∫ÂëòÈªëÁõíÔºåÁî±Êû∂ÊûÑÂ∏àËÆæËÆ°Â∞ÅË£Ö„ÄÇÂú®ÂæàÈïø‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÔºåÊàëÂ∞ÜÂÆÉÁêÜËß£‰∏∫ÂØπÊï∞ÊçÆÂ∫ìÁöÑËÆøÈóÆÔºåÂêéÈù¢ÈöèÁùÄÈ°πÁõÆÁöÑÁßØÁ¥Ø„ÄÇÂèëÁé∞Ëá™Â∑±ÁöÑÁêÜËß£Áõ∏ÂØπÁã≠ÈöòÔºåÂØπÊï∞ÊçÆËÆøÈóÆ‰∏ç‰ªÖ‰ªÖÊåáÁöÑÊòØÂØπÊï∞ÊçÆÂ∫ìÁöÑËÆøÈóÆ„ÄÇÂÅáÂ¶ÇAÁ≥ªÁªüË∞ÉÁî®BÁ≥ªÁªüÁöÑÊúçÂä°Ëé∑ÂèñÊï∞ÊçÆÔºåËøôÊó∂ÂÄôAÁ≥ªÁªüÂØπBÁ≥ªÁªüËÆøÈóÆÊï∞ÊçÆÂØπË±°ÁöÑÂ∞ÅË£Ö‰πüÂèØ‰ª•Áß∞‰∏∫DAO„ÄÇ DTO[data transfer object]Êï∞ÊçÆ‰º†ËæìÂØπË±° ÂÅáËÆæÊï∞ÊçÆË°®‰∏≠Â≠òÂú®20‰∏™Â≠óÊÆµÔºå‰ΩÜÊòØÂú®È°µÈù¢Â±ïÁ§∫ÂàóË°®ÁöÑÊó∂ÂÄôÔºåËøô20‰∏™Â≠óÊÆµÊòæÁÑ∂ÈÉΩ‰∏ç‰ºöÁî®Âà∞„ÄÇÊàëÊÉ≥ÂØπÂÖ∂‰∏≠ÁöÑ5‰∏™Â≠óÊÆµËøõË°åÂ±ïÁ§∫ÔºåËÄå‰∏îËøô5‰∏™Â≠óÊÆµÂ±ïÁ§∫ÁöÑÊó∂ÂÄôÔºå‰πüÂπ∂‰∏çÊòØÊï∞ÊçÆÂ∫ì‰∏≠‰ªñ‰ª¨ÂéüÊúâÁöÑÊ†∑Â≠ê„ÄÇËøòÈúÄË¶ÅËøõË°åËÆ°ÁÆó„ÄÅÊà™Âèñ„ÄÅ‰∏öÂä°‰ª£Á†ÅËΩ¨ÂêçÁß∞ ‚Ä¶..Á≠âÁ≠âÊï∞ÊçÆ‰º†ËæìÂØπË±°Âõ†Ê≠§ËÄåË¢´ËØûÁîüÔºå‰∏ÄÊòØËÉΩÊèêÈ´òÊï∞ÊçÆ‰º†ËæìÁöÑÈÄüÂ∫¶Ôºå‰∫åËÉΩÈöêËóèÂêéÁ´ØË°®ÁªìÊûÑ„ÄÇ PO[persistant object]ÊåÅ‰πÖÂ±ÇÂØπË±° ÊåÅ‰πÖÂØπË±°Â±ûÊÄßÂíåÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂ≠óÊÆµÊòØ‰∏Ä‰∏ÄÂØπÂ∫îÁöÑÔºåÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰∏ÄÊù°Êï∞ÊçÆÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™ÊåÅ‰πÖÂØπË±°„ÄÇÂõ†ORMÊ°ÜÊû∂ÁöÑÂπøÊ≥õ‰ΩøÁî®ËÄåË¢´ÂºïÂÖ•Âà∞ JavaEE È°πÁõÆËÆæËÆ°ÂΩì‰∏≠„ÄÇ BO[bussiness object]‰∏öÂä°ÂØπË±° ‰∏öÂä°ÂØπË±°È°æÂêçÊÄù‰πâÊòØÂú®‰∏öÂä°Â§ÑÁêÜ‰∏≠ÊäΩË±°Âá∫Êù•ÁöÑÂØπË±°ÔºåÈáåÈù¢Èô§‰∫Üget/set ÊñπÊ≥ïÂ§ñÔºå‰πüÂèØ‰ª•ÊúâÂØπÂ≠óÊÆµËøõË°å‰∏öÂä°Â§ÑÁêÜÁöÑÊñπÊ≥ï„ÄÇÂÅáËÆæ‰Ω†Ë¶ÅÂØπ‰∏Ä‰∏™Áè≠Á∫ßËøõË°å‰∏öÂä°Â§ÑÁêÜÔºåÂÖ∂‰∏≠ÁöÑÂ≠¶Áîü„ÄÅÊïôÂ∏à„ÄÅÁîöËá≥ÊòØÊ°åÊ§ÖÊùøÂá≥ÈÉΩÊòØ‰∏öÂä°ÂØπË±°ÁöÑÁªÑÊàêÈÉ®ÂàÜ„ÄÇÂΩìÁÑ∂ÂÖ∂‰∏≠ÁöÑÂ≠¶Áîü„ÄÅÊïôÂÆ§‚Ä¶.ÈÉΩÂèØ‰ª•ÊòØÂíåÊï∞ÊçÆÂ∫ìÂØπÂ∫îÁöÑPO„ÄÇ VO[value object]ÂÄºÂØπË±° ÂÄºÂØπË±°‰πüÂèØ‰ª•Áß∞ÂÅöÈ°µÈù¢ÂØπË±°ÔºåÂ¶ÇÊûúÁß∞ÂÅöÈ°µÈù¢ÂØπË±°ÔºåÈÇ£Èó®ÂÆÉÊâÄ‰ª£Ë°®ÁöÑÂ∞ÜÊòØÊï¥‰∏™È°µÈù¢Â±ïÁ§∫Â±ÇÁöÑÂØπË±°„ÄÇÂèØ‰ª•Áî±ÈúÄË¶ÅÁöÑ‰∏öÂä°ÂØπË±°ËøõË°åÁöÑÊç¢ÁÆóËΩ¨Êç¢ËÄåÊù•„ÄÇÂ¶ÇÊûúÁß∞Âëº‰ªñ‰∏∫ÂÄºÂØπË±°ÁöÑËØùÔºåÈÇ£Èó®‰ªñÂèØ‰ª•ÁêÜËß£‰∏∫Â≠òÊîæ‰∏öÂä°ÂØπË±°ÁöÑ‰∏Ä‰∏™Âú∞Êñπ„ÄÇÂÅáËÆæÈîÖÁ¢óÁì¢ÁõÜÂàÜÂà´‰∏∫ÂØπÂ∫îÁöÑ‰∏öÂä°ÂØπË±°ÁöÑËØùÔºåÈÇ£Èó®Êï¥‰∏™Á¢óÊüúÂ∞±ÊòØ‰∏Ä‰∏™ÂÄºÂØπË±°„ÄÇ POJO[plain ordiary java object] ÁÆÄÂçïjavaÂØπË±° ÁÆÄÂçïjavaÂØπË±°Â∫îËØ•ÊòØJavaEE‰∏ñÁïåÈáåÈù¢ÊúÄÁÅµÊ¥ªÁöÑÂØπË±°„ÄÇÂú®ÁÆÄÂçïÁ≥ªÁªü‰∏≠ÔºåÂ¶ÇÊûú‰ªéÊï∞ÊçÆÂ∫ìÂà∞È°µÈù¢Â±ïÁ§∫ÈÉΩÊòØPOJOÁöÑËØùÔºåÂÆÉÂèØ‰ª•ÊòØDTO„ÄÇÂ¶ÇÊûú‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Âà∞‰∏öÂä°Â§ÑÁêÜ‰∏≠ÈÉΩÊòØPOJOÁöÑËØùÔºå‰ªñ‰πüÂèØ‰ª•ÊòØBO„ÄÇÂêåÊ†∑Â¶ÇÊûú‰ªéÊï∞ÊçÆÂ∫ìÂà∞Êï¥‰∏™È°µÈù¢ÁöÑÂ±ïÁ§∫ÁöÑËØùÔºåÂÆÉÂêåÊ†∑ÂèØ‰ª•ÊòØVO„ÄÇ Â∞èÁªìÔºö ÂêÑ‰∏™Êï∞ÊçÆÂØπË±°‰πãÈó¥ÁöÑËΩ¨Êç¢ÊòØÁõ∏ÂΩìÁÅµÊ¥ªÁöÑÔºåÂú®È°πÁõÆ‰∏≠ÂèØ‰ª•ÂÆö‰πâ‰∏äËø∞ÂØπË±°ÁöÑÂÖ®ÈÉ®ÂíåÂÖ∂‰∏≠ÁöÑÂá†ÁßçÁ±ªÂûãÔºåËøôÂèñÂÜ≥‰∏éÊû∂ÊûÑÂ∏àÂíåÈúÄÊ±Ç„ÄÇÂú®Â§ßÂûãÈ°πÁõÆ‰∏≠ÔºåÊû∂ÊûÑÂ∏àÂú®È°πÁõÆÂàùÊúüÁöÑ‰ªªÂä°Èô§‰∫ÜÊê≠Âª∫Ëµ∑Êï¥‰∏™ÂºÄÂèëÁéØÂ¢É‰ª•Â§ñÔºåÂÆö‰πâÂú®Á≥ªÁªü‰∏≠ÊµÅËΩ¨ÁöÑÊï∞ÊçÆÁªìÊûÑÂØπË±°ÂêåÊ†∑ÊòØÈáçÈáç‰πãÈáç„ÄÇËøôÈ°πÂ∑•‰ΩúÈúÄË¶ÅËÆ∏Â§öÈ°πÁõÆÁöÑÁßØÁ¥ØÂíåÈïøÊúüÂØπËΩØ‰ª∂ÂºÄÂèëÁöÑÊÄùËÄÉÔºåÂ§öÂÆûË∑µÔºåÂ§öÊÄùËÄÉÔºåÊèê‰æõÊúÄÂêàÈÄÇÁöÑÊï∞ÊçÆÂØπË±°Ëß£ÂÜ≥ÊñπÊ≥ïÔºåÊñπËÉΩÂ±ïÁé∞Êû∂ÊûÑÂ∏àÁöÑÈ≠ÖÂäõ„ÄÇ]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>pojo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[npm‰ΩøÁî®]]></title>
    <url>%2Fnodejs%2Fnpm%2F1%2F</url>
    <content type="text"><![CDATA[NPMÊòØÈöèÂêåNodeJS‰∏ÄËµ∑ÂÆâË£ÖÁöÑÂåÖÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåËÉΩËß£ÂÜ≥NodeJS‰ª£Á†ÅÈÉ®ÁΩ≤‰∏äÁöÑÂæàÂ§öÈóÆÈ¢òÔºåÂ∏∏ËßÅÁöÑ‰ΩøÁî®Âú∫ÊôØÊúâ‰ª•‰∏ãÂá†ÁßçÔºö ÂÖÅËÆ∏Áî®Êà∑‰ªéNPMÊúçÂä°Âô®‰∏ãËΩΩÂà´‰∫∫ÁºñÂÜôÁöÑÁ¨¨‰∏âÊñπÂåÖÂà∞Êú¨Âú∞‰ΩøÁî®„ÄÇ ÂÖÅËÆ∏Áî®Êà∑‰ªéNPMÊúçÂä°Âô®‰∏ãËΩΩÂπ∂ÂÆâË£ÖÂà´‰∫∫ÁºñÂÜôÁöÑÂëΩ‰ª§Ë°åÁ®ãÂ∫èÂà∞Êú¨Âú∞‰ΩøÁî®„ÄÇ ÂÖÅËÆ∏Áî®Êà∑Â∞ÜËá™Â∑±ÁºñÂÜôÁöÑÂåÖÊàñÂëΩ‰ª§Ë°åÁ®ãÂ∫è‰∏ä‰º†Âà∞NPMÊúçÂä°Âô®‰æõÂà´‰∫∫‰ΩøÁî®„ÄÇ Áî±‰∫éÊñ∞ÁâàÁöÑnodejsÂ∑≤ÁªèÈõÜÊàê‰∫ÜnpmÔºåÊâÄ‰ª•‰πãÂâçnpm‰πü‰∏ÄÂπ∂ÂÆâË£ÖÂ•Ω‰∫Ü„ÄÇÂêåÊ†∑ÂèØ‰ª•ÈÄöËøáËæìÂÖ• ‚Äúnpm -v‚Äù Êù•ÊµãËØïÊòØÂê¶ÊàêÂäüÂÆâË£Ö„ÄÇÂëΩ‰ª§Â¶Ç‰∏ãÔºåÂá∫Áé∞ÁâàÊú¨ÊèêÁ§∫Ë°®Á§∫ÂÆâË£ÖÊàêÂäü: 12$ npm -v2.3.0 Â¶ÇÊûú‰Ω†ÂÆâË£ÖÁöÑÊòØÊóßÁâàÊú¨ÁöÑ npmÔºåÂèØ‰ª•ÂæàÂÆπÊòìÂæóÈÄöËøá npm ÂëΩ‰ª§Êù•ÂçáÁ∫ßÔºåÂëΩ‰ª§Â¶Ç‰∏ãÔºö 123$ sudo npm install npm -g/usr/local/bin/npm -&gt; /usr/local/lib/node_modules/npm/bin/npm-cli.jsnpm@2.14.2 /usr/local/lib/node_modules/npm Â¶ÇÊûúÊòØ Window Á≥ªÁªü‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Âç≥ÂèØÔºö 1$ npm install npm -g ‰ΩøÁî® npm ÂëΩ‰ª§ÂÆâË£ÖÊ®°Âùónpm ÂÆâË£Ö Node.js Ê®°ÂùóËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 1$ npm install &lt;Module Name&gt; ‰ª•‰∏ãÂÆû‰æãÔºåÊàë‰ª¨‰ΩøÁî® npm ÂëΩ‰ª§ÂÆâË£ÖÂ∏∏Áî®ÁöÑ Node.js webÊ°ÜÊû∂Ê®°Âùó express: 1$ npm install express ÂÆâË£ÖÂ•Ω‰πãÂêéÔºåexpress ÂåÖÂ∞±ÊîæÂú®‰∫ÜÂ∑•Á®ãÁõÆÂΩï‰∏ãÁöÑ node_modules ÁõÆÂΩï‰∏≠ÔºåÂõ†Ê≠§Âú®‰ª£Á†Å‰∏≠Âè™ÈúÄË¶ÅÈÄöËøá require(‚Äòexpress‚Äô) ÁöÑÊñπÂºèÂ∞±Â•ΩÔºåÊó†ÈúÄÊåáÂÆöÁ¨¨‰∏âÊñπÂåÖË∑ØÂæÑ„ÄÇ 1var express = require('express'); ÂÖ®Â±ÄÂÆâË£Ö‰∏éÊú¨Âú∞ÂÆâË£Önpm ÁöÑÂåÖÂÆâË£ÖÂàÜ‰∏∫Êú¨Âú∞ÂÆâË£ÖÔºàlocalÔºâ„ÄÅÂÖ®Â±ÄÂÆâË£ÖÔºàglobalÔºâ‰∏§ÁßçÔºå‰ªéÊï≤ÁöÑÂëΩ‰ª§Ë°åÊù•ÁúãÔºåÂ∑ÆÂà´Âè™ÊòØÊúâÊ≤°Êúâ-gËÄåÂ∑≤ÔºåÊØîÂ¶Ç 12$ npm install express # Êú¨Âú∞ÂÆâË£Ö$ npm install express -g # ÂÖ®Â±ÄÂÆâË£Ö Â¶ÇÊûúÂá∫Áé∞‰ª•‰∏ãÈîôËØØÔºö 1npm err! Error: connect ECONNREFUSED 127.0.0.1:8087 Ëß£ÂÜ≥ÂäûÊ≥ï‰∏∫Ôºö 1$ npm config set proxy null Êú¨Âú∞ÂÆâË£Ö Â∞ÜÂÆâË£ÖÂåÖÊîæÂú® ./node_modules ‰∏ãÔºàËøêË°å npm ÂëΩ‰ª§Êó∂ÊâÄÂú®ÁöÑÁõÆÂΩïÔºâÔºåÂ¶ÇÊûúÊ≤°Êúâ node_modules ÁõÆÂΩïÔºå‰ºöÂú®ÂΩìÂâçÊâßË°å npm ÂëΩ‰ª§ÁöÑÁõÆÂΩï‰∏ãÁîüÊàê node_modules ÁõÆÂΩï„ÄÇ ÂèØ‰ª•ÈÄöËøá require() Êù•ÂºïÂÖ•Êú¨Âú∞ÂÆâË£ÖÁöÑÂåÖ„ÄÇ ÂÖ®Â±ÄÂÆâË£Ö Â∞ÜÂÆâË£ÖÂåÖÊîæÂú® /usr/local ‰∏ãÊàñËÄÖ‰Ω† node ÁöÑÂÆâË£ÖÁõÆÂΩï„ÄÇ ÂèØ‰ª•Áõ¥Êé•Âú®ÂëΩ‰ª§Ë°åÈáå‰ΩøÁî®„ÄÇ Â¶ÇÊûú‰Ω†Â∏åÊúõÂÖ∑Â§á‰∏§ËÄÖÂäüËÉΩÔºåÂàôÈúÄË¶ÅÂú®‰∏§‰∏™Âú∞ÊñπÂÆâË£ÖÂÆÉÊàñ‰ΩøÁî® npm link„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨‰ΩøÁî®ÂÖ®Â±ÄÊñπÂºèÂÆâË£Ö express 1$ npm install express -g Êü•ÁúãÂÆâË£Ö‰ø°ÊÅØ‰Ω†ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êù•Êü•ÁúãÊâÄÊúâÂÖ®Â±ÄÂÆâË£ÖÁöÑÊ®°ÂùóÔºö 1$ npm list -g Â¶ÇÊûúË¶ÅÊü•ÁúãÊüê‰∏™Ê®°ÂùóÁöÑÁâàÊú¨Âè∑ÔºåÂèØ‰ª•‰ΩøÁî®ÂëΩ‰ª§Â¶Ç‰∏ãÔºö 1$ npm list grunt ‰ΩøÁî® package.jsonpackage.json ‰Ωç‰∫éÊ®°ÂùóÁöÑÁõÆÂΩï‰∏ãÔºåÁî®‰∫éÂÆö‰πâÂåÖÁöÑÂ±ûÊÄß„ÄÇÊé•‰∏ãÊù•ËÆ©Êàë‰ª¨Êù•Áúã‰∏ã express ÂåÖÁöÑ package.json Êñá‰ª∂Ôºå‰Ωç‰∫é node_modules/express/package.json ÂÜÖÂÆπÔºö 12345678910111213141516171819202122232425262728293031&#123; "name": "hexo-site", "version": "0.0.0", "private": true, "hexo": &#123; "version": "3.4.4" &#125;, "dependencies": &#123; "hexo": "^3.2.0", "hexo-deployer-git": "^0.3.1", "hexo-generator-archive": "^0.1.4", "hexo-generator-category": "^0.1.3", "hexo-generator-index": "^0.2.0", "hexo-generator-tag": "^0.2.0", "hexo-renderer-ejs": "^0.3.0", "hexo-renderer-marked": "^0.3.0", "hexo-renderer-stylus": "^0.3.1", "hexo-server": "^0.2.0" &#125;, "devDependencies": &#123; "gulp": "^3.9.1", "gulp-htmlclean": "^2.7.16", "gulp-htmlmin": "^4.0.0", "gulp-minify-css": "^1.2.4", "gulp-uglify": "^3.0.0", "hexo-admin": "^2.3.0", "hexo-generator-searchdb": "^1.0.8", "hexo-wordcount": "^3.0.2" &#125;&#125;` Package.json Â±ûÊÄßËØ¥Êòé name - ÂåÖÂêç„ÄÇ version - ÂåÖÁöÑÁâàÊú¨Âè∑„ÄÇ description - ÂåÖÁöÑÊèèËø∞„ÄÇ homepage - ÂåÖÁöÑÂÆòÁΩë url „ÄÇ author - ÂåÖÁöÑ‰ΩúËÄÖÂßìÂêç„ÄÇ contributors - ÂåÖÁöÑÂÖ∂‰ªñË¥°ÁåÆËÄÖÂßìÂêç„ÄÇ dependencies - ‰æùËµñÂåÖÂàóË°®„ÄÇÂ¶ÇÊûú‰æùËµñÂåÖÊ≤°ÊúâÂÆâË£ÖÔºånpm ‰ºöËá™Âä®Â∞Ü‰æùËµñÂåÖÂÆâË£ÖÂú® node_module ÁõÆÂΩï‰∏ã„ÄÇ repository - ÂåÖ‰ª£Á†ÅÂ≠òÊîæÁöÑÂú∞ÊñπÁöÑÁ±ªÂûãÔºåÂèØ‰ª•ÊòØ git Êàñ svnÔºågit ÂèØÂú® Github ‰∏ä„ÄÇ main - main Â≠óÊÆµÊåáÂÆö‰∫ÜÁ®ãÂ∫èÁöÑ‰∏ªÂÖ•Âè£Êñá‰ª∂Ôºårequire(‚ÄòmoduleName‚Äô) Â∞±‰ºöÂä†ËΩΩËøô‰∏™Êñá‰ª∂„ÄÇËøô‰∏™Â≠óÊÆµÁöÑÈªòËÆ§ÂÄºÊòØÊ®°ÂùóÊ†πÁõÆÂΩï‰∏ãÈù¢ÁöÑ index.js„ÄÇ keywords - ÂÖ≥ÈîÆÂ≠ó Âç∏ËΩΩÊ®°ÂùóÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êù•Âç∏ËΩΩ Node.js Ê®°Âùó„ÄÇ 1$ npm uninstall express Âç∏ËΩΩÂêéÔºå‰Ω†ÂèØ‰ª•Âà∞ /node_modules/ ÁõÆÂΩï‰∏ãÊü•ÁúãÂåÖÊòØÂê¶ËøòÂ≠òÂú®ÔºåÊàñËÄÖ‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãÔºö 1$ npm ls Êõ¥Êñ∞Ê®°ÂùóÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§Êõ¥Êñ∞Ê®°ÂùóÔºö 1$ npm update express ÊêúÁ¥¢Ê®°Âùó‰ΩøÁî®‰ª•‰∏ãÊù•ÊêúÁ¥¢Ê®°ÂùóÔºö 1$ npm search express ‰ΩøÁî®Ê∑òÂÆù NPM ÈïúÂÉèÂ§ßÂÆ∂ÈÉΩÁü•ÈÅìÂõΩÂÜÖÁõ¥Êé•‰ΩøÁî® npm ÁöÑÂÆòÊñπÈïúÂÉèÊòØÈùûÂ∏∏ÊÖ¢ÁöÑÔºåËøôÈáåÊé®Ëçê‰ΩøÁî®Ê∑òÂÆù NPM ÈïúÂÉè„ÄÇ Ê∑òÂÆù NPM ÈïúÂÉèÊòØ‰∏Ä‰∏™ÂÆåÊï¥ npmjs.org ÈïúÂÉèÔºå‰Ω†ÂèØ‰ª•Áî®Ê≠§‰ª£ÊõøÂÆòÊñπÁâàÊú¨(Âè™ËØª)ÔºåÂêåÊ≠•È¢ëÁéáÁõÆÂâç‰∏∫ 10ÂàÜÈíü ‰∏ÄÊ¨°‰ª•‰øùËØÅÂ∞ΩÈáè‰∏éÂÆòÊñπÊúçÂä°ÂêåÊ≠•„ÄÇ ‰Ω†ÂèØ‰ª•‰ΩøÁî®Ê∑òÂÆùÂÆöÂà∂ÁöÑ cnpm (gzip ÂéãÁº©ÊîØÊåÅ) ÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑‰ª£ÊõøÈªòËÆ§ÁöÑ npm: 1$ npm install -g cnpm --registry=https://registry.npm.taobao.org ÂÆâË£Ö‰∏çÂàõÂª∫binÈìæÊé•1$ npm install --no-bin-links ÁºñËØëÂπ∂‰∏çÂàõÂª∫binÈìæÊé•1$ npm rebuild node-sass --no-bin-links]]></content>
      <categories>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VirtualBoxÂª∫Á´ãËΩØÈìæÊé•]]></title>
    <url>%2FVirtualBox%2Fvirtualbox%2F1%2F</url>
    <content type="text"><![CDATA[VirtualBoxÂÖ±‰∫´ÁõÆÂΩïÔºåÂª∫Á´ãËΩØÈìæÊé• ÂÖ≥Èó≠ VirtualBox„ÄÇ Â∞ÜVirtualBoxÂÆâË£ÖÁõÆÂΩïÁöÑË∑ØÂæÑÂä†ÂÖ•Á≥ªÁªüÁéØÂ¢ÉÂèòÈáèPATH‰∏≠„ÄÇ ÊâìÂºÄÂëΩ‰ª§Ë°åÁ™óÂè£ÔºåÊâßË°åÂ¶Ç‰∏ãÂëΩ‰ª§Ôºö 12VBoxManage setextradata &#123;YOURVMNAME&#125;VBoxInternal2/SharedFoldersEnableSymlinksCreate/&#123;YOURSHAREFOLDERNAME&#125; 1 ÂèÇÊï∞ËØ¥ÊòéYOURVMNAMEÔºö‰∏∫ËôöÊãüÊú∫‰∏≠ubuntuÁ≥ªÁªüÁöÑÂêçYOURSHAREFOLDERNAMEÔºö‰∏∫ÂÖ±‰∫´ÁöÑÁõÆÂΩïÂêçÁß∞ ‚Äú‰ª•ÁÆ°ÁêÜËÄÖË∫´‰ªΩËøêË°å‚Äù VirtualBox Âç≥ÂèØÔºÅ]]></content>
      <categories>
        <category>VirtualBox</category>
      </categories>
      <tags>
        <tag>VirtualBox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[9‰∏™Â∏∏Áî®iptablesÈÖçÁΩÆÂÆû‰æã]]></title>
    <url>%2Flinux%2Flinux%2Fshell-iptabls-2%2F</url>
    <content type="text"><![CDATA[iptablesÂëΩ‰ª§ÂèØÁî®‰∫éÈÖçÁΩÆLinuxÁöÑÂåÖËøáÊª§ËßÑÂàôÔºåÂ∏∏Áî®‰∫éÂÆûÁé∞Èò≤ÁÅ´Â¢ô„ÄÅNAT„ÄÇÂíã‰∏ÄÁúãiptablesÁöÑÈÖçÁΩÆÂæàÂ§çÊùÇÔºåÊéåÊè°ËßÑÂæãÂêéÔºåÂÖ∂ÂÆûÁî®iptablesÂÆåÊàêÊåáÂÆö‰ªªÂä°Âπ∂‰∏çÈöæÔºå‰∏ãÈù¢Êàë‰ª¨ÈÄöËøáÂÖ∑‰ΩìÂÆû‰æãÔºåÂ≠¶‰π†iptablesÁöÑËØ¶ÁªÜÁî®Ê≥ï„ÄÇ Âà†Èô§Â∑≤ÊúâËßÑÂàô Âú®Êñ∞ËÆæÂÆöiptablesËßÑÂàôÊó∂ÔºåÊàë‰ª¨‰∏ÄËà¨ÂÖàÁ°Æ‰øùÊóßËßÑÂàôË¢´Ê∏ÖÈô§ÔºåÁî®‰ª•‰∏ãÂëΩ‰ª§Ê∏ÖÈô§ÊóßËßÑÂàô 12$ iptables -F(or iptables --flush) ËÆæÁΩÆchainÁ≠ñÁï• ÂØπ‰∫éfilter tableÔºåÈªòËÆ§ÁöÑchainÁ≠ñÁï•‰∏∫ACCEPTÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÂëΩ‰ª§‰øÆÊîπchainÁöÑÁ≠ñÁï• 123$ iptables -P INPUT DROP$ iptables -P FORWARD DROP$ iptables -P OUTPUT DROP ‰ª•‰∏äÂëΩ‰ª§ÈÖçÁΩÆÂ∞ÜÊé•Êî∂„ÄÅËΩ¨ÂèëÂíåÂèëÂá∫ÂåÖÂùá‰∏¢ÂºÉÔºåÊñΩË°åÊØîËæÉ‰∏•Ê†ºÁöÑÂåÖÁÆ°ÁêÜ„ÄÇÁî±‰∫éÊé•Êî∂ÂíåÂèëÂåÖÂùáË¢´ËÆæÁΩÆ‰∏∫‰∏¢ÂºÉÔºåÂΩìËøõ‰∏ÄÊ≠•ÈÖçÁΩÆÂÖ∂‰ªñËßÑÂàôÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÊ≥®ÊÑèÈíàÂØπINPUTÂíåOUTPUTÂàÜÂà´ÈÖçÁΩÆ„ÄÇÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰ø°‰ªªÊú¨Êú∫Âô®ÂæÄÂ§ñÂèëÂåÖÔºå‰ª•‰∏äÁ¨¨‰∏âÊù°ËßÑÂàôÂèØ‰∏çÂøÖÈÖçÁΩÆ„ÄÇ Â±èËîΩÊåáÂÆöip ÊúâÊó∂ÂÄôÊàë‰ª¨ÂèëÁé∞Êüê‰∏™ip‰∏çÂÅúÁöÑÂæÄÊúçÂä°Âô®ÂèëÂåÖÔºåËøôÊó∂Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÔºåÂ∞ÜÊåáÂÆöipÂèëÊù•ÁöÑÂåÖ‰∏¢ÂºÉ 12$ BLOCK_THIS_IP="x.x.x.x"$ iptables -A INPUT -i eth0 -p tcp -s "$BLOCK_THIS_IP" -j DROP ‰ª•‰∏äÂëΩ‰ª§ËÆæÁΩÆÂ∞ÜÁî±x.x.x.x ipÂèëÂæÄeth0ÁΩëÂè£ÁöÑtcpÂåÖ‰∏¢ÂºÉ ÈÖçÁΩÆÊúçÂä°È°π Âà©Áî®iptablesÔºåÊàë‰ª¨ÂèØ‰ª•ÂØπÊó•Â∏∏Áî®Âà∞ÁöÑÊúçÂä°È°πËøõË°åÂÆâÂÖ®ÁÆ°ÁêÜÔºåÊØîÂ¶ÇËÆæÂÆöÂè™ËÉΩÈÄöËøáÊåáÂÆöÁΩëÊÆµ„ÄÅÁî±ÊåáÂÆöÁΩëÂè£ÈÄöËøáSSHËøûÊé•Êú¨Êú∫ 12$ iptables -A INPUT -i eth0 -p tcp -s 192.168.100.0/24 --dport 22 -m state --state NEW,ESTABLESHED -j ACCEPT$ iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT Ëã•Ë¶ÅÊîØÊåÅÁî±Êú¨Êú∫ÈÄöËøáSSHËøûÊé•ÂÖ∂‰ªñÊú∫Âô®ÔºåÁî±‰∫éÂú®Êú¨Êú∫Á´ØÂè£Âª∫Á´ãËøûÊé•ÔºåÂõ†ËÄåËøòÈúÄË¶ÅËÆæÁΩÆ‰ª•‰∏ãËßÑÂàô 12$ iptables -A INPUT -i eth0 -p tcp -s 192.168.100.0/24 --dport 22 -m state --state ESTABLESHED -j ACCEPT$ iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state NEW,ESTABLISHED -j ACCEPT Á±ª‰ººÁöÑÔºåÂØπ‰∫éHTTP/HTTPS(80/443)„ÄÅpop3(110)„ÄÅrsync(873)„ÄÅMySQL(3306)Á≠âÂü∫‰∫étcpËøûÊé•ÁöÑÊúçÂä°Ôºå‰πüÂèØ‰ª•ÂèÇÁÖß‰∏äËø∞ÂëΩ‰ª§ÈÖçÁΩÆ„ÄÇ ÂØπ‰∫éÂü∫‰∫éudpÁöÑdnsÊúçÂä°Ôºå‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÂºÄÂêØÁ´ØÂè£ÊúçÂä° 12$ iptables -A OUTPUT -p udp -o eth0 --dport 53 -j ACCEPT$ iptables -A INPUT -p udp -i eth0 --sport 53 -j ACCEPT ÁΩëÂè£ËΩ¨ÂèëÈÖçÁΩÆ ÂØπ‰∫éÁî®‰ΩúÈò≤ÁÅ´Â¢ôÊàñÁΩëÂÖ≥ÁöÑÊúçÂä°Âô®Ôºå‰∏Ä‰∏™ÁΩëÂè£ËøûÊé•Âà∞ÂÖ¨ÁΩëÔºåÂÖ∂‰ªñÁΩëÂè£ÁöÑÂåÖËΩ¨ÂèëÂà∞ËØ•ÁΩëÂè£ÂÆûÁé∞ÂÜÖÁΩëÂêëÂÖ¨ÁΩëÈÄö‰ø°ÔºåÂÅáËÆæeth0ËøûÊé•ÂÜÖÁΩëÔºåeth1ËøûÊé•ÂÖ¨ÁΩëÔºåÈÖçÁΩÆËßÑÂàôÂ¶Ç‰∏ã 1$ iptables -A FORWARD -i eth0 -o eth1 -j ACCEPT Á´ØÂè£ËΩ¨ÂèëÈÖçÁΩÆ ÂØπ‰∫éÁ´ØÂè£ÔºåÊàë‰ª¨‰πüÂèØ‰ª•ËøêÁî®iptablesÂÆåÊàêËΩ¨ÂèëÈÖçÁΩÆ 1$ iptables -t nat -A PREROUTING -p tcp -d 192.168.102.37 --dport 422 -j DNAT --to 192.168.102.37:22 ‰ª•‰∏äÂëΩ‰ª§Â∞Ü422Á´ØÂè£ÁöÑÂåÖËΩ¨ÂèëÂà∞22Á´ØÂè£ÔºåÂõ†ËÄåÈÄöËøá422Á´ØÂè£‰πüÂèØËøõË°åSSHËøûÊé•ÔºåÂΩìÁÑ∂ÂØπ‰∫é422Á´ØÂè£ÔºåÊàë‰ª¨‰πüÈúÄË¶ÅÂÉè‰ª•‰∏ä‚Äú4.ÈÖçÁΩÆÊúçÂä°È°π‚Äù‰∏ÄËäÇ‰∏ÄÊ†∑ÔºåÈÖçÁΩÆÂÖ∂ÊîØÊåÅËøûÊé•Âª∫Á´ãÁöÑËßÑÂàô„ÄÇ DoSÊîªÂáªÈò≤ËåÉ Âà©Áî®Êâ©Â±ïÊ®°ÂùólimitÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÈÖçÁΩÆiptablesËßÑÂàôÔºåÂÆûÁé∞DoSÊîªÂáªÈò≤ËåÉ 1$ iptables -A INPUT -p tcp --dport 80 -m limit --limit 25/minute --limit-burst 100 -j ACCEPT ‚Äìlitmit 25/minute ÊåáÁ§∫ÊØèÂàÜÈíüÈôêÂà∂ÊúÄÂ§ßËøûÊé•Êï∞‰∏∫25‚Äìlitmit-burst 100 ÊåáÁ§∫ÂΩìÊÄªËøûÊé•Êï∞Ë∂ÖËøá100Êó∂ÔºåÂêØÂä® litmit/minute ÈôêÂà∂ ÈÖçÁΩÆwebÊµÅÈáèÂùáË°° Êàë‰ª¨ÂèØ‰ª•Â∞Ü‰∏ÄÂè∞ÊúçÂä°Âô®‰Ωú‰∏∫ÂâçÁ´ØÊúçÂä°Âô®ÔºåÂà©Áî®iptablesËøõË°åÊµÅÈáèÂàÜÂèëÔºåÈÖçÁΩÆÊñπÊ≥ïÂ¶Ç‰∏ã 123$ iptables -A PREROUTING -i eth0 -p tcp --dport 80 -m state --state NEW -m nth --counter 0 --every 3 --packet 0 -j DNAT --to-destination 192.168.1.101:80$ iptables -A PREROUTING -i eth0 -p tcp --dport 80 -m state --state NEW -m nth --counter 0 --every 3 --packet 0 -j DNAT --to-destination 192.168.1.102:80$ iptables -A PREROUTING -i eth0 -p tcp --dport 80 -m state --state NEW -m nth --counter 0 --every 3 --packet 0 -j DNAT --to-destination 192.168.1.103:80 ‰ª•‰∏äÈÖçÁΩÆËßÑÂàôÁî®Âà∞nthÊâ©Â±ïÊ®°ÂùóÔºåÂ∞Ü80Á´ØÂè£ÁöÑÊµÅÈáèÂùáË°°Âà∞‰∏âÂè∞ÊúçÂä°Âô® Â∞Ü‰∏¢ÂºÉÂåÖÊÉÖÂÜµËÆ∞ÂÖ•Êó•Âøó ‰ΩøÁî®LOGÁõÆÊ†áÂíåsyslogÊúçÂä°ÔºåÊàë‰ª¨ÂèØ‰ª•ËÆ∞ÂΩïÊüêÂçèËÆÆÊüêÁ´ØÂè£‰∏ãÁöÑÊî∂ÂèëÂåÖÊÉÖÂÜµ„ÄÇÊãøËÆ∞ÂΩï‰∏¢ÂåÖÊÉÖÂÜµ‰∏æ‰æãÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ãÊñπÂºèÂÆûÁé∞„ÄÇ È¶ñÂÖàËá™ÂÆö‰πâ‰∏Ä‰∏™chain 1$ iptables -N LOGGING ÂÖ∂Ê¨°Â∞ÜÊâÄÊúâÊé•Êî∂ÂåÖÂØºÂÖ•LOGGING chain‰∏≠ 1$ iptables -A INPUT -j LOGGING ÁÑ∂ÂêéËÆæÁΩÆÊó•ÂøóÂâçÁºÄ„ÄÅÊó•ÂøóÁ∫ßÂà´ 1$ iptables -A LOGGING -m limit --limit 2/min -j LOG --log-prefix "IPTables Packet Dropped: " --log-level 7 ÊúÄÂêéÂ∞ÜÂåÖÂÄíÂêëDROPÔºåÂ∞ÜÂåÖ‰∏¢ÂºÉ 1$ iptables -A LOGGING -j DROP Âè¶ÂèØ‰ª•ÈÖçÁΩÆsyslog.confÊñá‰ª∂ÔºåÊåáÂÆöiptablesÁöÑÊó•ÂøóËæìÂá∫]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TCÂü∫‰∫éCBQÈòüÂàóÁöÑÊµÅÈáèÁÆ°ÁêÜËåÉ‰æã]]></title>
    <url>%2Flinux%2Flinux%2Fshell-tc-1%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãÂèÇËÄÉ‰∫ÜTCÁöÑÂæàÂ§öÊñáÊ°£ÔºåËá™Â∑±‰πüÊï¥ÁêÜ‰∫Ü‰∏ÄÁØáÈÖçÁΩÆËÆ∞ÂΩï„ÄÇÂú®ÂÆûÈôÖ‰ΩøÁî®ËøáÁ®ã‰∏≠ÊïàÊûúËøò‰∏çÈîôÔºåÂú®Ê≠§ÂàÜ‰∫´ÁªôÂ§ßÂÆ∂‰ª•Â§áÂèÇËÄÉ„ÄÇÁéØÂ¢ÉÔºöÂ±ÄÂüüÁΩëËßÑÊ®°‰∏çÊòØÂæàÂ§ß40Â§öÂè∞Êú∫Âô®„ÄÇ NATÂÖ±‰∫´‰∏äÁΩëÔºàÂÜÖÁΩëÔºöeth0 Â§ñÁΩëÔºöeth2ÔºâCBQÊòØÈÄöËøáÁ°¨‰ª∂ÁöÑÈó≤ÁΩÆÊó∂Èó¥Êù•ËÆ°ÁÆóÈòüÂàóÔºåÁ°¨‰ª∂‰∏çÂêåÔºåÊïàÊûú‰πü‰∏çÂêåÔºåÂØπ‰∫éÊØîËæÉÂ§ßÁöÑÁΩëÁªú‰ΩøÁî®HTBÊØîËæÉÂ•Ω„ÄÇ‰ª•‰∏ãÈôêÂà∂‰∏ä‰º†Âíå‰∏ãËΩΩÁöÑÊñπÊ≥ïÂèØ‰ª•ÂÜôÊàêËÑöÊú¨ÔºåÈÄöËøámrtgÂèëÁé∞ÊµÅÈáèÁöÑÂºÇÂ∏∏ÊÉÖÂÜµÔºåÁÑ∂ÂêéÈÄöËøántopÊü•Â§ÑÊòØË∞ÅÂú®Âπ≤Âùè‰∫ãÔºåÊúÄÂêéÁî®ÂÜôÂ•ΩÁöÑtcËÑöÊú¨ÈôêÂà∂‰ªñÁöÑÊµÅÈáèÔºåÈÅøÂÖçÂΩ±ÂìçÂÖ∂‰ªñ‰∫∫ÁöÑÁΩëÁªú‰ΩøÁî®„ÄÇ Á§∫‰æãÈíàÂØπÁΩëÁªúÁâ©ÁêÜËÆæÂ§áÁªëÂÆö‰∏Ä‰∏™CBQÈòüÂàó 1$ tc qdisc add dev eth0 root handle 1: cbq bandwidth 10Mbit avpkt 1000 cell 8 mpu 64 Â∞Ü‰∏Ä‰∏™cbqÈòüÂàóÁªëÂÆöÂà∞ÁΩëÁªúÁâ©ÁêÜËÆæÂ§áeth0‰∏äÔºåÂÖ∂ÁºñÂè∑‰∏∫1:0ÔºõÁΩëÁªúÁâ©ÁêÜËÆæÂ§áeth0ÁöÑÂÆûÈôÖÂ∏¶ÂÆΩ‰∏∫10MbitÔºåÂåÖÁöÑÂπ≥ÂùáÂ§ßÂ∞è‰∏∫1000Â≠óËäÇÔºõÂåÖÈó¥ÈöîÂèëÈÄÅÂçïÂÖÉÁöÑÂ§ßÂ∞è‰∏∫8Â≠óËäÇÔºåÊúÄÂ∞è‰º†ËæìÂåÖÂ§ßÂ∞è‰∏∫64Â≠óËäÇ„ÄÇ Âú®ËØ•ÈòüÂàó‰∏äÂª∫Á´ãÂàÜÁ±ª 1$ tc class add dev eth0 parent 1:0 classid 1:1 cbq bandwidth 10Mbit rate 10Mbit maxburst 20 allot 1514 prio 1 avpkt 1000 cell 8 weight 1Mbit ÂàõÂª∫Ê†πÂàÜÁ±ª1:1ÔºõÂàÜÈÖçÂ∏¶ÂÆΩ‰∏∫10MbitÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫1„ÄÇËØ•ÈòüÂàóÁöÑÊúÄÂ§ßÂèØÁî®Â∏¶ÂÆΩ‰∏∫10MbitÔºåÂÆûÈôÖÂàÜÈÖçÁöÑÂ∏¶ÂÆΩ‰∏∫10MbitÔºåÂèØÊé•Êî∂ÂÜ≤Á™ÅÁöÑÂèëÈÄÅÊúÄÈïøÂåÖÊï∞ÁõÆ‰∏∫20Â≠óËäÇÔºõÊúÄÂ§ß‰º†ËæìÂçïÂÖÉÂä†MACÂ§¥ÁöÑÂ§ßÂ∞è‰∏∫1514Â≠óËäÇÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫1ÔºåÂåÖÁöÑÂπ≥ÂùáÂ§ßÂ∞è‰∏∫1000Â≠óËäÇÔºåÂåÖÈó¥ÈöîÂèëÈÄÅÂçïÂÖÉÁöÑÂ§ßÂ∞è‰∏∫8Â≠óËäÇÔºåÁõ∏Â∫î‰∫éÂÆûÈôÖÂ∏¶ÂÆΩÁöÑÂä†ÊùÉÈÄüÁéá‰∏∫1Mbit„ÄÇ ÂàõÂª∫Â≠êÂàÜÁ±ª ÂàõÂª∫ÂàÜÁ±ª1:2ÔºåÂÖ∂Áà∂ÂàÜÁ±ª‰∏∫1:1ÔºåÂàÜÈÖçÂ∏¶ÂÆΩ‰∏∫64KbitÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫8„ÄÇËØ•ÈòüÂàóÁöÑÊúÄÂ§ßÂèØÁî®Â∏¶ÂÆΩ‰∏∫10MbitÔºåÂÆûÈôÖÂàÜÈÖçÁöÑÂ∏¶ÂÆΩ‰∏∫64KbitÔºåÂèØÊé•Êî∂ÂÜ≤Á™ÅÁöÑÂèëÈÄÅÊúÄÈïøÂåÖÊï∞ÁõÆ‰∏∫20Â≠óËäÇÔºõÊúÄÂ§ß‰º†ËæìÂçïÂÖÉÂä†MACÂ§¥ÁöÑÂ§ßÂ∞è‰∏∫1514Â≠óËäÇÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫8ÔºåÂåÖÁöÑÂπ≥ÂùáÂ§ßÂ∞è‰∏∫1000Â≠óËäÇÔºåÂåÖÈó¥ÈöîÂèëÈÄÅÂçïÂÖÉÁöÑÂ§ßÂ∞è‰∏∫8Â≠óËäÇÔºåÁõ∏Â∫î‰∫éÂÆûÈôÖÂ∏¶ÂÆΩÁöÑÂä†ÊùÉÈÄüÁéá‰∏∫100KbitÔºå‰∏î‰∏çÂèØÂÄüÁî®Êú™‰ΩøÁî®Â∏¶ÂÆΩ„ÄÇ$ tc class add dev eth0 parent 1:1 classid 1:2 cbq bandwidth 10Mbit rate 64Kbit maxburst 20 allot 1514 prio 8 avpkt 1000 cell 8 weight 100Kbit bounded ÂàõÂª∫ÂàÜÁ±ª1:3ÔºåÂÖ∂Áà∂ÂàÜÁ±ª‰∏∫1:1ÔºåÂàÜÈÖçÂ∏¶ÂÆΩ‰∏∫64KbitÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫9„ÄÇËØ•ÈòüÂàóÁöÑÊúÄÂ§ßÂèØÁî®Â∏¶ÂÆΩ‰∏∫10MbitÔºåÂÆûÈôÖÂàÜÈÖçÁöÑÂ∏¶ÂÆΩ‰∏∫64KbitÔºåÂèØÊé•Êî∂ÂÜ≤Á™ÅÁöÑÂèëÈÄÅÊúÄÈïøÂåÖÊï∞ÁõÆ‰∏∫20Â≠óËäÇÔºõÊúÄÂ§ß‰º†ËæìÂçïÂÖÉÂä†MACÂ§¥ÁöÑÂ§ßÂ∞è‰∏∫1514Â≠óËäÇÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫9ÔºåÂåÖÁöÑÂπ≥ÂùáÂ§ßÂ∞è‰∏∫1000Â≠óËäÇÔºåÂåÖÈó¥ÈöîÂèëÈÄÅÂçïÂÖÉÁöÑÂ§ßÂ∞è‰∏∫8Â≠óËäÇÔºåÁõ∏Â∫î‰∫éÂÆûÈôÖÂ∏¶ÂÆΩÁöÑÂä†ÊùÉÈÄüÁéá‰∏∫100KbitÔºå‰∏î‰∏çÂèØÂÄüÁî®Êú™‰ΩøÁî®Â∏¶ÂÆΩ„ÄÇ$ tc class add dev eth0 parent 1:1 classid 1:3 cbq bandwidth 10Mbit rate 64Kbit maxburst 20 allot 1514 prio 9 avpkt 1000 cell 8 weight 100Kbit bounded Âú®Â≠êÂàÜÁ±ªÂú∞‰∏ãÂàõÂª∫ÈòüÂàóÔºå‰ΩøÁî®sfqÈöèÊú∫ÂÖ¨Âπ≥ÈòüÂàó 12$ tc qdisc add dev eth0 parent 1:2 sfq quantum 1514b perturb 15$ tc qdisc add dev eth0 parent 1:3 sfq quantum 1514b perturb 15 Âú®ÂàÜÁ±ªÂ∫ï‰∏ãÔºåÂàõÂª∫ÈòüÂàóÔºå‰ΩøÁî®sfqÈöèÂç≥ÂÖ¨Âπ≥ÈòüÂàó ‰∏∫ÊØè‰∏ÄÂàÜÁ±ªÂª∫Á´ã‰∏Ä‰∏™Âü∫‰∫éË∑ØÁî±ÁöÑËøáÊª§ 12$ tc filter add dev eth0 parent 1:0 protocol ip prio 1 u32 match ip dst 192.111.1.116 flowid 1:2$ tc filter add dev eth0 parent 1:0 protocol ip prio 1 u32 match ip dst 192.111.1.66 flowid 1:3 ÈôêÂà∂ÂêÑipÂú∞ÂùÄÁöÑ‰∏ãËΩΩÂ∏¶ÂÆΩÔºå‰ΩøÁî®u32ËøáÊª§Âô®ÔºåÂØπÁõÆÁöÑÂú∞ÂùÄËøõË°åÂàÜÁ±ªÔºåÂØπÂ∫îÂ∑≤ÁªèÂàõÂª∫ÁöÑÈòüÂàóÈúÄË¶ÅÊ∑ªÂä†Êñ∞ÁöÑË¢´ÈôêÂà∂ipÁöÑ‰∏ãËΩΩÂ∏¶ÂÆΩÔºåÈúÄË¶ÅÂÖàË¶ÅÂàõÂª∫Êñ∞ÁöÑÂàÜÁ±ª(ÊØîÂ¶Ç1:4),ÁÑ∂ÂêéÊ†πÊçÆÊñ∞ÁöÑÂàÜÁ±ªÂàõÂª∫Êñ∞ÁöÑsfqÈòüÂàóÔºåÊúÄÂêé‰ΩøÁî®u32ËøáÊª§Âô®ÂØπÁõÆÁöÑÂú∞ÂùÄËøõË°åÂ∏¶ÂÆΩÈôêÂà∂„ÄÇÈúÄË¶ÅÂØπÂá†‰∏™ipÈôêÂà∂‰∏ãËΩΩÂ∏¶ÂÆΩÔºåÂ∞±ÈúÄË¶ÅÂàõÂª∫Âá†‰∏™ÂàÜÁ±ª„ÄÅÈòüÂàó„ÄÅËøáÊª§Âô® ÈôêÂà∂‰∏ä‰º† Â∞Ü‰∏Ä‰∏™cbqÈòüÂàóÁªëÂÆöÂà∞ÁΩëÁªúÁâ©ÁêÜËÆæÂ§áeth2‰∏äÔºåÂÖ∂ÁºñÂè∑‰∏∫2:0ÔºõÁΩëÁªúÁâ©ÁêÜËÆæÂ§áeth2ÁöÑÂÆûÈôÖÂ∏¶ÂÆΩ‰∏∫2MbitÔºåÂåÖÁöÑÂπ≥ÂùáÂ§ßÂ∞è‰∏∫1000Â≠óËäÇÔºõÂåÖÈó¥ÈöîÂèëÈÄÅÂçïÂÖÉÁöÑÂ§ßÂ∞è‰∏∫8Â≠óËäÇÔºåÊúÄÂ∞è‰º†ËæìÂåÖÂ§ßÂ∞è‰∏∫64Â≠óËäÇ„ÄÇ 1$ tc qdisc add dev eth2 root handle 2: cbq bandwidth 2Mbit avpkt 1000 cell 8 mpu 64 ÂàõÂª∫Ê†πÂàÜÁ±ª2:1ÔºõÂàÜÈÖçÂ∏¶ÂÆΩ‰∏∫2MbitÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫1„ÄÇËØ•ÈòüÂàóÁöÑÊúÄÂ§ßÂèØÁî®Â∏¶ÂÆΩ‰∏∫2MbitÔºåÂÆûÈôÖÂàÜÈÖçÁöÑÂ∏¶ÂÆΩ2MbitÔºå ÂèØÊé•Êî∂ÂÜ≤Á™ÅÁöÑÂèëÈÄÅÊúÄÈïøÂåÖÊï∞ÁõÆ‰∏∫20Â≠óËäÇÔºõÊúÄÂ§ß‰º†ËæìÂçïÂÖÉÂä†MACÂ§¥ÁöÑÂ§ßÂ∞è‰∏∫1514Â≠óËäÇÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫1ÔºåÂåÖÁöÑÂπ≥Âùá Â§ßÂ∞è‰∏∫1000Â≠óËäÇÔºåÂåÖÈó¥ÈöîÂèëÈÄÅÂçïÂÖÉÁöÑÂ§ßÂ∞è‰∏∫8Â≠óËäÇÔºåÁõ∏Â∫î‰∫éÂÆûÈôÖÂ∏¶ÂÆΩÁöÑÂä†ÊùÉÈÄüÁéá‰∏∫200Kbit„ÄÇ 1$ tc class add dev eth2 parent 2:0 classid 2:1 cbq bandwidth 2Mbit rate 2Mbit maxburst 20 allot 1514 prio 1 avpkt 1000 cell 8 weight 200Kbit ÂàõÂª∫ÂàÜÁ±ª2:2ÔºåÂÖ∂Áà∂ÂàÜÁ±ª‰∏∫2:1ÔºåÂàÜÈÖçÂ∏¶ÂÆΩ‰∏∫64KbitÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫8„ÄÇËØ•ÈòüÂàóÁöÑÊúÄÂ§ßÂèØÁî®Â∏¶ÂÆΩ‰∏∫2MbitÔºåÂÆûÈôÖÂàÜÈÖçÁöÑÂ∏¶ÂÆΩ‰∏∫64KbitÔºåÂèØÊé•Êî∂ÂÜ≤Á™ÅÁöÑÂèëÈÄÅÊúÄÈïøÂåÖÊï∞ÁõÆ‰∏∫20Â≠óËäÇÔºõÊúÄÂ§ß‰º†ËæìÂçïÂÖÉÂä†MACÂ§¥ÁöÑÂ§ßÂ∞è‰∏∫1514Â≠óËäÇÔºå‰ºòÂÖàÁ∫ßÂà´‰∏∫8ÔºåÂåÖÁöÑÂπ≥ÂùáÂ§ßÂ∞è‰∏∫1000Â≠óËäÇÔºåÂåÖÈó¥ÈöîÂèëÈÄÅÂçïÂÖÉÁöÑÂ§ßÂ∞è‰∏∫8Â≠óËäÇÔºåÁõ∏Â∫î‰∫éÂÆûÈôÖÂ∏¶ÂÆΩÁöÑÂä†ÊùÉÈÄüÁéá‰∏∫100KbitÔºå‰∏î‰∏çÂèØÂÄüÁî®Êú™‰ΩøÁî®Â∏¶ÂÆΩ„ÄÇ 1$ tc class add dev eth2 parent 2:1 classid 2:2 cbq bandwidth 2Mbit rate 64Kbit maxburst 20 allot 1514 prio 8 avpkt 1000 cell 8 weight 200Kbit bounded Âú®ÂàÜÁ±ªÂ∫ï‰∏ãÔºåÂàõÂª∫ÈòüÂàóÔºå‰ΩøÁî®sfqÈöèÂç≥ÂÖ¨Âπ≥ÈòüÂàó 1$ tc qdisc add dev eth2 parent 2:2 sfq quantum 1514b perturb 15 Â∫îÁî®Ë∑ØÁî±ÂàÜÁ±ªÂô®Âà∞cbqÈòüÂàóÁöÑÊ†πÔºåËøáÊª§ÂçèËÆÆ‰∏∫ipÔºå‰ºòÂÖàÁ∫ß‰∏∫100 1$ tc filter add dev eth2 parent 2:0 protocol ip prio 1 handle 2 fw classid 2:2 ÁªôÊï∞ÊçÆÂåÖÊâìÊ†áÁ≠æ,ÂèØ‰ª•ÈÄöËøáRETURNÊñπÊ≥ïÈÅøÂÖçÈÅçÂéÜÊâÄÊúâÁöÑËßÑÂàôÔºåÂä†Âø´Â§ÑÁêÜÈÄüÂ∫¶ 12$ iptables ‚Äìt mangle ‚ÄìA PREROUTING ‚Äìi eth0 ‚Äìs 192.111.1.xxx ‚Äìj MARK --set-mark 2$ iptables ‚Äìt mangle ‚ÄìA PREROUTING ‚Äìi eth0 ‚Äìs 192.111.1.xxx ‚Äìj RETURN natÊ®°Âºè 1$ iptables -t nat -A POSTROUTING -s 192.111.1.0/24 -o eth2 -j SNAT --to Â§ñÁΩëIP ÈúÄË¶ÅÊ∑ªÂä†Êñ∞ÁöÑË¢´ÈôêÂà∂ipÁöÑ‰∏ä‰º†Â∏¶ÂÆΩÔºåÈúÄË¶ÅÂÖàË¶ÅÂàõÂª∫Êñ∞ÁöÑÂàÜÁ±ª(ÊØîÂ¶Ç2:3),ÁÑ∂ÂêéÊ†πÊçÆÊñ∞ÁöÑÂàÜÁ±ªÂàõÂª∫Êñ∞ÁöÑsfqÈòüÂàóÔºåÊúÄÂêé‰ΩøÁî®Ë∑ØÁî±ËøáÊª§Âô®ÔºåËøáÊª§ÂçèËÆÆ‰∏∫ipÔºåÁªôÂéüÂú∞ÂùÄÊòØÈúÄË¶ÅÈôêÂà∂ÁöÑipÂú∞ÂùÄÊù•ÁöÑÊï∞ÊçÆÂåÖÊâìÊ†áËÆ∞„ÄÇÈúÄË¶ÅÂØπÂá†‰∏™ipÈôêÂà∂‰∏ãËΩΩÂ∏¶ÂÆΩÔºåÂ∞±ÈúÄË¶ÅÂàõÂª∫Âá†‰∏™ÂàÜÁ±ª„ÄÅÈòüÂàó„ÄÅË∑ØÁî±ËøáÊª§Âô®„ÄÅiptableÁöÑmangleË°®ÁöÑPREROUTINGÈìæ Âè¶Â§ñËøòÊúâÂÖ∂‰ªñÁöÑËøáÊª§Âô®ÊØîÂ¶Ç 1$ tc filter add dev eth0 parent 1:0 protocol ip prio 100 route to 2 flowid 1:2 ip route add 192.111.1.24 dev eth0 via 192.111.1.4 realm 2 Áª¥Êä§ ‰∏ªË¶ÅÂåÖÊã¨ÂØπÈòüÂàó„ÄÅÂàÜÁ±ª„ÄÅËøáÊª§Âô®ÂíåË∑ØÁî±ÁöÑÂ¢ûÊ∑ª„ÄÅ‰øÆÊîπÂíåÂà†Èô§„ÄÇ Â¢ûÊ∑ªÂä®‰Ωú‰∏ÄËà¨‰æùÁÖß‚ÄùÈòüÂàó-&gt;ÂàÜÁ±ª-&gt;ËøáÊª§Âô®-&gt;Ë∑ØÁî±‚ÄùÁöÑÈ°∫Â∫èËøõË°åÔºõ‰øÆÊîπÂä®‰ΩúÂàôÊ≤°Êúâ‰ªÄ‰πàË¶ÅÊ±ÇÔºõÂà†Èô§Âàô‰æùÁÖß‚ÄùË∑ØÁî±-&gt;ËøáÊª§Âô®-&gt;ÂàÜÁ±ª-&gt;ÈòüÂàó‚ÄùÁöÑÈ°∫Â∫èËøõË°å„ÄÇ ÁÆÄÂçïÊòæÁ§∫ÊåáÂÆöËÆæÂ§áÁöÑÈòüÂàóÁä∂ÂÜµ 1$ tc qdisc ls dev eth0 ËØ¶ÁªÜÊòæÁ§∫ÊåáÂÆöËÆæÂ§áÁöÑÈòüÂàóÁä∂ÂÜµ 1$ tc ‚Äìs qdisc ls dev eth0 ÁÆÄÂçïÊòæÁ§∫ÊåáÂÆöËÆæÂ§áÁöÑÂàÜÁ±ªÁä∂ÂÜµ 1$ tc class ls dev eth0 ËØ¶ÁªÜÊòæÁ§∫ÊåáÂÆöËÆæÂ§áÁöÑÂàÜÁ±ªÁä∂ÂÜµ 1$ tc ‚Äìs class ls dev eth0 ÊòæÁ§∫ËøáÊª§Âô®ÁöÑÁä∂ÂÜµ 1$ tc ‚Äìs filter ls dev eth0 ÈòüÂàóÁöÑÁª¥Êä§ ‰∏ÄËà¨ÂØπ‰∫é‰∏ÄÂè∞ÊµÅÈáèÊéßÂà∂Âô®Êù•ËØ¥ÔºåÂá∫ÂéÇÊó∂ÈíàÂØπÊØè‰∏™‰ª•Â§™ÁΩëÂç°ÂùáÂ∑≤ÈÖçÁΩÆÂ•Ω‰∏Ä‰∏™ÈòüÂàó‰∫ÜÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÂØπÈòüÂàóÊó†ÈúÄËøõË°åÂ¢ûÊ∑ª„ÄÅ‰øÆÊîπÂíåÂà†Èô§Âä®‰Ωú‰∫Ü„ÄÇ ÂàÜÁ±ªÁöÑÁª¥Êä§ Â¢ûÊ∑ªÂä®‰ΩúÈÄöËøátc class addÂëΩ‰ª§ÂÆûÁé∞„ÄÇ ‰øÆÊîπÂä®‰ΩúÈÄöËøátc class changeÂëΩ‰ª§ÂÆûÁé∞ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 1$ tc class change dev eth0 parent 1:1 classid 1:2 cbq bandwidth 10Mbit rate 64Kbit maxburst 20 allot 1514 prio 8 avpkt 1000 cell 8 weight 100Kbit bounded ÂØπ‰∫éboundedÂëΩ‰ª§Â∫îÊÖéÁî®Ôºå‰∏ÄÊó¶Ê∑ªÂä†ÂêéÂ∞±ËøõË°å‰øÆÊîπÔºåÂè™ÂèØÈÄöËøáÂà†Èô§ÂêéÂÜçÊ∑ªÂä†Êù•ÂÆûÁé∞„ÄÇ ËøáÊª§Âô®ÁöÑÁª¥Êä§ Â¢ûÊ∑ªÂä®‰ΩúÈÄöËøátc filter addÂëΩ‰ª§ÂÆûÁé∞„ÄÇ ‰øÆÊîπÂä®‰ΩúÈÄöËøátc filter changeÂëΩ‰ª§ÂÆûÁé∞ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 1$ tc filter change dev eth0 parent 1:0 protocol ip prio 1 u32 match ip dst 192.111.1.116 flowid 1:2 Âà†Èô§Âä®‰ΩúÈÄöËøátc filter delÂëΩ‰ª§ÂÆûÁé∞ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö 1$ tc filter del dev eth0 parent 1:0 protocol ip prio 1 u32 match ip dst 192.111.1.116 flowid 1:]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>tc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iptables‰πãnatË°®Â∫îÁî®‚Äî‚ÄîIP‰∏éÁ´ØÂè£ÁöÑÊò†Â∞Ñ]]></title>
    <url>%2Flinux%2Flinux%2Fshell-iptables-1%2F</url>
    <content type="text"><![CDATA[ÈúÄÊ±Ç Â∞Ü192.168.3.195Ôºö80 Êò†Â∞ÑÂà∞192.168.3.193Ôºö80ÔºåÂç≥ËÆøÈóÆ192.168.3.195Ôºö80ÔºåÂæóÂà∞192.168.3.193Ôºö80ÁöÑÁªìÊûúÔºåÂÆûÁé∞linuxÁöÑË∑ØÁî±„ÄÇ ÂÆûÁé∞ 123456789101112131415161718192021#!/bin/bash#ÊâìÂºÄËΩ¨ÂèëÂäüËÉΩecho "1" &gt; /proc/sys/net/ipv4/ip_forward /sbin/iptables -F -t filter#Ê∏ÖÁ©∫iptables/sbin/iptables -F -t nat #Âéª192.168.3.193ÁöÑ‰∏ÄÊù°Ë∑Ø/sbin/iptables -t nat -A PREROUTING -d 192.168.3.195 -p tcp --dport 80 -j DNAT --to-destination 192.168.3.193:80 #ËøîÂõûÁöÑÊó∂ÂÄôÁöÑ‰∏ÄÊù°Ë∑ØÔºåip‰º†ËæìË¶ÅÊúâÂéªÊúâÂõûÊâçËÉΩËøûÈÄö /sbin/iptables -t nat -A POSTROUTING -s 192.168.3.0/24 -o eth0 -j SNAT --to 192.168.3.195 #Áî®2ÁΩëÊÆµËÆøÈóÆÁöÑÊó∂ÂÄôÁöÑÂõûË∑Ø/sbin/iptables -t nat -A POSTROUTING -s 192.168.2.0/24 -o eth0 -j SNAT --to 192.168.3.195 #Áî®0ÁΩëÊÆµËÆøÈóÆÁöÑÊó∂ÂÄôÁöÑÂõûË∑Ø/sbin/iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j SNAT --to 192.168.3.195 ÂõûË∑ØÁöÑÈÇ£‰∏ÄÊù°ÔºåÊàñËÄÖÂè™Áî®‰∏ãÈù¢Ëøô‰∏ÄÂè•Ôºöiptables -t nat -A POSTROUTING -s 0.0.0.0/0 -o eth0 -j SNAT --to 192.168.3.195ÊàñËÄÖiptables -t nat -A POSTROUTING -o eth0 -j SNAT --to 192.168.3.195Êää193‰∏äÁöÑ80Á´ØÂè£ÊâìÂºÄ ÊµãËØï Âú®192.168.3.195‰∏äËÆøÈóÆ 192.168.3.195Ôºö80ÁúãÂà∞ 195ÁöÑapache‰∏ªÈ°µÔºåÂõ†‰∏∫Âú®Êú¨Êú∫‰∏äËÆøÈóÆÔºåÊ≤°ÊúâËµ∞PREROUTINGËøôÊù°Èìæ„ÄÇÂú®ÂÖ∂‰ªñ‰∏ªÊú∫‰∏äËÆøÈóÆ192.168.3.195Ôºö80 ËøîÂõû193ÁöÑapache‰∏ªÈ°µÔºåË∑ØÁ∫ø‰∏∫PREROUTING‚Äì&gt;FORWARD‚Äì&gt;PSOTROUTING.]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IptablesÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-iptables%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãiptablesÂëΩ‰ª§ÊòØLinux‰∏äÂ∏∏Áî®ÁöÑÈò≤ÁÅ´Â¢ôËΩØ‰ª∂ÔºåÊòØnetfilterÈ°πÁõÆÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÂèØ‰ª•Áõ¥Êé•ÈÖçÁΩÆÔºå‰πüÂèØ‰ª•ÈÄöËøáËÆ∏Â§öÂâçÁ´ØÂíåÂõæÂΩ¢ÁïåÈù¢ÈÖçÁΩÆ„ÄÇ ÂèÇÊï∞ËØ¥Êòé12345678910111213141516-t&lt;Ë°®&gt;ÔºöÊåáÂÆöË¶ÅÊìçÁ∫µÁöÑË°®Ôºõ-AÔºöÂêëËßÑÂàôÈìæ‰∏≠Ê∑ªÂä†Êù°ÁõÆÔºõ-DÔºö‰ªéËßÑÂàôÈìæ‰∏≠Âà†Èô§Êù°ÁõÆÔºõ-iÔºöÂêëËßÑÂàôÈìæ‰∏≠ÊèíÂÖ•Êù°ÁõÆÔºõ-RÔºöÊõøÊç¢ËßÑÂàôÈìæ‰∏≠ÁöÑÊù°ÁõÆÔºõ-LÔºöÊòæÁ§∫ËßÑÂàôÈìæ‰∏≠Â∑≤ÊúâÁöÑÊù°ÁõÆÔºõ-FÔºöÊ∏ÖÊ•öËßÑÂàôÈìæ‰∏≠Â∑≤ÊúâÁöÑÊù°ÁõÆÔºõ-ZÔºöÊ∏ÖÁ©∫ËßÑÂàôÈìæ‰∏≠ÁöÑÊï∞ÊçÆÂåÖËÆ°ÁÆóÂô®ÂíåÂ≠óËäÇËÆ°Êï∞Âô®Ôºõ-NÔºöÂàõÂª∫Êñ∞ÁöÑÁî®Êà∑Ëá™ÂÆö‰πâËßÑÂàôÈìæÔºõ-PÔºöÂÆö‰πâËßÑÂàôÈìæ‰∏≠ÁöÑÈªòËÆ§ÁõÆÊ†áÔºõ-hÔºöÊòæÁ§∫Â∏ÆÂä©‰ø°ÊÅØÔºõ-pÔºöÊåáÂÆöË¶ÅÂåπÈÖçÁöÑÊï∞ÊçÆÂåÖÂçèËÆÆÁ±ªÂûãÔºõ-sÔºöÊåáÂÆöË¶ÅÂåπÈÖçÁöÑÊï∞ÊçÆÂåÖÊ∫êipÂú∞ÂùÄÔºõ-j&lt;ÁõÆÊ†á&gt;ÔºöÊåáÂÆöË¶ÅË∑≥ËΩ¨ÁöÑÁõÆÊ†áÔºõ-i&lt;ÁΩëÁªúÊé•Âè£&gt;ÔºöÊåáÂÆöÊï∞ÊçÆÂåÖËøõÂÖ•Êú¨Êú∫ÁöÑÁΩëÁªúÊé•Âè£Ôºõ-o&lt;ÁΩëÁªúÊé•Âè£&gt;ÔºöÊåáÂÆöÊï∞ÊçÆÂåÖË¶ÅÁ¶ªÂºÄÊú¨Êú∫ÊâÄ‰ΩøÁî®ÁöÑÁΩëÁªúÊé•Âè£„ÄÇ ÂëΩ‰ª§Ê†ºÂºèiptables -t Ë°®Âêç &lt;-A/I/D/R&gt; ËßÑÂàôÈìæÂêç [ËßÑÂàôÂè∑] &lt;-i/o ÁΩëÂç°Âêç&gt; -p ÂçèËÆÆÂêç &lt;-s Ê∫êIP/Ê∫êÂ≠êÁΩë&gt; --sport Ê∫êÁ´ØÂè£ &lt;-d ÁõÆÊ†áIP/ÁõÆÊ†áÂ≠êÁΩë&gt; --dport ÁõÆÊ†áÁ´ØÂè£ -j Âä®‰Ωú Ë°®ÂêçÂåÖÊã¨ 1234rawÔºöÈ´òÁ∫ßÂäüËÉΩÔºåÂ¶ÇÔºöÁΩëÂùÄËøáÊª§„ÄÇmangleÔºöÊï∞ÊçÆÂåÖ‰øÆÊîπÔºàQOSÔºâÔºåÁî®‰∫éÂÆûÁé∞ÊúçÂä°Ë¥®Èáè„ÄÇnetÔºöÂú∞ÂùÄËΩ¨Êç¢ÔºåÁî®‰∫éÁΩëÂÖ≥Ë∑ØÁî±Âô®„ÄÇfilterÔºöÂåÖËøáÊª§ÔºåÁî®‰∫éÈò≤ÁÅ´Â¢ôËßÑÂàô„ÄÇ ËßÑÂàôÈìæÂêçÂåÖÊã¨ 12345INPUTÈìæÔºöÂ§ÑÁêÜËæìÂÖ•Êï∞ÊçÆÂåÖ„ÄÇOUTPUTÈìæÔºöÂ§ÑÁêÜËæìÂá∫Êï∞ÊçÆÂåÖ„ÄÇPORWARDÈìæÔºöÂ§ÑÁêÜËΩ¨ÂèëÊï∞ÊçÆÂåÖ„ÄÇPREROUTINGÈìæÔºöÁî®‰∫éÁõÆÊ†áÂú∞ÂùÄËΩ¨Êç¢ÔºàDNATÔºâ„ÄÇPOSTOUTINGÈìæÔºöÁî®‰∫éÊ∫êÂú∞ÂùÄËΩ¨Êç¢ÔºàSNATÔºâ„ÄÇ Âä®‰ΩúÂåÖÊã¨ 1234567acceptÔºöÊé•Êî∂Êï∞ÊçÆÂåÖ„ÄÇDROPÔºö‰∏¢ÂºÉÊï∞ÊçÆÂåÖ„ÄÇREDIRECTÔºöÈáçÂÆöÂêë„ÄÅÊò†Â∞Ñ„ÄÅÈÄèÊòé‰ª£ÁêÜ„ÄÇSNATÔºöÊ∫êÂú∞ÂùÄËΩ¨Êç¢„ÄÇDNATÔºöÁõÆÊ†áÂú∞ÂùÄËΩ¨Êç¢„ÄÇMASQUERADEÔºöIP‰º™Ë£ÖÔºàNATÔºâÔºåÁî®‰∫éADSL„ÄÇLOGÔºöÊó•ÂøóËÆ∞ÂΩï„ÄÇ Á§∫‰æãÊ∏ÖÈô§Â∑≤ÊúâiptablesËßÑÂàô123$ iptables -F$ iptables -X$ iptables -Z ÂºÄÊîæÊåáÂÆöÁöÑÁ´ØÂè£123456789$ iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT #ÂÖÅËÆ∏Êú¨Âú∞ÂõûÁéØÊé•Âè£(Âç≥ËøêË°åÊú¨Êú∫ËÆøÈóÆÊú¨Êú∫)$ iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT #ÂÖÅËÆ∏Â∑≤Âª∫Á´ãÁöÑÊàñÁõ∏ÂÖ≥ËøûÁöÑÈÄöË°å$ iptables -A OUTPUT -j ACCEPT #ÂÖÅËÆ∏ÊâÄÊúâÊú¨Êú∫ÂêëÂ§ñÁöÑËÆøÈóÆ$ iptables -A INPUT -p tcp --dport 22 -j ACCEPT #ÂÖÅËÆ∏ËÆøÈóÆ22Á´ØÂè£$ iptables -A INPUT -p tcp --dport 80 -j ACCEPT #ÂÖÅËÆ∏ËÆøÈóÆ80Á´ØÂè£$ iptables -A INPUT -p tcp --dport 21 -j ACCEPT #ÂÖÅËÆ∏ftpÊúçÂä°ÁöÑ21Á´ØÂè£$ iptables -A INPUT -p tcp --dport 20 -j ACCEPT #ÂÖÅËÆ∏FTPÊúçÂä°ÁöÑ20Á´ØÂè£$ iptables -A INPUT -j reject #Á¶ÅÊ≠¢ÂÖ∂‰ªñÊú™ÂÖÅËÆ∏ÁöÑËßÑÂàôËÆøÈóÆ$ iptables -A FORWARD -j REJECT #Á¶ÅÊ≠¢ÂÖ∂‰ªñÊú™ÂÖÅËÆ∏ÁöÑËßÑÂàôËÆøÈóÆ Â±èËîΩIP1234$ iptables -I INPUT -s 123.45.6.7 -j DROP #Â±èËîΩÂçï‰∏™IPÁöÑÂëΩ‰ª§$ iptables -I INPUT -s 123.0.0.0/8 -j DROP #Â∞ÅÊï¥‰∏™ÊÆµÂç≥‰ªé123.0.0.1Âà∞123.255.255.254ÁöÑÂëΩ‰ª§$ iptables -I INPUT -s 124.45.0.0/16 -j DROP #Â∞ÅIPÊÆµÂç≥‰ªé123.45.0.1Âà∞123.45.255.254ÁöÑÂëΩ‰ª§$ iptables -I INPUT -s 123.45.6.0/24 -j DROP #Â∞ÅIPÊÆµÂç≥‰ªé123.45.6.1Âà∞123.45.6.254ÁöÑÂëΩ‰ª§ÊòØ Êü•ÁúãÂ∑≤Ê∑ªÂä†ÁöÑiptablesËßÑÂàô123456789101112131415$ iptables -L -n -vChain INPUT (policy DROP 48106 packets, 2690K bytes) pkts bytes target prot opt in out source destination 5075 589K ACCEPT all -- lo * 0.0.0.0/0 0.0.0.0/0 191K 90M ACCEPT tcp -- * * 0.0.0.0/0 0.0.0.0/0 tcp dpt:221499K 133M ACCEPT tcp -- * * 0.0.0.0/0 0.0.0.0/0 tcp dpt:804364K 6351M ACCEPT all -- * * 0.0.0.0/0 0.0.0.0/0 state RELATED,ESTABLISHED 6256 327K ACCEPT icmp -- * * 0.0.0.0/0 0.0.0.0/0 Chain FORWARD (policy ACCEPT 0 packets, 0 bytes) pkts bytes target prot opt in out source destination Chain OUTPUT (policy ACCEPT 3382K packets, 1819M bytes) pkts bytes target prot opt in out source destination 5075 589K ACCEPT all -- * lo 0.0.0.0/0 0.0.0.0/0 Âà†Èô§Â∑≤Ê∑ªÂä†ÁöÑiptablesËßÑÂàô Â∞ÜÊâÄÊúâiptables‰ª•Â∫èÂè∑Ê†áËÆ∞ÊòæÁ§∫ÔºåÊâßË°å 1$ iptables -L -n --line-numbers ÊØîÂ¶ÇË¶ÅÂà†Èô§INPUTÈáåÂ∫èÂè∑‰∏∫8ÁöÑËßÑÂàôÔºåÊâßË°å 1$ iptables -D INPUT 8]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[shell /bin/bash^M: bad interpreterÈîôËØØËß£ÂÜ≥]]></title>
    <url>%2Flinux%2Flinux%2Ferror-bash-1%2F</url>
    <content type="text"><![CDATA[ÈîôËØØÂéüÂõ†‰πã‰∏ÄÂæàÊúâÂèØËÉΩÊòØ‰Ω†ÁöÑËÑöÊú¨Êñá‰ª∂ÊòØDOSÊ†ºÂºèÁöÑ, Âç≥ÊØè‰∏ÄË°åÁöÑË°åÂ∞æ‰ª•\r\nÊù•Ê†áËØÜ, ÂÖ∂ASCIIÁ†ÅÂàÜÂà´ÊòØ0x0D, 0x0A.ÂèØ‰ª•ÊúâÂæàÂ§öÁßçÂäûÊ≥ïÁúãËøô‰∏™Êñá‰ª∂ÊòØDOSÊ†ºÂºèÁöÑËøòÊòØUNIXÊ†ºÂºèÁöÑ, ËøòÊòØMACÊ†ºÂºèÁöÑ„ÄÇ vi filenameÁÑ∂ÂêéÁî®ÂëΩ‰ª§:set ff?ÂèØ‰ª•ÁúãÂà∞dosÊàñunixÁöÑÂ≠óÊ†∑. Â¶ÇÊûúÁöÑÁ°ÆÊòØdosÊ†ºÂºèÁöÑ, ÈÇ£‰πà‰Ω†ÂèØ‰ª•Áî®set ff=unixÊääÂÆÉÂº∫Âà∂‰∏∫unixÊ†ºÂºèÁöÑ, ÁÑ∂ÂêéÂ≠òÁõòÈÄÄÂá∫. ÂÜçËøêË°å‰∏ÄÈÅçÁúã. Áî®joe filenameÂ¶ÇÊûúÊòØDOSÊ†ºÂºèÁöÑ, ÈÇ£‰πàË°åÂ∞æ‰ºöÊúâÂæàÂ§öÁªøËâ≤ÁöÑ^MÂ≠óÊ†∑Âá∫Áé∞. ‰Ω†‰πüÂèØ‰ª•Áî®‰∏äËø∞ÂäûÊ≥ïÊääÂÆÉËΩ¨‰∏∫UNIXÊ†ºÂºèÁöÑ. Áî®od -t x1 filenameÂ¶ÇÊûú‰Ω†ÁúãÂà∞Êúâ0d 0a ËøôÊ†∑ÁöÑÂ≠óÁ¨¶, ÈÇ£‰πàÂÆÉÊòØdosÊ†ºÂºèÁöÑ, Â¶ÇÊûúÂè™Êúâ0aËÄåÊ≤°Êúâ0d, ÈÇ£‰πàÂÆÉÊòØUNIXÊ†ºÂºèÁöÑ, ÂêåÊ†∑ÂèØ‰ª•Áî®‰∏äËø∞ÊñπÊ≥ïÊääÂÆÉËΩ¨‰∏∫UNIXÊ†ºÂºèÁöÑ. ËΩ¨Êç¢‰∏çÂêåÂπ≥Âè∞ÁöÑÊñáÊú¨Êñá‰ª∂Ê†ºÂºèÂèØ‰ª•Áî® unix2dosÊàñdos2unixËøô‰∏§‰∏™Â∞èÁ®ãÂ∫èÊù•ÂÅö. ÂæàÁÆÄÂçï. Âú®djgpp‰∏≠Ëøô‰∏§‰∏™Á®ãÂ∫èÁöÑÂêçÂ≠óÂè´dtouÂíåutod, u‰ª£Ë°®unix, d‰ª£Ë°®dos ‰πüÂèØ‰ª•Áî®sed ËøôÊ†∑ÁöÑÂ∑•ÂÖ∑Êù•ÂÅö: 12$ sed 's/^M//' filename &gt; tmp_filename$ mv -f tmp_filename filename Êù•ÂÅöËØ¥Êòé:^MÂπ∂‰∏çÊòØÊåâÈîÆshift + 6‰∫ßÁîüÁöÑ^ÂíåÂ≠óÊØçM, ÂÆÉÊòØ‰∏Ä‰∏™Â≠óÁ¨¶, ÂÖ∂ASCIIÊòØ0x0D, ÁîüÊàêÂÆÉÁöÑÂäûÊ≥ïÊòØÂÖàÊåâCTRL+V, ÁÑ∂ÂêéÂÜçÂõûËΩ¶(ÊàñCTRL+M)]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TcpdumpÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-tcpdump%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãÁî®ÁÆÄÂçïÁöÑËØùÊù•ÂÆö‰πâtcpdumpÔºåÂ∞±ÊòØÔºödump the traffic on a networkÔºåÊ†πÊçÆ‰ΩøÁî®ËÄÖÁöÑÂÆö‰πâÂØπÁΩëÁªú‰∏äÁöÑÊï∞ÊçÆÂåÖËøõË°åÊà™Ëé∑ÁöÑÂåÖÂàÜÊûêÂ∑•ÂÖ∑„ÄÇ tcpdumpÂèØ‰ª•Â∞ÜÁΩëÁªú‰∏≠‰º†ÈÄÅÁöÑÊï∞ÊçÆÂåÖÁöÑ‚ÄúÂ§¥‚ÄùÂÆåÂÖ®Êà™Ëé∑‰∏ãÊù•Êèê‰æõÂàÜÊûê„ÄÇÂÆÉÊîØÊåÅÈíàÂØπÁΩëÁªúÂ±Ç„ÄÅÂçèËÆÆ„ÄÅ‰∏ªÊú∫„ÄÅÁΩëÁªúÊàñÁ´ØÂè£ÁöÑËøáÊª§ÔºåÂπ∂Êèê‰æõand„ÄÅor„ÄÅnotÁ≠âÈÄªËæëËØ≠Âè•Êù•Â∏ÆÂä©‰Ω†ÂéªÊéâÊó†Áî®ÁöÑ‰ø°ÊÅØ„ÄÇ ÂèÇÊï∞ËØ¥Êòé ‰ΩøÁî®Ê†ºÂºè $ tcpdump [ -DenNqvX ] [ -c count ] [ -F file ] [ -i interface ] [ -r file ] [ -s snaplen ] [ -wfile ] [ expression ] ÊäìÂåÖÈÄâÈ°π 12345678910111213-cÔºöÊåáÂÆöË¶ÅÊäìÂèñÁöÑÂåÖÊï∞Èáè„ÄÇÊ≥®ÊÑèÔºåÊòØÊúÄÁªàË¶ÅËé∑ÂèñËøô‰πàÂ§ö‰∏™ÂåÖ„ÄÇ‰æãÂ¶ÇÔºåÊåáÂÆö"-c 10"Â∞ÜËé∑Âèñ10‰∏™ÂåÖÔºå‰ΩÜÂèØËÉΩÂ∑≤Áªè Â§ÑÁêÜ‰∫Ü100‰∏™ÂåÖÔºåÂè™‰∏çËøáÂè™Êúâ10‰∏™ÂåÖÊòØÊª°Ë∂≥Êù°‰ª∂ÁöÑÂåÖ„ÄÇ -i interfaceÔºöÊåáÂÆötcpdumpÈúÄË¶ÅÁõëÂê¨ÁöÑÊé•Âè£„ÄÇËã•Êú™ÊåáÂÆöËØ•ÈÄâÈ°πÔºåÂ∞Ü‰ªéÁ≥ªÁªüÊé•Âè£ÂàóË°®‰∏≠ÊêúÂØªÁºñÂè∑ÊúÄÂ∞èÁöÑÂ∑≤ÈÖçÁΩÆÂ•ΩÁöÑÊé•Âè£(‰∏çÂåÖÊã¨loopbackÊé•Âè£ÔºåË¶ÅÊäìÂèñloopbackÊé•Âè£‰ΩøÁî®tcpdump -i lo)Ôºå‰∏ÄÊó¶ÊâæÂà∞Á¨¨‰∏Ä‰∏™Á¨¶ÂêàÊù°‰ª∂ÁöÑÊé•Âè£ÔºåÊêúÂØªÈ©¨‰∏äÁªìÊùü„ÄÇÂèØ‰ª•‰ΩøÁî®'any'ÂÖ≥ÈîÆÂ≠óË°®Á§∫ÊâÄÊúâÁΩëÁªúÊé•Âè£„ÄÇ -nÔºöÂØπÂú∞ÂùÄ‰ª•Êï∞Â≠óÊñπÂºèÊòæÂºèÔºåÂê¶ÂàôÊòæÂºè‰∏∫‰∏ªÊú∫ÂêçÔºå‰πüÂ∞±ÊòØËØ¥-nÈÄâÈ°π‰∏çÂÅö‰∏ªÊú∫ÂêçËß£Êûê„ÄÇ-nnÔºöÈô§‰∫Ü-nÁöÑ‰ΩúÁî®Â§ñÔºåËøòÊääÁ´ØÂè£ÊòæÁ§∫‰∏∫Êï∞ÂÄºÔºåÂê¶ÂàôÊòæÁ§∫Á´ØÂè£ÊúçÂä°Âêç„ÄÇ-NÔºö‰∏çÊâìÂç∞Âá∫hostÁöÑÂüüÂêçÈÉ®ÂàÜ„ÄÇ‰æãÂ¶ÇtcpdumpÂ∞Ü‰ºöÊâìÂç∞'nic'ËÄå‰∏çÊòØ'nic.ddn.mil'„ÄÇ-PÔºöÊåáÂÆöË¶ÅÊäìÂèñÁöÑÂåÖÊòØÊµÅÂÖ•ËøòÊòØÊµÅÂá∫ÁöÑÂåÖ„ÄÇÂèØ‰ª•ÁªôÂÆöÁöÑÂÄº‰∏∫"in"„ÄÅ"out"Âíå"inout"ÔºåÈªòËÆ§‰∏∫"inout"„ÄÇ-s lenÔºöËÆæÁΩÆtcpdumpÁöÑÊï∞ÊçÆÂåÖÊäìÂèñÈïøÂ∫¶‰∏∫lenÔºåÂ¶ÇÊûú‰∏çËÆæÁΩÆÈªòËÆ§Â∞Ü‰ºöÊòØ65535Â≠óËäÇ„ÄÇÂØπ‰∫éË¶ÅÊäìÂèñÁöÑÊï∞ÊçÆÂåÖËæÉÂ§ßÊó∂ÔºåÈïøÂ∫¶ËÆæÁΩÆ‰∏çÂ§üÂèØËÉΩ‰ºö‰∫ßÁîüÂåÖÊà™Êñ≠ÔºåËã•Âá∫Áé∞ÂåÖÊà™Êñ≠ÔºåËæìÂá∫Ë°å‰∏≠‰ºöÂá∫Áé∞"[|proto]"ÁöÑÊ†áÂøó(protoÂÆûÈôÖ‰ºöÊòæÁ§∫‰∏∫ÂçèËÆÆÂêç)„ÄÇ‰ΩÜÊòØÊäìÂèñlenË∂äÈïøÔºåÂåÖÁöÑÂ§ÑÁêÜÊó∂Èó¥Ë∂äÈïøÔºåÂπ∂‰∏î‰ºöÂáèÂ∞ëtcpdumpÂèØÁºìÂ≠òÁöÑÊï∞ÊçÆÂåÖÁöÑÊï∞ÈáèÔºå‰ªéËÄå‰ºöÂØºËá¥Êï∞ÊçÆÂåÖÁöÑ‰∏¢Â§±ÔºåÊâÄ‰ª•Âú®ËÉΩÊäìÂèñÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÂåÖÁöÑÂâçÊèê‰∏ãÔºåÊäìÂèñÈïøÂ∫¶Ë∂äÂ∞èË∂äÂ•Ω„ÄÇ ËæìÂá∫ÈÄâÈ°π 1234567-eÔºöËæìÂá∫ÁöÑÊØèË°å‰∏≠ÈÉΩÂ∞ÜÂåÖÊã¨Êï∞ÊçÆÈìæË∑ØÂ±ÇÂ§¥ÈÉ®‰ø°ÊÅØÔºå‰æãÂ¶ÇÊ∫êMACÂíåÁõÆÊ†áMAC„ÄÇ-qÔºöÂø´ÈÄüÊâìÂç∞ËæìÂá∫„ÄÇÂç≥ÊâìÂç∞ÂæàÂ∞ëÁöÑÂçèËÆÆÁõ∏ÂÖ≥‰ø°ÊÅØÔºå‰ªéËÄåËæìÂá∫Ë°åÈÉΩÊØîËæÉÁÆÄÁü≠„ÄÇ-XÔºöËæìÂá∫ÂåÖÁöÑÂ§¥ÈÉ®Êï∞ÊçÆÔºå‰ºö‰ª•16ËøõÂà∂ÂíåASCII‰∏§ÁßçÊñπÂºèÂêåÊó∂ËæìÂá∫„ÄÇ-XXÔºöËæìÂá∫ÂåÖÁöÑÂ§¥ÈÉ®Êï∞ÊçÆÔºå‰ºö‰ª•16ËøõÂà∂ÂíåASCII‰∏§ÁßçÊñπÂºèÂêåÊó∂ËæìÂá∫ÔºåÊõ¥ËØ¶ÁªÜ„ÄÇ-vÔºöÂΩìÂàÜÊûêÂíåÊâìÂç∞ÁöÑÊó∂ÂÄôÔºå‰∫ßÁîüËØ¶ÁªÜÁöÑËæìÂá∫„ÄÇ-vvÔºö‰∫ßÁîüÊØî-vÊõ¥ËØ¶ÁªÜÁöÑËæìÂá∫„ÄÇ-vvvÔºö‰∫ßÁîüÊØî-vvÊõ¥ËØ¶ÁªÜÁöÑËæìÂá∫„ÄÇ ÂÖ∂‰ªñÂäüËÉΩÊÄßÈÄâÈ°π 12345-DÔºöÂàóÂá∫ÂèØÁî®‰∫éÊäìÂåÖÁöÑÊé•Âè£„ÄÇÂ∞Ü‰ºöÂàóÂá∫Êé•Âè£ÁöÑÊï∞ÂÄºÁºñÂè∑ÂíåÊé•Âè£ÂêçÔºåÂÆÉ‰ª¨ÈÉΩÂèØ‰ª•Áî®‰∫é"-i"Âêé„ÄÇ-FÔºö‰ªéÊñá‰ª∂‰∏≠ËØªÂèñÊäìÂåÖÁöÑË°®ËææÂºè„ÄÇËã•‰ΩøÁî®ËØ•ÈÄâÈ°πÔºåÂàôÂëΩ‰ª§Ë°å‰∏≠ÁªôÂÆöÁöÑÂÖ∂‰ªñË°®ËææÂºèÈÉΩÂ∞ÜÂ§±Êïà„ÄÇ-wÔºöÂ∞ÜÊäìÂåÖÊï∞ÊçÆËæìÂá∫Âà∞Êñá‰ª∂‰∏≠ËÄå‰∏çÊòØÊ†áÂáÜËæìÂá∫„ÄÇÂèØ‰ª•ÂêåÊó∂ÈÖçÂêà"-G time"ÈÄâÈ°π‰ΩøÂæóËæìÂá∫Êñá‰ª∂ÊØètimeÁßíÂ∞±Ëá™Âä®ÂàáÊç¢Âà∞Âè¶‰∏Ä‰∏™Êñá‰ª∂„ÄÇÂèØÈÄöËøá"-r"ÈÄâÈ°πËΩΩÂÖ•Ëøô‰∫õÊñá‰ª∂‰ª•ËøõË°åÂàÜÊûêÂíåÊâìÂç∞„ÄÇ-rÔºö‰ªéÁªôÂÆöÁöÑÊï∞ÊçÆÂåÖÊñá‰ª∂‰∏≠ËØªÂèñÊï∞ÊçÆ„ÄÇ‰ΩøÁî®"-"Ë°®Á§∫‰ªéÊ†áÂáÜËæìÂÖ•‰∏≠ËØªÂèñ„ÄÇ Á§∫‰æã ÁõëËßÜÊåáÂÆöÁΩëÁªúÊé•Âè£ÁöÑÊï∞ÊçÆÂåÖ 1$ tcpdump -i eth1 Â¶ÇÊûú‰∏çÊåáÂÆöÁΩëÂç°ÔºåÈªòËÆ§tcpdumpÂè™‰ºöÁõëËßÜÁ¨¨‰∏Ä‰∏™ÁΩëÁªúÊé•Âè£ÔºåÂ¶Çeth0„ÄÇ ÁõëËßÜÊåáÂÆö‰∏ªÊú∫ÁöÑÊï∞ÊçÆÂåÖÔºå‰æãÂ¶ÇÊâÄÊúâËøõÂÖ•ÊàñÁ¶ªÂºÄlongshuaiÁöÑÊï∞ÊçÆÂåÖ 1$ tcpdump host longshuai ÊâìÂç∞helios&lt;‚Äì&gt;hotÊàñhelios&lt;‚Äì&gt;ace‰πãÈó¥ÈÄö‰ø°ÁöÑÊï∞ÊçÆÂåÖ 1$ tcpdump host helios and \( hot or ace \) ÊâìÂç∞ace‰∏é‰ªª‰ΩïÂÖ∂‰ªñ‰∏ªÊú∫‰πãÈó¥ÈÄö‰ø°ÁöÑIPÊï∞ÊçÆÂåÖ,‰ΩÜ‰∏çÂåÖÊã¨‰∏éhelios‰πãÈó¥ÁöÑÊï∞ÊçÆÂåÖ 1$ tcpdump ip host ace and not helios Êà™Ëé∑‰∏ªÊú∫hostnameÂèëÈÄÅÁöÑÊâÄÊúâÊï∞ÊçÆ 1$ tcpdump src host hostname ÁõëËßÜÊâÄÊúâÂèëÈÄÅÂà∞‰∏ªÊú∫hostnameÁöÑÊï∞ÊçÆÂåÖ 1$ tcpdump dst host hostname ÁõëËßÜÊåáÂÆö‰∏ªÊú∫ÂíåÁ´ØÂè£ÁöÑÊï∞ÊçÆÂåÖ 1$ tcpdump tcp port 22 and host hostname ÂØπÊú¨Êú∫ÁöÑudp 123Á´ØÂè£ËøõË°åÁõëËßÜ(123‰∏∫ntpÁöÑÊúçÂä°Á´ØÂè£) 1$ tcpdump udp port 123 ÁõëËßÜÊåáÂÆöÁΩëÁªúÁöÑÊï∞ÊçÆÂåÖÔºåÂ¶ÇÊú¨Êú∫‰∏é192.168ÁΩëÊÆµÈÄö‰ø°ÁöÑÊï∞ÊçÆÂåÖÔºå‚Äù-c 10‚ÄùË°®Á§∫Âè™ÊäìÂèñ10‰∏™ÂåÖ 1$ tcpdump -c 10 net 192.168 ÊâìÂç∞ÊâÄÊúâÈÄöËøáÁΩëÂÖ≥snupÁöÑftpÊï∞ÊçÆÂåÖ(Ê≥®ÊÑè,Ë°®ËææÂºèË¢´ÂçïÂºïÂè∑Êã¨Ëµ∑Êù•‰∫Ü,ËøôÂèØ‰ª•Èò≤Ê≠¢shellÂØπÂÖ∂‰∏≠ÁöÑÊã¨Âè∑ËøõË°åÈîôËØØËß£Êûê) 1$ tcpdump 'gateway snup and (port ftp or ftp-data)' ÊäìÂèñpingÂåÖ 1$ tcpdump -c 5 -nn -i eth0 icmp Â¶ÇÊûúÊòéÁ°ÆË¶ÅÊäìÂèñ‰∏ªÊú∫‰∏∫192.168.100.70ÂØπÊú¨Êú∫ÁöÑpingÔºåÂàô‰ΩøÁî®andÊìç‰ΩúÁ¨¶„ÄÇ 1$ tcpdump -c 5 -nn -i eth0 icmp and src 192.168.100.62 Ê≥®ÊÑè‰∏çËÉΩÁõ¥Êé•ÂÜôicmp src 192.168.100.70ÔºåÂõ†‰∏∫icmpÂçèËÆÆ‰∏çÊîØÊåÅÁõ¥Êé•Â∫îÁî®hostËøô‰∏™type„ÄÇ ÊäìÂèñÂà∞Êú¨Êú∫22Á´ØÂè£ÂåÖ 1$ tcpdump -c 10 -nn -i eth0 tcp dst port 22 Ëß£ÊûêÂåÖÊï∞ÊçÆ 1$ tcpdump -c 2 -q -XX -vvv -nn -i eth0 tcp dst port 22]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>tcpdump</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DATEÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-date%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãÂæàÂ§öshellËÑöÊú¨ÈáåÈù¢ÈúÄË¶ÅÊâìÂç∞‰∏çÂêåÊ†ºÂºèÁöÑÊó∂Èó¥ÊàñÊó•ÊúüÔºå‰ª•ÂèäË¶ÅÊ†πÊçÆÊó∂Èó¥ÂíåÊó•ÊúüÊâßË°åÊìç‰Ωú„ÄÇÂª∂Êó∂ÈÄöÂ∏∏Áî®‰∫éËÑöÊú¨ÊâßË°åËøáÁ®ã‰∏≠Êèê‰æõ‰∏ÄÊÆµÁ≠âÂæÖÁöÑÊó∂Èó¥„ÄÇÊó•ÊúüÂèØ‰ª•‰ª•Â§öÁßçÊ†ºÂºèÂéªÊâìÂç∞Ôºå‰πüÂèØ‰ª•‰ΩøÁî®ÂëΩ‰ª§ËÆæÁΩÆÂõ∫ÂÆöÁöÑÊ†ºÂºè„ÄÇÂú®Á±ªUNIXÁ≥ªÁªü‰∏≠ÔºåÊó•ÊúüË¢´Â≠òÂÇ®‰∏∫‰∏Ä‰∏™Êï¥Êï∞ÔºåÂÖ∂Â§ßÂ∞è‰∏∫Ëá™‰∏ñÁïåÊ†áÂáÜÊó∂Èó¥ÔºàUTCÔºâ1970Âπ¥1Êúà1Êó•0Êó∂0ÂàÜ0ÁßíËµ∑ÊµÅÈÄùÁöÑÁßíÊï∞„ÄÇ ÂèÇÊï∞ËØ¥Êòé12345-d&lt;Â≠óÁ¨¶‰∏≤&gt;ÔºöÊòæÁ§∫Â≠óÁ¨¶‰∏≤ÊâÄÊåáÁöÑÊó•Êúü‰∏éÊó∂Èó¥„ÄÇÂ≠óÁ¨¶‰∏≤ÂâçÂêéÂøÖÈ°ªÂä†‰∏äÂèåÂºïÂè∑Ôºõ-s&lt;Â≠óÁ¨¶‰∏≤&gt;ÔºöÊ†πÊçÆÂ≠óÁ¨¶‰∏≤Êù•ËÆæÁΩÆÊó•Êúü‰∏éÊó∂Èó¥„ÄÇÂ≠óÁ¨¶‰∏≤ÂâçÂêéÂøÖÈ°ªÂä†‰∏äÂèåÂºïÂè∑Ôºõ-uÔºöÊòæÁ§∫GMTÔºõ--helpÔºöÂú®Á∫øÂ∏ÆÂä©Ôºõ--versionÔºöÊòæÁ§∫ÁâàÊú¨‰ø°ÊÅØ„ÄÇ Ê†ºÂºèÂàóË°®1234567891011121314151617181920212223242526272829%n : ‰∏ã‰∏ÄË°å%t : Ë∑≥Ê†º%H : Â∞èÊó∂(00..23)%I : Â∞èÊó∂(01..12)%k : Â∞èÊó∂(0..23)%l : Â∞èÊó∂(1..12)%M : ÂàÜÈíü(00..59)%p : ÊòæÁ§∫Êú¨Âú∞ AM Êàñ PM%r : Áõ¥Êé•ÊòæÁ§∫Êó∂Èó¥ (12 Â∞èÊó∂Âà∂ÔºåÊ†ºÂºè‰∏∫ hh:mm:ss [AP]M)%s : ‰ªé 1970 Âπ¥ 1 Êúà 1 Êó• 00:00:00 UTC Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÁöÑÁßíÊï∞%S : Áßí(00..61)%T : Áõ¥Êé•ÊòæÁ§∫Êó∂Èó¥ (24 Â∞èÊó∂Âà∂)%X : Áõ∏ÂΩì‰∫é %H:%M:%S%Z : ÊòæÁ§∫Êó∂Âå∫ %a : ÊòüÊúüÂá† (Sun..Sat)%A : ÊòüÊúüÂá† (Sunday..Saturday)%b : Êúà‰ªΩ (Jan..Dec)%B : Êúà‰ªΩ (January..December)%c : Áõ¥Êé•ÊòæÁ§∫Êó•Êúü‰∏éÊó∂Èó¥%d : Êó• (01..31)%D : Áõ¥Êé•ÊòæÁ§∫Êó•Êúü (mm/dd/yy)%h : Âêå %b%j : ‰∏ÄÂπ¥‰∏≠ÁöÑÁ¨¨Âá†Â§© (001..366)%m : Êúà‰ªΩ (01..12)%U : ‰∏ÄÂπ¥‰∏≠ÁöÑÁ¨¨Âá†Âë® (00..53) (‰ª• Sunday ‰∏∫‰∏ÄÂë®ÁöÑÁ¨¨‰∏ÄÂ§©ÁöÑÊÉÖÂΩ¢)%w : ‰∏ÄÂë®‰∏≠ÁöÑÁ¨¨Âá†Â§© (0..6)%W : ‰∏ÄÂπ¥‰∏≠ÁöÑÁ¨¨Âá†Âë® (00..53) (‰ª• Monday ‰∏∫‰∏ÄÂë®ÁöÑÁ¨¨‰∏ÄÂ§©ÁöÑÊÉÖÂΩ¢)%x : Áõ¥Êé•ÊòæÁ§∫Êó•Êúü (mm/dd/yy)%y : Âπ¥‰ªΩÁöÑÊúÄÂêé‰∏§‰ΩçÊï∞Â≠ó (00.99)%Y : ÂÆåÊï¥Âπ¥‰ªΩ (0000..9999) Á§∫‰æãËÆæÁΩÆÊó∂Èó¥1234567date -s //ËÆæÁΩÆÂΩìÂâçÊó∂Èó¥ÔºåÂè™ÊúârootÊùÉÈôêÊâçËÉΩËÆæÁΩÆÔºåÂÖ∂‰ªñÂè™ËÉΩÊü•Áúã„ÄÇdate -s 20080523 //ËÆæÁΩÆÊàê20080523ÔºåËøôÊ†∑‰ºöÊääÂÖ∑‰ΩìÊó∂Èó¥ËÆæÁΩÆÊàêÁ©∫00:00:00date -s 01:01:01 //ËÆæÁΩÆÂÖ∑‰ΩìÊó∂Èó¥Ôºå‰∏ç‰ºöÂØπÊó•ÊúüÂÅöÊõ¥Êîπdate -s ‚Äú01:01:01 2008-05-23‚Ä≥ //ËøôÊ†∑ÂèØ‰ª•ËÆæÁΩÆÂÖ®ÈÉ®Êó∂Èó¥date -s ‚Äú01:01:01 20080523‚Ä≥ //ËøôÊ†∑ÂèØ‰ª•ËÆæÁΩÆÂÖ®ÈÉ®Êó∂Èó¥date -s ‚Äú2008-05-23 01:01:01‚Ä≥ //ËøôÊ†∑ÂèØ‰ª•ËÆæÁΩÆÂÖ®ÈÉ®Êó∂Èó¥date -s ‚Äú20080523 01:01:01‚Ä≥ //ËøôÊ†∑ÂèØ‰ª•ËÆæÁΩÆÂÖ®ÈÉ®Êó∂Èó¥ Êó∂Èó¥Âä†Âáè1234567date +%Y%m%d //ÊòæÁ§∫Áé∞Âú®Â§©Âπ¥ÊúàÊó•date +%Y%m%d --date="+1 day" //ÊòæÁ§∫Âêé‰∏ÄÂ§©ÁöÑÊó•Êúüdate +%Y%m%d --date="-1 day" //ÊòæÁ§∫Ââç‰∏ÄÂ§©ÁöÑÊó•Êúüdate +%Y%m%d --date="-1 month" //ÊòæÁ§∫‰∏ä‰∏ÄÊúàÁöÑÊó•Êúüdate +%Y%m%d --date="+1 month" //ÊòæÁ§∫‰∏ã‰∏ÄÊúàÁöÑÊó•Êúüdate +%Y%m%d --date="-1 year" //ÊòæÁ§∫Ââç‰∏ÄÂπ¥ÁöÑÊó•Êúüdate +%Y%m%d --date="+1 year" //ÊòæÁ§∫‰∏ã‰∏ÄÂπ¥ÁöÑÊó•Êúü]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>date</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hwclockÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-hwclock%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãhwclockÂëΩ‰ª§ÊòØ‰∏Ä‰∏™Á°¨‰ª∂Êó∂ÈíüËÆøÈóÆÂ∑•ÂÖ∑ÔºåÂÆÉÂèØ‰ª•ÊòæÁ§∫ÂΩìÂâçÊó∂Èó¥„ÄÅËÆæÁΩÆÁ°¨‰ª∂Êó∂ÈíüÁöÑÊó∂Èó¥ÂíåËÆæÁΩÆÁ°¨‰ª∂Êó∂Èíü‰∏∫Á≥ªÁªüÊó∂Èó¥Ôºå‰πüÂèØËÆæÁΩÆÁ≥ªÁªüÊó∂Èó¥‰∏∫Á°¨‰ª∂Êó∂ÈíüÁöÑÊó∂Èó¥„ÄÇ Âú®Linux‰∏≠ÊúâÁ°¨‰ª∂Êó∂Èíü‰∏éÁ≥ªÁªüÊó∂ÈíüÁ≠â‰∏§ÁßçÊó∂Èíü„ÄÇÁ°¨‰ª∂Êó∂ÈíüÊòØÊåá‰∏ªÊú∫Êùø‰∏äÁöÑÊó∂ÈíüËÆæÂ§áÔºå‰πüÂ∞±ÊòØÈÄöÂ∏∏ÂèØÂú®BIOSÁîªÈù¢ËÆæÂÆöÁöÑÊó∂Èíü„ÄÇÁ≥ªÁªüÊó∂ÈíüÂàôÊòØÊåákernel‰∏≠ÁöÑÊó∂Èíü„ÄÇÂΩìLinuxÂêØÂä®Êó∂ÔºåÁ≥ªÁªüÊó∂Èíü‰ºöÂéªËØªÂèñÁ°¨‰ª∂Êó∂ÈíüÁöÑËÆæÂÆöÔºå‰πãÂêéÁ≥ªÁªüÊó∂ÈíüÂç≥Áã¨Á´ãËøê‰Ωú„ÄÇÊâÄÊúâLinuxÁõ∏ÂÖ≥Êåá‰ª§‰∏éÂáΩÊï∞ÈÉΩÊòØËØªÂèñÁ≥ªÁªüÊó∂ÈíüÁöÑËÆæÂÆö„ÄÇ ÂèÇÊï∞ËØ¥Êòé12345678910--adjustÔºöhwclockÊØèÊ¨°Êõ¥ÊîπÁ°¨‰ª∂Êó∂ÈíüÊó∂ÔºåÈÉΩ‰ºöËÆ∞ÂΩïÂú®/etc/adjtimeÊñá‰ª∂‰∏≠„ÄÇ‰ΩøÁî®--adjustÂèÇÊï∞ÔºåÂèØ‰ΩøhwclockÊ†πÊçÆÂÖàÂâçÁöÑËÆ∞ÂΩïÊù•‰º∞ÁÆóÁ°¨‰ª∂Êó∂ÈíüÁöÑÂÅèÂ∑ÆÔºåÂπ∂Áî®Êù•Ê†°Ê≠£ÁõÆÂâçÁöÑÁ°¨‰ª∂Êó∂ÈíüÔºõ--debugÔºöÊòæÁ§∫hwclockÊâßË°åÊó∂ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºõ--directisaÔºöhwclockÈ¢ÑËÆæ‰ªé/dev/rtcËÆæÂ§áÊù•Â≠òÂèñÁ°¨‰ª∂Êó∂Èíü„ÄÇËã•Êó†Ê≥ïÂ≠òÂèñÊó∂ÔºåÂèØÁî®Ê≠§ÂèÇÊï∞Áõ¥Êé•‰ª•I/OÊåá‰ª§Êù•Â≠òÂèñÁ°¨‰ª∂Êó∂ÈíüÔºõ--hctosysÔºöÂ∞ÜÁ≥ªÁªüÊó∂ÈíüË∞ÉÊï¥‰∏∫‰∏éÁõÆÂâçÁöÑÁ°¨‰ª∂Êó∂Èíü‰∏ÄËá¥Ôºõ--set --date=&lt;Êó•Êúü‰∏éÊó∂Èó¥&gt;ÔºöËÆæÂÆöÁ°¨‰ª∂Êó∂ÈíüÔºõ--showÔºöÊòæÁ§∫Á°¨‰ª∂Êó∂ÈíüÁöÑÊó∂Èó¥‰∏éÊó•ÊúüÔºõ--systohcÔºöÂ∞ÜÁ°¨‰ª∂Êó∂ÈíüË∞ÉÊï¥‰∏∫‰∏éÁõÆÂâçÁöÑÁ≥ªÁªüÊó∂Èíü‰∏ÄËá¥Ôºõ--testÔºö‰ªÖÊµãËØïÁ®ãÂ∫èÔºåËÄå‰∏ç‰ºöÂÆûÈôÖÊõ¥ÊîπÁ°¨‰ª∂Êó∂ÈíüÔºõ--utcÔºöËã•Ë¶Å‰ΩøÁî®Ê†ºÊûóÂ®ÅÊ≤ªÊó∂Èó¥ÔºåËØ∑Âä†ÂÖ•Ê≠§ÂèÇÊï∞Ôºåhwclock‰ºöÊâßË°åËΩ¨Êç¢ÁöÑÂ∑•‰ΩúÔºõ--versionÔºöÊòæÁ§∫ÁâàÊú¨‰ø°ÊÅØ„ÄÇ Á§∫‰æãËÆæÁΩÆÁ°¨‰ª∂Êó∂Èó¥Ë¶Å‰æùËµñ‰∫éÊìç‰ΩúÁ≥ªÁªüÊó∂Èó¥12$ hwclock ‚Äìsystohc$ hwclock --systohc ‚Äì-utc Êü•ÁúãÂΩìÂâçÁöÑÁ°¨‰ª∂Êó•ÊúüÂíåÊó∂Èó¥1$ hwclock ËÆæÁΩÆÁ°¨‰ª∂Êó∂Èó¥1$ hwclock -w Êü•ÁúãclockÊñá‰ª∂ÔºåÁ°ÆËÆ§ÊòØÂê¶ËÆæÁΩÆ‰∫ÜUTC12$ cat /etc/default/rcS UTC=yes]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>hwclock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vsftpdÂÆâË£Ö]]></title>
    <url>%2Flinux%2Flinux%2Fsoftware-vsftpd%2F</url>
    <content type="text"><![CDATA[ÂáÜÂ§áÂ∑•‰Ωú linuxÁ≥ªÁªücentos7 vsftpdËΩØ‰ª∂ yumÂÆâË£Ö ÊâßË°åÊ≠•È™§ÂÆâË£ÖvsftpdÊúçÂä°Âô® 1$ yum install vsftpd ÂÆâË£Ö‰∏Ä‰∏™Âä†ÂØÜÂ∑•ÂÖ∑ 1$ yum install libdb-utils.x86_64 ‰øÆÊîπÈÖçÁΩÆVSFTP 1$ vi /etc/vsftpd/vsftpd.conf ÈÖçÁΩÆÊñá‰ª∂ÂèÇÊï∞ËØ¥Êòé anonymous_enable=NO #ËÆæÂÆö‰∏çÂÖÅËÆ∏ÂåøÂêçËÆøÈóÆ local_enable=YES #ËÆæÂÆöÊú¨Âú∞Áî®Êà∑ÂèØ‰ª•ËÆøÈóÆ„ÄÇÊ≥®ÔºöÂ¶Ç‰ΩøÁî®ËôöÊãüÂÆø‰∏ªÁî®Êà∑ÔºåÂú®ËØ•È°πÁõÆËÆæÂÆö‰∏∫NOÁöÑÊÉÖÂÜµ‰∏ãÊâÄÊúâËôöÊãüÁî®Êà∑Â∞ÜÊó†Ê≥ïËÆøÈóÆ„ÄÇ chroot_list_enable=YES #‰ΩøÁî®Êà∑‰∏çËÉΩÁ¶ªÂºÄ‰∏ªÁõÆÂΩï ascii_upload_enable=YES #ÂÖÅËÆ∏‰ΩøÁî®ASCIIÊ®°Âºè‰∏ä‰º† ascii_download_enable=YES #ËÆæÂÆöÊîØÊåÅASCIIÊ®°ÂºèÁöÑ‰∏ä‰º†Âíå‰∏ãËΩΩÂäüËÉΩ„ÄÇ pam_service_name=vsftpd #PAMËÆ§ËØÅÊñá‰ª∂Âêç„ÄÇPAMÂ∞ÜÊ†πÊçÆ/etc/pam.d/vsftpdËøõË°åËÆ§ËØÅ guest_enable=YES #ËÆæÂÆöÂêØÁî®ËôöÊãüÁî®Êà∑ÂäüËÉΩ„ÄÇ guest_username=ftp #ÊåáÂÆöËôöÊãüÁî®Êà∑ÁöÑÂÆø‰∏ªÁî®Êà∑„ÄÇ-RHEL/CentOS‰∏≠Â∑≤ÁªèÊúâÂÜÖÁΩÆÁöÑftpÁî®Êà∑‰∫Ü user_config_dir=/etc/vsftpd/vuser_conf #ËÆæÂÆöËôöÊãüÁî®Êà∑‰∏™‰∫∫vsftpÁöÑRHEL/CentOS FTPÊúçÂä°Êñá‰ª∂Â≠òÊîæË∑Ø ÂæÑ„ÄÇ listen=YES # Âè™ÁõëÂê¨ipv4ÁöÑÂú∞ÂùÄ xferlog_file=/var/log/xferlog # Êó•ÂøóÊñá‰ª∂ÁöÑË∑ØÂæÑ listen_port=1315 #FTPÁ´ØÂè£ pasv_enable=YES #ÂºÄÂêØË¢´Âä®Ê®°Âºè pasv_min_port=10060 pasv_max_port=10070 ÂàõÂª∫chroot listÔºåÂ∞ÜftpÁî®Êà∑Âä†ÂÖ•ÂÖ∂‰∏≠ 12$ touch /etc/vsftpd/chroot_list$ echo ftp &gt;&gt; /etc/vsftpd/chroot_list ÂÆâË£ÖBerkeley DBÂ∑•ÂÖ∑ 1$ yum install db4 db4-utils ÂàõÂª∫Áî®Êà∑ÂØÜÁ†ÅÊñáÊú¨ 1$ touch /etc/vsftpd/vuser_passwd.txt ÁîüÊàêËôöÊãüÁî®Êà∑ËÆ§ËØÅÁöÑdbÊñá‰ª∂ 12$ db_load -T -t hash -f /etc/vsftpd/vuser_passwd.txt /etc/vsftpd/vuser_passwd.db$ chmod 600 /etc/vsftpd/vuser_passwd.db ÁºñËæëËÆ§ËØÅÊñá‰ª∂ 1$ vi /etc/pam.d/vsftpd ÊääÂâçÈù¢ÁöÑÊ≥®ÈáäÂéªÊéâÔºåÁÑ∂ÂêéÂä†‰∏ä‰ª•‰∏ãÂá†Êù° Á≥ªÁªü‰∏∫32‰ΩçÔºö auth required pam_userdb.so db=/etc/vsftpd/vuser_passwd account required pam_userdb.so db=/etc/vsftpd/vuser_passwd Á≥ªÁªü‰∏∫64‰ΩçÔºöauth required /lib64/security/pam_userdb.sodb=/etc/vsftpd/vuser_passwd account required/lib64/security/pam_userdb.so db=/etc/vsftpd/vuser_passwd ‰øÆÊîπVSFTPDÁ´ØÂè£ ÊâßË°åvi /etc/servicesÔºåÂ∞ÜÂÖ∂‰∏≠ÁöÑ ftp 21/tcp Êîπ‰∏∫ ftp 1315/tcp , ftp21/udpÊîπ‰∏∫ ftp 1315/udp ÈáçÂêØÂä®vsftpÊúçÂä° 1$ service vsftpd restart]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>software</tag>
        <tag>linux</tag>
        <tag>vsftpd</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GREPÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-grep%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãgrepÔºàglobal search regular expression(RE) and print out the lineÔºåÂÖ®Èù¢ÊêúÁ¥¢Ê≠£ÂàôË°®ËææÂºèÂπ∂ÊääË°åÊâìÂç∞Âá∫Êù•ÔºâÊòØ‰∏ÄÁßçÂº∫Â§ßÁöÑÊñáÊú¨ÊêúÁ¥¢Â∑•ÂÖ∑ÔºåÂÆÉËÉΩ‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÊêúÁ¥¢ÊñáÊú¨ÔºåÂπ∂ÊääÂåπÈÖçÁöÑË°åÊâìÂç∞Âá∫Êù•„ÄÇ ÂèÇÊï∞ËØ¥Êòé12345678910111213141516171819202122232425-a ‰∏çË¶ÅÂøΩÁï•‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇ-A&lt;ÊòæÁ§∫ÂàóÊï∞&gt; Èô§‰∫ÜÊòæÁ§∫Á¨¶ÂêàËåÉÊú¨Ê†∑ÂºèÁöÑÈÇ£‰∏ÄË°å‰πãÂ§ñÔºåÂπ∂ÊòæÁ§∫ËØ•Ë°å‰πãÂêéÁöÑÂÜÖÂÆπ„ÄÇ-b Âú®ÊòæÁ§∫Á¨¶ÂêàËåÉÊú¨Ê†∑ÂºèÁöÑÈÇ£‰∏ÄË°å‰πãÂ§ñÔºåÂπ∂ÊòæÁ§∫ËØ•Ë°å‰πãÂâçÁöÑÂÜÖÂÆπ„ÄÇ-c ËÆ°ÁÆóÁ¨¶ÂêàËåÉÊú¨Ê†∑ÂºèÁöÑÂàóÊï∞„ÄÇ-C&lt;ÊòæÁ§∫ÂàóÊï∞&gt;Êàñ-&lt;ÊòæÁ§∫ÂàóÊï∞&gt; Èô§‰∫ÜÊòæÁ§∫Á¨¶ÂêàËåÉÊú¨Ê†∑ÂºèÁöÑÈÇ£‰∏ÄÂàó‰πãÂ§ñÔºåÂπ∂ÊòæÁ§∫ËØ•Âàó‰πãÂâçÂêéÁöÑÂÜÖÂÆπ„ÄÇ-d&lt;ËøõË°åÂä®‰Ωú&gt; ÂΩìÊåáÂÆöË¶ÅÊü•ÊâæÁöÑÊòØÁõÆÂΩïËÄåÈùûÊñá‰ª∂Êó∂ÔºåÂøÖÈ°ª‰ΩøÁî®ËøôÈ°πÂèÇÊï∞ÔºåÂê¶ÂàôgrepÂëΩ‰ª§Â∞ÜÂõûÊä•‰ø°ÊÅØÂπ∂ÂÅúÊ≠¢Âä®‰Ωú„ÄÇ-e&lt;ËåÉÊú¨Ê†∑Âºè&gt; ÊåáÂÆöÂ≠óÁ¨¶‰∏≤‰Ωú‰∏∫Êü•ÊâæÊñá‰ª∂ÂÜÖÂÆπÁöÑËåÉÊú¨Ê†∑Âºè„ÄÇ-E Â∞ÜËåÉÊú¨Ê†∑Âºè‰∏∫Âª∂‰º∏ÁöÑÊôÆÈÄöË°®Á§∫Ê≥ïÊù•‰ΩøÁî®ÔºåÊÑèÂë≥ÁùÄ‰ΩøÁî®ËÉΩ‰ΩøÁî®Êâ©Â±ïÊ≠£ÂàôË°®ËææÂºè„ÄÇ-f&lt;ËåÉÊú¨Êñá‰ª∂&gt; ÊåáÂÆöËåÉÊú¨Êñá‰ª∂ÔºåÂÖ∂ÂÜÖÂÆπÊúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËåÉÊú¨Ê†∑ÂºèÔºåËÆ©grepÊü•ÊâæÁ¨¶ÂêàËåÉÊú¨Êù°‰ª∂ÁöÑÊñá‰ª∂ÂÜÖÂÆπÔºåÊ†ºÂºè‰∏∫ÊØè‰∏ÄÂàóÁöÑËåÉÊú¨Ê†∑Âºè„ÄÇ-F Â∞ÜËåÉÊú¨Ê†∑ÂºèËßÜ‰∏∫Âõ∫ÂÆöÂ≠óÁ¨¶‰∏≤ÁöÑÂàóË°®„ÄÇ-G Â∞ÜËåÉÊú¨Ê†∑ÂºèËßÜ‰∏∫ÊôÆÈÄöÁöÑË°®Á§∫Ê≥ïÊù•‰ΩøÁî®„ÄÇ-h Âú®ÊòæÁ§∫Á¨¶ÂêàËåÉÊú¨Ê†∑ÂºèÁöÑÈÇ£‰∏ÄÂàó‰πãÂâçÔºå‰∏çÊ†áÁ§∫ËØ•ÂàóÊâÄÂ±ûÁöÑÊñá‰ª∂ÂêçÁß∞„ÄÇ-H Âú®ÊòæÁ§∫Á¨¶ÂêàËåÉÊú¨Ê†∑ÂºèÁöÑÈÇ£‰∏ÄÂàó‰πãÂâçÔºåÊ†áÁ§∫ËØ•ÂàóÁöÑÊñá‰ª∂ÂêçÁß∞„ÄÇ-i ÂøΩÁï•Â≠óÁ¨¶Â§ßÂ∞èÂÜôÁöÑÂ∑ÆÂà´„ÄÇ-l ÂàóÂá∫Êñá‰ª∂ÂÜÖÂÆπÁ¨¶ÂêàÊåáÂÆöÁöÑËåÉÊú¨Ê†∑ÂºèÁöÑÊñá‰ª∂ÂêçÁß∞„ÄÇ-L ÂàóÂá∫Êñá‰ª∂ÂÜÖÂÆπ‰∏çÁ¨¶ÂêàÊåáÂÆöÁöÑËåÉÊú¨Ê†∑ÂºèÁöÑÊñá‰ª∂ÂêçÁß∞„ÄÇ-n Âú®ÊòæÁ§∫Á¨¶ÂêàËåÉÊú¨Ê†∑ÂºèÁöÑÈÇ£‰∏ÄÂàó‰πãÂâçÔºåÊ†áÁ§∫Âá∫ËØ•ÂàóÁöÑÁºñÂè∑„ÄÇ-q ‰∏çÊòæÁ§∫‰ªª‰Ωï‰ø°ÊÅØ„ÄÇ-R/-r Ê≠§ÂèÇÊï∞ÁöÑÊïàÊûúÂíåÊåáÂÆö‚Äú-d recurse‚ÄùÂèÇÊï∞Áõ∏Âêå„ÄÇ-s ‰∏çÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ„ÄÇ-v ÂèçËΩ¨Êü•Êâæ„ÄÇ-w Âè™ÊòæÁ§∫ÂÖ®Â≠óÁ¨¶ÂêàÁöÑÂàó„ÄÇ-x Âè™ÊòæÁ§∫ÂÖ®ÂàóÁ¨¶ÂêàÁöÑÂàó„ÄÇ-y Ê≠§ÂèÇÊï∞ÊïàÊûúË∑ü‚Äú-i‚ÄùÁõ∏Âêå„ÄÇ-o Âè™ËæìÂá∫Êñá‰ª∂‰∏≠ÂåπÈÖçÂà∞ÁöÑÈÉ®ÂàÜ„ÄÇ Á§∫‰æã Âú®Êñá‰ª∂‰∏≠ÊêúÁ¥¢‰∏Ä‰∏™ÂçïËØçÔºåÂëΩ‰ª§‰ºöËøîÂõû‰∏Ä‰∏™ÂåÖÂê´‚Äúmatch_pattern‚ÄùÁöÑÊñáÊú¨Ë°åÔºö 12$ grep match_pattern file_name$ grep "match_pattern" file_name Âú®Â§ö‰∏™Êñá‰ª∂‰∏≠Êü•Êâæ 1$ grep "match_pattern" file_1 file_2 file_3 ... ËæìÂá∫Èô§‰πãÂ§ñÁöÑÊâÄÊúâË°å -v ÈÄâÈ°π 1$ grep -v "match_pattern" file_name Ê†áËÆ∞ÂåπÈÖçÈ¢úËâ≤ ‚Äìcolor=auto ÈÄâÈ°π 1$ grep "match_pattern" file_name --color=auto ‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè -E ÈÄâÈ°π 12$ grep -E "[1-9]+"$ egrep "[1-9]+" Âè™ËæìÂá∫Êñá‰ª∂‰∏≠ÂåπÈÖçÂà∞ÁöÑÈÉ®ÂàÜ -o ÈÄâÈ°π 12$ echo this is a test line. | grep -o -E "[a-z]+\."$ echo this is a test line. | egrep -o "[a-z]+\." ÁªüËÆ°Êñá‰ª∂ÊàñËÄÖÊñáÊú¨‰∏≠ÂåÖÂê´ÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÁöÑË°åÊï∞ -c ÈÄâÈ°π 1$ grep -c "text" file_name ËæìÂá∫ÂåÖÂê´ÂåπÈÖçÂ≠óÁ¨¶‰∏≤ÁöÑË°åÊï∞ -n ÈÄâÈ°π 123456$ grep "text" -n file_nameÊàñ$ cat file_name | grep "text" -n#Â§ö‰∏™Êñá‰ª∂$ grep "text" -n file_1 file_2 ÊâìÂç∞Ê†∑ÂºèÂåπÈÖçÊâÄ‰Ωç‰∫éÁöÑÂ≠óÁ¨¶ÊàñÂ≠óËäÇÂÅèÁßª 1234$ echo gun is not unix | grep -b -o "not"7:not#‰∏ÄË°å‰∏≠Â≠óÁ¨¶‰∏≤ÁöÑÂ≠óÁ¨¶‰æøÂÆúÊòØ‰ªéËØ•Ë°åÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÂºÄÂßãËÆ°ÁÆóÔºåËµ∑ÂßãÂÄº‰∏∫0„ÄÇÈÄâÈ°π -b -o ‰∏ÄËà¨ÊÄªÊòØÈÖçÂêà‰ΩøÁî®„ÄÇ ÊêúÁ¥¢Â§ö‰∏™Êñá‰ª∂Âπ∂Êü•ÊâæÂåπÈÖçÊñáÊú¨Âú®Âì™‰∫õÊñá‰ª∂‰∏≠ 1$ grep -l "text" file1 file2 file3... Âú®Â§öÁ∫ßÁõÆÂΩï‰∏≠ÂØπÊñáÊú¨ËøõË°åÈÄíÂΩíÊêúÁ¥¢ 12$ grep "text" . -r -n# .Ë°®Á§∫ÂΩìÂâçÁõÆÂΩï„ÄÇ ÂøΩÁï•ÂåπÈÖçÊ†∑Âºè‰∏≠ÁöÑÂ≠óÁ¨¶Â§ßÂ∞èÂÜô 1$ echo "hello world" | grep -i "HELLO" ÈÄâÈ°π -e Âà∂Âä®Â§ö‰∏™ÂåπÈÖçÊ†∑Âºè 12345$ echo this is a text line | grep -e "is" -e "line" -o#‰πüÂèØ‰ª•‰ΩøÁî®-fÈÄâÈ°πÊù•ÂåπÈÖçÂ§ö‰∏™Ê†∑ÂºèÔºåÂú®Ê†∑ÂºèÊñá‰ª∂‰∏≠ÈÄêË°åÂÜôÂá∫ÈúÄË¶ÅÂåπÈÖçÁöÑÂ≠óÁ¨¶„ÄÇ$ echo aaa bbb ccc ddd eee | grep -f patfile -o Âú®grepÊêúÁ¥¢ÁªìÊûú‰∏≠ÂåÖÊã¨ÊàñËÄÖÊéíÈô§ÊåáÂÆöÊñá‰ª∂ 12345678#Âè™Âú®ÁõÆÂΩï‰∏≠ÊâÄÊúâÁöÑ.phpÂíå.htmlÊñá‰ª∂‰∏≠ÈÄíÂΩíÊêúÁ¥¢Â≠óÁ¨¶"main()"$ grep "main()" . -r --include *.&#123;php,html&#125;#Âú®ÊêúÁ¥¢ÁªìÊûú‰∏≠ÊéíÈô§ÊâÄÊúâREADMEÊñá‰ª∂$ grep "main()" . -r --exclude "README"#Âú®ÊêúÁ¥¢ÁªìÊûú‰∏≠ÊéíÈô§filelistÊñá‰ª∂ÂàóË°®ÈáåÁöÑÊñá‰ª∂$ grep "main()" . -r --exclude-from filelist ‰ΩøÁî®0ÂÄºÂ≠óËäÇÂêéÁºÄÁöÑgrep‰∏éxargs 12345678#ÊµãËØïÊñá‰ª∂Ôºö$ echo "aaa" &gt; file1$ echo "bbb" &gt; file2$ echo "aaa" &gt; file3$ grep "aaa" file* -lZ | xargs -0 rm#ÊâßË°åÂêé‰ºöÂà†Èô§file1Âíåfile3ÔºågrepËæìÂá∫Áî®-ZÈÄâÈ°πÊù•ÊåáÂÆö‰ª•0ÂÄºÂ≠óËäÇ‰Ωú‰∏∫ÁªàÁªìÁ¨¶Êñá‰ª∂ÂêçÔºà\0ÔºâÔºåxargs -0 ËØªÂèñËæìÂÖ•Âπ∂Áî®0ÂÄºÂ≠óËäÇÁªàÁªìÁ¨¶ÂàÜÈöîÊñá‰ª∂ÂêçÔºåÁÑ∂ÂêéÂà†Èô§ÂåπÈÖçÊñá‰ª∂Ôºå-ZÈÄöÂ∏∏Âíå-lÁªìÂêà‰ΩøÁî®„ÄÇ grepÈùôÈªòËæìÂá∫ 123$ grep -q "test" filename#‰∏ç‰ºöËæìÂá∫‰ªª‰Ωï‰ø°ÊÅØÔºåÂ¶ÇÊûúÂëΩ‰ª§ËøêË°åÊàêÂäüËøîÂõû0ÔºåÂ§±Ë¥•ÂàôËøîÂõûÈùû0ÂÄº„ÄÇ‰∏ÄËà¨Áî®‰∫éÊù°‰ª∂ÊµãËØï„ÄÇ ÊâìÂç∞Âá∫ÂåπÈÖçÊñáÊú¨‰πãÂâçÊàñËÄÖ‰πãÂêéÁöÑË°å 1234567891011#ÊòæÁ§∫ÂåπÈÖçÊüê‰∏™ÁªìÊûú‰πãÂêéÁöÑ3Ë°åÔºå‰ΩøÁî® -A ÈÄâÈ°πÔºö$ seq 10 | grep "5" -A 3#ÊòæÁ§∫ÂåπÈÖçÊüê‰∏™ÁªìÊûú‰πãÂâçÁöÑ3Ë°åÔºå‰ΩøÁî® -B ÈÄâÈ°πÔºö$ seq 10 | grep "5" -B 3#ÊòæÁ§∫ÂåπÈÖçÊüê‰∏™ÁªìÊûúÁöÑÂâç‰∏âË°åÂíåÂêé‰∏âË°åÔºå‰ΩøÁî® -C ÈÄâÈ°πÔºö$ seq 10 | grep "5" -C 3#Â¶ÇÊûúÂåπÈÖçÁªìÊûúÊúâÂ§ö‰∏™Ôºå‰ºöÁî®‚Äú--‚Äù‰Ωú‰∏∫ÂêÑÂåπÈÖçÁªìÊûú‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶Ôºö$ echo -e "a\nb\nc\na\nb\nc" | grep a -A 1]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>grep</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LinuxËÆæÁΩÆÂÖ®Ë∑ØÂæÑÊòæÁ§∫]]></title>
    <url>%2Flinux%2Flinux%2Fconfig-setallpath%2F</url>
    <content type="text"><![CDATA[Âú®Linux‰∏≠ÔºåÁºñËæëvi /etc/bashrcÊñá‰ª∂ÔºåÊêúÁ¥¢PS1=&quot;[\u@\h \W]ÔºåÂ∞ÜÂ§ßÂÜôÁöÑWÊîπ‰∏∫w ‰øÆÊîπÂâçÔºö ‰øÆÊîπÂêé: ÊïàÊûúÊòæÁ§∫:]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DFÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-df%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãdfÂëΩ‰ª§Áî®‰∫éÊòæÁ§∫Á£ÅÁõòÂàÜÂå∫‰∏äÁöÑÂèØ‰ΩøÁî®ÁöÑÁ£ÅÁõòÁ©∫Èó¥„ÄÇÈªòËÆ§ÊòæÁ§∫Âçï‰Ωç‰∏∫KB„ÄÇÂèØ‰ª•Âà©Áî®ËØ•ÂëΩ‰ª§Êù•Ëé∑ÂèñÁ°¨ÁõòË¢´Âç†Áî®‰∫ÜÂ§öÂ∞ëÁ©∫Èó¥ÔºåÁõÆÂâçËøòÂâ©‰∏ãÂ§öÂ∞ëÁ©∫Èó¥Á≠â‰ø°ÊÅØ„ÄÇ ÂèÇÊï∞ËØ¥Êòé12345678910111213141516-aÊàñ--allÔºöÂåÖÂê´ÂÖ®ÈÉ®ÁöÑÊñá‰ª∂Á≥ªÁªüÔºõ--block-size=&lt;Âå∫ÂùóÂ§ßÂ∞è&gt;Ôºö‰ª•ÊåáÂÆöÁöÑÂå∫ÂùóÂ§ßÂ∞èÊù•ÊòæÁ§∫Âå∫ÂùóÊï∞ÁõÆÔºõ-hÊàñ--human-readableÔºö‰ª•ÂèØËØªÊÄßËæÉÈ´òÁöÑÊñπÂºèÊù•ÊòæÁ§∫‰ø°ÊÅØÔºõ-HÊàñ--siÔºö‰∏é-hÂèÇÊï∞Áõ∏ÂêåÔºå‰ΩÜÂú®ËÆ°ÁÆóÊó∂ÊòØ‰ª•1000 Bytes‰∏∫Êç¢ÁÆóÂçï‰ΩçËÄåÈùû1024 BytesÔºõ-iÊàñ--inodesÔºöÊòæÁ§∫inodeÁöÑ‰ø°ÊÅØÔºõ-kÊàñ--kilobytesÔºöÊåáÂÆöÂå∫ÂùóÂ§ßÂ∞è‰∏∫1024Â≠óËäÇÔºõ-lÊàñ--localÔºö‰ªÖÊòæÁ§∫Êú¨Âú∞Á´ØÁöÑÊñá‰ª∂Á≥ªÁªüÔºõ-mÊàñ--megabytesÔºöÊåáÂÆöÂå∫ÂùóÂ§ßÂ∞è‰∏∫1048576Â≠óËäÇÔºõ--no-syncÔºöÂú®ÂèñÂæóÁ£ÅÁõò‰ΩøÁî®‰ø°ÊÅØÂâçÔºå‰∏çË¶ÅÊâßË°åsyncÊåá‰ª§ÔºåÊ≠§‰∏∫È¢ÑËÆæÂÄºÔºõ-PÊàñ--portabilityÔºö‰ΩøÁî®POSIXÁöÑËæìÂá∫Ê†ºÂºèÔºõ--syncÔºöÂú®ÂèñÂæóÁ£ÅÁõò‰ΩøÁî®‰ø°ÊÅØÂâçÔºåÂÖàÊâßË°åsyncÊåá‰ª§Ôºõ-t&lt;Êñá‰ª∂Á≥ªÁªüÁ±ªÂûã&gt;Êàñ--type=&lt;Êñá‰ª∂Á≥ªÁªüÁ±ªÂûã&gt;Ôºö‰ªÖÊòæÁ§∫ÊåáÂÆöÊñá‰ª∂Á≥ªÁªüÁ±ªÂûãÁöÑÁ£ÅÁõò‰ø°ÊÅØÔºõ-TÊàñ--print-typeÔºöÊòæÁ§∫Êñá‰ª∂Á≥ªÁªüÁöÑÁ±ªÂûãÔºõ-x&lt;Êñá‰ª∂Á≥ªÁªüÁ±ªÂûã&gt;Êàñ--exclude-type=&lt;Êñá‰ª∂Á≥ªÁªüÁ±ªÂûã&gt;Ôºö‰∏çË¶ÅÊòæÁ§∫ÊåáÂÆöÊñá‰ª∂Á≥ªÁªüÁ±ªÂûãÁöÑÁ£ÅÁõò‰ø°ÊÅØÔºõ--helpÔºöÊòæÁ§∫Â∏ÆÂä©Ôºõ--versionÔºöÊòæÁ§∫ÁâàÊú¨‰ø°ÊÅØ„ÄÇ Á§∫‰æãÊü•ÁúãÁ≥ªÁªüÁ£ÅÁõòËÆæÂ§áÔºåÈªòËÆ§ÊòØKB‰∏∫Âçï‰Ωç1$ df ÁªìÊûúÊòæÁ§∫Ôºö Â≠óÊÆµËØ¥ÊòéÔºöFilesystem: Êñá‰ª∂Á≥ªÁªü1K-blocks: 1K-ÂùóUsed: Â∑≤Áî®Available: ÂèØÁî®Use%: Â∑≤Áî®%Mounted on: ÊåÇËΩΩÁÇπ ‰ΩøÁî®-hÈÄâÈ°π‰ª•KB‰ª•‰∏äÁöÑÂçï‰ΩçÊù•ÊòæÁ§∫ÔºåÂèØËØªÊÄßÈ´ò1$ df -h ÁªìÊûúÊòæÁ§∫Ôºö]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>df</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RouteÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-route%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãrouteÂëΩ‰ª§Áî®Êù•ÊòæÁ§∫Âπ∂ËÆæÁΩÆLinuxÂÜÖÊ†∏‰∏≠ÁöÑÁΩëÁªúË∑ØÁî±Ë°®ÔºårouteÂëΩ‰ª§ËÆæÁΩÆÁöÑË∑ØÁî±‰∏ªË¶ÅÊòØÈùôÊÄÅË∑ØÁî±„ÄÇË¶ÅÂÆûÁé∞‰∏§‰∏™‰∏çÂêåÁöÑÂ≠êÁΩë‰πãÈó¥ÁöÑÈÄö‰ø°ÔºåÈúÄË¶Å‰∏ÄÂè∞ËøûÊé•‰∏§‰∏™ÁΩëÁªúÁöÑË∑ØÁî±Âô®ÔºåÊàñËÄÖÂêåÊó∂‰Ωç‰∫é‰∏§‰∏™ÁΩëÁªúÁöÑÁΩëÂÖ≥Êù•ÂÆûÁé∞„ÄÇ Âú®LinuxÁ≥ªÁªü‰∏≠ËÆæÁΩÆË∑ØÁî±ÈÄöÂ∏∏ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥‰ª•‰∏ãÈóÆÈ¢òÔºöËØ•LinuxÁ≥ªÁªüÂú®‰∏Ä‰∏™Â±ÄÂüüÁΩë‰∏≠ÔºåÂ±ÄÂüüÁΩë‰∏≠Êúâ‰∏Ä‰∏™ÁΩëÂÖ≥ÔºåËÉΩÂ§üËÆ©Êú∫Âô®ËÆøÈóÆInternetÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÂ∞ÜËøôÂè∞Êú∫Âô®ÁöÑipÂú∞ÂùÄËÆæÁΩÆ‰∏∫LinuxÊú∫Âô®ÁöÑÈªòËÆ§Ë∑ØÁî±„ÄÇË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÁõ¥Êé•Âú®ÂëΩ‰ª§Ë°å‰∏ãÊâßË°årouteÂëΩ‰ª§Êù•Ê∑ªÂä†Ë∑ØÁî±Ôºå‰∏ç‰ºöÊ∞∏‰πÖ‰øùÂ≠òÔºåÂΩìÁΩëÂç°ÈáçÂêØÊàñËÄÖÊú∫Âô®ÈáçÂêØ‰πãÂêéÔºåËØ•Ë∑ØÁî±Â∞±Â§±Êïà‰∫ÜÔºõÂèØ‰ª•Âú®/etc/rc.local‰∏≠Ê∑ªÂä†routeÂëΩ‰ª§Êù•‰øùËØÅËØ•Ë∑ØÁî±ËÆæÁΩÆÊ∞∏‰πÖÊúâÊïà„ÄÇ ÂèÇÊï∞ËØ¥Êòé1234567-AÔºöËÆæÁΩÆÂú∞ÂùÄÁ±ªÂûãÔºõ-CÔºöÊâìÂç∞Â∞ÜLinuxÊ†∏ÂøÉÁöÑË∑ØÁî±ÁºìÂ≠òÔºõ-vÔºöËØ¶ÁªÜ‰ø°ÊÅØÊ®°ÂºèÔºõ-nÔºö‰∏çÊâßË°åDNSÂèçÂêëÊü•ÊâæÔºåÁõ¥Êé•ÊòæÁ§∫Êï∞Â≠óÂΩ¢ÂºèÁöÑIPÂú∞ÂùÄÔºõ-eÔºönetstatÊ†ºÂºèÊòæÁ§∫Ë∑ØÁî±Ë°®Ôºõ-netÔºöÂà∞‰∏Ä‰∏™ÁΩëÁªúÁöÑË∑ØÁî±Ë°®Ôºõ-hostÔºöÂà∞‰∏Ä‰∏™‰∏ªÊú∫ÁöÑË∑ØÁî±Ë°®„ÄÇ Á§∫‰æãÊòæÁ§∫ÂΩìÂâçË∑ØÁî±1$ route -n ÁªìÊûúÊòæÁ§∫Ôºö Â≠óÊÆµËØ¥ÊòéÔºö U UpË°®Á§∫Ê≠§Ë∑ØÁî±ÂΩìÂâç‰∏∫ÂêØÂä®Áä∂ÊÄÅ„ÄÇH HostÔºåË°®Á§∫Ê≠§ÁΩëÂÖ≥‰∏∫‰∏Ä‰∏ªÊú∫„ÄÇG GatewayÔºåË°®Á§∫Ê≠§ÁΩëÂÖ≥‰∏∫‰∏ÄË∑ØÁî±Âô®„ÄÇR Reinstate RouteÔºå‰ΩøÁî®Âä®ÊÄÅË∑ØÁî±ÈáçÊñ∞ÂàùÂßãÂåñÁöÑË∑ØÁî±„ÄÇD Dynamically,Ê≠§Ë∑ØÁî±ÊòØÂä®ÊÄÅÊÄßÂú∞ÂÜôÂÖ•„ÄÇM ModifiedÔºåÊ≠§Ë∑ØÁî±ÊòØÁî±Ë∑ØÁî±ÂÆàÊä§Á®ãÂ∫èÊàñÂØºÂêëÂô®Âä®ÊÄÅ‰øÆÊîπ„ÄÇ! Ë°®Á§∫Ê≠§Ë∑ØÁî±ÂΩìÂâç‰∏∫ÂÖ≥Èó≠Áä∂ÊÄÅ„ÄÇ Ê∑ªÂä†ÁΩëÂÖ≥/ËÆæÁΩÆÁΩëÂÖ≥1$ route add -net 224.0.0.0 netmask 240.0.0.0 dev eth0 Â±èËîΩ‰∏ÄÊù°Ë∑ØÁî±1$ route add -net 224.0.0.0 netmask 240.0.0.0 reject Âà†Èô§Ë∑ØÁî±ËÆ∞ÂΩï12$ route del -net 224.0.0.0 netmask 240.0.0.0$ route del -net 224.0.0.0 netmask 240.0.0.0 reject Âà†Èô§ÂíåÊ∑ªÂä†ËÆæÁΩÆÈªòËÆ§ÁΩëÂÖ≥12$ route del default gw 192.168.120.240$ route add default gw 192.168.120.240]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>route</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TailÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-tail%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãtailÂëΩ‰ª§Áî®‰∫éËæìÂÖ•Êñá‰ª∂‰∏≠ÁöÑÂ∞æÈÉ®ÂÜÖÂÆπ„ÄÇtailÂëΩ‰ª§ÈªòËÆ§Âú®Â±èÂπï‰∏äÊòæÁ§∫ÊåáÂÆöÊñá‰ª∂ÁöÑÊú´Â∞æ10Ë°å„ÄÇÂ¶ÇÊûúÁªôÂÆöÁöÑÊñá‰ª∂‰∏çÊ≠¢‰∏Ä‰∏™ÔºåÂàôÂú®ÊòæÁ§∫ÁöÑÊØè‰∏™Êñá‰ª∂ÂâçÈù¢Âä†‰∏Ä‰∏™Êñá‰ª∂ÂêçÊ†áÈ¢ò„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÊñá‰ª∂ÊàñËÄÖÊñá‰ª∂Âêç‰∏∫‚Äú-‚ÄùÔºåÂàôËØªÂèñÊ†áÂáÜËæìÂÖ•„ÄÇ Ê≥®ÊÑèÔºöÂ¶ÇÊûúË°®Á§∫Â≠óËäÇÊàñË°åÊï∞ÁöÑNÂÄº‰πãÂâçÊúâ‰∏Ä‰∏™‚Äù+‚ÄùÂè∑ÔºåÂàô‰ªéÊñá‰ª∂ÂºÄÂ§¥ÁöÑÁ¨¨NÈ°πÂºÄÂßãÊòæÁ§∫ÔºåËÄå‰∏çÊòØÊòæÁ§∫Êñá‰ª∂ÁöÑÊúÄÂêéNÈ°π„ÄÇNÂÄºÂêéÈù¢ÂèØ‰ª•ÊúâÂêéÁºÄÔºöbË°®Á§∫512ÔºåkË°®Á§∫1024ÔºåmË°®Á§∫1 048576(1M)„ÄÇ ÂèÇÊï∞ËØ¥Êòé1234567891011--retryÔºöÂç≥ÊòØÂú®tailÂëΩ‰ª§ÂêØÂä®Êó∂ÔºåÊñá‰ª∂‰∏çÂèØËÆøÈóÆÊàñËÄÖÊñá‰ª∂Á®çÂêéÂèòÂæó‰∏çÂèØËÆøÈóÆÔºåÈÉΩÂßãÁªàÂ∞ùËØïÊâìÂºÄÊñá‰ª∂„ÄÇ‰ΩøÁî®Ê≠§ÈÄâÈ°πÊó∂ÈúÄË¶Å‰∏éÈÄâÈ°π‚Äú‚Äî‚Äîfollow=name‚ÄùËøûÁî®Ôºõ-c&lt;N&gt;Êàñ‚Äî‚Äîbytes=&lt;N&gt;ÔºöËæìÂá∫Êñá‰ª∂Â∞æÈÉ®ÁöÑNÔºàN‰∏∫Êï¥Êï∞Ôºâ‰∏™Â≠óËäÇÂÜÖÂÆπÔºõ-f&lt;name/descriptor&gt;ÊàñÔºõ--follow&lt;nameldescript&gt;ÔºöÊòæÁ§∫Êñá‰ª∂ÊúÄÊñ∞ËøΩÂä†ÁöÑÂÜÖÂÆπ„ÄÇ‚Äúname‚ÄùË°®Á§∫‰ª•Êñá‰ª∂ÂêçÁöÑÊñπÂºèÁõëËßÜÊñá‰ª∂ÁöÑÂèòÂåñ„ÄÇ‚Äú-f‚Äù‰∏é‚Äú-fdescriptor‚ÄùÁ≠âÊïàÔºõ-FÔºö‰∏éÈÄâÈ°π‚Äú-follow=name‚ÄùÂíå‚Äú--retry"ËøûÁî®Êó∂ÂäüËÉΩÁõ∏ÂêåÔºõ-n&lt;N&gt;Êàñ‚Äî‚Äîline=&lt;N&gt;ÔºöËæìÂá∫Êñá‰ª∂ÁöÑÂ∞æÈÉ®NÔºàN‰ΩçÊï∞Â≠óÔºâË°åÂÜÖÂÆπ„ÄÇ--pid=&lt;ËøõÁ®ãÂè∑&gt;Ôºö‰∏é‚Äú-f‚ÄùÈÄâÈ°πËøûÁî®ÔºåÂΩìÊåáÂÆöÁöÑËøõÁ®ãÂè∑ÁöÑËøõÁ®ãÁªàÊ≠¢ÂêéÔºåËá™Âä®ÈÄÄÂá∫tailÂëΩ‰ª§Ôºõ-qÊàñ‚Äî‚ÄîquietÊàñ‚Äî‚ÄîsilentÔºöÂΩìÊúâÂ§ö‰∏™Êñá‰ª∂ÂèÇÊï∞Êó∂Ôºå‰∏çËæìÂá∫ÂêÑ‰∏™Êñá‰ª∂ÂêçÔºõ-s&lt;ÁßíÊï∞&gt;Êàñ‚Äî‚Äîsleep-interal=&lt;ÁßíÊï∞&gt;Ôºö‰∏é‚Äú-f‚ÄùÈÄâÈ°πËøûÁî®ÔºåÊåáÂÆöÁõëËßÜÊñá‰ª∂ÂèòÂåñÊó∂Èó¥ÈöîÁöÑÁßíÊï∞Ôºõ-vÊàñ‚Äî‚ÄîverboseÔºöÂΩìÊúâÂ§ö‰∏™Êñá‰ª∂ÂèÇÊï∞Êó∂ÔºåÊÄªÊòØËæìÂá∫ÂêÑ‰∏™Êñá‰ª∂ÂêçÔºõ--helpÔºöÊòæÁ§∫Êåá‰ª§ÁöÑÂ∏ÆÂä©‰ø°ÊÅØÔºõ--versionÔºöÊòæÁ§∫Êåá‰ª§ÁöÑÁâàÊú¨‰ø°ÊÅØ„ÄÇ Á§∫‰æãÊòæÁ§∫Êñá‰ª∂Êú´Â∞æÂÜÖÂÆπ1$ tail -n 5 log2014.log Âæ™ÁéØÊü•ÁúãÊñá‰ª∂ÂÜÖÂÆπ1$ tail -f test.log ‰ªéÁ¨¨5Ë°åÂºÄÂßãÊòæÁ§∫Êñá‰ª∂1$ tail -n +5 log2014.log]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>tail</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LNÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-ln%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãlnÂëΩ‰ª§Áî®Êù•‰∏∫Êñá‰ª∂Âàõ‰ª∂ËøûÊé•ÔºåËøûÊé•Á±ªÂûãÂàÜ‰∏∫Á°¨ËøûÊé•ÂíåÁ¨¶Âè∑ËøûÊé•‰∏§ÁßçÔºåÈªòËÆ§ÁöÑËøûÊé•Á±ªÂûãÊòØÁ°¨ËøûÊé•„ÄÇÂ¶ÇÊûúË¶ÅÂàõÂª∫Á¨¶Âè∑ËøûÊé•ÂøÖÈ°ª‰ΩøÁî®-sÈÄâÈ°π„ÄÇ Ê≥®ÊÑèÔºöÁ¨¶Âè∑ÈìæÊé•Êñá‰ª∂‰∏çÊòØ‰∏Ä‰∏™Áã¨Á´ãÁöÑÊñá‰ª∂ÔºåÂÆÉÁöÑËÆ∏Â§öÂ±ûÊÄß‰æùËµñ‰∫éÊ∫êÊñá‰ª∂ÔºåÊâÄ‰ª•ÁªôÁ¨¶Âè∑ÈìæÊé•Êñá‰ª∂ËÆæÁΩÆÂ≠òÂèñÊùÉÈôêÊòØÊ≤°ÊúâÊÑè‰πâÁöÑ„ÄÇ ÂèÇÊï∞ËØ¥Êòé1234567891011-b: Âà†Èô§ÔºåË¶ÜÁõñ‰ª•ÂâçÂª∫Á´ãÁöÑÈìæÊé•-d: ÂÖÅËÆ∏Ë∂ÖÁ∫ßÁî®Êà∑Âà∂‰ΩúÁõÆÂΩïÁöÑÁ°¨ÈìæÊé•-f: Âº∫Âà∂ÊâßË°å-i: ‰∫§‰∫íÊ®°ÂºèÔºåÊñá‰ª∂Â≠òÂú®ÂàôÊèêÁ§∫Áî®Êà∑ÊòØÂê¶Ë¶ÜÁõñ-n: ÊääÁ¨¶Âè∑ÈìæÊé•ËßÜ‰∏∫‰∏ÄËà¨ÁõÆÂΩï-s: ËΩØÈìæÊé•(Á¨¶Âè∑ÈìæÊé•)-v: ÊòæÁ§∫ËØ¶ÁªÜÁöÑÂ§ÑÁêÜËøáÁ®ã-S: ‚Äú-S&lt;Â≠óÂ∞æÂ§á‰ªΩÂ≠óÁ¨¶‰∏≤&gt; ‚ÄùÊàñ ‚Äú--suffix=&lt;Â≠óÂ∞æÂ§á‰ªΩÂ≠óÁ¨¶‰∏≤&gt;‚Äù-V: ‚Äú-V&lt;Â§á‰ªΩÊñπÂºè&gt;‚ÄùÊàñ‚Äú--version-control=&lt;Â§á‰ªΩÊñπÂºè&gt;‚Äù--help: ÊòæÁ§∫Â∏ÆÂä©‰ø°ÊÅØ--version: ÊòæÁ§∫ÁâàÊú¨‰ø°ÊÅØ Á§∫‰æãÂª∫Á´ã‰∏Ä‰∏™Á¨¶Âè∑ÈìæÊé• Âú®ÁõÆÂΩï/usr/liu‰∏ãÂª∫Á´ã‰∏Ä‰∏™Á¨¶Âè∑ÈìæÊé•Êñá‰ª∂abcÔºå‰ΩøÂÆÉÊåáÂêëÁõÆÂΩï/usr/mengqc/mub1 1$ ln -s /usr/mengqc/mub1 /usr/liu/abc Âà†Èô§‰∏Ä‰∏™Á¨¶Âè∑ÈìæÊé• Â∞ÜÁõÆÂΩï/usr/liu/‰∏ãÁöÑabcÈìæÊé•Âà†Èô§ÔºåÊ≥®ÊÑè‰∏çÊòØrm -rf symbolic_name/ 12$ cd /usr/liu/$ rm -rf symbolic_name]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>ln</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LSÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-ls%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãlsÂëΩ‰ª§Áî®Êù•ÊòæÁ§∫ÁõÆÊ†áÂàóË°®ÔºåÂú®Linux‰∏≠ÊòØ‰ΩøÁî®ÁéáËæÉÈ´òÁöÑÂëΩ‰ª§„ÄÇlsÂëΩ‰ª§ÁöÑËæìÂá∫‰ø°ÊÅØÂèØ‰ª•ËøõË°åÂΩ©Ëâ≤Âä†‰∫ÆÊòæÁ§∫Ôºå‰ª•ÂàÜÂå∫‰∏çÂêåÁ±ªÂûãÁöÑÊñá‰ª∂„ÄÇ ÂèÇÊï∞ËØ¥Êòé12345678910111213141516171819202122-aÔºöÊòæÁ§∫ÊâÄÊúâÊ°£Ê°àÂèäÁõÆÂΩïÔºàlsÂÜÖÂÆöÂ∞ÜÊ°£Ê°àÂêçÊàñÁõÆÂΩïÂêçÁß∞‰∏∫‚Äú.‚ÄùÁöÑËßÜ‰∏∫ÂΩ±ËóèÔºå‰∏ç‰ºöÂàóÂá∫ÔºâÔºõ-AÔºöÊòæÁ§∫Èô§ÂΩ±ËóèÊñá‰ª∂‚Äú.‚ÄùÂíå‚Äú..‚Äù‰ª•Â§ñÁöÑÊâÄÊúâÊñá‰ª∂ÂàóË°®Ôºõ-CÔºöÂ§öÂàóÊòæÁ§∫ËæìÂá∫ÁªìÊûú„ÄÇËøôÊòØÈªòËÆ§ÈÄâÈ°πÔºõ-lÔºö‰∏é‚Äú-C‚ÄùÈÄâÈ°πÂäüËÉΩÁõ∏ÂèçÔºåÊâÄÊúâËæìÂá∫‰ø°ÊÅØÁî®ÂçïÂàóÊ†ºÂºèËæìÂá∫Ôºå‰∏çËæìÂá∫‰∏∫Â§öÂàóÔºõ-FÔºöÂú®ÊØè‰∏™ËæìÂá∫È°πÂêéËøΩÂä†Êñá‰ª∂ÁöÑÁ±ªÂûãÊ†áËØÜÁ¨¶ÔºåÂÖ∑‰ΩìÂê´‰πâÔºö‚Äú*‚ÄùË°®Á§∫ÂÖ∑ÊúâÂèØÊâßË°åÊùÉÈôêÁöÑÊôÆÈÄöÊñá‰ª∂Ôºå‚Äú/‚ÄùË°®Á§∫ÁõÆÂΩïÔºå‚Äú@‚ÄùË°®Á§∫Á¨¶Âè∑ÈìæÊé•Ôºå‚Äú|‚ÄùË°®Á§∫ÂëΩ‰ª§ÁÆ°ÈÅìFIFOÔºå‚Äú=‚ÄùË°®Á§∫socketsÂ•óÊé•Â≠ó„ÄÇÂΩìÊñá‰ª∂‰∏∫ÊôÆÈÄöÊñá‰ª∂Êó∂Ôºå‰∏çËæìÂá∫‰ªª‰ΩïÊ†áËØÜÁ¨¶Ôºõ-bÔºöÂ∞ÜÊñá‰ª∂‰∏≠ÁöÑ‰∏çÂèØËæìÂá∫ÁöÑÂ≠óÁ¨¶‰ª•ÂèçÊñúÁ∫ø‚Äú‚ÄùÂä†Â≠óÁ¨¶ÁºñÁ†ÅÁöÑÊñπÂºèËæìÂá∫Ôºõ-cÔºö‰∏é‚Äú-lt‚ÄùÈÄâÈ°πËøûÁî®Êó∂ÔºåÊåâÁÖßÊñá‰ª∂Áä∂ÊÄÅÊó∂Èó¥ÊéíÂ∫èËæìÂá∫ÁõÆÂΩïÂÜÖÂÆπÔºåÊéíÂ∫èÁöÑ‰æùÊçÆÊòØÊñá‰ª∂ÁöÑÁ¥¢ÂºïËäÇÁÇπ‰∏≠ÁöÑctimeÂ≠óÊÆµ„ÄÇ‰∏é‚Äú-l‚ÄùÈÄâÈ°πËøûÁî®Êó∂ÔºåÂàôÊéíÂ∫èÁöÑ‰∏ÄÂè•ÊòØÊñá‰ª∂ÁöÑÁä∂ÊÄÅÊîπÂèòÊó∂Èó¥Ôºõ-dÔºö‰ªÖÊòæÁ§∫ÁõÆÂΩïÂêçÔºåËÄå‰∏çÊòæÁ§∫ÁõÆÂΩï‰∏ãÁöÑÂÜÖÂÆπÂàóË°®„ÄÇÊòæÁ§∫Á¨¶Âè∑ÈìæÊé•Êñá‰ª∂Êú¨Ë∫´ÔºåËÄå‰∏çÊòæÁ§∫ÂÖ∂ÊâÄÊåáÂêëÁöÑÁõÆÂΩïÂàóË°®Ôºõ-fÔºöÊ≠§ÂèÇÊï∞ÁöÑÊïàÊûúÂíåÂêåÊó∂ÊåáÂÆö‚ÄúaU‚ÄùÂèÇÊï∞Áõ∏ÂêåÔºåÂπ∂ÂÖ≥Èó≠‚Äúlst‚ÄùÂèÇÊï∞ÁöÑÊïàÊûúÔºõ-iÔºöÊòæÁ§∫Êñá‰ª∂Á¥¢ÂºïËäÇÁÇπÂè∑ÔºàinodeÔºâ„ÄÇ‰∏Ä‰∏™Á¥¢ÂºïËäÇÁÇπ‰ª£Ë°®‰∏Ä‰∏™Êñá‰ª∂Ôºõ--file-typeÔºö‰∏é‚Äú-F‚ÄùÈÄâÈ°πÁöÑÂäüËÉΩÁõ∏ÂêåÔºå‰ΩÜÊòØ‰∏çÊòæÁ§∫‚Äú*‚ÄùÔºõ-kÔºö‰ª•KBÔºàÂçÉÂ≠óËäÇÔºâ‰∏∫Âçï‰ΩçÊòæÁ§∫Êñá‰ª∂Â§ßÂ∞èÔºõ-lÔºö‰ª•ÈïøÊ†ºÂºèÊòæÁ§∫ÁõÆÂΩï‰∏ãÁöÑÂÜÖÂÆπÂàóË°®„ÄÇËæìÂá∫ÁöÑ‰ø°ÊÅØ‰ªéÂ∑¶Âà∞Âè≥‰æùÊ¨°ÂåÖÊã¨Êñá‰ª∂ÂêçÔºåÊñá‰ª∂Á±ªÂûã„ÄÅÊùÉÈôêÊ®°Âºè„ÄÅÁ°¨ËøûÊé•Êï∞„ÄÅÊâÄÊúâËÄÖ„ÄÅÁªÑ„ÄÅÊñá‰ª∂Â§ßÂ∞èÂíåÊñá‰ª∂ÁöÑÊúÄÂêé‰øÆÊîπÊó∂Èó¥Á≠âÔºõ-mÔºöÁî®‚Äú,‚ÄùÂè∑Âå∫ÈöîÊØè‰∏™Êñá‰ª∂ÂíåÁõÆÂΩïÁöÑÂêçÁß∞Ôºõ-nÔºö‰ª•Áî®Êà∑ËØÜÂà´Á†ÅÂíåÁæ§ÁªÑËØÜÂà´Á†ÅÊõø‰ª£ÂÖ∂ÂêçÁß∞Ôºõ-rÔºö‰ª•Êñá‰ª∂ÂêçÂèçÂ∫èÊéíÂàóÂπ∂ËæìÂá∫ÁõÆÂΩïÂÜÖÂÆπÂàóË°®Ôºõ-sÔºöÊòæÁ§∫Êñá‰ª∂ÂíåÁõÆÂΩïÁöÑÂ§ßÂ∞èÔºå‰ª•Âå∫Âùó‰∏∫Âçï‰ΩçÔºõ-tÔºöÁî®Êñá‰ª∂ÂíåÁõÆÂΩïÁöÑÊõ¥ÊîπÊó∂Èó¥ÊéíÂ∫èÔºõ-LÔºöÂ¶ÇÊûúÈÅáÂà∞ÊÄßË¥®‰∏∫Á¨¶Âè∑ÈìæÊé•ÁöÑÊñá‰ª∂ÊàñÁõÆÂΩïÔºåÁõ¥Êé•ÂàóÂá∫ËØ•ÈìæÊé•ÊâÄÊåáÂêëÁöÑÂéüÂßãÊñá‰ª∂ÊàñÁõÆÂΩïÔºõ-RÔºöÈÄíÂΩíÂ§ÑÁêÜÔºåÂ∞ÜÊåáÂÆöÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂ÂèäÂ≠êÁõÆÂΩï‰∏ÄÂπ∂Â§ÑÁêÜÔºõ--full-timeÔºöÂàóÂá∫ÂÆåÊï¥ÁöÑÊó•Êúü‰∏éÊó∂Èó¥Ôºõ--color[=WHEN]Ôºö‰ΩøÁî®‰∏çÂêåÁöÑÈ¢úËâ≤È´ò‰∫ÆÊòæÁ§∫‰∏çÂêåÁ±ªÂûãÁöÑ„ÄÇ Á§∫‰æã‰ΩøÁî®ÈïøÊ∏ÖÂçïÊ®°Âºè1$ ls -l ÊòæÁ§∫Êñá‰ª∂Â§ßÂ∞è1$ ls -lh ÊéíÂ∫èÊñá‰ª∂Â§ßÂ∞è1$ ls -lhS ÊµãÈáèÂ§ßÂ∞è1$ ls -l --block-size=M ÊòæÁ§∫ÈöêËóèÊñá‰ª∂1$ ls -a Âè™ÂàóÂá∫ÁõÆÂΩïÊù°ÁõÆ1$ ls -d */ ‰∏çÊâìÂç∞ÊâÄÊúâËÄÖ‰ø°ÊÅØ1$ ls -g ‰∏çÊâìÂç∞ÁªÑ‰ø°ÊÅØ1$ ls -lG ÊâìÂç∞UIDÂíåGID1$ ls -n ‰∏çÂ∏¶È¢úËâ≤ÊâìÂç∞1$ ls --color=never ÊâìÂç∞ÊØè‰∏™Êñá‰ª∂ÁöÑÁ¥¢ÂºïÂè∑1$ ls -li Â¢ûÂä† / (ÊñúÁ∫ø) Ê†áËÆ∞ÁõÆÂΩï1$ ls -p ÊéíÂ∫èÊó∂ÂèçËΩ¨È°∫Â∫è1$ ls -r ÈÄíÂΩíÂàóÂá∫Â≠êÁõÆÂΩï1$ ls -R Êâ©Â±ïÂêçÊéíÂ∫è1$ ls -lX ÈÄöËøá‰øÆÊîπÊó∂Èó¥ÂàóÂá∫1$ ls -lt ÂàóÂá∫‰Ω†ÁöÑ‰∏ªÁõÆÂΩï1$ ls ~ ÊâìÂç∞lsÂëΩ‰ª§ÁâàÊú¨1$ ls --version]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>ls</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPÂìçÂ∫îÂ§¥ÂíåËØ∑Ê±ÇÂ§¥‰ø°ÊÅØÂØπÁÖßË°®]]></title>
    <url>%2Fhttp%2Fhttp%2Fheader%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãHTTPËØ∑Ê±ÇÂ§¥Êèê‰æõ‰∫ÜÂÖ≥‰∫éËØ∑Ê±ÇÔºåÂìçÂ∫îÊàñËÄÖÂÖ∂‰ªñÁöÑÂèëÈÄÅÂÆû‰ΩìÁöÑ‰ø°ÊÅØ„ÄÇHTTPÁöÑÂ§¥‰ø°ÊÅØÂåÖÊã¨ÈÄöÁî®Â§¥„ÄÅËØ∑Ê±ÇÂ§¥„ÄÅÂìçÂ∫îÂ§¥ÂíåÂÆû‰ΩìÂ§¥Âõõ‰∏™ÈÉ®ÂàÜ„ÄÇÊØè‰∏™Â§¥ÂüüÁî±‰∏Ä‰∏™ÂüüÂêçÔºåÂÜíÂè∑Ôºà:ÔºâÂíåÂüüÂÄº‰∏âÈÉ®ÂàÜÁªÑÊàê„ÄÇ ÈÄöÁî®Â§¥Ê†áÔºöÂç≥ÂèØÁî®‰∫éËØ∑Ê±ÇÔºå‰πüÂèØÁî®‰∫éÂìçÂ∫îÔºåÊòØ‰Ωú‰∏∫‰∏Ä‰∏™Êï¥‰ΩìËÄå‰∏çÊòØÁâπÂÆöËµÑÊ∫ê‰∏é‰∫ãÂä°Áõ∏ÂÖ≥ËÅî„ÄÇ ËØ∑Ê±ÇÂ§¥Ê†áÔºöÂÖÅËÆ∏ÂÆ¢Êà∑Á´Ø‰º†ÈÄíÂÖ≥‰∫éËá™Ë∫´ÁöÑ‰ø°ÊÅØÂíåÂ∏åÊúõÁöÑÂìçÂ∫îÂΩ¢Âºè„ÄÇ ÂìçÂ∫îÂ§¥Ê†áÔºöÊúçÂä°Âô®Âíå‰∫é‰º†ÈÄíËá™Ë∫´‰ø°ÊÅØÁöÑÂìçÂ∫î„ÄÇ ÂÆû‰ΩìÂ§¥Ê†áÔºöÂÆö‰πâË¢´‰º†ÈÄÅËµÑÊ∫êÁöÑ‰ø°ÊÅØ„ÄÇÂç≥ÂèØÁî®‰∫éËØ∑Ê±ÇÔºå‰πüÂèØÁî®‰∫éÂìçÂ∫î„ÄÇ Ê†πÊçÆ‰ª•‰∏äÂàÜÁ±ªÁöÑHTTPËØ∑Ê±ÇÂ§¥‰ªãÁªçÂèØ‰ª•ÂèÇËÄÉÊ≠§ÊñáÔºåÊú¨Â∑•ÂÖ∑Ê†πÊçÆËØ∑Ê±ÇÂíåËæìÂá∫ÂàÜ‰∏∫RequestÂíåResponse‰∏§ÈÉ®ÂàÜ„ÄÇ HTTP Request Header Header Ëß£Èáä Á§∫‰æã Accept ÊåáÂÆöÂÆ¢Êà∑Á´ØËÉΩÂ§üÊé•Êî∂ÁöÑÂÜÖÂÆπÁ±ªÂûã Accept: text/html Accept-Charset ÊµèËßàÂô®ÂèØ‰ª•Êé•ÂèóÁöÑÂ≠óÁ¨¶ÁºñÁ†ÅÈõÜ„ÄÇ Accept-Charset: iso-8859-5 Accept-Encoding ÊåáÂÆöÊµèËßàÂô®ÂèØ‰ª•ÊîØÊåÅÁöÑwebÊúçÂä°Âô®ËøîÂõûÂÜÖÂÆπÂéãÁº©ÁºñÁ†ÅÁ±ªÂûã„ÄÇ Accept-Encoding: gzip, deflate Accept-Language ÊµèËßàÂô®ÂèØÊé•ÂèóÁöÑËØ≠Ë®Ä Accept-Language: en,zh Accept-Ranges ÂèØ‰ª•ËØ∑Ê±ÇÁΩëÈ°µÂÆû‰ΩìÁöÑ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Â≠êËåÉÂõ¥Â≠óÊÆµ Accept-Ranges: bytes Authorization HTTPÊéàÊùÉÁöÑÊéàÊùÉËØÅ‰π¶ Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== Cache-Control ÊåáÂÆöËØ∑Ê±ÇÂíåÂìçÂ∫îÈÅµÂæ™ÁöÑÁºìÂ≠òÊú∫Âà∂ Cache-Control: no-cache Connection Ë°®Á§∫ÊòØÂê¶ÈúÄË¶ÅÊåÅ‰πÖËøûÊé•„ÄÇÔºàHTTP 1.1ÈªòËÆ§ËøõË°åÊåÅ‰πÖËøûÊé•Ôºâ Connection: keep-alive Cookie HTTPËØ∑Ê±ÇÂèëÈÄÅÊó∂Ôºå‰ºöÊää‰øùÂ≠òÂú®ËØ•ËØ∑Ê±ÇÂüüÂêç‰∏ãÁöÑÊâÄÊúâcookieÂÄº‰∏ÄËµ∑ÂèëÈÄÅÁªôwebÊúçÂä°Âô®„ÄÇ Cookie: admckid=1607301350151121825; Content-Length ËØ∑Ê±ÇÁöÑÂÜÖÂÆπÈïøÂ∫¶ Content-Length: 348 Content-Type ËØ∑Ê±ÇÁöÑ‰∏éÂÆû‰ΩìÂØπÂ∫îÁöÑMIME‰ø°ÊÅØ Content-Type: application/x-www-form-urlencoded Date ËØ∑Ê±ÇÂèëÈÄÅÁöÑÊó•ÊúüÂíåÊó∂Èó¥ Date: Tue, 15 Nov 2010 08:12:31 GMT Expect ËØ∑Ê±ÇÁöÑÁâπÂÆöÁöÑÊúçÂä°Âô®Ë°å‰∏∫ Expect: 100-continue From ÂèëÂá∫ËØ∑Ê±ÇÁöÑÁî®Êà∑ÁöÑEmail From: user@email.com Host ÊåáÂÆöËØ∑Ê±ÇÁöÑÊúçÂä°Âô®ÁöÑÂüüÂêçÂíåÁ´ØÂè£Âè∑ c.xxx.com.cn If-Match Âè™ÊúâËØ∑Ê±ÇÂÜÖÂÆπ‰∏éÂÆû‰ΩìÁõ∏ÂåπÈÖçÊâçÊúâÊïà If-Match: ‚Äú737060cd8c284d8af7ad3082f209582d‚Äù If-Modified-Since Â¶ÇÊûúËØ∑Ê±ÇÁöÑÈÉ®ÂàÜÂú®ÊåáÂÆöÊó∂Èó¥‰πãÂêéË¢´‰øÆÊîπÂàôËØ∑Ê±ÇÊàêÂäüÔºåÊú™Ë¢´‰øÆÊîπÂàôËøîÂõû304‰ª£Á†Å If-Modified-Since: Sat, 29 Oct 2010 19:43:31 GMT If-None-Match Â¶ÇÊûúÂÜÖÂÆπÊú™ÊîπÂèòËøîÂõû304‰ª£Á†ÅÔºåÂèÇÊï∞‰∏∫ÊúçÂä°Âô®ÂÖàÂâçÂèëÈÄÅÁöÑEtagÔºå‰∏éÊúçÂä°Âô®ÂõûÂ∫îÁöÑEtagÊØîËæÉÂà§Êñ≠ÊòØÂê¶ÊîπÂèò If-None-Match: ‚Äú737060cd8c284d8af7ad3082f209582d‚Äù If-Range Â¶ÇÊûúÂÆû‰ΩìÊú™ÊîπÂèòÔºåÊúçÂä°Âô®ÂèëÈÄÅÂÆ¢Êà∑Á´Ø‰∏¢Â§±ÁöÑÈÉ®ÂàÜÔºåÂê¶ÂàôÂèëÈÄÅÊï¥‰∏™ÂÆû‰Ωì„ÄÇÂèÇÊï∞‰πü‰∏∫Etag If-Range: ‚Äú737060cd8c284d8af7ad3082f209582d‚Äù If-Unmodified-Since Âè™Âú®ÂÆû‰ΩìÂú®ÊåáÂÆöÊó∂Èó¥‰πãÂêéÊú™Ë¢´‰øÆÊîπÊâçËØ∑Ê±ÇÊàêÂäü If-Unmodified-Since: Sat, 29 Oct 2010 19:43:31 GMT Max-Forwards ÈôêÂà∂‰ø°ÊÅØÈÄöËøá‰ª£ÁêÜÂíåÁΩëÂÖ≥‰º†ÈÄÅÁöÑÊó∂Èó¥ Max-Forwards: 10 Pragma Áî®Êù•ÂåÖÂê´ÂÆûÁé∞ÁâπÂÆöÁöÑÊåá‰ª§ Pragma: no-cache Proxy-Authorization ËøûÊé•Âà∞‰ª£ÁêÜÁöÑÊéàÊùÉËØÅ‰π¶ Proxy-Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== Range Âè™ËØ∑Ê±ÇÂÆû‰ΩìÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÊåáÂÆöËåÉÂõ¥ Range: bytes=500-999 Referer ÂÖàÂâçÁΩëÈ°µÁöÑÂú∞ÂùÄÔºåÂΩìÂâçËØ∑Ê±ÇÁΩëÈ°µÁ¥ßÈöèÂÖ∂Âêé,Âç≥Êù•Ë∑Ø Referer: http://www.iqiyi.com/a_19rrhahmi9.html TE ÂÆ¢Êà∑Á´ØÊÑøÊÑèÊé•ÂèóÁöÑ‰º†ËæìÁºñÁ†ÅÔºåÂπ∂ÈÄöÁü•ÊúçÂä°Âô®Êé•ÂèóÊé•ÂèóÂ∞æÂä†Â§¥‰ø°ÊÅØ TE: trailers,deflate;q=0.5 Upgrade ÂêëÊúçÂä°Âô®ÊåáÂÆöÊüêÁßç‰º†ËæìÂçèËÆÆ‰ª•‰æøÊúçÂä°Âô®ËøõË°åËΩ¨Êç¢ÔºàÂ¶ÇÊûúÊîØÊåÅÔºâ Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11 User-Agent ÂÜÖÂÆπÂåÖÂê´ÂèëÂá∫ËØ∑Ê±ÇÁöÑÁî®Êà∑‰ø°ÊÅØ User-Agent: Mozilla/5.0 Via ÈÄöÁü•‰∏≠Èó¥ÁΩëÂÖ≥Êàñ‰ª£ÁêÜÊúçÂä°Âô®Âú∞ÂùÄÔºåÈÄö‰ø°ÂçèËÆÆ Via: 1.0 fred, 1.1 nowhere.com (Apache/1.1) Warning ÂÖ≥‰∫éÊ∂àÊÅØÂÆû‰ΩìÁöÑË≠¶Âëä‰ø°ÊÅØ Warn: 199 Miscellaneous warning HTTP Responses Header Header Ëß£Èáä Á§∫‰æã Accept-Ranges Ë°®ÊòéÊúçÂä°Âô®ÊòØÂê¶ÊîØÊåÅÊåáÂÆöËåÉÂõ¥ËØ∑Ê±ÇÂèäÂì™ÁßçÁ±ªÂûãÁöÑÂàÜÊÆµËØ∑Ê±Ç Accept-Ranges: bytes Age ‰ªéÂéüÂßãÊúçÂä°Âô®Âà∞‰ª£ÁêÜÁºìÂ≠òÂΩ¢ÊàêÁöÑ‰º∞ÁÆóÊó∂Èó¥Ôºà‰ª•ÁßíËÆ°ÔºåÈùûË¥üÔºâ Age: 12 Allow ÂØπÊüêÁΩëÁªúËµÑÊ∫êÁöÑÊúâÊïàÁöÑËØ∑Ê±ÇË°å‰∏∫Ôºå‰∏çÂÖÅËÆ∏ÂàôËøîÂõû405 Allow: GET, HEAD Cache-Control ÂëäËØâÊâÄÊúâÁöÑÁºìÂ≠òÊú∫Âà∂ÊòØÂê¶ÂèØ‰ª•ÁºìÂ≠òÂèäÂì™ÁßçÁ±ªÂûã Cache-Control: max-age=31536000 Content-Encoding webÊúçÂä°Âô®ÊîØÊåÅÁöÑËøîÂõûÂÜÖÂÆπÂéãÁº©ÁºñÁ†ÅÁ±ªÂûã„ÄÇ Content-Encoding: gzip Content-Language ÂìçÂ∫î‰ΩìÁöÑËØ≠Ë®Ä Content-Language: en,zh Content-Length ÂìçÂ∫î‰ΩìÁöÑÈïøÂ∫¶ Content-Length: 348 Content-Location ËØ∑Ê±ÇËµÑÊ∫êÂèØÊõø‰ª£ÁöÑÂ§áÁî®ÁöÑÂè¶‰∏ÄÂú∞ÂùÄ Content-Location: /index.htm Content-MD5 ËøîÂõûËµÑÊ∫êÁöÑMD5Ê†°È™åÂÄº Content-MD5: Q2hlY2sgSW50ZWdyaXR5IQ== Content-Range Âú®Êï¥‰∏™ËøîÂõû‰Ωì‰∏≠Êú¨ÈÉ®ÂàÜÁöÑÂ≠óËäÇ‰ΩçÁΩÆ Content-Range: bytes 21010-47021/47022 Content-Type ËøîÂõûÂÜÖÂÆπÁöÑMIMEÁ±ªÂûã Content-Type: application/octet-stream Date ÂéüÂßãÊúçÂä°Âô®Ê∂àÊÅØÂèëÂá∫ÁöÑÊó∂Èó¥ Mon, 15 Aug 2016 02:43:15 GMT ETag ËØ∑Ê±ÇÂèòÈáèÁöÑÂÆû‰ΩìÊ†áÁ≠æÁöÑÂΩìÂâçÂÄº ETag: ‚Äú737060cd8c284d8af7ad3082f209582d‚Äù Expires ÂìçÂ∫îËøáÊúüÁöÑÊó•ÊúüÂíåÊó∂Èó¥ Expires: Tue, 15 Aug 2017 02:42:58 GMT Last-Modified ËØ∑Ê±ÇËµÑÊ∫êÁöÑÊúÄÂêé‰øÆÊîπÊó∂Èó¥ Last-Modified: Fri, 29 Jul 2016 16:26:41 GMT Location Áî®Êù•ÈáçÂÆöÂêëÊé•Êî∂ÊñπÂà∞ÈùûËØ∑Ê±ÇURLÁöÑ‰ΩçÁΩÆÊù•ÂÆåÊàêËØ∑Ê±ÇÊàñÊ†áËØÜÊñ∞ÁöÑËµÑÊ∫ê Location: http://www.xxx.com/act/RdFHgKt4WyNYv27z.html P3P P3PÊèê‰æõÁöÑ‰∏™‰∫∫ÈöêÁßÅ‰øùÊä§Á≠ñÁï• P3P: CP=CURa ADMa DEVa PSAo PSDo OUR BUS UNI PUR INT DEM STA PRE COM NAV OTC NOI DSP COR Pragma ÂåÖÊã¨ÂÆûÁé∞ÁâπÂÆöÁöÑÊåá‰ª§ÔºåÂÆÉÂèØÂ∫îÁî®Âà∞ÂìçÂ∫îÈìæ‰∏äÁöÑ‰ªª‰ΩïÊé•Êî∂Êñπ Pragma: no-cache Proxy-Authenticate ÂÆÉÊåáÂá∫ËÆ§ËØÅÊñπÊ°àÂíåÂèØÂ∫îÁî®Âà∞‰ª£ÁêÜÁöÑËØ•URL‰∏äÁöÑÂèÇÊï∞ Proxy-Authenticate: Basic refresh Â∫îÁî®‰∫éÈáçÂÆöÂêëÊàñ‰∏Ä‰∏™Êñ∞ÁöÑËµÑÊ∫êË¢´ÂàõÈÄ†ÔºåÂú®5Áßí‰πãÂêéÈáçÂÆöÂêëÔºàÁî±ÁΩëÊôØÊèêÂá∫ÔºåË¢´Â§ßÈÉ®ÂàÜÊµèËßàÂô®ÊîØÊåÅÔºâ Refresh: http://www.xxx.com/ Retry-After Â¶ÇÊûúÂÆû‰ΩìÊöÇÊó∂‰∏çÂèØÂèñÔºåÈÄöÁü•ÂÆ¢Êà∑Á´ØÂú®ÊåáÂÆöÊó∂Èó¥‰πãÂêéÂÜçÊ¨°Â∞ùËØï Retry-After: 120 Server webÊúçÂä°Âô®ËΩØ‰ª∂ÂêçÁß∞ Server: nginx/7ed94dd662ffeb274371f6f0438ac6587fed8d84 Set-Cookie ËÆæÁΩÆHttp Cookie Set-Cookie: UserID=JohnDoe; Max-Age=3600; Version=1 Trailer ÊåáÂá∫Â§¥ÂüüÂú®ÂàÜÂùó‰º†ËæìÁºñÁ†ÅÁöÑÂ∞æÈÉ®Â≠òÂú® Trailer: Max-Forwards Transfer-Encoding Êñá‰ª∂‰º†ËæìÁºñÁ†Å Transfer-Encoding:chunked Vary ÂëäËØâ‰∏ãÊ∏∏‰ª£ÁêÜÊòØ‰ΩøÁî®ÁºìÂ≠òÂìçÂ∫îËøòÊòØ‰ªéÂéüÂßãÊúçÂä°Âô®ËØ∑Ê±Ç Vary: * Via ÂëäÁü•‰ª£ÁêÜÂÆ¢Êà∑Á´ØÂìçÂ∫îÊòØÈÄöËøáÂì™ÈáåÂèëÈÄÅÁöÑ Via: 1.0 fred, 1.1 nowhere.com (Apache/1.1) Warning Ë≠¶ÂëäÂÆû‰ΩìÂèØËÉΩÂ≠òÂú®ÁöÑÈóÆÈ¢ò Warning: 199 Miscellaneous warning WWW-Authenticate Ë°®ÊòéÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂÆû‰ΩìÂ∫îËØ•‰ΩøÁî®ÁöÑÊéàÊùÉÊñπÊ°à WWW-Authenticate: Basic]]></content>
      <categories>
        <category>http</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>ÂçèËÆÆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MIMEÁ±ªÂûãÂàóË°®]]></title>
    <url>%2Fhttp%2Fhttp%2Fmime%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãMIME (Multipurpose Internet Mail Extensions) ÊòØÊèèËø∞Ê∂àÊÅØÂÜÖÂÆπÁ±ªÂûãÁöÑÂõ†ÁâπÁΩëÊ†áÂáÜ„ÄÇMIME Ê∂àÊÅØËÉΩÂåÖÂê´ÊñáÊú¨„ÄÅÂõæÂÉè„ÄÅÈü≥È¢ë„ÄÅËßÜÈ¢ë‰ª•ÂèäÂÖ∂‰ªñÂ∫îÁî®Á®ãÂ∫è‰∏ìÁî®ÁöÑÊï∞ÊçÆ„ÄÇÂÆòÊñπÁöÑ MIME ‰ø°ÊÅØÊòØÁî± Internet Engineering Task Force (IETF) Âú®‰∏ãÈù¢ÁöÑÊñáÊ°£‰∏≠Êèê‰æõÁöÑÔºö RFC-822 Standard for ARPA Internet text messagesRFC-2045 MIME Part 1: Format of Internet Message BodiesRFC-2046 MIME Part 2: Media TypesRFC-2047 MIME Part 3: Header Extensions for Non-ASCII TextRFC-2048 MIME Part 4: Registration ProceduresRFC-2049 MIME Part 5: Conformance Criteria and Examples ‰∏çÂêåÁöÑÂ∫îÁî®Á®ãÂ∫èÊîØÊåÅ‰∏çÂêåÁöÑ MIME Á±ªÂûã„ÄÇ‰∏ãÈù¢ÁöÑÂèÇËÄÉÊâãÂÜåÊòØÁî± Microsoft Internet Information Server version 5 ÊâÄÊîØÊåÅÁöÑ MIME Á±ªÂûãÂàóË°®„ÄÇ ÊåâÁÖßÂÜÖÂÆπÁ±ªÂûãÊéíÂàóÁöÑ Mime Á±ªÂûãÂàóË°® Á±ªÂûã/Â≠êÁ±ªÂûã Êâ©Â±ïÂêç application/envoy evy application/fractals fif application/futuresplash spl application/hta hta application/internet-property-stream acx application/mac-binhex40 hqx application/msword doc application/msword dot application/octet-stream * application/octet-stream bin application/octet-stream class application/octet-stream dms application/octet-stream exe application/octet-stream lha application/octet-stream lzh application/oda oda application/olescript axs application/pdf pdf application/pics-rules prf application/pkcs10 p10 application/pkix-crl crl application/postscript ai application/postscript eps application/postscript ps application/rtf rtf application/set-payment-initiation setpay application/set-registration-initiation setreg application/vnd.ms-excel xla application/vnd.ms-excel xlc application/vnd.ms-excel xlm application/vnd.ms-excel xls application/vnd.ms-excel xlt application/vnd.ms-excel xlw application/vnd.ms-outlook msg application/vnd.ms-pkicertstore sst application/vnd.ms-pkiseccat cat application/vnd.ms-pkistl stl application/vnd.ms-powerpoint pot application/vnd.ms-powerpoint pps application/vnd.ms-powerpoint ppt application/vnd.ms-project mpp application/vnd.ms-works wcm application/vnd.ms-works wdb application/vnd.ms-works wks application/vnd.ms-works wps application/winhlp hlp application/x-bcpio bcpio application/x-cdf cdf application/x-compress z application/x-compressed tgz application/x-cpio cpio application/x-csh csh application/x-director dcr application/x-director dir application/x-director dxr application/x-dvi dvi application/x-gtar gtar application/x-gzip gz application/x-hdf hdf application/x-internet-signup ins application/x-internet-signup isp application/x-iphone iii application/x-javascript js application/x-latex latex application/x-msaccess mdb application/x-mscardfile crd application/x-msclip clp application/x-msdownload dll application/x-msmediaview m13 application/x-msmediaview m14 application/x-msmediaview mvb application/x-msmetafile wmf application/x-msmoney mny application/x-mspublisher pub application/x-msschedule scd application/x-msterminal trm application/x-mswrite wri application/x-netcdf cdf application/x-netcdf nc application/x-perfmon pma application/x-perfmon pmc application/x-perfmon pml application/x-perfmon pmr application/x-perfmon pmw application/x-pkcs12 p12 application/x-pkcs12 pfx application/x-pkcs7-certificates p7b application/x-pkcs7-certificates spc application/x-pkcs7-certreqresp p7r application/x-pkcs7-mime p7c application/x-pkcs7-mime p7m application/x-pkcs7-signature p7s application/x-sh sh application/x-shar shar application/x-shockwave-flash swf application/x-stuffit sit application/x-sv4cpio sv4cpio application/x-sv4crc sv4crc application/x-tar tar application/x-tcl tcl application/x-tex tex application/x-texinfo texi application/x-texinfo texinfo application/x-troff roff application/x-troff t application/x-troff tr application/x-troff-man man application/x-troff-me me application/x-troff-ms ms application/x-ustar ustar application/x-wais-source src application/x-x509-ca-cert cer application/x-x509-ca-cert crt application/x-x509-ca-cert der application/ynd.ms-pkipko pko application/zip zip audio/basic au audio/basic snd audio/mid mid audio/mid rmi audio/mpeg mp3 audio/x-aiff aif audio/x-aiff aifc audio/x-aiff aiff audio/x-mpegurl m3u audio/x-pn-realaudio ra audio/x-pn-realaudio ram audio/x-wav wav image/bmp bmp image/cis-cod cod image/gif gif image/ief ief image/jpeg jpe image/jpeg jpeg image/jpeg jpg image/pipeg jfif image/svg+xml svg image/tiff tif image/tiff tiff image/x-cmu-raster ras image/x-cmx cmx image/x-icon ico image/x-portable-anymap pnm image/x-portable-bitmap pbm image/x-portable-graymap pgm image/x-portable-pixmap ppm image/x-rgb rgb image/x-xbitmap xbm image/x-xpixmap xpm image/x-xwindowdump xwd message/rfc822 mht message/rfc822 mhtml message/rfc822 nws text/css css text/h323 323 text/html htm text/html html text/html stm text/iuls uls text/plain bas text/plain c text/plain h text/plain txt text/richtext rtx text/scriptlet sct text/tab-separated-values tsv text/webviewhtml htt text/x-component htc text/x-setext etx text/x-vcard vcf video/mpeg mp2 video/mpeg mpa video/mpeg mpe video/mpeg mpeg video/mpeg mpg video/mpeg mpv2 video/quicktime mov video/quicktime qt video/x-la-asf lsf video/x-la-asf lsx video/x-ms-asf asf video/x-ms-asf asr video/x-ms-asf asx video/x-msvideo avi video/x-sgi-movie movie x-world/x-vrml flr x-world/x-vrml vrml x-world/x-vrml wrl x-world/x-vrml wrz x-world/x-vrml xaf x-world/x-vrml xof]]></content>
      <categories>
        <category>http</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>ÂçèËÆÆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PSÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-ps%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãË¶ÅÂØπËøõÁ®ãËøõË°åÁõëÊµãÂíåÊéßÂà∂,È¶ñÂÖàÂøÖÈ°ªË¶Å‰∫ÜËß£ÂΩìÂâçËøõÁ®ãÁöÑÊÉÖÂÜµ,‰πüÂ∞±ÊòØÈúÄË¶ÅÊü•ÁúãÂΩìÂâçËøõÁ®ã,ËÄåpsÂëΩ‰ª§Â∞±ÊòØÊúÄÂü∫Êú¨ÂêåÊó∂‰πüÊòØÈùûÂ∏∏Âº∫Â§ßÁöÑËøõÁ®ãÊü•ÁúãÂëΩ‰ª§.‰ΩøÁî®ËØ•ÂëΩ‰ª§ÂèØ‰ª•Á°ÆÂÆöÊúâÂì™‰∫õËøõÁ®ãÊ≠£Âú®ËøêË°åÂíåËøêË°åÁöÑÁä∂ÊÄÅ„ÄÅËøõÁ®ãÊòØÂê¶ÁªìÊùü„ÄÅËøõÁ®ãÊúâÊ≤°ÊúâÂÉµÂ∞∏„ÄÅÂì™‰∫õËøõÁ®ãÂç†Áî®‰∫ÜËøáÂ§öÁöÑËµÑÊ∫êÁ≠âÁ≠â.ÊÄª‰πãÂ§ßÈÉ®ÂàÜ‰ø°ÊÅØÈÉΩÊòØÂèØ‰ª•ÈÄöËøáÊâßË°åËØ•ÂëΩ‰ª§ÂæóÂà∞ÁöÑ. ÂèÇÊï∞ËØ¥Êòé12345678-aÔºöÊòæÁ§∫Áé∞Ë°åÁªàÁ´ØÊú∫‰∏ãÁöÑÊâÄÊúâËøõÁ®ãÔºåÂåÖÊã¨ÂÖ∂‰ªñÁî®Êà∑ÁöÑËøõÁ®ã-AÔºöÊâÄÊúâÁöÑËøõÁ®ãÂùáÊòæÁ§∫Âá∫Êù•Ôºå‰∏é -e ÂÖ∑ÊúâÂêåÊ†∑ÁöÑÊïàÁî®-uÔºö‰ª•Áî®Êà∑‰∏∫‰∏ªÁöÑËøõÁ®ãÁä∂ÊÄÅ-fÔºöÂÅö‰∏Ä‰∏™Êõ¥‰∏∫ÂÆåÊï¥ÁöÑËæìÂá∫-eÔºöÁ≠â‰∫é‚Äú-A‚ÄùxÔºö ÈÄöÂ∏∏‰∏é a Ëøô‰∏™ÂèÇÊï∞‰∏ÄËµ∑‰ΩøÁî®ÔºåÂèØÂàóÂá∫ËæÉÂÆåÊï¥‰ø°ÊÅØlÔºö ËæÉÈïø„ÄÅËæÉËØ¶ÁªÜÁöÑÂ∞ÜËØ• PID ÁöÑÁöÑ‰ø°ÊÅØÂàóÂá∫jÔºö Â∑•‰ΩúÁöÑÊ†ºÂºè (jobs format) PS LÂ≠óÊÆµËØ¥Êòé F Ôºö‰ª£Ë°®Ëøô‰∏™Á®ãÂ∫èÁöÑÊóóÊ†á (flag)Ôºå 4 ‰ª£Ë°®‰ΩøÁî®ËÄÖ‰∏∫ super userS Ôºö‰ª£Ë°®Ëøô‰∏™Á®ãÂ∫èÁöÑÁä∂ÊÄÅ (STAT)ÔºåÂÖ≥‰∫éÂêÑ STAT ÁöÑÊÑè‰πâÂ∞ÜÂú®ÂÜÖÊñá‰ªãÁªçUID ÔºöÁ®ãÂ∫èË¢´ËØ• UID ÊâÄÊã•ÊúâPID ÔºöÂ∞±ÊòØËøô‰∏™Á®ãÂ∫èÁöÑ ID ÔºÅPPID ÔºöÂàôÊòØÂÖ∂‰∏äÁ∫ßÁà∂Á®ãÂ∫èÁöÑIDC ÔºöCPU ‰ΩøÁî®ÁöÑËµÑÊ∫êÁôæÂàÜÊØîPRI ÔºöËøô‰∏™ÊòØ Priority (‰ºòÂÖàÊâßË°åÂ∫è) ÁöÑÁº©ÂÜôÔºåËØ¶ÁªÜÂêéÈù¢‰ªãÁªçNI ÔºöËøô‰∏™ÊòØ Nice ÂÄºÔºåÂú®‰∏ã‰∏ÄÂ∞èËäÇÊàë‰ª¨‰ºöÊåÅÁª≠‰ªãÁªçADDR ÔºöËøô‰∏™ÊòØ kernel functionÔºåÊåáÂá∫ËØ•Á®ãÂ∫èÂú®ÂÜÖÂ≠òÁöÑÈÇ£‰∏™ÈÉ®ÂàÜ„ÄÇÂ¶ÇÊûúÊòØ‰∏™ runningÁöÑÁ®ãÂ∫èÔºå‰∏ÄËà¨Â∞±ÊòØ ‚Äú-‚ÄúSZ Ôºö‰ΩøÁî®ÊéâÁöÑÂÜÖÂ≠òÂ§ßÂ∞èWCHAN ÔºöÁõÆÂâçËøô‰∏™Á®ãÂ∫èÊòØÂê¶Ê≠£Âú®Ëøê‰ΩúÂΩì‰∏≠ÔºåËã•‰∏∫ - Ë°®Á§∫Ê≠£Âú®Ëøê‰ΩúTTY ÔºöÁôªÂÖ•ËÄÖÁöÑÁªàÁ´ØÊú∫‰ΩçÁΩÆTIME Ôºö‰ΩøÁî®ÊéâÁöÑ CPU Êó∂Èó¥„ÄÇCMD ÔºöÊâÄ‰∏ãËææÁöÑÊåá‰ª§‰∏∫‰Ωï PS AUXÂ≠óÊÆµËØ¥Êòé USERÔºöËØ•ËøõÁ®ãÂ±û‰∫éÈÇ£‰∏™‰ΩøÁî®ËÄÖË¥¶Âè∑ÁöÑÔºüPID ÔºöËØ•ËøõÁ®ãÁöÑËøõÁ®ãIDÂè∑„ÄÇ%CPUÔºöËØ•ËøõÁ®ã‰ΩøÁî®ÊéâÁöÑ CPU ËµÑÊ∫êÁôæÂàÜÊØîÔºõ%MEMÔºöËØ•ËøõÁ®ãÊâÄÂç†Áî®ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÁôæÂàÜÊØîÔºõVSZ ÔºöËØ•ËøõÁ®ã‰ΩøÁî®ÊéâÁöÑËôöÊãüÂÜÖÂ≠òÈáè (Kbytes)RSS ÔºöËØ•ËøõÁ®ãÂç†Áî®ÁöÑÂõ∫ÂÆöÁöÑÂÜÖÂ≠òÈáè (Kbytes)TTY ÔºöËØ•ËøõÁ®ãÊòØÂú®ÈÇ£‰∏™ÁªàÁ´ØÊú∫‰∏äÈù¢Ëøê‰ΩúÔºåËã•‰∏éÁªàÁ´ØÊú∫Êó†ÂÖ≥ÔºåÂàôÊòæÁ§∫ ?ÔºåÂè¶Â§ñÔºå tty1-tty6 ÊòØÊú¨Êú∫‰∏äÈù¢ÁöÑÁôªÂÖ•ËÄÖÁ®ãÂ∫èÔºåËã•‰∏∫ pts/0 Á≠âÁ≠âÁöÑÔºåÂàôË°®Á§∫‰∏∫Áî±ÁΩëÁªúËøûÊé•Ëøõ‰∏ªÊú∫ÁöÑÁ®ãÂ∫è„ÄÇSTARTÔºöËØ•ËøõÁ®ãË¢´Ëß¶ÂèëÂêØÂä®ÁöÑÊó∂Èó¥ÔºõTIME ÔºöËØ•ËøõÁ®ãÂÆûÈôÖ‰ΩøÁî® CPU Ëøê‰ΩúÁöÑÊó∂Èó¥„ÄÇCOMMANDÔºöËØ•Á®ãÂ∫èÁöÑÂÆûÈôÖÊåá‰ª§‰∏∫‰ªÄ‰πàÔºü STATÔºöËØ•Á®ãÂ∫èÁõÆÂâçÁöÑÁä∂ÊÄÅÔºå‰∏ªË¶ÅÁöÑÁä∂ÊÄÅÊúâÔºö R ÔºöËØ•Á®ãÂ∫èÁõÆÂâçÊ≠£Âú®Ëøê‰ΩúÔºåÊàñËÄÖÊòØÂèØË¢´Ëøê‰ΩúÔºõ S ÔºöËØ•Á®ãÂ∫èÁõÆÂâçÊ≠£Âú®Áù°Áú†ÂΩì‰∏≠ (ÂèØËØ¥ÊòØ idle Áä∂ÊÄÅÂï¶ÔºÅ)Ôºå‰ΩÜÂèØË¢´Êüê‰∫õËÆØÂè∑(signal) Âî§ÈÜí„ÄÇ T ÔºöËØ•Á®ãÂ∫èÁõÆÂâçÊ≠£Âú®‰æ¶ÊµãÊàñËÄÖÊòØÂÅúÊ≠¢‰∫ÜÔºõ Z ÔºöËØ•Á®ãÂ∫èÂ∫îËØ•Â∑≤ÁªèÁªàÊ≠¢Ôºå‰ΩÜÊòØÂÖ∂Áà∂Á®ãÂ∫èÂç¥Êó†Ê≥ïÊ≠£Â∏∏ÁöÑÁªàÊ≠¢‰ªñÔºåÈÄ†Êàê zombie (ÁñÜÂ∞∏) Á®ãÂ∫èÁöÑÁä∂ÊÄÅ Á§∫‰æãÊòæÁ§∫ÊâÄÊúâËøõÁ®ã‰ø°ÊÅØ1$ ps -A ÊòæÁ§∫ÊåáÂÆöÁî®Êà∑‰ø°ÊÅØ1$ ps -u root ÊòæÁ§∫ÊâÄÊúâËøõÁ®ã‰ø°ÊÅØÔºåËøûÂêåÂëΩ‰ª§Ë°å1$ ps -ef ps ‰∏égrep Â∏∏Áî®ÁªÑÂêàÁî®Ê≥ïÔºåÊü•ÊâæÁâπÂÆöËøõÁ®ã1$ ps -ef|grep ssh ÂàóÂá∫Á±ª‰ººÁ®ãÂ∫èÊ†ëÁöÑÁ®ãÂ∫èÊòæÁ§∫1$ ps -axjf ÊâæÂá∫‰∏é cron ‰∏é syslog Ëøô‰∏§‰∏™ÊúçÂä°ÊúâÂÖ≥ÁöÑ PID Âè∑Á†Å1$ ps aux | egrep '(cron|syslog)']]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WGETÂëΩ‰ª§]]></title>
    <url>%2Flinux%2Flinux%2Fshell-wget%2F</url>
    <content type="text"><![CDATA[ÁÆÄ‰ªãwgetÂëΩ‰ª§Áî®Êù•‰ªéÊåáÂÆöÁöÑURL‰∏ãËΩΩÊñá‰ª∂„ÄÇwgetÈùûÂ∏∏Á®≥ÂÆöÔºåÂÆÉÂú®Â∏¶ÂÆΩÂæàÁ™ÑÁöÑÊÉÖÂÜµ‰∏ãÂíå‰∏çÁ®≥ÂÆöÁΩëÁªú‰∏≠ÊúâÂæàÂº∫ÁöÑÈÄÇÂ∫îÊÄßÔºåÂ¶ÇÊûúÊòØÁî±‰∫éÁΩëÁªúÁöÑÂéüÂõ†‰∏ãËΩΩÂ§±Ë¥•Ôºåwget‰ºö‰∏çÊñ≠ÁöÑÂ∞ùËØïÔºåÁõ¥Âà∞Êï¥‰∏™Êñá‰ª∂‰∏ãËΩΩÂÆåÊØï„ÄÇÂ¶ÇÊûúÊòØÊúçÂä°Âô®ÊâìÊñ≠‰∏ãËΩΩËøáÁ®ãÔºåÂÆÉ‰ºöÂÜçÊ¨°ËÅîÂà∞ÊúçÂä°Âô®‰∏ä‰ªéÂÅúÊ≠¢ÁöÑÂú∞ÊñπÁªßÁª≠‰∏ãËΩΩ„ÄÇËøôÂØπ‰ªéÈÇ£‰∫õÈôêÂÆö‰∫ÜÈìæÊé•Êó∂Èó¥ÁöÑÊúçÂä°Âô®‰∏ä‰∏ãËΩΩÂ§ßÊñá‰ª∂ÈùûÂ∏∏ÊúâÁî®„ÄÇ ÂèÇÊï∞ËØ¥Êòé12345678910111213141516171819202122-a&lt;Êó•ÂøóÊñá‰ª∂&gt;ÔºöÂú®ÊåáÂÆöÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠ËÆ∞ÂΩïËµÑÊñôÁöÑÊâßË°åËøáÁ®ãÔºõ-A&lt;ÂêéÁºÄÂêç&gt;ÔºöÊåáÂÆöË¶Å‰∏ãËΩΩÊñá‰ª∂ÁöÑÂêéÁºÄÂêçÔºåÂ§ö‰∏™ÂêéÁºÄÂêç‰πãÈó¥‰ΩøÁî®ÈÄóÂè∑ËøõË°åÂàÜÈöîÔºõ-bÔºöËøõË°åÂêéÂè∞ÁöÑÊñπÂºèËøêË°åwgetÔºõ-B&lt;ËøûÊé•Âú∞ÂùÄ&gt;ÔºöËÆæÁΩÆÂèÇËÄÉÁöÑËøûÊé•Âú∞ÂùÄÁöÑÂü∫Âú∞Âú∞ÂùÄÔºõ-cÔºöÁªßÁª≠ÊâßË°å‰∏äÊ¨°ÁªàÁ´ØÁöÑ‰ªªÂä°Ôºõ-C&lt;Ê†áÂøó&gt;ÔºöËÆæÁΩÆÊúçÂä°Âô®Êï∞ÊçÆÂùóÂäüËÉΩÊ†áÂøóon‰∏∫ÊøÄÊ¥ªÔºåoff‰∏∫ÂÖ≥Èó≠ÔºåÈªòËÆ§ÂÄº‰∏∫onÔºõ-dÔºöË∞ÉËØïÊ®°ÂºèËøêË°åÊåá‰ª§Ôºõ-D&lt;ÂüüÂêçÂàóË°®&gt;ÔºöËÆæÁΩÆÈ°∫ÁùÄÁöÑÂüüÂêçÂàóË°®ÔºåÂüüÂêç‰πãÈó¥Áî®‚ÄúÔºå‚ÄùÂàÜÈöîÔºõ-e&lt;Êåá‰ª§&gt;Ôºö‰Ωú‰∏∫Êñá‰ª∂‚Äú.wgetrc‚Äù‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÊâßË°åÊåáÂÆöÁöÑÊåá‰ª§Ôºõ-hÔºöÊòæÁ§∫Êåá‰ª§Â∏ÆÂä©‰ø°ÊÅØÔºõ-i&lt;Êñá‰ª∂&gt;Ôºö‰ªéÊåáÂÆöÊñá‰ª∂Ëé∑ÂèñË¶Å‰∏ãËΩΩÁöÑURLÂú∞ÂùÄÔºõ-l&lt;ÁõÆÂΩïÂàóË°®&gt;ÔºöËÆæÁΩÆÈ°∫ÁùÄÁöÑÁõÆÂΩïÂàóË°®ÔºåÂ§ö‰∏™ÁõÆÂΩïÁî®‚ÄúÔºå‚ÄùÂàÜÈöîÔºõ-LÔºö‰ªÖÈ°∫ÁùÄÂÖ≥ËÅîÁöÑËøûÊé•Ôºõ-rÔºöÈÄíÂΩí‰∏ãËΩΩÊñπÂºèÔºõ-ncÔºöÊñá‰ª∂Â≠òÂú®Êó∂Ôºå‰∏ãËΩΩÊñá‰ª∂‰∏çË¶ÜÁõñÂéüÊúâÊñá‰ª∂Ôºõ-nvÔºö‰∏ãËΩΩÊó∂Âè™ÊòæÁ§∫Êõ¥Êñ∞ÂíåÂá∫Èîô‰ø°ÊÅØÔºå‰∏çÊòæÁ§∫Êåá‰ª§ÁöÑËØ¶ÁªÜÊâßË°åËøáÁ®ãÔºõ-qÔºö‰∏çÊòæÁ§∫Êåá‰ª§ÊâßË°åËøáÁ®ãÔºõ-nhÔºö‰∏çÊü•ËØ¢‰∏ªÊú∫ÂêçÁß∞Ôºõ-vÔºöÊòæÁ§∫ËØ¶ÁªÜÊâßË°åËøáÁ®ãÔºõ-VÔºöÊòæÁ§∫ÁâàÊú¨‰ø°ÊÅØÔºõ--passive-ftpÔºö‰ΩøÁî®Ë¢´Âä®Ê®°ÂºèPASVËøûÊé•FTPÊúçÂä°Âô®Ôºõ--follow-ftpÔºö‰ªéHTMLÊñá‰ª∂‰∏≠‰∏ãËΩΩFTPËøûÊé•Êñá‰ª∂„ÄÇ Á§∫‰æã‰∏ãËΩΩÂçï‰∏™Êñá‰ª∂ ‰ª•‰∏ãÁöÑ‰æãÂ≠êÊòØ‰ªéÁΩëÁªú‰∏ãËΩΩ‰∏Ä‰∏™Êñá‰ª∂Âπ∂‰øùÂ≠òÂú®ÂΩìÂâçÁõÆÂΩïÔºåÂú®‰∏ãËΩΩÁöÑËøáÁ®ã‰∏≠‰ºöÊòæÁ§∫ËøõÂ∫¶Êù°ÔºåÂåÖÂê´Ôºà‰∏ãËΩΩÂÆåÊàêÁôæÂàÜÊØîÔºåÂ∑≤Áªè‰∏ãËΩΩÁöÑÂ≠óËäÇÔºåÂΩìÂâç‰∏ãËΩΩÈÄüÂ∫¶ÔºåÂâ©‰Ωô‰∏ãËΩΩÊó∂Èó¥Ôºâ„ÄÇ 1$ wget http://www.xxx.net/xxx.zip ‰∏ãËΩΩÂπ∂‰ª•‰∏çÂêåÁöÑÊñá‰ª∂Âêç‰øùÂ≠ò wgetÈªòËÆ§‰ºö‰ª•ÊúÄÂêé‰∏Ä‰∏™Á¨¶Âêà/ÁöÑÂêéÈù¢ÁöÑÂ≠óÁ¨¶Êù•ÂëΩ‰ª§ÔºåÂØπ‰∫éÂä®ÊÄÅÈìæÊé•ÁöÑ‰∏ãËΩΩÈÄöÂ∏∏Êñá‰ª∂Âêç‰ºö‰∏çÊ≠£Á°Æ„ÄÇ 1$ wget -O wordpress.zip http://www.xxx.net/xxx.aspx?id=1080 wgetÈôêÈÄü‰∏ãËΩΩ ÂΩì‰Ω†ÊâßË°åwgetÁöÑÊó∂ÂÄôÔºåÂÆÉÈªòËÆ§‰ºöÂç†Áî®ÂÖ®ÈÉ®ÂèØËÉΩÁöÑÂÆΩÂ∏¶‰∏ãËΩΩ„ÄÇ‰ΩÜÊòØÂΩì‰Ω†ÂáÜÂ§á‰∏ãËΩΩ‰∏Ä‰∏™Â§ßÊñá‰ª∂ÔºåËÄå‰Ω†ËøòÈúÄË¶Å‰∏ãËΩΩÂÖ∂ÂÆÉÊñá‰ª∂Êó∂Â∞±ÊúâÂøÖË¶ÅÈôêÈÄü‰∫Ü„ÄÇ 1$ wget --limit-rate=300k http://www.xxx.net/testfile.zip ‰ΩøÁî®wgetÊñ≠ÁÇπÁª≠‰º† ‰ΩøÁî®wget -cÈáçÊñ∞ÂêØÂä®‰∏ãËΩΩ‰∏≠Êñ≠ÁöÑÊñá‰ª∂ÔºåÂØπ‰∫éÊàë‰ª¨‰∏ãËΩΩÂ§ßÊñá‰ª∂Êó∂Á™ÅÁÑ∂Áî±‰∫éÁΩëÁªúÁ≠âÂéüÂõ†‰∏≠Êñ≠ÈùûÂ∏∏ÊúâÂ∏ÆÂä©ÔºåÊàë‰ª¨ÂèØ‰ª•ÁªßÁª≠Êé•ÁùÄ‰∏ãËΩΩËÄå‰∏çÊòØÈáçÊñ∞‰∏ãËΩΩ‰∏Ä‰∏™Êñá‰ª∂„ÄÇÈúÄË¶ÅÁªßÁª≠‰∏≠Êñ≠ÁöÑ‰∏ãËΩΩÊó∂ÂèØ‰ª•‰ΩøÁî®-cÂèÇÊï∞„ÄÇ 1$ wget -c http://www.xxx.net/testfile.zip ‰ΩøÁî®wgetÂêéÂè∞‰∏ãËΩΩ1$ wget -b http://www.xxx.net/testfile.zip ‰º™Ë£Ö‰ª£ÁêÜÂêçÁß∞‰∏ãËΩΩ1$ wget --user-agent="Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16" http://www.xxx.net/testfile.zip ÊµãËØï‰∏ãËΩΩÈìæÊé• ÂΩì‰Ω†ÊâìÁÆóËøõË°åÂÆöÊó∂‰∏ãËΩΩÔºå‰Ω†Â∫îËØ•Âú®È¢ÑÂÆöÊó∂Èó¥ÊµãËØï‰∏ãËΩΩÈìæÊé•ÊòØÂê¶ÊúâÊïà„ÄÇÊàë‰ª¨ÂèØ‰ª•Â¢ûÂä†‚ÄìspiderÂèÇÊï∞ËøõË°åÊ£ÄÊü•„ÄÇ 1$ wget --spider URL Â¢ûÂä†ÈáçËØïÊ¨°Êï∞ Â¶ÇÊûúÁΩëÁªúÊúâÈóÆÈ¢òÊàñ‰∏ãËΩΩ‰∏Ä‰∏™Â§ßÊñá‰ª∂‰πüÊúâÂèØËÉΩÂ§±Ë¥•„ÄÇwgetÈªòËÆ§ÈáçËØï20Ê¨°ËøûÊé•‰∏ãËΩΩÊñá‰ª∂„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‚ÄìtriesÂ¢ûÂä†ÈáçËØïÊ¨°Êï∞„ÄÇ 1$ wget --tries=40 URL ‰∏ãËΩΩÂ§ö‰∏™Êñá‰ª∂ È¶ñÂÖàÔºå‰øùÂ≠ò‰∏Ä‰ªΩ‰∏ãËΩΩÈìæÊé•Êñá‰ª∂Ôºöcat &gt; filelist.txturl1url2url3url4Êé•ÁùÄ‰ΩøÁî®Ëøô‰∏™Êñá‰ª∂ÂíåÂèÇÊï∞-i‰∏ãËΩΩ„ÄÇ 1$ wget -i filelist.txt ÈïúÂÉèÁΩëÁ´ô ‰∏ãËΩΩÊï¥‰∏™ÁΩëÁ´ôÂà∞Êú¨Âú∞„ÄÇ‚ÄìmirorÂºÄÊà∑ÈïúÂÉè‰∏ãËΩΩ„ÄÇ-p‰∏ãËΩΩÊâÄÊúâ‰∏∫‰∫ÜhtmlÈ°µÈù¢ÊòæÁ§∫Ê≠£Â∏∏ÁöÑÊñá‰ª∂„ÄÇ‚Äìconvert-links‰∏ãËΩΩÂêéÔºåËΩ¨Êç¢ÊàêÊú¨Âú∞ÁöÑÈìæÊé•„ÄÇ-P ./LOCAL‰øùÂ≠òÊâÄÊúâÊñá‰ª∂ÂíåÁõÆÂΩïÂà∞Êú¨Âú∞ÊåáÂÆöÁõÆÂΩï„ÄÇ 1$ wget --mirror -p --convert-links -P ./LOCAL URL ËøáÊª§ÊåáÂÆöÊ†ºÂºè‰∏ãËΩΩ ‰∏ãËΩΩ‰∏Ä‰∏™ÁΩëÁ´ôÔºå‰ΩÜ‰Ω†‰∏çÂ∏åÊúõ‰∏ãËΩΩÂõæÁâáÔºåÂèØ‰ª•‰ΩøÁî®ËøôÊù°ÂëΩ‰ª§„ÄÇ 1$ wget --reject=gif ur Êää‰∏ãËΩΩ‰ø°ÊÅØÂ≠òÂÖ•Êó•ÂøóÊñá‰ª∂ ‰∏çÂ∏åÊúõ‰∏ãËΩΩ‰ø°ÊÅØÁõ¥Êé•ÊòæÁ§∫Âú®ÁªàÁ´ØËÄåÊòØÂú®‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂ÔºåÂèØ‰ª•‰ΩøÁî®„ÄÇ 1$ wget -o download.log URL ÈôêÂà∂ÊÄª‰∏ãËΩΩÊñá‰ª∂Â§ßÂ∞è ÂΩì‰Ω†ÊÉ≥Ë¶Å‰∏ãËΩΩÁöÑÊñá‰ª∂Ë∂ÖËøá5MËÄåÈÄÄÂá∫‰∏ãËΩΩÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®„ÄÇÊ≥®ÊÑèÔºöËøô‰∏™ÂèÇÊï∞ÂØπÂçï‰∏™Êñá‰ª∂‰∏ãËΩΩ‰∏çËµ∑‰ΩúÁî®ÔºåÂè™ËÉΩÈÄíÂΩí‰∏ãËΩΩÊó∂ÊâçÊúâÊïà„ÄÇ 1$ wget -Q5m -i filelist.txt ‰∏ãËΩΩÊåáÂÆöÊ†ºÂºèÊñá‰ª∂ ÂèØ‰ª•Âú®‰ª•‰∏ãÊÉÖÂÜµ‰ΩøÁî®ËØ•ÂäüËÉΩÔºö‰∏ãËΩΩ‰∏Ä‰∏™ÁΩëÁ´ôÁöÑÊâÄÊúâÂõæÁâá„ÄÇ‰∏ãËΩΩ‰∏Ä‰∏™ÁΩëÁ´ôÁöÑÊâÄÊúâËßÜÈ¢ë„ÄÇ‰∏ãËΩΩ‰∏Ä‰∏™ÁΩëÁ´ôÁöÑÊâÄÊúâPDFÊñá‰ª∂„ÄÇ 1$ wget -r -A.pdf url FTP‰∏ãËΩΩ12$ wget ftp-url$ wget --ftp-user=USERNAME --ftp-password=PASSWORD url Https‰∏ãËΩΩ1$ wget -r -np -nd --accept=gz --no-check-certificate https://www.xxx.com/dir/ --http-user=username --http-password=password]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>wget</tag>
      </tags>
  </entry>
</search>
